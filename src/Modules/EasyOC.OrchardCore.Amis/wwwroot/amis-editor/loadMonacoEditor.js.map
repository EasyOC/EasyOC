{"version":3,"sources":["/loadMonacoEditor.ts"],"names":[],"mappings":"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","file":"loadMonacoEditor.js","sourcesContent":["// 这是个特殊的方法，请看考 mod.js 里面的实现。\r\nexport function __mod__async__load(callback: (exports: any) => void) {\r\n    // @ts-ignore\r\n    const monacoLoader = __uri('monaco-editor/min/vs/loader.js');\r\n\r\n    // @ts-ignore\r\n    const script = amis.require.loadJs(filterUrl(monacoLoader));\r\n    script.onload = () => onLoad(window.require, callback);\r\n}\r\n\r\nfunction __uri(url: string) {\r\n    return url;\r\n}\r\n\r\n// 用于发布 sdk 版本的时候替换，因为不确定 sdk 版本怎么部署，而 worker 地址路径不可知。\r\n// 所以会被 fis3 替换成取相对的代码。\r\nfunction filterUrl(url: string) {\r\n    return url;\r\n}\r\n\r\nfunction onLoad(req: any, callback: (result: any) => void) {\r\n    const config = {\r\n        'vs/nls': {\r\n            availableLanguages: {\r\n                '*': 'zh-cn'\r\n            }\r\n        },\r\n        paths: {\r\n            vs: __uri('monaco-editor/min/vs/editor/editor.main.js').replace(/\\/vs\\/.*$/, ''),\r\n            'vs/base/worker/workerMain': __uri('monaco-editor/min/vs/base/worker/workerMain.js'),\r\n            'vs/basic-languages/apex/apex': __uri('monaco-editor/min/vs/basic-languages/apex/apex'),\r\n            'vs/basic-languages/azcli/azcli': __uri('monaco-editor/min/vs/basic-languages/azcli/azcli'),\r\n            'vs/basic-languages/clojure/clojure': __uri('monaco-editor/min/vs/basic-languages/clojure/clojure'),\r\n            'vs/basic-languages/bat/bat': __uri('monaco-editor/min/vs/basic-languages/bat/bat'),\r\n            'vs/basic-languages/coffee/coffee': __uri('monaco-editor/min/vs/basic-languages/coffee/coffee'),\r\n            'vs/basic-languages/cpp/cpp': __uri('monaco-editor/min/vs/basic-languages/cpp/cpp'),\r\n            'vs/basic-languages/csharp/csharp': __uri('monaco-editor/min/vs/basic-languages/csharp/csharp'),\r\n            'vs/basic-languages/css/css': __uri('monaco-editor/min/vs/basic-languages/css/css'),\r\n            'vs/basic-languages/dockerfile/dockerfile': __uri(\r\n                'monaco-editor/min/vs/basic-languages/dockerfile/dockerfile'\r\n            ),\r\n            'vs/basic-languages/fsharp/fsharp': __uri('monaco-editor/min/vs/basic-languages/fsharp/fsharp'),\r\n            'vs/basic-languages/go/go': __uri('monaco-editor/min/vs/basic-languages/go/go'),\r\n            'vs/basic-languages/handlebars/handlebars': __uri(\r\n                'monaco-editor/min/vs/basic-languages/handlebars/handlebars'\r\n            ),\r\n            'vs/basic-languages/html/html': __uri('monaco-editor/min/vs/basic-languages/html/html'),\r\n            'vs/basic-languages/ini/ini': __uri('monaco-editor/min/vs/basic-languages/ini/ini'),\r\n            'vs/basic-languages/java/java': __uri('monaco-editor/min/vs/basic-languages/java/java'),\r\n            'vs/basic-languages/javascript/javascript': __uri(\r\n                'monaco-editor/min/vs/basic-languages/javascript/javascript'\r\n            ),\r\n            'vs/basic-languages/less/less': __uri('monaco-editor/min/vs/basic-languages/less/less'),\r\n            'vs/basic-languages/lua/lua': __uri('monaco-editor/min/vs/basic-languages/lua/lua'),\r\n            'vs/basic-languages/markdown/markdown': __uri('monaco-editor/min/vs/basic-languages/markdown/markdown'),\r\n            'vs/basic-languages/msdax/msdax': __uri('monaco-editor/min/vs/basic-languages/msdax/msdax'),\r\n            'vs/basic-languages/objective-c/objective-c': __uri(\r\n                'monaco-editor/min/vs/basic-languages/objective-c/objective-c'\r\n            ),\r\n            'vs/basic-languages/php/php': __uri('monaco-editor/min/vs/basic-languages/php/php'),\r\n            'vs/basic-languages/postiats/postiats': __uri('monaco-editor/min/vs/basic-languages/postiats/postiats'),\r\n            'vs/basic-languages/powershell/powershell': __uri(\r\n                'monaco-editor/min/vs/basic-languages/powershell/powershell'\r\n            ),\r\n            'vs/basic-languages/pug/pug': __uri('monaco-editor/min/vs/basic-languages/pug/pug'),\r\n            'vs/basic-languages/python/python': __uri('monaco-editor/min/vs/basic-languages/python/python'),\r\n            'vs/basic-languages/r/r': __uri('monaco-editor/min/vs/basic-languages/r/r'),\r\n            'vs/basic-languages/razor/razor': __uri('monaco-editor/min/vs/basic-languages/razor/razor'),\r\n            'vs/basic-languages/redis/redis': __uri('monaco-editor/min/vs/basic-languages/redis/redis'),\r\n            'vs/basic-languages/redshift/redshift': __uri('monaco-editor/min/vs/basic-languages/redshift/redshift'),\r\n            'vs/basic-languages/ruby/ruby': __uri('monaco-editor/min/vs/basic-languages/ruby/ruby'),\r\n            'vs/basic-languages/rust/rust': __uri('monaco-editor/min/vs/basic-languages/rust/rust'),\r\n            'vs/basic-languages/sb/sb': __uri('monaco-editor/min/vs/basic-languages/sb/sb'),\r\n            'vs/basic-languages/scheme/scheme': __uri('monaco-editor/min/vs/basic-languages/scheme/scheme'),\r\n            'vs/basic-languages/scss/scss': __uri('monaco-editor/min/vs/basic-languages/scss/scss'),\r\n            'vs/basic-languages/shell/shell': __uri('monaco-editor/min/vs/basic-languages/shell/shell'),\r\n            'vs/basic-languages/solidity/solidity': __uri('monaco-editor/min/vs/basic-languages/solidity/solidity'),\r\n            'vs/basic-languages/sql/sql': __uri('monaco-editor/min/vs/basic-languages/sql/sql'),\r\n            'vs/basic-languages/st/st': __uri('monaco-editor/min/vs/basic-languages/st/st'),\r\n            'vs/basic-languages/swift/swift': __uri('monaco-editor/min/vs/basic-languages/swift/swift'),\r\n            'vs/basic-languages/typescript/typescript': __uri(\r\n                'monaco-editor/min/vs/basic-languages/typescript/typescript'\r\n            ),\r\n            'vs/basic-languages/vb/vb': __uri('monaco-editor/min/vs/basic-languages/vb/vb'),\r\n            'vs/basic-languages/xml/xml': __uri('monaco-editor/min/vs/basic-languages/xml/xml'),\r\n            'vs/basic-languages/yaml/yaml': __uri('monaco-editor/min/vs/basic-languages/yaml/yaml'),\r\n            'vs/editor/editor.main': __uri('monaco-editor/min/vs/editor/editor.main.js'),\r\n            'vs/editor/editor.main.css': __uri('monaco-editor/min/vs/editor/editor.main.css'),\r\n            'vs/editor/editor.main.nls': __uri('monaco-editor/min/vs/editor/editor.main.nls.js'),\r\n            'vs/editor/editor.main.nls.zh-cn': __uri('monaco-editor/min/vs/editor/editor.main.nls.zh-cn.js'),\r\n            // 'vs/editor/contrib/suggest/media/String_16x.svg': __uri('monaco-editor/min/vs/editor/contrib/suggest/media/String_16x.svg'),\r\n            // 'vs/editor/contrib/suggest/media/String_inverse_16x.svg': __uri('monaco-editor/min/vs/editor/contrib/suggest/media/String_inverse_16x.svg'),\r\n            // 'vs/editor/standalone/browser/quickOpen/symbol-sprite.svg': __uri('monaco-editor/min/vs/editor/standalone/browser/quickOpen/symbol-sprite.svg'),\r\n            'vs/language/typescript/tsMode': __uri('monaco-editor/min/vs/language/typescript/tsMode.js'),\r\n            // 'vs/language/typescript/lib/typescriptServices': __uri('monaco-editor/min/vs/language/typescript/lib/typescriptServices.js'),\r\n            'vs/language/typescript/tsWorker': __uri('monaco-editor/min/vs/language/typescript/tsWorker.js'),\r\n            'vs/language/json/jsonMode': __uri('monaco-editor/min/vs/language/json/jsonMode.js'),\r\n            'vs/language/json/jsonWorker': __uri('monaco-editor/min/vs/language/json/jsonWorker.js'),\r\n            'vs/language/html/htmlMode': __uri('monaco-editor/min/vs/language/html/htmlMode.js'),\r\n            'vs/language/html/htmlWorker': __uri('monaco-editor/min/vs/language/html/htmlWorker.js'),\r\n            'vs/language/css/cssMode': __uri('monaco-editor/min/vs/language/css/cssMode.js'),\r\n            'vs/language/css/cssWorker': __uri('monaco-editor/min/vs/language/css/cssWorker.js')\r\n        }\r\n    };\r\n    Object.keys(config.paths).forEach((key: keyof typeof config.paths) => {\r\n        config.paths[key] = filterUrl(config.paths[key].replace(/\\.js$/, ''));\r\n    });\r\n    req.config(config);\r\n\r\n    if (/^(https?:)?\\/\\//.test(config.paths.vs)) {\r\n        (window as any).MonacoEnvironment = {\r\n            getWorkerUrl: function () {\r\n                return `data:text/javascript;charset=utf-8,${encodeURIComponent(`\r\n              self.MonacoEnvironment = {\r\n                  baseUrl: '${config.paths.vs}',\r\n                  paths: ${JSON.stringify(config.paths)}\r\n              };\r\n              importScripts('${__uri('monaco-editor/min/vs/base/worker/workerMain.js')}');`)}`;\r\n            }\r\n        };\r\n    } else {\r\n        delete (window as any).MonacoEnvironment;\r\n    }\r\n\r\n    req(['vs/editor/editor.main'], function (ret: any) {\r\n        callback(ret);\r\n    });\r\n}\r\n"]}