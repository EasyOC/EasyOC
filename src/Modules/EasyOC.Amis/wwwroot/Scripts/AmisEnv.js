/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }

  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }

    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }

    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }

    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};

var __generator = this && this.__generator || function (thisArg, body) {
  var _ = {
    label: 0,
    sent: function sent() {
      if (t[0] & 1) throw t[1];
      return t[1];
    },
    trys: [],
    ops: []
  },
      f,
      y,
      t,
      g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;

  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }

  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");

    while (_) {
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    }

    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};

var _this = this;

var jumpTo = function jumpTo(to, action, ctx) {
  console.log('jumpTo to, action, ctx: ', to, action, ctx);
  window.location.href = to;
};

var AmisEnv = {
  // fetcher: umiRequest as any,
  fetcher: function fetcher(config) {
    return __awaiter(_this, void 0, void 0, function () {
      return __generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            console.log(config);

            if (config === false) {
              return [2
              /*return*/
              , null];
            }

            return [4
            /*yield*/
            , config];

          case 1:
            return [2
            /*return*/
            , _a.sent()];
        }
      });
    });
  },
  // tracker: this.handleTrace,
  jumpTo: jumpTo,
  // adaptor: (payload: any, response: any, api: any) => {
  //     if (api.redirect) {
  //         jumpTo(api.redirect)
  //     }
  //     return response
  // },
  // isCancel: (value: any) => (axios as any).isCancel(value),
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  // copy: (contents: string, options: any = {}) => {
  //     const ret = copy(contents, options);
  //     // eslint-disable-next-line @typescript-eslint/no-unused-expressions
  //     ret && (!options || options.shutup !== true) && toast.info('内容已拷贝到剪切板');
  //     return ret;
  // },
  enableAMISDebug: true,
  locale: 'zh-CN'
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFtaXNFbnYuanMiLCJBbWlzRW52LnRzIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImFkb3B0IiwidmFsdWUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0IiwidHJ5cyIsIm9wcyIsImYiLCJ5IiwiZyIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm4iLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJjYWxsIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsIl90aGlzIiwianVtcFRvIiwidG8iLCJhY3Rpb24iLCJjdHgiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiQW1pc0VudiIsImZldGNoZXIiLCJjb25maWciLCJfYSIsImVuYWJsZUFNSVNEZWJ1ZyIsImxvY2FsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFJQSxTQUFTLEdBQUksUUFBUSxLQUFLQSxTQUFkLElBQTRCLFVBQVVDLE9BQVYsRUFBbUJDLFVBQW5CLEVBQStCQyxDQUEvQixFQUFrQ0MsU0FBbEMsRUFBNkM7RUFDckYsU0FBU0MsS0FBVCxDQUFlQyxLQUFmLEVBQXNCO0lBQUUsT0FBT0EsS0FBSyxZQUFZSCxDQUFqQixHQUFxQkcsS0FBckIsR0FBNkIsSUFBSUgsQ0FBSixDQUFNLFVBQVVJLE9BQVYsRUFBbUI7TUFBRUEsT0FBTyxDQUFDRCxLQUFELENBQVA7SUFBaUIsQ0FBNUMsQ0FBcEM7RUFBb0Y7O0VBQzVHLE9BQU8sS0FBS0gsQ0FBQyxLQUFLQSxDQUFDLEdBQUdLLE9BQVQsQ0FBTixFQUF5QixVQUFVRCxPQUFWLEVBQW1CRSxNQUFuQixFQUEyQjtJQUN2RCxTQUFTQyxT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QUEsRUFBTUEsTUFBTixDQUFBOztVRG9DQyxLQUFLLENBQUw7WUNwQ1IsT0FBQSxDQUFBO1lBQUE7WUFBQSxFQUFPQyxFQUFBLENBQUEvQixJQUFBLEVBQVAsQ0FBQTtRRDZCSTtNQVNILENBVmlCLENBQWxCO0lBV0gsQ0M1QzBCLENBQUE7RUFNMUIsQ0FSVztFQVNaO0VBQ0FtQixNQUFNLEVBQUFBLE1BVk07RUFXWjtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0FhLGVBQWUsRUFBRSxJQTFCTDtFQTJCWkMsTUFBTSxFQUFFO0FBM0JJLENBQWhCIiwiZmlsZSI6IkFtaXNFbnYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF90aGlzID0gdGhpcztcbnZhciBqdW1wVG8gPSBmdW5jdGlvbiAodG8sIGFjdGlvbiwgY3R4KSB7XG4gICAgY29uc29sZS5sb2coJ2p1bXBUbyB0bywgYWN0aW9uLCBjdHg6ICcsIHRvLCBhY3Rpb24sIGN0eCk7XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB0bztcbn07XG52YXIgQW1pc0VudiA9IHtcbiAgICAvLyBmZXRjaGVyOiB1bWlSZXF1ZXN0IGFzIGFueSxcbiAgICBmZXRjaGVyOiBmdW5jdGlvbiAoY29uZmlnKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbnVsbF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY29uZmlnXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTsgfSxcbiAgICAvLyB0cmFja2VyOiB0aGlzLmhhbmRsZVRyYWNlLFxuICAgIGp1bXBUbzoganVtcFRvLFxuICAgIC8vIGFkYXB0b3I6IChwYXlsb2FkOiBhbnksIHJlc3BvbnNlOiBhbnksIGFwaTogYW55KSA9PiB7XG4gICAgLy8gICAgIGlmIChhcGkucmVkaXJlY3QpIHtcbiAgICAvLyAgICAgICAgIGp1bXBUbyhhcGkucmVkaXJlY3QpXG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgLy8gfSxcbiAgICAvLyBpc0NhbmNlbDogKHZhbHVlOiBhbnkpID0+IChheGlvcyBhcyBhbnkpLmlzQ2FuY2VsKHZhbHVlKSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgLy8gY29weTogKGNvbnRlbnRzOiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IHt9KSA9PiB7XG4gICAgLy8gICAgIGNvbnN0IHJldCA9IGNvcHkoY29udGVudHMsIG9wdGlvbnMpO1xuICAgIC8vICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC1leHByZXNzaW9uc1xuICAgIC8vICAgICByZXQgJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuc2h1dHVwICE9PSB0cnVlKSAmJiB0b2FzdC5pbmZvKCflhoXlrrnlt7Lmi7fotJ3liLDliarliIfmnb8nKTtcbiAgICAvLyAgICAgcmV0dXJuIHJldDtcbiAgICAvLyB9LFxuICAgIGVuYWJsZUFNSVNEZWJ1ZzogdHJ1ZSxcbiAgICBsb2NhbGU6ICd6aC1DTidcbn07XG4iLCJcclxuXHJcbmNvbnN0IGp1bXBUbyA9ICh0bzogc3RyaW5nLCBhY3Rpb246IGFueSwgY3R4Pzogb2JqZWN0KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnanVtcFRvIHRvLCBhY3Rpb24sIGN0eDogJywgdG8sIGFjdGlvbiwgY3R4KTtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdG87XHJcbn1cclxuXHJcblxyXG5cclxuY29uc3QgQW1pc0VudiA9IHtcclxuICAgIC8vIGZldGNoZXI6IHVtaVJlcXVlc3QgYXMgYW55LFxyXG4gICAgZmV0Y2hlcjogYXN5bmMgKGNvbmZpZzogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coY29uZmlnKVxyXG4gICAgICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBjb25maWdcclxuICAgIH0sXHJcbiAgICAvLyB0cmFja2VyOiB0aGlzLmhhbmRsZVRyYWNlLFxyXG4gICAganVtcFRvLFxyXG4gICAgLy8gYWRhcHRvcjogKHBheWxvYWQ6IGFueSwgcmVzcG9uc2U6IGFueSwgYXBpOiBhbnkpID0+IHtcclxuICAgIC8vICAgICBpZiAoYXBpLnJlZGlyZWN0KSB7XHJcbiAgICAvLyAgICAgICAgIGp1bXBUbyhhcGkucmVkaXJlY3QpXHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgLy8gfSxcclxuICAgIC8vIGlzQ2FuY2VsOiAodmFsdWU6IGFueSkgPT4gKGF4aW9zIGFzIGFueSkuaXNDYW5jZWwodmFsdWUpLFxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG5cclxuICAgIC8vIGNvcHk6IChjb250ZW50czogc3RyaW5nLCBvcHRpb25zOiBhbnkgPSB7fSkgPT4ge1xyXG4gICAgLy8gICAgIGNvbnN0IHJldCA9IGNvcHkoY29udGVudHMsIG9wdGlvbnMpO1xyXG4gICAgLy8gICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLWV4cHJlc3Npb25zXHJcbiAgICAvLyAgICAgcmV0ICYmICghb3B0aW9ucyB8fCBvcHRpb25zLnNodXR1cCAhPT0gdHJ1ZSkgJiYgdG9hc3QuaW5mbygn5YaF5a655bey5ou36LSd5Yiw5Ymq5YiH5p2/Jyk7XHJcbiAgICAvLyAgICAgcmV0dXJuIHJldDtcclxuICAgIC8vIH0sXHJcbiAgICBlbmFibGVBTUlTRGVidWc6IHRydWUsXHJcbiAgICBsb2NhbGU6ICd6aC1DTidcclxufVxyXG4iXX0=
