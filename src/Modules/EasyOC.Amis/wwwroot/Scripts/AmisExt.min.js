var DynamicFilterOperator,DynamicFilterLogic;!function(e){e.Contains="Contains",e.StartsWith="StartsWith",e.EndsWith="EndsWith",e.NotContains="NotContains",e.NotStartsWith="NotStartsWith",e.NotEndsWith="NotEndsWith",e.Equal="Equal",e.Equals="Equals",e.Eq="Eq",e.NotEqual="NotEqual",e.GreaterThan="GreaterThan",e.GreaterThanOrEqual="GreaterThanOrEqual",e.LessThan="LessThan",e.LessThanOrEqual="LessThanOrEqual",e.Range="Range",e.DateRange="DateRange",e.Any="Any",e.NotAny="NotAny"}(DynamicFilterOperator||(DynamicFilterOperator={})),function(e){e.And="And",e.Or="Or"}(DynamicFilterLogic||(DynamicFilterLogic={}));var DynamicFilterInfo=function(){this.filters=[]};function convertToJSONFilter(e){return e.map((function(e){var r,n,t={logic:null!==(r=e.conjunction)&&void 0!==r?r:DynamicFilterLogic.And,filters:[]};if(e.left&&e.left.field&&!e.children||0==e.children.length){if(e.left&&e.op&&e.right){var i={field:e.left.field,operator:e.op,value:e.right};switch(i.operator){case"between":t.operator=DynamicFilterOperator.Range;break;case"select_any_in":t.operator=DynamicFilterOperator.Any;break;case"select_not_any_in":t.operator=DynamicFilterOperator.NotAny;break;default:var o=null===(n=i.operator)||void 0===n?void 0:n.replaceAll("_","").toLowerCase();for(var a in DynamicFilterOperator)if(o==a.toLowerCase()){t.operator=DynamicFilterOperator[a];break}}t.field=i.field,t.value=i.value}}else e.children&&e.children.length>0&&(t.filters=convertToJSONFilter(e.children));return t}))}function dynamicJsonFilter(e){var r,n={filters:[]};if((null===(r=null==e?void 0:e.children)||void 0===r?void 0:r.length)>0){var t=convertToJSONFilter(e.children);t&&((null==t?void 0:t.length)>1?(n.logic=e.conjunction,n.filters=t):n=t[0])}return JSON.stringify(n)}function genGraphqlFilter(e){console.log("genGraphqlFilter children: ",e);var r=e.map((function(e){if(e.left&&e.left.field){if(e.left&&e.op&&e.right){var r={field:e.left.field,operator:"",value:e.right};switch(e.op){case"between":r.operator="RANGE";break;case"select_any_in":r.operator="ANY";break;case"select_not_any_in":r.operator="NOT_ANY";break;default:r.operator=e.op}var n="";for(var t in r)if(n&&(n+=","),"field"===t||"value"===t)n=n+t+':"'+r[t]+'"';else{if("operator"!==t)return console.error("filter[item]: ",r,t),"{}";n=n+t+":"+r[t]}return"{"+n+"}"}return"{}"}if(e.children&&e.children.length>0){var i=genGraphqlFilter(e.children);return"[]"===i?"{}":"{logic:"+e.conjunction+",filters:"+i+"}"}return"{}"})).filter((function(e){return"{}"!==e}));return console.log("arr: ",r),r.length>0?"["+r.join(",")+"]":"[]"}window.amisExt={dynamicJsonFilter:dynamicJsonFilter,convertCondition:function(e){console.log(e,"convertCondition");var r="";if(e&&e.children&&e.children.length>0){var n=e.children;console.log("children: ",n),r="{logic:"+e.conjunction+",filters:"+genGraphqlFilter(n)+"}"}return r||"{}"}};
