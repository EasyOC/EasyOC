(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(n.turf={})})(this,function(n){"use strict";function fu(n,t,i){var u,f,r;if(i=i||{},!v(i))throw new Error("options is invalid");if(u=i.bbox,f=i.id,n===undefined)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");return u&&wy(u),f&&ud(f),r={type:"Feature"},f&&(r.id=f),u&&(r.bbox=u),r.properties=t||{},r.geometry=n,r}function aet(n,t,i){var u,r;if(i=i||{},!v(i))throw new Error("options is invalid");if(u=i.bbox,!n)throw new Error("type is required");if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");u&&wy(u);switch(n){case"Point":r=ki(t).geometry;break;case"LineString":r=fr(t).geometry;break;case"Polygon":r=ct(t).geometry;break;case"MultiPoint":r=id(t).geometry;break;case"MultiLineString":r=fa(t).geometry;break;case"MultiPolygon":r=yy(t).geometry;break;default:throw new Error(n+" is invalid");}return u&&(r.bbox=u),r}function ki(n,t,i){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gi(n[0])||!gi(n[1]))throw new Error("coordinates must contain numbers");return fu({type:"Point",coordinates:n},t,i)}function vet(n,t,i){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");return d(n.map(function(n){return ki(n,t)}),i)}function ct(n,t,i){var f,r,u;if(!n)throw new Error("coordinates is required");for(f=0;f<n.length;f++){if(r=n[f],r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(u=0;u<r[r.length-1].length;u++){if(f===0&&u===0&&!gi(r[0][0])||!gi(r[0][1]))throw new Error("coordinates must contain numbers");if(r[r.length-1][u]!==r[0][u])throw new Error("First and last Position are not equivalent.");}}return fu({type:"Polygon",coordinates:n},t,i)}function yet(n,t,i){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");return d(n.map(function(n){return ct(n,t)}),i)}function fr(n,t,i){if(!n)throw new Error("coordinates is required");if(n.length<2)throw new Error("coordinates must be an array of two or more positions");if(!gi(n[0][1])||!gi(n[0][1]))throw new Error("coordinates must contain numbers");return fu({type:"LineString",coordinates:n},t,i)}function pet(n,t,i){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");return d(n.map(function(n){return fr(n,t)}),i)}function d(n,t){var i,r,u;if(t=t||{},!v(t))throw new Error("options is invalid");if(i=t.bbox,r=t.id,!n)throw new Error("No features passed");if(!Array.isArray(n))throw new Error("features must be an Array");return i&&wy(i),r&&ud(r),u={type:"FeatureCollection"},r&&(u.id=r),i&&(u.bbox=i),u.features=n,u}function fa(n,t,i){if(!n)throw new Error("coordinates is required");return fu({type:"MultiLineString",coordinates:n},t,i)}function id(n,t,i){if(!n)throw new Error("coordinates is required");return fu({type:"MultiPoint",coordinates:n},t,i)}function yy(n,t,i){if(!n)throw new Error("coordinates is required");return fu({type:"MultiPolygon",coordinates:n},t,i)}function utt(n,t,i){if(!n)throw new Error("geometries is required");if(!Array.isArray(n))throw new Error("geometries must be an Array");return fu({type:"GeometryCollection",geometries:n},t,i)}function wet(n,t){if(n===undefined||n===null||isNaN(n))throw new Error("num is required");if(t&&!(t>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,t||0);return Math.round(n*i)/i}function py(n,t){if(n===undefined||n===null)throw new Error("radians is required");if(t&&typeof t!="string")throw new Error("units must be a string");var i=nd[t||"kilometers"];if(!i)throw new Error(t+" units is invalid");return n*i}function hv(n,t){if(n===undefined||n===null)throw new Error("distance is required");if(t&&typeof t!="string")throw new Error("units must be a string");var i=nd[t||"kilometers"];if(!i)throw new Error(t+" units is invalid");return n/i}function rd(n,t){return oa(hv(n,t))}function ea(n){if(n===null||n===undefined)throw new Error("bearing is required");var t=n%360;return t<0&&(t+=360),t}function oa(n){if(n===null||n===undefined)throw new Error("radians is required");var t=n%(2*Math.PI);return t*180/Math.PI}function pu(n){if(n===null||n===undefined)throw new Error("degrees is required");var t=n%360;return t*Math.PI/180}function cv(n,t,i){if(n===null||n===undefined)throw new Error("length is required");if(!(n>=0))throw new Error("length must be a positive number");return py(hv(n,t),i||"kilometers")}function bet(n,t,i){var r,u;if(n===null||n===undefined)throw new Error("area is required");if(!(n>=0))throw new Error("area must be a positive number");if(r=td[t||"meters"],!r)throw new Error("invalid original units");if(u=td[i||"kilometers"],!u)throw new Error("invalid final units");return n/r*u}function gi(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function v(n){return!!n&&n.constructor===Object}function wy(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(n){if(!gi(n))throw new Error("bbox must only contain numbers");})}function ud(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string");}function dpt(){throw new Error("method has been renamed to `radiansToDegrees`");}function gpt(){throw new Error("method has been renamed to `degreesToRadians`");}function nwt(){throw new Error("method has been renamed to `lengthToDegrees`");}function twt(){throw new Error("method has been renamed to `lengthToRadians`");}function iwt(){throw new Error("method has been renamed to `radiansToLength`");}function rwt(){throw new Error("method has been renamed to `bearingToAzimuth`");}function uwt(){throw new Error("method has been renamed to `convertLength`");}function wu(n,t,i){var h,y,f,c,e;if(n!==null){var r,o,v,l,b,u,a,p=0,s=0,w,k=n.type,d=k==="FeatureCollection",g=k==="Feature",nt=d?n.features.length:1;for(h=0;h<nt;h++)for(a=d?n.features[h].geometry:g?n.geometry:n,w=a?a.type==="GeometryCollection":!1,b=w?a.geometries.length:1,y=0;y<b;y++)if(f=0,c=0,l=w?a.geometries[y]:a,l!==null){u=l.coordinates;e=l.type;p=i&&(e==="Polygon"||e==="MultiPolygon")?1:0;switch(e){case null:break;case"Point":t(u,s,h,f,c);s++;f++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)t(u[r],s,h,f,c),s++,e==="MultiPoint"&&f++;e==="LineString"&&f++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-p;o++)t(u[r][o],s,h,f,c),s++;e==="MultiLineString"&&f++;e==="Polygon"&&c++}e==="Polygon"&&f++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(e==="MultiPolygon"&&(c=0),o=0;o<u[r].length;o++){for(v=0;v<u[r][o].length-p;v++)t(u[r][o][v],s,h,f,c),s++;c++}f++}break;case"GeometryCollection":for(r=0;r<l.geometries.length;r++)wu(l.geometries[r],t,i);break;default:throw new Error("Unknown Geometry Type");}}}}function fd(n,t,i,r){var u=i;return wu(n,function(n,r,f,e,o){u=r===0&&i===undefined?n:t(u,n,r,f,e,o)},r),u}function ftt(n,t){var i;switch(n.type){case"FeatureCollection":for(i=0;i<n.features.length;i++)t(n.features[i].properties,i);break;case"Feature":t(n.properties,0)}}function ket(n,t,i){var r=i;return ftt(n,function(n,u){r=u===0&&i===undefined?n:t(r,n,u)}),r}function nr(n,t){if(n.type==="Feature")t(n,0);else if(n.type==="FeatureCollection")for(var i=0;i<n.features.length;i++)t(n.features[i],i)}function ett(n,t,i){var r=i;return nr(n,function(n,u){r=u===0&&i===undefined?n:t(r,n,u)}),r}function ec(n){var t=[];return wu(n,function(n){t.push(n)}),t}function th(n,t){for(var e,o,r,y,u,v,s,h,c,l=0,f=n.type==="FeatureCollection",a=n.type==="Feature",p=f?n.features.length:1,i=0;i<p;i++){for(u=f?n.features[i].geometry:a?n.geometry:n,s=f?n.features[i].properties:a?n.properties:{},h=f?n.features[i].bbox:a?n.bbox:undefined,c=f?n.features[i].id:a?n.id:undefined,v=u?u.type==="GeometryCollection":!1,y=v?u.geometries.length:1,o=0;o<y;o++){if(r=v?u.geometries[o]:u,r===null){t(null,l,s,h,c);continue}switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":t(r,l,s,h,c);break;case"GeometryCollection":for(e=0;e<r.geometries.length;e++)t(r.geometries[e],l,s,h,c);break;default:throw new Error("Unknown Geometry Type");}}l++}}function ott(n,t,i){var r=i;return th(n,function(n,u,f,e,o){r=u===0&&i===undefined?n:t(r,n,u,f,e,o)}),r}function su(n,t){th(n,function(n,i,r,u,f){var o=n===null?null:n.type,e;switch(o){case null:case"Point":case"LineString":case"Polygon":t(fu(n,r,{bbox:u,id:f}),i,0);return}switch(o){case"MultiPoint":e="Point";break;case"MultiLineString":e="LineString";break;case"MultiPolygon":e="Polygon"}n.coordinates.forEach(function(n,u){var f={type:e,coordinates:n};t(fu(f,r),i,u)})})}function det(n,t,i){var r=i;return su(n,function(n,u,f){r=u===0&&f===0&&i===undefined?n:t(r,n,u,f)}),r}function hl(n,t){su(n,function(n,i,r){var f=0,u;n.geometry&&(u=n.geometry.type,u!=="Point"&&u!=="MultiPoint")&&fd(n,function(u,e,o,s,h,c){var l=fr([u,e],n.properties);return t(l,i,r,c,f),f++,e})})}function stt(n,t,i){var r=i,u=!1;return hl(n,function(n,f,e,o,s){r=u===!1&&i===undefined?n:t(r,n,f,e,o,s);u=!0}),r}function htt(n,t){if(!n)throw new Error("geojson is required");su(n,function(n,i,r){var e,f,u;if(n.geometry!==null){e=n.geometry.type;f=n.geometry.coordinates;switch(e){case"LineString":t(n,i,r,0,0);break;case"Polygon":for(u=0;u<f.length;u++)t(fr(f[u],n.properties),i,r,u)}}})}function ctt(n,t,i){var r=i;return htt(n,function(n,u,f,e){r=u===0&&i===undefined?n:t(r,n,u,f,e)}),r}function hu(n){var t=[Infinity,Infinity,-Infinity,-Infinity];return wu(n,function(n){t[0]>n[0]&&(t[0]=n[0]);t[1]>n[1]&&(t[1]=n[1]);t[2]<n[0]&&(t[2]=n[0]);t[3]<n[1]&&(t[3]=n[1])}),t}function lr(n){if(!n)throw new Error("obj is required");var t=p(n);if(t.length>1&&gi(t[0])&&gi(t[1]))return t;throw new Error("Coordinate is not a valid Point");}function p(n){if(!n)throw new Error("obj is required");var t;if(n.length?t=n:n.coordinates?t=n.coordinates:n.geometry&&n.geometry.coordinates&&(t=n.geometry.coordinates),t)return ed(t),t;throw new Error("No valid coordinates");}function ed(n){if(n.length>1&&gi(n[0])&&gi(n[1]))return!0;if(Array.isArray(n[0])&&n[0].length)return ed(n[0]);throw new Error("coordinates must only contain numbers");}function get(n,t,i){if(!t||!i)throw new Error("type and name required");if(!n||n.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+n.type);}function ww(n,t,i){if(!n)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!n.geometry||n.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+n.geometry.type);}function ph(n,t,i){var u,r;if(!n)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!n||n.type!=="FeatureCollection")throw new Error("Invalid input to "+i+", FeatureCollection required");for(u=0;u<n.features.length;u++){if(r=n.features[u],!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!r.geometry||r.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+r.geometry.type);}}function to(n){if(!n)throw new Error("geojson is required");if(n.geometry!==undefined)return n.geometry;if(n.coordinates||n.geometries)return n;throw new Error("geojson must be a valid Feature or Geometry Object");}function not(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType");}function er(n,t){if(!n)throw new Error((t||"geojson")+" is required");if(n.geometry&&n.geometry.type)return n.geometry.type;if(n.type)return n.type;throw new Error((t||"geojson")+" is invalid");}function swt(n,t,i){var e,u,f,r,o;for(i=i?i:{},e=Object.keys(ltt),u=0;u<e.length;u++)f=e[u],r=i[f],r=typeof r!="undefined"&&r!==null?r:ltt[f],bw[f]=r;return bw.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+t),o=lwt(hwt(n,t)),typeof bw.successCallback=="function"&&bw.successCallback(o),o}function or(n,t,i){return(n-t)/(i-t)}function hwt(n,t){for(var a,v,p,o,s,h,c,w=n.length-1,b=n[0].length-1,y={rows:w,cols:b,cells:[]},l=0;l<w;++l)for(y.cells[l]=[],a=0;a<b;++a){var i=0,r=n[l+1][a],u=n[l+1][a+1],f=n[l][a+1],e=n[l][a];isNaN(r)||isNaN(u)||isNaN(f)||isNaN(e)||(i|=r>=t?8:0,i|=u>=t?4:0,i|=f>=t?2:0,i|=e>=t?1:0,v=!1,(i===5||i===10)&&(p=(r+u+f+e)/4,i===5&&p<t?(i=10,v=!0):i===10&&p<t&&(i=5,v=!0)),i!==0&&i!==15&&(o=s=h=c=.5,i===1?(h=1-or(t,r,e),s=1-or(t,f,e)):i===2?(s=or(t,e,f),c=1-or(t,u,f)):i===3?(h=1-or(t,r,e),c=1-or(t,u,f)):i===4?(o=or(t,r,u),c=or(t,f,u)):i===5?(o=or(t,r,u),c=or(t,f,u),s=1-or(t,f,e),h=1-or(t,r,e)):i===6?(s=or(t,e,f),o=or(t,r,u)):i===7?(h=1-or(t,r,e),o=or(t,r,u)):i===8?(h=or(t,e,r),o=1-or(t,u,r)):i===9?(s=1-or(t,f,e),o=1-or(t,u,r)):i===10?(o=1-or(t,u,r),c=1-or(t,u,f),s=or(t,e,f),h=or(t,e,r)):i===11?(o=1-or(t,u,r),c=1-or(t,u,f)):i===12?(h=or(t,e,r),c=or(t,f,u)):i===13?(s=1-or(t,f,e),c=or(t,f,u)):i===14?(h=or(t,e,r),s=or(t,e,f)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+i),y.cells[l][a]={cval:i,flipped:v,top:o,right:c,bottom:s,left:h}))}return y}function cwt(n){return n.cval===5||n.cval===10}function tot(n){return n.cval===0||n.cval===15}function iot(n){tot(n)||n.cval===5||n.cval===10||(n.cval=15)}function att(n,t){return t==="top"?[n.top,1]:t==="bottom"?[n.bottom,0]:t==="right"?[1,n.right]:t==="left"?[0,n.left]:void 0}function lwt(n){var t=[],i=0,u=n.rows,f=n.cols,r=1e-7;return n.cells.forEach(function(u,f){u.forEach(function(u,e){var o,c,l,a,s,h;if(typeof u!="undefined"&&!cwt(u)&&!tot(u)){if(o=awt(n.cells,f,e),c=!1,o.info==="mergeable")for(l=o.path[o.path.length-1][0],a=o.path[o.path.length-1][1],s=i-1;s>=0;s--)if(Math.abs(t[s][0][0]-l)<=r&&Math.abs(t[s][0][1]-a)<=r){for(h=o.path.length-2;h>=0;--h)t[s].unshift(o.path[h]);c=!0;break}c||(t[i++]=o.path)}})}),t}function awt(n,t,i){var w=n.length,c=[],v=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],y=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],e,o,p=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],b=n[t][i],f=n[t][i],r=f.cval,u=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][r],s=att(f,u);c.push([i+s[0],t+s[1]]);u=p[r];s=att(f,u);c.push([i+s[0],t+s[1]]);iot(f);for(var l=i+v[r],h=t+y[r],a=r;l>=0&&h>=0&&h<w&&(l!=i||h!=t);){if(f=n[h][l],typeof f=="undefined")break;if(r=f.cval,r===0||r===15)return{path:c,info:"mergeable"};u=p[r];e=v[r];o=y[r];(r===5||r===10)&&(r===5?f.flipped?y[a]===-1?(u="left",e=-1,o=0):(u="right",e=1,o=0):v[a]===-1&&(u="bottom",e=0,o=-1):r===10&&(f.flipped?v[a]===-1?(u="top",e=0,o=1):(u="bottom",e=0,o=-1):y[a]===1&&(u="left",e=-1,o=0)));s=att(f,u);c.push([l+s[0],h+s[1]]);iot(f);l+=e;h+=o;a=r}return{path:c,info:"closed"}}function vwt(n,t){var e,o,i,s,u,r,f;if(t=t||{},!v(t))throw new Error("options is invalid");var h=t.zProperty||"elevation",c=t.flip,l=t.flags;for(ph(n,"Point","input must contain Points"),e=ywt(n,c),o=[],i=0;i<e.length;i++){for(s=e[i],u=[],r=0;r<s.length;r++)f=s[r],f.properties[h]?u.push(f.properties[h]):u.push(0),l===!0&&(f.properties.matrixPosition=[i,r]);o.push(u)}return o}function ywt(n,t){var i={},r,u;return nr(n,function(n){var t=p(n)[1];i[t]||(i[t]=[]);i[t].push(n)}),r=Object.keys(i).map(function(n){var t=i[n];return t.sort(function(n,t){return p(n)[0]-p(t)[0]})}),u=r.sort(function(n,i){return t?p(n[0])[1]-p(i[0])[1]:p(i[0])[1]-p(n[0])[1]}),u}function pwt(n,t,i){if(i=i||{},!v(i))throw new Error("options is invalid");var r=i.zProperty||"elevation",u=i.commonProperties||{},f=i.breaksProperties||[];if(ph(n,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!v(u))throw new Error("commonProperties must be an Object");if(!Array.isArray(f))throw new Error("breaksProperties must be an Array");var e=vwt(n,{zProperty:r,flip:!0}),o=wwt(e,t,r,u,f),s=bwt(o,e,n);return d(s)}function wwt(n,t,i,r,u){for(var e,o,h,s=[],f=1;f<t.length;f++)e=+t[f],o=Object.assign({},r,u[f]),o[i]=e,h=fa(swt(n,e),o),s.push(h);return s}function bwt(n,t,i){var r=hu(i),u=r[2]-r[0],f=r[3]-r[1],e=r[0],o=r[1],s=t[0].length-1,h=t.length-1,c=u/s,l=f/h,a=function(n){n[0]=n[0]*c+e;n[1]=n[1]*l+o};return n.forEach(function(n){wu(n,a)}),n}function uot(n,t,i,r,u){for(i=i||0,r=r||n.length-1,u=u||kwt;r>i;){if(r-i>600){var e=r-i+1,c=t-i+1,l=Math.log(e),s=.5*Math.exp(2*l/3),a=.5*Math.sqrt(l*s*(e-s)/e)*(c-e/2<0?-1:1),v=Math.max(i,Math.floor(t-c*s/e+a)),y=Math.min(r,Math.floor(t+(e-c)*s/e+a));uot(n,t,v,y,u)}var h=n[t],o=i,f=r;for(kw(n,i,t),u(n[r],h)>0&&kw(n,i,r);o<f;){for(kw(n,o,f),o++,f--;u(n[o],h)<0;)o++;while(u(n[f],h)>0)f--}u(n[i],h)===0?kw(n,i,f):(f++,kw(n,f,r));f<=t&&(i=f+1);t<=f&&(r=f-1)}}function kw(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}function kwt(n,t){return n<t?-1:n>t?1:0}function od(n,t){if(!(this instanceof od))return new od(n,t);this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));t&&this._initFormat(t);this.clear()}function dwt(n,t,i){if(!i)return t.indexOf(n);for(var r=0;r<t.length;r++)if(i(n,t[r]))return r;return-1}function by(n,t){dw(n,0,n.children.length,t,n)}function dw(n,t,i,r,u){u||(u=ky(null));u.minX=Infinity;u.minY=Infinity;u.maxX=-Infinity;u.maxY=-Infinity;for(var f=t,e;f<i;f++)e=n.children[f],gw(u,n.leaf?r(e):e);return u}function gw(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function fot(n,t){return n.minX-t.minX}function eot(n,t){return n.minY-t.minY}function vtt(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function sd(n){return n.maxX-n.minX+(n.maxY-n.minY)}function gwt(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function nbt(n,t){var i=Math.max(n.minX,t.minX),r=Math.max(n.minY,t.minY),u=Math.min(n.maxX,t.maxX),f=Math.min(n.maxY,t.maxY);return Math.max(0,u-i)*Math.max(0,f-r)}function ytt(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function hd(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function ky(n){return{children:n,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function oot(n,t,i,r,u){for(var f=[t,i],e;f.length;)(i=f.pop(),t=f.pop(),i-t<=r)||(e=t+Math.ceil((i-t)/r/2)*r,rot(n,e,t,i,u),f.push(t,e,e,i))}function cl(n,t){return t={exports:{}},n(t,t.exports),t.exports}function tbt(n,t,i){var r=n*t,e=ptt*n,l=e-n,u=e-l,o=n-u,s=ptt*t,a=s-t,f=s-a,h=t-f,v=r-u*f,y=v-o*f,p=y-u*h,c=o*h-p;return i?(i[0]=c,i[1]=r,i):[c,r]}function ibt(n,t){var i=n+t,r=i-n,f=i-r,e=t-r,o=n-f,u=o+e;return u?[u,i]:[i]}function rbt(n,t){var a=n.length|0,v=t.length|0;if(a===1&&v===1)return ibt(n[0],t[0]);var ut=a+v,p=new Array(ut),w=0,i=0,r=0,b=Math.abs,s=n[i],g=b(s),h=t[r],nt=b(h),u,o;g<nt?(o=s,i+=1,i<a&&(s=n[i],g=b(s))):(o=h,r+=1,r<v&&(h=t[r],nt=b(h)));i<a&&g<nt||r>=v?(u=s,i+=1,i<a&&(s=n[i],g=b(s))):(u=h,r+=1,r<v&&(h=t[r],nt=b(h)));for(var f=u+o,d=f-u,l=o-d,k=l,e=f,c,y,tt,it,rt;i<a&&r<v;)g<nt?(u=s,i+=1,i<a&&(s=n[i],g=b(s))):(u=h,r+=1,r<v&&(h=t[r],nt=b(h))),o=k,f=u+o,d=f-u,l=o-d,l&&(p[w++]=l),c=e+f,y=c-e,tt=c-y,it=f-y,rt=e-tt,k=rt+it,e=c;while(i<a)u=s,o=k,f=u+o,d=f-u,l=o-d,l&&(p[w++]=l),c=e+f,y=c-e,tt=c-y,it=f-y,rt=e-tt,k=rt+it,e=c,i+=1,i<a&&(s=n[i]);while(r<v)u=h,o=k,f=u+o,d=f-u,l=o-d,l&&(p[w++]=l),c=e+f,y=c-e,tt=c-y,it=f-y,rt=e-tt,k=rt+it,e=c,r+=1,r<v&&(h=t[r]);return k&&(p[w++]=k),e&&(p[w++]=e),w||(p[w++]=0),p.length=w,p}function ubt(n,t,i){var r=n+t,u=r-n,o=r-u,f=t-u,e=n-o;return i?(i[0]=e+f,i[1]=r,i):[e+f,r]}function fbt(n,t){var o=n.length,f,e,h;if(o===1)return(f=nb(n[0],t),f[0])?f:[f[1]];var r=new Array(2*o),i=[.1,.1],s=[.1,.1],u=0;for(nb(n[0],t,i),i[0]&&(r[u++]=i[0]),e=1;e<o;++e){nb(n[e],t,s);h=i[1];hot(h,s[0],i);i[0]&&(r[u++]=i[0]);var c=s[1],l=i[1],a=c+l,y=a-c,v=l-y;i[1]=a;v&&(r[u++]=v)}return i[1]&&(r[u++]=i[1]),u===0&&(r[u++]=0),r.length=u,r}function ebt(n,t){var i=n+t,r=i-n,f=i-r,e=t-r,o=n-f,u=o+e;return u?[u,i]:[i]}function obt(n,t){var a=n.length|0,v=t.length|0;if(a===1&&v===1)return ebt(n[0],-t[0]);var ut=a+v,p=new Array(ut),w=0,i=0,r=0,b=Math.abs,s=n[i],g=b(s),h=-t[r],nt=b(h),u,o;g<nt?(o=s,i+=1,i<a&&(s=n[i],g=b(s))):(o=h,r+=1,r<v&&(h=-t[r],nt=b(h)));i<a&&g<nt||r>=v?(u=s,i+=1,i<a&&(s=n[i],g=b(s))):(u=h,r+=1,r<v&&(h=-t[r],nt=b(h)));for(var f=u+o,d=f-u,l=o-d,k=l,e=f,c,y,tt,it,rt;i<a&&r<v;)g<nt?(u=s,i+=1,i<a&&(s=n[i],g=b(s))):(u=h,r+=1,r<v&&(h=-t[r],nt=b(h))),o=k,f=u+o,d=f-u,l=o-d,l&&(p[w++]=l),c=e+f,y=c-e,tt=c-y,it=f-y,rt=e-tt,k=rt+it,e=c;while(i<a)u=s,o=k,f=u+o,d=f-u,l=o-d,l&&(p[w++]=l),c=e+f,y=c-e,tt=c-y,it=f-y,rt=e-tt,k=rt+it,e=c,i+=1,i<a&&(s=n[i]);while(r<v)u=h,o=k,f=u+o,d=f-u,l=o-d,l&&(p[w++]=l),c=e+f,y=c-e,tt=c-y,it=f-y,rt=e-tt,k=rt+it,e=c,r+=1,r<v&&(h=-t[r]);return k&&(p[w++]=k),e&&(p[w++]=e),w||(p[w++]=0),p.length=w,p}function hbt(n){var e=n.length,f,i,r,o,c,t,a,s;if(e<3){for(o=new Array(e),t=0;t<e;++t)o[t]=t;return e===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:o}for(f=new Array(e),t=0;t<e;++t)f[t]=t;for(f.sort(function(t,i){var r=n[t][0]-n[i][0];return r?r:n[t][1]-n[i][1]}),i=[f[0],f[1]],r=[f[0],f[1]],t=2;t<e;++t){for(var h=f[t],l=n[h],u=i.length;u>1&&vot(n[i[u-2]],n[i[u-1]],l)<=0;)u-=1,i.pop();for(i.push(h),u=r.length;u>1&&vot(n[r[u-2]],n[r[u-1]],l)>=0;)u-=1,r.pop();r.push(h)}for(o=new Array(r.length+i.length-2),c=0,t=0,a=i.length;t<a;++t)o[c++]=i[t];for(s=r.length-2;s>0;--s)o[c++]=r[s];return o}function tb(n,t){if(!(this instanceof tb))return new tb(n,t);if(this.data=n||[],this.length=this.data.length,this.compare=t||cbt,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function cbt(n,t){return n<t?-1:n>t?1:0}function wot(n,t,i){var f,s,u,o,p,w,v,h;t=Math.max(0,t===undefined?2:t);i=i||0;var y=bbt(n),c=lv(16,["[0]","[1]","[0]","[1]"]).load(n),e=[];for(f=0;f<y.length;f++)u=y[f],c.remove(u),s=dot(u,s),e.push(s);for(o=lv(16),f=0;f<e.length;f++)o.insert(btt(e[f]));for(p=t*t,w=i*i;e.length;){var r=e.shift(),l=r.p,a=r.next.p,b=ktt(l,a);b<w||(v=b/p,u=vbt(c,r.prev.p,l,a,r.next.next.p,v,o),u&&Math.min(ktt(u,l),ktt(u,a))<=v&&(e.push(r),e.push(dot(u,r)),c.remove(u),o.remove(r),o.insert(btt(r)),o.insert(btt(r.next))))}r=s;h=[];do h.push(r.p),r=r.next;while(r!==s);return h.push(r.p),h}function vbt(n,t,i,r,u,f,e){for(var s=new wtt(null,ybt),o=n.data,c,l,a;o;){for(c=0;c<o.children.length;c++)(l=o.children[c],a=o.leaf?dtt(l,i,r):pbt(i,r,l),a>f)||s.push({node:l,dist:a});while(s.length&&!s.peek().node.children){var v=s.pop(),h=v.node,y=dtt(h,t,i),p=dtt(h,r,u);if(v.dist<y&&v.dist<p&&kot(i,h,e)&&kot(r,h,e))return h}o=s.pop();o&&(o=o.node)}return null}function ybt(n,t){return n.dist-t.dist}function pbt(n,t,i){var r,u,f,e;return bot(n,i)||bot(t,i)?0:(r=ld(n[0],n[1],t[0],t[1],i.minX,i.minY,i.maxX,i.minY),r===0)?0:(u=ld(n[0],n[1],t[0],t[1],i.minX,i.minY,i.minX,i.maxY),u===0)?0:(f=ld(n[0],n[1],t[0],t[1],i.maxX,i.minY,i.maxX,i.maxY),f===0)?0:(e=ld(n[0],n[1],t[0],t[1],i.minX,i.maxY,i.maxX,i.maxY),e===0)?0:Math.min(r,u,f,e)}function bot(n,t){return n[0]>=t.minX&&n[0]<=t.maxX&&n[1]>=t.minY&&n[1]<=t.maxY}function kot(n,t,i){for(var f=Math.min(n[0],t[0]),e=Math.min(n[1],t[1]),o=Math.max(n[0],t[0]),s=Math.max(n[1],t[1]),u=i.search({minX:f,minY:e,maxX:o,maxY:s}),r=0;r<u.length;r++)if(wbt(u[r].p,u[r].next.p,n,t))return!1;return!0}function wbt(n,t,i,r){return n!==r&&t!==i&&cd(n,t,i)>0!=cd(n,t,r)>0&&cd(i,r,n)>0!=cd(i,r,t)>0}function btt(n){var t=n.p,i=n.next.p;return n.minX=Math.min(t[0],i[0]),n.minY=Math.min(t[1],i[1]),n.maxX=Math.max(t[0],i[0]),n.maxY=Math.max(t[1],i[1]),n}function bbt(n){for(var i,s,r,h,c,u=n[0],f=n[0],e=n[0],o=n[0],t=0;t<n.length;t++)i=n[t],i[0]<u[0]&&(u=i),i[0]>e[0]&&(e=i),i[1]<f[1]&&(f=i),i[1]>o[1]&&(o=i);for(s=[u,f,e,o],r=s.slice(),t=0;t<n.length;t++)lbt(n[t],s)||r.push(n[t]);for(h=sbt(r),c=[],t=0;t<h.length;t++)c.push(r[h[t]]);return c}function dot(n,t){var i={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(i.next=t.next,i.prev=t,t.next.prev=i,t.next=i):(i.prev=i,i.next=i),i}function ktt(n,t){var i=n[0]-t[0],r=n[1]-t[1];return i*i+r*r}function dtt(n,t,i){var f=t[0],e=t[1],r=i[0]-f,u=i[1]-e,o;return(r!==0||u!==0)&&(o=((n[0]-f)*r+(n[1]-e)*u)/(r*r+u*u),o>1?(f=i[0],e=i[1]):o>0&&(f+=r*o,e+=u*o)),r=n[0]-f,u=n[1]-e,r*r+u*u}function ld(n,t,i,r,u,f,e,o){var d=i-n,g=r-t,nt=e-u,tt=o-f,rt=n-u,ut=t-f,v=d*d+g*g,c=d*nt+g*tt,p=nt*nt+tt*tt,l=d*rt+g*ut,w=nt*rt+tt*ut,it=v*p-c*c,b,s,k,h,a=it,y=it;it===0?(s=0,a=1,h=w,y=p):(s=c*w-p*l,h=v*w-c*l,s<0?(s=0,h=w,y=p):s>a&&(s=a,h=w+c,y=p));h<0?(h=0,-l<0?s=0:-l>v?s=a:(s=-l,a=v)):h>y&&(h=y,-l+c<0?s=0:-l+c>v?s=a:(s=-l+c,a=v));b=s===0?0:s/a;k=h===0?0:h/y;var ot=(1-b)*n+b*i,st=(1-b)*t+b*r,ht=(1-k)*u+k*e,ct=(1-k)*f+k*o,ft=ht-ot,et=ct-st;return ft*ft+et*et}function got(n,t){var u,i,r;if(t=t||{},!v(t))throw new Error("options is invalid");return(u=t.concavity||Infinity,i=[],wu(n,function(n){i.push([n[0],n[1]])}),!i.length)?null:(r=pot(i,u),r.length>3)?ct([r]):null}function pr(n,t,i){var s,u,f,e,o;if(i=i||{},typeof i!="object")throw new Error("options is invalid");if(s=i.ignoreBoundary,!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");var h=lr(n),r=p(t),l=t.geometry?t.geometry.type:t.type,c=t.bbox;if(c&&kbt(h,c)===!1)return!1;for(l==="Polygon"&&(r=[r]),u=0,f=!1;u<r.length&&!f;u++)if(nst(h,r[u][0],s)){for(e=!1,o=1;o<r[u].length&&!e;)nst(h,r[u][o],!s)&&(e=!0),o++;e||(f=!0)}return f}function nst(n,t,i){var h=!1,r,e,c;for(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1)),r=0,e=t.length-1;r<t.length;e=r++){var u=t[r][0],f=t[r][1],o=t[e][0],s=t[e][1],l=n[1]*(u-o)+f*(o-n[0])+s*(n[0]-u)==0&&(u-n[0])*(o-n[0])<=0&&(f-n[1])*(s-n[1])<=0;if(l)return!i;c=f>n[1]!=s>n[1]&&n[0]<(o-u)*(n[1]-f)/(s-f)+u;c&&(h=!h)}return h}function kbt(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}function gtt(n,t){var i=[];return th(t,function(t){nr(n,function(n){pr(n,t)&&i.push(n)})}),d(i)}function tst(n,t){if(n.type!=="FeatureCollection")throw new Error("points must be a FeatureCollection");var i=!1;return d(nkt(n.features.map(function(n){var r={x:n.geometry.coordinates[0],y:n.geometry.coordinates[1]};return t?r.z=n.properties[t]:n.geometry.coordinates.length===3&&(i=!0,r.z=n.geometry.coordinates[2]),r})).map(function(n){var t=[n.a.x,n.a.y],r=[n.b.x,n.b.y],u=[n.c.x,n.c.y],f={};return i?(t.push(n.a.z),r.push(n.b.z),u.push(n.c.z)):f={a:n.a.z,b:n.b.z,c:n.c.z},ct([[t,r,u,t]],f)}))}function ist(n,t,i){this.a=n;this.b=t;this.c=i;var r=t.x-n.x,u=t.y-n.y,o=i.x-n.x,s=i.y-n.y,h=r*(n.x+t.x)+u*(n.y+t.y),c=o*(n.x+i.x)+s*(n.y+i.y),l=2*(r*(i.y-t.y)-u*(i.x-t.x)),f,e;this.x=(s*h-u*c)/l;this.y=(r*c-o*h)/l;f=this.x-n.x;e=this.y-n.y;this.r=f*f+e*e}function dbt(n,t){return t.x-n.x}function gbt(n){var t=n.length,r,u,i,f,e;n:while(t)for(u=n[--t],r=n[--t],i=t;i;)if(e=n[--i],f=n[--i],r===f&&u===e||r===e&&u===f){n.splice(t,2);n.splice(i,2);t-=2;continue n}}function nkt(n){if(n.length<3)return[];n.sort(dbt);for(var i=n.length-1,w=n[i].x,b=n[0].x,s=n[i].y,l=s,a,e,v,k,d,g;i--;)n[i].y<s&&(s=n[i].y),n[i].y>l&&(l=n[i].y);var u=b-w,h=l-s,c=u>h?u:h,y=(b+w)*.5,p=(l+s)*.5,r=[new ist({x:y-20*c,y:p-c,__sentinel:!0},{x:y,y:p+20*c,__sentinel:!0},{x:y+20*c,y:p-c,__sentinel:!0})],f=[],o=[],t;for(i=n.length;i--;){for(o.length=0,t=r.length;t--;){if(u=n[i].x-r[t].x,u>0&&u*u>r[t].r){f.push(r[t]);r.splice(t,1);continue}(h=n[i].y-r[t].y,u*u+h*h>r[t].r)||(o.push(r[t].a,r[t].b,r[t].b,r[t].c,r[t].c,r[t].a),r.splice(t,1))}for(gbt(o),t=o.length;t;)e=o[--t],a=o[--t],v=n[i],k=e.x-a.x,d=e.y-a.y,g=2*(k*(v.y-e.y)-d*(v.x-e.x)),Math.abs(g)>1e-12&&r.push(new ist(a,e,v))}for(Array.prototype.push.apply(f,r),i=f.length;i--;)(f[i].a.__sentinel||f[i].b.__sentinel||f[i].c.__sentinel)&&f.splice(i,1);return f}function tr(n,t,i){if(i=i||{},!v(i))throw new Error("options is invalid");var e=i.units,r=lr(n),u=lr(t),o=pu(u[1]-r[1]),s=pu(u[0]-r[0]),h=pu(r[1]),c=pu(u[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(h)*Math.cos(c);return py(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),e)}function gf(n){if(!n)throw new Error("geojson is required");switch(n.type){case"Feature":return rst(n);case"FeatureCollection":return tkt(n);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return nit(n);default:throw new Error("unknown GeoJSON type");}}function rst(n){var t={type:"Feature"};return Object.keys(n).forEach(function(i){switch(i){case"type":case"properties":case"geometry":return;default:t[i]=n[i]}}),t.properties=ust(n.properties),t.geometry=nit(n.geometry),t}function ust(n){var t={};return n?(Object.keys(n).forEach(function(i){var r=n[i];t[i]=typeof r=="object"?r===null?null:r.length?r.map(function(n){return n}):ust(r):r}),t):t}function tkt(n){var t={type:"FeatureCollection"};return Object.keys(n).forEach(function(i){switch(i){case"type":case"features":return;default:t[i]=n[i]}}),t.features=n.features.map(function(n){return rst(n)}),t}function nit(n){var t={type:n.type};return(n.bbox&&(t.bbox=n.bbox),n.type==="GeometryCollection")?(t.geometries=n.geometries.map(function(n){return nit(n)}),t):(t.coordinates=fst(n.coordinates),t)}function fst(n){return typeof n[0]!="object"?n.slice():n.map(function(n){return fst(n)})}function est(n,t){function s(n,t){t.length&&t.pop();for(var u=o[n<0?~n:n],i=0,f=u.length;i<f;++i)t.push(r(u[i],i));n<0&&ukt(t,f)}function u(n){return r(n)}function i(n){for(var t=[],i=0,r=n.length;i<r;++i)s(n[i],t);return t.length<2&&t.push(t[0]),t}function h(n){for(var t=i(n);t.length<4;)t.push(t[0]);return t}function f(n){return n.map(h)}function e(n){var r=n.type,t;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(e)};case"Point":t=u(n.coordinates);break;case"MultiPoint":t=n.coordinates.map(u);break;case"LineString":t=i(n.arcs);break;case"MultiLineString":t=n.arcs.map(i);break;case"Polygon":t=f(n.arcs);break;case"MultiPolygon":t=n.arcs.map(f);break;default:return null}return{type:r,coordinates:t}}var r=rkt(n.transform),o=n.arcs;return e(t)}function fkt(n){for(var r=-1,u=n.length,i,t=n[u-1],f=0;++r<u;)i=t,t=n[r],f+=i[0]*t[1]-i[1]*t[0];return Math.abs(f)}function ekt(n,t){function f(n){switch(n.type){case"GeometryCollection":n.geometries.forEach(f);break;case"Polygon":e(n.arcs);break;case"MultiPolygon":n.arcs.forEach(e)}}function e(n){n.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(n)})});r.push(n)}function o(t){return fkt(est(n,{type:"Polygon",arcs:[t]}).coordinates[0])}var i={},r=[],u=[];return t.forEach(f),r.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,u.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){i[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),r.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:u.map(function(t){var r=[],e,u,f,s,h;if(t.forEach(function(n){n.forEach(function(n){n.forEach(function(n){i[n<0?~n:n].length<2&&r.push(n)})})}),r=ost(n,r),(e=r.length)>1)for(u=1,f=o(r[0]);u<e;++u)(s=o(r[u]))>f&&(h=r[0],r[0]=r[u],r[u]=h,f=s);return r})}}function lkt(n,t,i,r){rit(n,t,i);rit(n,t,t+r);rit(n,t+r,i)}function rit(n,t,i){for(var u=t+(i---t>>1),r;t<u;++t,--i)r=n[t],n[t]=n[i],n[i]=r}function wkt(n){return n==null?{type:null}:(n.type==="FeatureCollection"?bkt:n.type==="Feature"?lst:uit)(n)}function bkt(n){var t={type:"GeometryCollection",geometries:n.features.map(lst)};return n.bbox!=null&&(t.bbox=n.bbox),t}function lst(n){var t=uit(n.geometry),i;n.id!=null&&(t.id=n.id);n.bbox!=null&&(t.bbox=n.bbox);for(i in n.properties){t.properties=n.properties;break}return t}function uit(n){if(n==null)return{type:null};var t=n.type==="GeometryCollection"?{type:"GeometryCollection",geometries:n.geometries.map(uit)}:n.type==="Point"||n.type==="MultiPoint"?{type:n.type,coordinates:n.coordinates}:{type:n.type,arcs:n.coordinates};return n.bbox!=null&&(t.bbox=n.bbox),t}function kkt(n){var t=n[0],i=n[1],r;return i<t&&(r=t,t=i,i=r),t+31*i}function dkt(n,t){var i=n[0],r=n[1],u=t[0],f=t[1],e;return r<i&&(e=i,i=r,r=e),f<u&&(e=u,u=f,f=e),i===u&&r===f}function gkt(n,t){var r,i,u;if(t=t||{},!v(t))throw new Error("options is invalid");if(r=t.mutate,er(n)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");return(r===!1||r===undefined)&&(n=gf(n)),i=[],u=ctt(n,function(n,t){var r=ndt(n,t);return r?r:(i.push(n),t)}),u&&i.push(u),i.length?i.length===1?i[0]:fa(i.map(function(n){return n.coordinates})):null}function vd(n){return n[0].toString()+","+n[1].toString()}function ndt(n,t){var i=n.geometry.coordinates,r=t.geometry.coordinates,f=vd(i[0]),e=vd(i[i.length-1]),o=vd(r[0]),s=vd(r[r.length-1]),u;if(f===s)u=r.concat(i.slice(1));else if(o===e)u=i.concat(r.slice(1));else if(f===o)u=i.slice(1).reverse().concat(r);else if(e===s)u=i.concat(r.reverse().slice(1));else return null;return fr(u)}function tdt(n,t){var i,r,u;if(t=t||{},!v(t))throw new Error("options is invalid");if(i=t.mutate,er(n)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");return(i===!1||i===undefined)&&(n=gf(n)),r=[],su(n,function(n){r.push(n.geometry)}),u=vst({geoms:utt(r).geometry}),sst(u,u.objects.geoms.geometries)}function idt(n,t){var r,i;if(t=t||{},!v(t))throw new Error("options is invalid");if(r=t.mutate,er(n)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");if((r===!1||r===undefined)&&(n=gf(n)),i=rdt(n),!i)throw new Error("geojson must be homogenous");switch(i){case"LineString":return gkt(n,t);case"Polygon":return tdt(n,t);default:throw new Error(i+" is not supported");}}function rdt(n){var i={},t;return(su(n,function(n){i[n.geometry.type]=!0}),t=Object.keys(i),t.length===1)?t[0]:null}function udt(n,t){var r,f,u,i;if(t=t||{},!v(t))throw new Error("options is invalid");if(!n)throw new Error("points is required");if(r=t.maxEdge||Infinity,!gi(r))throw new Error("maxEdge is invalid");return(f=fdt(n),u=tst(f),u.features=u.features.filter(function(n){var i=n.geometry.coordinates[0][0],u=n.geometry.coordinates[0][1],f=n.geometry.coordinates[0][2],e=tr(i,u,t),o=tr(u,f,t),s=tr(i,f,t);return e<=r&&o<=r&&s<=r}),u.features.length<1)?null:(i=idt(u,t),i.coordinates.length===1&&(i.coordinates=i.coordinates[0],i.type="Polygon"),fu(i))}function fdt(n){var t=[],i={};return nr(n,function(n){if(n.geometry){var r=n.geometry.coordinates.join("-");i.hasOwnProperty(r)||(t.push(n),i[r]=!0)}}),d(t)}function edt(n,t,i,r){var u=lv(6),f=t.features.map(function(n){return{minX:n.geometry.coordinates[0],minY:n.geometry.coordinates[1],maxX:n.geometry.coordinates[0],maxY:n.geometry.coordinates[1],property:n.properties[i]}});return u.load(f),n.features.forEach(function(n){n.properties||(n.properties={});var t=hu(n),f=u.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}),i=[];f.forEach(function(t){pr([t.minX,t.minY],n)&&i.push(t.property)});n.properties[r]=i}),n}function odt(n,t){if(t=t||{},!v(t))throw new Error("options is invalid");var i=t.mutate;if(!n)throw new Error("geojson is required");return(i===!1||i===undefined)&&(n=gf(n)),wu(n,function(n){var t=n[0],i=n[1];n[0]=i;n[1]=t}),n}function ll(n,t){var f=typeof t=="object"?t.mutate:t,r,i,u;if(!n)throw new Error("geojson is required");r=er(n);i=[];switch(r){case"LineString":i=fit(n);break;case"MultiLineString":case"Polygon":p(n).forEach(function(n){i.push(fit(n))});break;case"MultiPolygon":p(n).forEach(function(n){var t=[];n.forEach(function(n){t.push(fit(n))});i.push(t)});break;case"Point":return n;case"MultiPoint":u={};p(n).forEach(function(n){var t=n.join("-");u.hasOwnProperty(t)||(i.push(n),u[t]=!0)});break;default:throw new Error(r+" geometry not supported");}return n.coordinates?f===!0?(n.coordinates=i,n):{type:r,coordinates:i}:f===!0?(n.geometry.coordinates=i,n):fu({type:r,coordinates:i},n.properties,n.bbox,n.id)}function fit(n){var t=p(n),e,u,f,r,o,i;if(t.length===2&&!sdt(t[0],t[1]))return t;for(r=[],o=t.length-1,r.push(t[0]),i=1;i<o;i++)e=t[i-1],u=t[i],f=t[i+1],hdt(e,f,u)||r.push(u);return r.push(f),r}function sdt(n,t){return n[0]===t[0]&&n[1]===t[1]}function hdt(n,t,i){var r=i[0],u=i[1],f=n[0],e=n[1],o=t[0],s=t[1],l=r-f,a=u-e,h=o-f,c=s-e,v=l*c-a*h;return v!==0?!1:Math.abs(h)>=Math.abs(c)?h>0?f<=r&&r<=o:o<=r&&r<=f:c>0?e<=u&&u<=s:s<=u&&u<=e}function cdt(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r}function ldt(n,t,i){var f=t.x,e=t.y,r=i.x-f,u=i.y-e,o;return(r!==0||u!==0)&&(o=((n.x-f)*r+(n.y-e)*u)/(r*r+u*u),o>1?(f=i.x,e=i.y):o>0&&(f+=r*o,e+=u*o)),r=n.x-f,u=n.y-e,r*r+u*u}function adt(n,t){for(var r=n[0],u=[r],i,f=1,e=n.length;f<e;f++)i=n[f],cdt(i,r)>t&&(u.push(i),r=i);return r!==i&&u.push(i),u}function eit(n,t,i,r,u){for(var s,o=r,f,e=t+1;e<i;e++)s=ldt(n[e],n[t],n[i]),s>o&&(f=e,o=s);o>r&&(f-t>1&&eit(n,t,f,r,u),u.push(n[f]),i-f>1&&eit(n,f,i,r,u))}function vdt(n,t){var r=n.length-1,i=[n[0]];return eit(n,0,r,t,i),i.push(n[r]),i}function oit(n,t,i){if(n.length<=2)return n;var r=t!==undefined?t*t:1;return n=i?n:adt(n,r),vdt(n,r)}function ydt(n,t){if(t=t||{},!v(t))throw new Error("options is invalid");var i=t.tolerance!==undefined?t.tolerance:1,r=t.highQuality||!1,u=t.mutate||!1;if(!n)throw new Error("geojson is required");if(i&&i<0)throw new Error("invalid tolerance");return u!==!0&&(n=gf(n)),th(n,function(n){pdt(n,i,r)}),n}function pdt(n,t,i){var u=n.type,r;if(u==="Point"||u==="MultiPoint")return n;ll(n,!0);r=n.coordinates;switch(u){case"LineString":n.coordinates=yst(r,t,i);break;case"MultiLineString":n.coordinates=r.map(function(n){return yst(n,t,i)});break;case"Polygon":n.coordinates=pst(r,t,i);break;case"MultiPolygon":n.coordinates=r.map(function(n){return pst(n,t,i)})}return n}function yst(n,t,i){return oit(n.map(function(n){return{x:n[0],y:n[1],z:n[2]}}),t,i).map(function(n){return n.z?[n.x,n.y,n.z]:[n.x,n.y]})}function pst(n,t,i){return n.map(function(n){var u=n.map(function(n){return{x:n[0],y:n[1]}}),r;if(u.length<4)throw new Error("invalid polygon");for(r=oit(u,t,i).map(function(n){return[n.x,n.y]});!wdt(r);)t-=t*.01,r=oit(u,t,i).map(function(n){return[n.x,n.y]});return(r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),r})}function wdt(n){return n.length<3?!1:!(n.length===3&&n[2][0]===n[0][0]&&n[2][1]===n[0][1])}function wst(n,t){var r,u,f,e,i,o;if(t=t||{},!v(t))throw new Error("options is invalid");if(r=t.resolution||1e4,u=t.sharpness||.85,!n)throw new Error("line is required");if(!gi(r))throw new Error("resolution must be an number");if(!gi(u))throw new Error("sharpness must be an number");for(f=[],e=new ib({points:to(n).coordinates.map(function(n){return{x:n[0],y:n[1]}}),duration:r,sharpness:u}),i=0;i<e.duration;i+=10)o=e.pos(i),Math.floor(i/100)%2==0&&f.push([o.x,o.y]);return fr(f,n.properties)}function bdt(n,t,i,r){return n=gf(n),t=gf(t),nr(n,function(n){n.properties||(n.properties={});nr(t,function(t){n.properties[r]===undefined&&pr(n,t)&&(n.properties[r]=t.properties[i])})}),n}function kdt(n,t){if(!n)throw new Error("featurecollection is required");if(t===null||t===undefined)throw new Error("num is required");if(typeof t!="number")throw new Error("num must be a number");return d(ddt(n.features,t))}function ddt(n,t){for(var i=n.slice(0),r=n.length,f=r-t,e,u;r-->f;)u=Math.floor((r+1)*Math.random()),e=i[u],i[u]=i[r],i[r]=e;return i.slice(f)}function sit(n){wy(n);var t=Number(n[0]),i=Number(n[1]),r=Number(n[2]),u=Number(n[3]);if(n.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var f=[t,i],e=[t,u],o=[r,u],s=[r,i];return ct([[f,s,o,e,f]])}function bst(n){return sit(hu(n))}function kst(n){var t=n[0],i=n[1],r=n[2],u=n[3],o=tr(n.slice(0,2),[r,i]),s=tr(n.slice(0,2),[t,u]),f,e;return o>=s?(f=(i+u)/2,[t,f-(r-t)/2,r,f+(r-t)/2]):(e=(t+r)/2,[e-(u-i)/2,i,e+(u-i)/2,u])}function oc(n,t,i,r){if(r=r||{},!v(r))throw new Error("options is invalid");var h=r.units,c=r.properties,e=lr(n),l=pu(e[0]),u=pu(e[1]),o=pu(i),f=hv(t,h),s=Math.asin(Math.sin(u)*Math.cos(f)+Math.cos(u)*Math.sin(f)*Math.cos(o)),a=l+Math.atan2(Math.sin(o)*Math.sin(f)*Math.cos(u),Math.cos(f)-Math.sin(u)*Math.sin(s)),y=oa(a),p=oa(s);return ki([y,p],c)}function hit(n,t,i){var r,f,u,e;if(i=i||{},r=i.steps||64,f=i.properties,!n)throw new Error("center is required");if(!t)throw new Error("radius is required");if(typeof i!="object")throw new Error("options must be an object");if(typeof r!="number")throw new Error("steps must be a number");for(r=r||64,f=f||n.properties||{},u=[],e=0;e<r;e++)u.push(oc(n,t,e*-360/r,i).geometry.coordinates);return u.push(u[0]),ct([u],f)}function sc(n,t,i){var u;if(i=i||{},!v(i))throw new Error("options is invalid");if(u=i.final,u===!0)return gdt(n,t);var f=lr(n),e=lr(t),o=pu(f[0]),s=pu(e[0]),h=pu(f[1]),r=pu(e[1]),c=Math.sin(s-o)*Math.cos(r),l=Math.cos(h)*Math.sin(r)-Math.sin(h)*Math.cos(r)*Math.cos(s-o);return oa(Math.atan2(c,l))}function gdt(n,t){var i=sc(t,n);return(i+180)%360}function ngt(n,t){var i=tr(n,t),r=sc(n,t);return oc(n,i/2,r)}function yd(n,t){var r;if(t=t||{},!v(t))throw new Error("options is invalid");if(r=t.properties,!n)throw new Error("geojson is required");var i=hu(n),u=(i[0]+i[2])/2,f=(i[1]+i[3])/2;return ki([u,f],r)}function vv(n,t){var r=0,u=0,i=0;return wu(n,function(n){r+=n[0];u+=n[1];i++},!0),ki([r/i,u/i],t)}function dst(n,t){var r,d,v,y;switch(er(n)){case"Point":return n;case"Polygon":r=[];wu(n,function(n){r.push(n)});for(var p=vv(n,t),u=p.geometry.coordinates,w=0,b=0,e=0,o,s,h,c,l,a,f,k=r.map(function(n){return[n[0]-u[0],n[1]-u[1]]}),i=0;i<r.length-1;i++)o=k[i],h=o[0],l=o[1],s=k[i+1],c=s[0],a=s[1],f=h*a-c*l,e+=f,w+=(h+c)*f,b+=(l+a)*f;return e===0?p:(d=e*.5,v=1/(6*d),ki([u[0]+v*w,u[1]+v*b],t));default:return y=got(n),y?dst(y,t):vv(n,t)}}function tgt(n){function r(n,i,r){r?t[i].coordinates=t[i].coordinates.concat(n.geometry.coordinates):t[i].coordinates.push(n.geometry.coordinates);t[i].properties.push(n.properties)}var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(t).reduce(function(n,t){return n[t.replace("Multi","")]=t,n},{});return nr(n,function(n){n.geometry&&(t[n.geometry.type]?r(n,n.geometry.type,!0):i[n.geometry.type]&&r(n,i[n.geometry.type],!1))}),d(Object.keys(t).filter(function(n){return t[n].coordinates.length}).sort().map(function(n){var i={type:n,coordinates:t[n].coordinates},r={collectedProperties:t[n].properties};return fu(i,r)}))}function cit(n){var t=[];return n.type==="FeatureCollection"?nr(n,function(n){wu(n,function(i){t.push(ki(i,n.properties))})}):wu(n,function(i){t.push(ki(i,n.properties))}),d(t)}function pd(n,t,i){var r,u,c,l,f,e,o,s;i=i||2;var v=t&&t.length,y=v?t[0]*i:n.length,h=nht(n,0,y,i,!0),a=[];if(!h)return a;if(v&&(h=egt(n,t,h,i)),n.length>80*i){for(r=c=n[0],u=l=n[1],s=i;s<y;s+=i)f=n[s],e=n[s+1],f<r&&(r=f),e<u&&(u=e),f>c&&(c=f),e>l&&(l=e);o=Math.max(c-r,l-u);o=o!==0?1/o:0}return ub(h,a,i,r,u,o),a}function nht(n,t,i,r,u){var f,e;if(u===vit(n,t,i,r)>0)for(f=t;f<i;f+=r)e=rht(f,n[f],n[f+1],e);else for(f=i-r;f>=t;f-=r)e=rht(f,n[f],n[f+1],e);return e&&yv(e,e.next)&&(eb(e),e=e.next),e}function rb(n,t){if(!n)return n;t||(t=n);var i=n,r;do if(r=!1,!i.steiner&&(yv(i,i.next)||io(i.prev,i,i.next)===0)){if(eb(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function ub(n,t,i,r,u,f,e){if(n){!e&&f&&cgt(n,r,u,f);for(var s=n,h,o;n.prev!==n.next;){if(h=n.prev,o=n.next,f?rgt(n,r,u,f):igt(n)){t.push(h.i/i);t.push(n.i/i);t.push(o.i/i);eb(n);n=o.next;s=o.next;continue}if(n=o,n===s){e?e===1?(n=ugt(n,t,i),ub(n,t,i,r,u,f,2)):e===2&&fgt(n,t,i,r,u,f):ub(rb(n),t,i,r,u,f,1);break}}}}function igt(n){var i=n.prev,r=n,u=n.next,t;if(io(i,r,u)>=0)return!1;for(t=n.next.next;t!==n.prev;){if(wd(i.x,i.y,r.x,r.y,u.x,u.y,t.x,t.y)&&io(t.prev,t,t.next)>=0)return!1;t=t.next}return!0}function rgt(n,t,i,r){var e=n.prev,o=n,f=n.next;if(io(e,o,f)>=0)return!1;for(var s=e.x<o.x?e.x<f.x?e.x:f.x:o.x<f.x?o.x:f.x,h=e.y<o.y?e.y<f.y?e.y:f.y:o.y<f.y?o.y:f.y,c=e.x>o.x?e.x>f.x?e.x:f.x:o.x>f.x?o.x:f.x,l=e.y>o.y?e.y>f.y?e.y:f.y:o.y>f.y?o.y:f.y,a=ait(s,h,t,i,r),v=ait(c,l,t,i,r),u=n.nextZ;u&&u.z<=v;){if(u!==n.prev&&u!==n.next&&wd(e.x,e.y,o.x,o.y,f.x,f.y,u.x,u.y)&&io(u.prev,u,u.next)>=0)return!1;u=u.nextZ}for(u=n.prevZ;u&&u.z>=a;){if(u!==n.prev&&u!==n.next&&wd(e.x,e.y,o.x,o.y,f.x,f.y,u.x,u.y)&&io(u.prev,u,u.next)>=0)return!1;u=u.prevZ}return!0}function ugt(n,t,i){var r=n,f,u;do f=r.prev,u=r.next.next,!yv(f,u)&&tht(f,r,r.next,u)&&fb(f,u)&&fb(u,f)&&(t.push(f.i/i),t.push(r.i/i),t.push(u.i/i),eb(r),eb(r.next),r=n=u),r=r.next;while(r!==n);return r}function fgt(n,t,i,r,u,f){var e=n,o,s;do{for(o=e.next.next;o!==e.prev;){if(e.i!==o.i&&vgt(e,o)){s=iht(e,o);e=rb(e,e.next);s=rb(s,s.next);ub(e,t,i,r,u,f);ub(s,t,i,r,u,f);return}o=o.next}e=e.next}while(e!==n)}function egt(n,t,i,r){for(var e=[],s,h,f,u=0,o=t.length;u<o;u++)s=t[u]*r,h=u<o-1?t[u+1]*r:n.length,f=nht(n,s,h,r,!1),f===f.next&&(f.steiner=!0),e.push(agt(f));for(e.sort(ogt),u=0;u<e.length;u++)sgt(e[u],i),i=rb(i,i.next);return i}function ogt(n,t){return n.x-t.x}function sgt(n,t){if(t=hgt(n,t),t){var i=iht(t,n);rb(i,i.next)}}function hgt(n,t){var i=t,f=n.x,r=n.y,e=-Infinity,u,o;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y&&(o=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y),o<=f&&o>e)){if(e=o,o===f){if(r===i.y)return i;if(r===i.next.y)return i.next}u=i.x<i.next.x?i:i.next}i=i.next}while(i!==t);if(!u)return null;if(f===e)return u.prev;var a=u,l=u.x,h=u.y,c=Infinity,s;for(i=u.next;i!==a;)f>=i.x&&i.x>=l&&f!==i.x&&wd(r<h?f:e,r,l,h,r<h?e:f,r,i.x,i.y)&&(s=Math.abs(r-i.y)/(f-i.x),(s<c||s===c&&i.x>u.x)&&fb(i,n)&&(u=i,c=s)),i=i.next;return u}function cgt(n,t,i,r){var u=n;do u.z===null&&(u.z=ait(u.x,u.y,t,i,r)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==n);u.prevZ.nextZ=null;u.prevZ=null;lgt(u)}function lgt(n){var o,i,t,r,u,s,f,e,h=1;do{for(i=n,n=null,u=null,s=0;i;){for(s++,t=i,f=0,o=0;o<h;o++)if(f++,t=t.nextZ,!t)break;for(e=h;f>0||e>0&&t;)f!==0&&(e===0||!t||i.z<=t.z)?(r=i,i=i.nextZ,f--):(r=t,t=t.nextZ,e--),u?u.nextZ=r:n=r,r.prevZ=u,u=r;i=t}u.nextZ=null;h*=2}while(s>1);return n}function ait(n,t,i,r,u){return n=32767*(n-i)*u,t=32767*(t-r)*u,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function agt(n){var t=n,i=n;do t.x<i.x&&(i=t),t=t.next;while(t!==n);return i}function wd(n,t,i,r,u,f,e,o){return(u-e)*(t-o)-(n-e)*(f-o)>=0&&(n-e)*(r-o)-(i-e)*(t-o)>=0&&(i-e)*(f-o)-(u-e)*(r-o)>=0}function vgt(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!ygt(n,t)&&fb(n,t)&&fb(t,n)&&pgt(n,t)}function io(n,t,i){return(t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y)}function yv(n,t){return n.x===t.x&&n.y===t.y}function tht(n,t,i,r){return yv(n,t)&&yv(i,r)||yv(n,r)&&yv(i,t)?!0:io(n,t,i)>0!=io(n,t,r)>0&&io(i,r,n)>0!=io(i,r,t)>0}function ygt(n,t){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==t.i&&i.next.i!==t.i&&tht(i,i.next,n,t))return!0;i=i.next}while(i!==n);return!1}function fb(n,t){return io(n.prev,n,n.next)<0?io(n,t,n.next)>=0&&io(n,n.prev,t)>=0:io(n,t,n.prev)<0||io(n,n.next,t)<0}function pgt(n,t){var i=n,r=!1,f=(n.x+t.x)/2,u=(n.y+t.y)/2;do i.y>u!=i.next.y>u&&i.next.y!==i.y&&f<(i.next.x-i.x)*(u-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==n);return r}function iht(n,t){var r=new bd(n.i,n.x,n.y),i=new bd(t.i,t.x,t.y),u=n.next,f=t.prev;return n.next=t,t.prev=n,r.next=u,u.prev=r,i.next=r,r.prev=i,f.next=i,i.prev=f,i}function rht(n,t,i,r){var u=new bd(n,t,i);return r?(u.next=r.next,u.prev=r,r.next.prev=u,r.next=u):(u.prev=u,u.next=u),u}function eb(n){n.next.prev=n.prev;n.prev.next=n.next;n.prevZ&&(n.prevZ.nextZ=n.nextZ);n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function bd(n,t,i){this.i=n;this.x=t;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=!1}function vit(n,t,i,r){for(var e=0,u=t,f=i-r;u<i;u+=r)e+=(n[f]-n[u])*(n[u+1]+n[f+1]),f=u;return e}function wgt(n){if(!n.geometry||n.geometry.type!=="Polygon"&&n.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return n.geometry.type==="Polygon"?t.features=uht(n.geometry.coordinates):n.geometry.coordinates.forEach(function(n){t.features=t.features.concat(uht(n))}),t}function uht(n){var i=bgt(n),u=2,e=lit(i.vertices,i.holes,u),o=[],r=[],t,f;for(e.forEach(function(n,t){var f=e[t];r.push([i.vertices[f*u],i.vertices[f*u+1]])}),t=0;t<r.length;t+=3)f=r.slice(t,t+3),f.push(r[t]),o.push(ct([f]));return o}function bgt(n){for(var i,r,f=n[0][0].length,u={vertices:[],holes:[],dimensions:f},e=0,t=0;t<n.length;t++){for(i=0;i<n[t].length;i++)for(r=0;r<f;r++)u.vertices.push(n[t][i][r]);t>0&&(e+=n[t-1].length,u.holes.push(e))}return u}function yit(n,t){if(!n)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var i,r=Infinity;return nr(t,function(t,u){var f=tr(n,t);f<r&&(i=gf(t),i.properties.featureIndex=u,i.properties.distanceToPoint=f,r=f)}),i}function kgt(n,t,i,r,u){fht(n,t,i||0,r||n.length-1,u||dgt)}function fht(n,t,i,r,u){while(r>i){if(r-i>600){var e=r-i+1,c=t-i+1,l=Math.log(e),s=.5*Math.exp(2*l/3),a=.5*Math.sqrt(l*s*(e-s)/e)*(c-e/2<0?-1:1),v=Math.max(i,Math.floor(t-c*s/e+a)),y=Math.min(r,Math.floor(t+(e-c)*s/e+a));fht(n,t,v,y,u)}var h=n[t],o=i,f=r;for(ob(n,i,t),u(n[r],h)>0&&ob(n,i,r);o<f;){for(ob(n,o,f),o++,f--;u(n[o],h)<0;)o++;while(u(n[f],h)>0)f--}u(n[i],h)===0?ob(n,i,f):(f++,ob(n,f,r));f<=t&&(i=f+1);t<=f&&(r=f-1)}}function ob(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}function dgt(n,t){return n<t?-1:n>t?1:0}function es(n,t){if(!(this instanceof es))return new es(n,t);this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));t&&this._initFormat(t);this.clear()}function ggt(n,t,i){if(!i)return t.indexOf(n);for(var r=0;r<t.length;r++)if(i(n,t[r]))return r;return-1}function dy(n,t){sb(n,0,n.children.length,t,n)}function sb(n,t,i,r,u){u||(u=gy(null));u.minX=Infinity;u.minY=Infinity;u.maxX=-Infinity;u.maxY=-Infinity;for(var f=t,e;f<i;f++)e=n.children[f],hb(u,n.leaf?r(e):e);return u}function hb(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function eht(n,t){return n.minX-t.minX}function oht(n,t){return n.minY-t.minY}function pit(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function kd(n){return n.maxX-n.minX+(n.maxY-n.minY)}function nnt(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function tnt(n,t){var i=Math.max(n.minX,t.minX),r=Math.max(n.minY,t.minY),u=Math.min(n.maxX,t.maxX),f=Math.min(n.maxY,t.maxY);return Math.max(0,u-i)*Math.max(0,f-r)}function wit(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function dd(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function gy(n){return{children:n,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function sht(n,t,i,r,u){for(var f=[t,i],e;f.length;)(i=f.pop(),t=f.pop(),i-t<=r)||(e=t+Math.ceil((i-t)/r/2)*r,kgt(n,e,t,i,u),f.push(t,e,e,i))}function cb(n){var t=es(n);return t.insert=function(n){if(Array.isArray(n)){var t=n;n=bit(t);n.bbox=t}else n.bbox=n.bbox?n.bbox:kit(n);return es.prototype.insert.call(this,n)},t.load=function(n){var t=[];return Array.isArray(n)?n.forEach(function(n){var i=bit(n);i.bbox=n;t.push(i)}):nr(n,function(n){n.bbox=n.bbox?n.bbox:kit(n);t.push(n)}),es.prototype.load.call(this,t)},t.remove=function(n){if(Array.isArray(n)){var t=n;n=bit(t);n.bbox=t}return es.prototype.remove.call(this,n)},t.clear=function(){return es.prototype.clear.call(this)},t.search=function(n){var t=es.prototype.search.call(this,this.toBBox(n));return{type:"FeatureCollection",features:t}},t.collides=function(n){return es.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=es.prototype.all.call(this);return{type:"FeatureCollection",features:n}},t.toJSON=function(){return es.prototype.toJSON.call(this)},t.fromJSON=function(n){return es.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var t;return t=n.bbox?n.bbox:Array.isArray(n)&&n.length===4?n:kit(n),{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function bit(n){var t=[n[0],n[1]],i=[n[0],n[3]],r=[n[2],n[3]],u=[n[2],n[1]],f=[[t,u,r,i,t]];return{type:"Feature",bbox:n,properties:{},geometry:{type:"Polygon",coordinates:f}}}function kit(n){var t=[Infinity,Infinity,-Infinity,-Infinity];return wu(n,function(n){t[0]>n[0]&&(t[0]=n[0]);t[1]>n[1]&&(t[1]=n[1]);t[2]<n[0]&&(t[2]=n[0]);t[3]<n[1]&&(t[3]=n[1])}),t}function pv(n){if(!n)throw new Error("geojson is required");var t=[];return su(n,function(n){int(n,t)}),d(t)}function int(n,t){var i=[],r=n.geometry;switch(r.type){case"Polygon":i=p(r);break;case"LineString":i=[p(r)]}i.forEach(function(i){var r=rnt(i,n.properties);r.forEach(function(n){n.id=t.length;t.push(n)})})}function rnt(n,t){var i=[];return n.reduce(function(n,r){var u=fr([n,r],t);return u.bbox=unt(n,r),i.push(u),r}),i}function unt(n,t){var i=n[0],r=n[1],u=t[0],f=t[1],e=i<u?i:u,o=r<f?r:f,s=i>u?i:u,h=r>f?r:f;return[e,o,s,h]}function al(n,t){var f={},i=[],r,u;return(n.type==="LineString"&&(n=fu(n)),t.type==="LineString"&&(t=fu(t)),n.type==="Feature"&&t.type==="Feature"&&n.geometry.type==="LineString"&&t.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&t.geometry.coordinates.length===2)?(r=hht(n,t),r&&i.push(r),d(i)):(u=cb(),u.load(pv(t)),nr(pv(n),function(n){nr(u.search(n),function(t){var r=hht(n,t),u;r&&(u=p(r).join(","),f[u]||(f[u]=!0,i.push(r)))})}),d(i))}function hht(n,t){var u=p(n),f=p(t),e,a,k,d;if(u.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(f.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=u[0][0],r=u[0][1],h=u[1][0],c=u[1][1],o=f[0][0],s=f[0][1],v=f[1][0],y=f[1][1],l=(y-s)*(h-i)-(v-o)*(c-r),w=(v-o)*(r-s)-(y-s)*(i-o),b=(h-i)*(r-s)-(c-r)*(i-o);return l===0?(w===0&&b===0,null):(e=w/l,a=b/l,e>=0&&e<=1&&a>=0&&a<=1)?(k=i+e*(h-i),d=r+e*(c-r),ki([k,d])):null}function vl(n,t,i){var f,r,u;if(i=i||{},!v(i))throw new Error("options is invalid");if(f=n.geometry?n.geometry.type:n.type,f!=="LineString"&&f!=="MultiLineString")throw new Error("lines must be LineString or MultiLineString");return r=ki([Infinity,Infinity],{dist:Infinity}),u=0,su(n,function(n){for(var f,e,h=p(n),s=0;s<h.length-1;s++){f=ki(h[s]);f.properties.dist=tr(t,f,i);e=ki(h[s+1]);e.properties.dist=tr(t,e,i);var c=tr(f,e,i),l=Math.max(f.properties.dist,e.properties.dist),a=sc(f,e),y=oc(t,l,a+90,i),w=oc(t,l,a-90,i),v=al(fr([y.geometry.coordinates,w.geometry.coordinates]),fr([f.geometry.coordinates,e.geometry.coordinates])),o=null;v.features.length>0&&(o=v.features[0],o.properties.dist=tr(t,o,i),o.properties.location=u+tr(f,o,i));f.properties.dist<r.properties.dist&&(r=f,r.properties.index=s,r.properties.location=u);e.properties.dist<r.properties.dist&&(r=e,r.properties.index=s+1,r.properties.location=u+c);o&&o.properties.dist<r.properties.dist&&(r=o,r.properties.index=s);u+=c}}),r}function sa(n,t,i){var u,r;if(i=i||{},!v(i))throw new Error("options is invalid");if(u=i.final,!n)throw new Error("start point is required");if(!t)throw new Error("end point is required");return r=u?cht(lr(t),lr(n)):cht(lr(n),lr(t)),r>180?-(360-r):r}function cht(n,t){var f=pu(n[1]),e=pu(t[1]),i=pu(t[0]-n[0]),r,u;return i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI),r=Math.log(Math.tan(e/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),u=Math.atan2(i,r),(oa(u)+360)%360}function gd(n,t,i){var f,u,r,e,o;if(i=i||{},!v(i))throw new Error("options is invalid");if(f=i.units,!n)throw new Error("from point is required");if(!t)throw new Error("to point is required");return u=lr(n),r=lr(t),r[0]+=r[0]-u[0]>180?-360:u[0]-r[0]>180?360:0,e=fnt(u,r),o=cv(e,"meters",f),o}function fnt(n,t,i){i=i===undefined?rf:Number(i);var h=i,u=n[1]*Math.PI/180,e=t[1]*Math.PI/180,f=e-u,r=Math.abs(t[0]-n[0])*Math.PI/180;r>Math.PI&&(r-=2*Math.PI);var o=Math.log(Math.tan(e/2+Math.PI/4)/Math.tan(u/2+Math.PI/4)),s=Math.abs(o)>1e-11?f/o:Math.cos(u),c=Math.sqrt(f*f+s*s*r*r);return c*h}function ha(n,t){return lht(n,"mercator",t)}function ng(n,t){return lht(n,"wgs84",t)}function lht(n,t,i){if(i=i||{},!v(i))throw new Error("options is invalid");var r=i.mutate;if(!n)throw new Error("geojson is required");return Array.isArray(n)&&gi(n[0])?n=t==="mercator"?aht(n):vht(n):(r!==!0&&(n=gf(n)),wu(n,function(n){var i=t==="mercator"?aht(n):vht(n);n[0]=i[0];n[1]=i[1]})),n}function aht(n){var r=Math.PI/180,u=6378137,i=20037508.342789244,f=Math.abs(n[0])<=180?n[0]:n[0]-ent(n[0])*360,t=[u*f*r,u*Math.log(Math.tan(Math.PI*.25+.5*n[1]*r))];return t[0]>i&&(t[0]=i),t[0]<-i&&(t[0]=-i),t[1]>i&&(t[1]=i),t[1]<-i&&(t[1]=-i),t}function vht(n){var t=180/Math.PI,i=6378137;return[n[0]*t/i,(Math.PI*.5-2*Math.atan(Math.exp(-n[1]/i)))*t]}function ent(n){return n<0?-1:n>0?1:0}function pht(n,t,i){if(i=i||{},!v(i))throw new Error("options is invalid");if(!n)throw new Error("pt is required");if(Array.isArray(n)?n=ki(n):n.type==="Point"?n=fu(n):ww(n,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=fr(t):t.type==="LineString"?t=fu(t):ww(t,"LineString","line");var r=Infinity,u=n.geometry.coordinates;return hl(t,function(n){var f=n.geometry.coordinates[0],e=n.geometry.coordinates[1],t=ont(u,f,e,i);r>t&&(r=t)}),r}function ont(n,t,i,r){var u=r.mercator,e=u!==!0?tr(t,n,r):wht(t,n,r),h=ea(u!==!0?sc(t,n):sa(t,n)),o=ea(u!==!0?sc(t,i):sa(t,i)),s=Math.abs(h-o);if(s>90)return e;var c=(o+180)%360,l=ea(u!==!0?sc(i,n):sa(i,n)),f=Math.abs(l-c);return(f>180&&(f=Math.abs(f-360)),f>90)?u!==!0?tr(n,i,r):wht(n,i,r):u!==!0?e*Math.sin(pu(s)):snt(t,i,n,r)}function snt(n,t,i,r){var u=0;(Math.abs(n[0])>=180||Math.abs(t[0])>=180||Math.abs(i[0])>=180)&&(u=n[0]>0||t[0]>0||i[0]>0?-180:180);var e=ki(i),o=ha([n[0]+u,n[1]]),s=ha([t[0]+u,t[1]]),h=ha([i[0]+u,i[1]]),f=ng(hnt(o,s,h));return u!==0&&(f[0]-=u),gd(e,f,r)}function hnt(n,t,i){var f=n[0],e=n[1],s=t[0],h=t[1],c=i[0],l=i[1],r=s-f,u=h-e,a=r*r+u*u,o=((c-f)*r+(l-e)*u)/a,v=f+o*r,y=e+o*u;return[v,y]}function wht(n,t,i){var o=i.units,r=0;Math.abs(n[0])>=180&&(r=n[0]>0?-180:180);Math.abs(t[0])>=180&&(r=t[0]>0?-180:180);var u=ha([n[0]+r,n[1]]),f=ha([t[0]+r,t[1]]),e=function(n){return n*n},s=e(u[0]-f[0])+e(u[1]-f[1]),h=Math.sqrt(s);return cv(h,"meters",o)}function cnt(n,t,i){var f,e,u,r;if(i=i||{},!v(i))throw new Error("options is invalid");if(f=i.units,e=i.properties||{},!n)throw new Error("points is required");if(n=lnt(n),!n.features.length)throw new Error("points must contain features");if(!t)throw new Error("line is required");if(er(t)!=="LineString")throw new Error("line must be a LineString");return u=Infinity,r=null,nr(n,function(n){var i=pht(n,t,{units:f});i<u&&(u=i,r=n)}),r&&(r.properties=Object.assign({dist:u},r.properties,e)),r}function lnt(n){var t=[],i=n.geometry?n.geometry.type:n.type;switch(i){case"GeometryCollection":return th(n,function(n){n.type==="Point"&&t.push({type:"Feature",properties:{},geometry:n})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return n.features=n.features.filter(function(n){return n.geometry.type==="Point"}),n;default:throw new Error("points must be a Point Collection");}}function ant(n,t){var a=lr(n),d=to(t),g=d.coordinates,u=g[0];if(u.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var l=t.properties||{},v=l.a,y=l.b,p=l.c,i=a[0],r=a[1],f=u[0][0],e=u[0][1],w=v!==undefined?v:u[0][2],o=u[1][0],s=u[1][1],b=y!==undefined?y:u[1][2],h=u[2][0],c=u[2][1],k=p!==undefined?p:u[2][2];return(k*(i-f)*(r-s)+w*(i-o)*(r-c)+b*(i-h)*(r-e)-b*(i-f)*(r-c)-k*(i-o)*(r-e)-w*(i-h)*(r-s))/((i-f)*(r-s)+(i-o)*(r-c)+(i-h)*(r-e)-(i-f)*(r-c)-(i-o)*(r-e)-(i-h)*(r-s))}function vnt(n){var i,t,r={type:"FeatureCollection",features:[]};if(t=n.type==="Feature"?n.geometry:n,t.type==="LineString")i=[t.coordinates];else if(t.type==="MultiLineString")i=t.coordinates;else if(t.type==="MultiPolygon")i=[].concat.apply([],t.coordinates);else if(t.type==="Polygon")i=t.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return i.forEach(function(n){i.forEach(function(t){for(var u,f,i=0;i<n.length-1;i++)for(u=i;u<t.length-1;u++){if(n===t){if(Math.abs(i-u)===1)continue;if(i===0&&u===n.length-2&&n[i][0]===n[n.length-1][0]&&n[i][1]===n[n.length-1][1])continue}f=ynt(n[i][0],n[i][1],n[i+1][0],n[i+1][1],t[u][0],t[u][1],t[u+1][0],t[u+1][1]);f&&r.features.push(ki([f[0],f[1]]))}})}),r}function ynt(n,t,i,r,u,f,e,o){var l,h,c,a,v,s={x:null,y:null,onLine1:!1,onLine2:!1};return(l=(o-f)*(i-n)-(e-u)*(r-t),l===0)?s.x!==null&&s.y!==null?s:!1:(h=t-f,c=n-u,a=(e-u)*h-(o-f)*c,v=(i-n)*h-(r-t)*c,h=a/l,c=v/l,s.x=n+h*(i-n),s.y=t+h*(r-t),h>=0&&h<=1&&(s.onLine1=!0),c>=0&&c<=1&&(s.onLine2=!0),s.onLine1&&s.onLine2?[s.x,s.y]:!1)}function bht(n){for(var s=pnt(n),r=yd(s),u=!1,f=0,t,h,c,l,a,v,y,i,e,b,p,o,w;!u&&f<s.features.length;){if(t=s.features[f].geometry,e=!1,t.type==="Point")r.geometry.coordinates[0]===t.coordinates[0]&&r.geometry.coordinates[1]===t.coordinates[1]&&(u=!0);else if(t.type==="MultiPoint")for(b=!1,i=0;!b&&i<t.coordinates.length;)r.geometry.coordinates[0]===t.coordinates[i][0]&&r.geometry.coordinates[1]===t.coordinates[i][1]&&(u=!0,b=!0),i++;else if(t.type==="LineString")for(i=0;!e&&i<t.coordinates.length-1;)h=r.geometry.coordinates[0],c=r.geometry.coordinates[1],l=t.coordinates[i][0],a=t.coordinates[i][1],v=t.coordinates[i+1][0],y=t.coordinates[i+1][1],kht(h,c,l,a,v,y)&&(e=!0,u=!0),i++;else if(t.type==="MultiLineString")for(p=0;p<t.coordinates.length;){for(e=!1,i=0,o=t.coordinates[p];!e&&i<o.length-1;)h=r.geometry.coordinates[0],c=r.geometry.coordinates[1],l=o[i][0],a=o[i][1],v=o[i+1][0],y=o[i+1][1],kht(h,c,l,a,v,y)&&(e=!0,u=!0),i++;p++}else(t.type==="Polygon"||t.type==="MultiPolygon")&&pr(r,t)&&(u=!0);f++}if(u)return r;for(w=d([]),f=0;f<s.features.length;f++)w.features=w.features.concat(cit(s.features[f]).features);return ki(yit(r,w).geometry.coordinates)}function pnt(n){return n.type!=="FeatureCollection"?n.type!=="Feature"?d([fu(n)]):d([n]):n}function kht(n,t,i,r,u,f){var e=Math.sqrt((u-i)*(u-i)+(f-r)*(f-r)),o=Math.sqrt((n-i)*(n-i)+(t-r)*(t-r)),s=Math.sqrt((u-n)*(u-n)+(f-t)*(f-t));return e===o+s}function lb(n){return ott(n,function(n,t){return n+dht(t)},0)}function dht(n){var i=0,t;switch(n.type){case"Polygon":return ght(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)i+=ght(n.coordinates[t]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<n.geometries.length;t++)i+=dht(n.geometries[t]);return i}}function ght(n){var i=0,t;if(n&&n.length>0)for(i+=Math.abs(nct(n[0])),t=1;t<n.length;t++)i-=Math.abs(nct(n[t]));return i}function nct(n){var o,s,h,r,u,f,t,e=0,i=n.length;if(i>2){for(t=0;t<i;t++)t===i-2?(r=i-2,u=i-1,f=0):t===i-1?(r=i-1,u=0,f=1):(r=t,u=t+1,f=t+2),o=n[r],s=n[u],h=n[f],e+=(git(h[0])-git(o[0]))*Math.sin(git(s[1]));e=e*dit*dit/2}return e}function git(n){return n*Math.PI/180}function wnt(n,t,i){var r,f,u,e,o,s;if(i=i||{},!v(i))throw new Error("options is invalid");if(n.type==="Feature")r=n.geometry.coordinates;else if(n.type==="LineString")r=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");if(!gi(t))throw new Error("distance must be a number");for(f=0,u=0;u<r.length;u++)if(t>=f&&u===r.length-1)break;else{if(f>=t)return e=t-f,e?(o=sc(r[u],r[u-1])-180,s=oc(r[u],e,o,i),s):ki(r[u]);f+=tr(r[u],r[u+1],i)}return ki(r[r.length-1])}function nrt(n,t){if(t=t||{},!v(t))throw new Error("options is invalid");if(!n)throw new Error("geojson is required");return stt(n,function(n,i){var r=i.geometry.coordinates;return n+tr(r[0],r[1],t)},0)}function bnt(n,t,i){var s=p(i),u,f,r,e,o;if(er(i)!=="LineString")throw new Error("line must be a LineString");for(u=vl(i,n),f=vl(i,t),r=u.properties.index<=f.properties.index?[u,f]:[f,u],e=[r[0].geometry.coordinates],o=r[0].properties.index+1;o<r[1].properties.index+1;o++)e.push(s[o]);return e.push(r[1].geometry.coordinates),fr(e,i.properties)}function tct(n,t,i,r){var u,e,o,s,h,c,f;if(r=r||{},!v(r))throw new Error("options is invalid");if(e=[],n.type==="Feature")u=n.geometry.coordinates;else if(n.type==="LineString")u=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(o=0,f=0;f<u.length;f++){if(t>=o&&f===u.length-1)break;else if(o>t&&e.length===0){if(s=t-o,!s)return e.push(u[f]),fr(e);h=sc(u[f],u[f-1])-180;c=oc(u[f],s,h,r);e.push(c.geometry.coordinates)}if(o>=i)return(s=i-o,!s)?(e.push(u[f]),fr(e)):(h=sc(u[f],u[f-1])-180,c=oc(u[f],s,h,r),e.push(c.geometry.coordinates),fr(e));if(o>=t&&e.push(u[f]),f===u.length-1)return fr(e);o+=tr(u[f],u[f+1],r)}return fr(u[u.length-1])}function ho(n,t,i){var e,o,u,r,f;if(i=i||{},e=i.ignoreEndVertices,!v(i))throw new Error("invalid options");if(!n)throw new Error("pt is required");if(!t)throw new Error("line is required");for(o=lr(n),u=p(t),r=0;r<u.length-1;r++)if(f=!1,e&&(r===0&&(f="start"),r===u.length-2&&(f="end"),r===0&&r+1===u.length-1&&(f="both")),knt(u[r],u[r+1],o,f))return!0;return!1}function knt(n,t,i,r){var u=i[0],f=i[1],e=n[0],o=n[1],s=t[0],h=t[1],a=i[0]-e,v=i[1]-o,c=s-e,l=h-o,y=a*l-v*c;if(y!==0)return!1;if(r){if(r==="start")return Math.abs(c)>=Math.abs(l)?c>0?e<u&&u<=s:s<=u&&u<e:l>0?o<f&&f<=h:h<=f&&f<o;if(r==="end")return Math.abs(c)>=Math.abs(l)?c>0?e<=u&&u<s:s<u&&u<=e:l>0?o<=f&&f<h:h<f&&f<=o;if(r==="both")return Math.abs(c)>=Math.abs(l)?c>0?e<u&&u<s:s<u&&u<e:l>0?o<f&&f<h:h<f&&f<o}else return Math.abs(c)>=Math.abs(l)?c>0?e<=u&&u<=s:s<=u&&u<=e:l>0?o<=f&&f<=h:h<=f&&f<=o}function ict(n,t){var f=er(n),u=er(t),i=to(n),r=to(t);switch(f){case"Point":switch(u){case"MultiPoint":return dnt(i,r);case"LineString":return ho(i,r,{ignoreEndVertices:!0});case"Polygon":return pr(i,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+u+" geometry not supported");}case"MultiPoint":switch(u){case"MultiPoint":return gnt(i,r);case"LineString":return nti(i,r);case"Polygon":return tti(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"LineString":switch(u){case"LineString":return iti(i,r);case"Polygon":return rti(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"Polygon":switch(u){case"Polygon":return uti(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}default:throw new Error("feature1 "+f+" geometry not supported");}}function dnt(n,t){for(var r=!1,i=0;i<t.coordinates.length;i++)if(uct(t.coordinates[i],n.coordinates)){r=!0;break}return r}function gnt(n,t){for(var u,r,i=0;i<n.coordinates.length;i++){for(u=!1,r=0;r<t.coordinates.length;r++)uct(n.coordinates[i],t.coordinates[r])&&(u=!0);if(!u)return!1}return!0}function nti(n,t){for(var r=!1,i=0;i<n.coordinates.length;i++){if(!ho(n.coordinates[i],t))return!1;r||(r=ho(n.coordinates[i],t,{ignoreEndVertices:!0}))}return r}function tti(n,t){for(var i,r=!0,u=0;u<n.coordinates.length;u++){if(i=pr(n.coordinates[1],t),!i){r=!1;break}!1||(i=pr(n.coordinates[1],t,{ignoreBoundary:!0}))}return r&&i}function iti(n,t){for(var i=0;i<n.coordinates.length;i++)if(!ho(n.coordinates[i],t))return!1;return!0}function rti(n,t){var f=hu(t),e=hu(n),r,i,u;if(!rct(f,e))return!1;for(r=!1,i=0;i<n.coordinates.length-1;i++){if(!pr(n.coordinates[i],t))return!1;r||(r=pr(n.coordinates[i],t,{ignoreBoundary:!0}));r||(u=fti(n.coordinates[i],n.coordinates[i+1]),r=pr(u,t,{ignoreBoundary:!0}))}return r}function uti(n,t){var r=hu(n),u=hu(t),i;if(!rct(u,r))return!1;for(i=0;i<n.coordinates[0].length;i++)if(!pr(n.coordinates[0][i],t))return!1;return!0}function rct(n,t){return n[0]>t[0]?!1:n[2]<t[2]?!1:n[1]>t[1]?!1:n[3]<t[3]?!1:!0}function uct(n,t){return n[0]===t[0]&&n[1]===t[1]}function fti(n,t){return[(n[0]+t[0])/2,(n[1]+t[1])/2]}function fct(n,t,i){var s,h;if(i=i||{},!v(i))throw new Error("options is invalid");var f=i.mask,b=i.properties,c=[];if(t===null||t===undefined)throw new Error("cellSide is required");if(!gi(t))throw new Error("cellSide is invalid");if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be array");if(n.length!==4)throw new Error("bbox must contain 4 numbers");if(f&&["Polygon","MultiPolygon"].indexOf(er(f))===-1)throw new Error("options.mask must be a (Multi)Polygon");for(var r=n[0],u=n[1],e=n[2],o=n[3],k=t/tr([r,u],[e,u],i),l=k*(e-r),g=t/tr([r,u],[r,o],i),a=g*(o-u),p=e-r,w=o-u,nt=Math.floor(p/l),tt=Math.floor(w/a),it=(p-nt*l)/2,rt=(w-tt*a)/2,y=r+it;y<=e;){for(s=u+rt;s<=o;)h=ki([y,s],b),f?ict(h,f)&&c.push(h):c.push(h),s+=a;y+=l}return d(c)}function np(n,t){var f;if(t=t||{},!v(t))throw new Error("options is invalid");var i=t.precision,r=t.coordinates,u=t.mutate;if(i=i===undefined||i===null||isNaN(i)?6:i,r=r===undefined||r===null||isNaN(r)?3:r,!n)throw new Error("<geojson> is required");if(typeof i!="number")throw new Error("<precision> must be a number");if(typeof r!="number")throw new Error("<coordinates> must be a number");return(u===!1||u===undefined)&&(n=JSON.parse(JSON.stringify(n))),f=Math.pow(10,i),wu(n,function(n){eti(n,f,r)}),n}function eti(n,t,i){n.length>i&&n.splice(i,n.length);for(var r=0;r<n.length;r++)n[r]=Math.round(n[r]*t)/t;return n}function oti(n){if(!n)throw new Error("geojson is required");var t=[];return su(n,function(n){t.push(n)}),d(t)}function sti(n,t,i){var u,f,r;if(i=i||{},!v(i))throw new Error("options is invalid");if(u=i.units,f=i.reverse,!n)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");return r=[],su(n,function(n){f&&(n.geometry.coordinates=n.geometry.coordinates.reverse());hti(n,t,u,function(n){r.push(n)})}),d(r)}function hti(n,t,i,r){var e=nrt(n,{units:i}),f,u,o;if(e<=t)return r(n);for(f=e/t,Number.isInteger(f)||(f=Math.floor(f)+1),u=0;u<f;u++)o=tct(n,t*u,t*(u+1),{units:i}),r(o,u)}function cti(n,t,i,r){var v,y;if(ab(n,i)||ab(n,r)||ab(t,i)||ab(r,i))return null;var u=n[0],f=n[1],e=t[0],o=t[1],s=i[0],h=i[1],c=r[0],l=r[1],a=(u-e)*(h-l)-(f-o)*(s-c);return a===0?null:(v=((u*o-f*e)*(s-c)-(u-e)*(s*l-h*c))/a,y=((u*o-f*e)*(h-l)-(f-o)*(s*l-h*c))/a,[v,y])}function ab(n,t){if(!n||!t||n.length!==t.length)return!1;for(var i=0,r=n.length;i<r;i++)if(n[i]instanceof Array&&t[i]instanceof Array){if(!ab(n[i],t[i]))return!1}else if(n[i]!==t[i])return!1;return!0}function tg(n,t){if(typeof t=="undefined"&&(t=!0),n.length!=3)throw new Error("This function requires an array of three points [x,y]");var i=(n[1][0]-n[0][0])*(n[2][1]-n[0][1])-(n[1][1]-n[0][1])*(n[2][0]-n[0][0]);return i>=0==t}function ati(n){for(var r,t=0,i=0;i<n.length-1;i++)n[i][0]<n[t][0]&&(t=i);return tg([n[(t-1).modulo(n.length-1)],n[t],n[(t+1).modulo(n.length-1)]],!0)?1:-1}function vb(n,t){if(!n||!t||n.length!=t.length)return!1;for(var i=0,r=n.length;i<r;i++)if(n[i]instanceof Array&&t[i]instanceof Array){if(!vb(n[i],t[i]))return!1}else if(n[i]!=t[i])return!1;return!0}function vti(n){for(var i={},r=1,t=0,u=n.length;t<u;++t){if(i.hasOwnProperty(n[t])){r=0;break}i[n[t]]=1}return r}function yti(n){var t=[];return su(n,function(n){n.geometry.type==="Polygon"&&nr(lti(n),function(i){t.push(ct(i.geometry.coordinates,n.properties))})}),d(t)}function pti(n,t,i){var e,o;if(i=i||{},typeof i!="object")throw new Error("options is invalid");var r=i.properties,u=i.npoints,f=i.offset;return n=lr(n),t=lr(t),r=r||{},u=u||100,f=f||10,e=new rg({x:n[0],y:n[1]},{x:t[0],y:t[1]},r),o=e.Arc(u,{offset:f}),o.json()}function wti(n,t){var u,i,r;if(!n)throw new Error("line is required");if(!t)throw new Error("splitter is required");if(u=er(n),i=er(t),u!=="LineString")throw new Error("line must be LineString");if(i==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(i==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");r=np(t,{precision:7});switch(i){case"Point":return irt(n,r);case"MultiPoint":return lct(n,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return lct(n,al(n,r))}}function lct(n,t){var i=[],r=cb();return su(t,function(t){var f,u;i.forEach(function(n,t){n.id=t});i.length?(f=r.search(t),f.features.length&&(u=act(t,f),i=i.filter(function(n){return n.id!==u.id}),r.remove(u),nr(irt(u,t),function(n){i.push(n);r.insert(n)}))):(i=irt(n,t).features,i.forEach(function(n){n.bbox||(n.bbox=kst(hu(n)))}),r.load(d(i)))}),d(i)}function irt(n,t){var i=[],e=p(n)[0],s=p(n)[n.geometry.coordinates.length-1],r,u,f;if(rrt(e,lr(t))||rrt(s,lr(t)))return d([n]);if(r=cb(),u=pv(n),r.load(u),f=r.search(t),!f.features.length)return d([n]);var h=act(t,f),c=[e],o=ett(u,function(n,r,u){var e=p(r)[1],f=lr(t);return u===h.id?(n.push(f),i.push(fr(n)),rrt(f,e))?[f]:[f,e]:(n.push(e),n)},c);return o.length>1&&i.push(fr(o)),d(i)}function act(n,t){if(!t.features.length)throw new Error("lines must contain features");if(t.features.length===1)return t.features[0];var i,r=Infinity;return nr(t,function(t){var f=vl(t,n),u=f.properties.dist;u<r&&(i=t,r=u)}),i}function rrt(n,t){return n[0]===t[0]&&n[1]===t[1]}function vct(n,t,i,r,u){var f,s;if(u=u||{},!v(u))throw new Error("options is invalid");if(f=u.steps,s=u.units,!n)throw new Error("center is required");if(!t)throw new Error("radius is required");if(i===undefined||i===null)throw new Error("bearing1 is required");if(r===undefined||r===null)throw new Error("bearing2 is required");if(typeof u!="object")throw new Error("options must be an object");f=f||64;var h=yct(i),e=yct(r),a=n.properties;if(h===e)return fr(hit(n,t,u).geometry.coordinates[0],a);for(var y=h,c=h<e?e:e+360,o=y,l=[],p=0;o<c;)l.push(oc(n,t,o,s).geometry.coordinates),p++,o=y+p*360/f;return o>c&&l.push(oc(n,t,c,s).geometry.coordinates),fr(l,a)}function yct(n){var t=n%360;return t<0&&(t+=360),t}function ug(n,t){var u;if(t=t||{},!v(t))throw new Error("options is invalid");var i=t.properties,f=er(n),r=p(n);if(i=i||n.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(f){case"Polygon":return pct(r,i);case"MultiPolygon":return u=[],r.forEach(function(n){u.push(pct(n,i))}),d(u);default:throw new Error("geom "+f+" not supported");}}function pct(n,t){return n.length>1?fa(n,t):fr(n[0],t)}function wct(n,t){var e,u,o;if(t=t||{},!v(t))throw new Error("options is invalid");var f=t.properties,i=t.autoComplete,r=t.orderCoords;if(!n)throw new Error("lines is required");i=i!==undefined?i:!0;r=r!==undefined?r:!0;e=er(n);switch(e){case"FeatureCollection":case"GeometryCollection":return u=[],o=n.features?n.features:n.geometries,o.forEach(function(n){u.push(p(bct(n,{},i,r)))}),yy(u,f)}return bct(n,f,i,r)}function bct(n,t,i,r){var u,e,f,o;if(t=t||n.properties||{},u=p(n),e=er(n),!u.length)throw new Error("line must contain coordinates");switch(e){case"LineString":return i&&(u=kct(u)),ct([u],t);case"MultiLineString":return f=[],o=0,u.forEach(function(n){if(i&&(n=kct(n)),r){var t=bti(hu(fr(n)));t>o?(f.unshift(n),o=t):f.push(n)}else f.push(n)}),ct(f,t);default:throw new Error("geometry type "+e+" is not supported");}}function kct(n){var t=n[0],r=t[0],u=t[1],i=n[n.length-1],f=i[0],e=i[1];return(r!==f||u!==e)&&n.push(t),n}function bti(n){var t=n[0],i=n[1],r=n[2],u=n[3];return Math.abs(t-r)*Math.abs(i-u)}function fg(n,t,i){var h=n.length,e=tp(n[0],t),u=[],f,o,r,s,c;for(i||(i=[]),f=1;f<h;f++){for(o=n[f-1],r=n[f],s=c=tp(r,t);;)if(e|s)if(e&s)break;else e?(o=frt(o,r,e,t),e=tp(o,t)):(r=frt(o,r,s,t),s=tp(r,t));else{u.push(o);s!==c?(u.push(r),f<h-1&&(i.push(u),u=[])):f===h-1&&u.push(r);break}e=c}return u.length&&i.push(u),i}function kti(n,t){for(var r,f,s,e,u,o,i=1;i<=8;i*=2){for(r=[],f=n[n.length-1],s=!(tp(f,t)&i),e=0;e<n.length;e++)u=n[e],o=!(tp(u,t)&i),o!==s&&r.push(frt(f,u,i,t)),o&&r.push(u),f=u,s=o;if(n=r,!n.length)break}return r}function frt(n,t,i,r){return i&8?[n[0]+(t[0]-n[0])*(r[3]-n[1])/(t[1]-n[1]),r[3]]:i&4?[n[0]+(t[0]-n[0])*(r[1]-n[1])/(t[1]-n[1]),r[1]]:i&2?[r[2],n[1]+(t[1]-n[1])*(r[2]-n[0])/(t[0]-n[0])]:i&1?[r[0],n[1]+(t[1]-n[1])*(r[0]-n[0])/(t[0]-n[0])]:null}function tp(n,t){var i=0;return n[0]<t[0]?i|=1:n[0]>t[2]&&(i|=2),n[1]<t[1]?i|=4:n[1]>t[3]&&(i|=8),i}function dti(n,t){var f=gti(n),i=p(n),u=n.properties,r;switch(f){case"LineString":case"MultiLineString":return(r=[],f==="LineString"&&(i=[i]),i.forEach(function(n){urt(n,t,r)}),r.length===1)?fr(r[0],u):fa(r,u);case"Polygon":return ct(dct(i,t),u);case"MultiPolygon":return yy(i.map(function(n){return dct(n,t)}),u);default:throw new Error("geometry "+f+" not supported");}}function dct(n,t){for(var i,u=[],r=0;r<n.length;r++)i=urt.polygon(n[r],t),i.length>0&&((i[0][0]!==i[i.length-1][0]||i[0][1]!==i[i.length-1][1])&&i.push(i[0]),i.length>=4&&u.push(i));return u}function gti(n){return n.geometry?n.geometry.type:n.type}function gct(n){return Object.prototype.toString.call(n)==="[object Arguments]"}function wv(n,t,i){return i||(i={}),n===t?!0:n instanceof Date&&t instanceof Date?n.getTime()===t.getTime():n&&t&&(typeof n=="object"||typeof t=="object")?nii(n,t,i):i.strict?n===t:n===t}function nlt(n){return n===null||n===undefined}function tlt(n){return!n||typeof n!="object"||typeof n.length!="number"?!1:typeof n.copy!="function"||typeof n.slice!="function"?!1:n.length>0&&typeof n[0]!="number"?!1:!0}function nii(n,t,i){var r,e,u,f;if(nlt(n)||nlt(t)||n.prototype!==t.prototype)return!1;if(gct(n))return gct(t)?(n=ert.call(n),t=ert.call(t),wv(n,t,i)):!1;if(tlt(n)){if(!tlt(t)||n.length!==t.length)return!1;for(r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}try{u=Object.keys(n);f=Object.keys(t)}catch(o){return!1}if(u.length!==f.length)return!1;for(u.sort(),f.sort(),r=u.length-1;r>=0;r--)if(u[r]!==f[r])return!1;for(r=u.length-1;r>=0;r--)if(e=u[r],!wv(n[e],t[e],i))return!1;return typeof n==typeof t}function ilt(n,t,i){var r;if(i=i||{},!v(i))throw new Error("options is invalid");var u=i.tolerance||0,f=[],e=cb();return e.load(pv(n)),hl(t,function(n){var t=!1;nr(e.search(n),function(i){if(t===!1){var f=p(n).sort(),e=p(i).sort();wv(f,e)?(t=!0,r=r?ort(r,n):n):(u===0?ho(f[0],i)&&ho(f[1],i):vl(i,f[0]).properties.dist<=u&&vl(i,f[1]).properties.dist<=u)?(t=!0,r=r?ort(r,n):n):(u===0?ho(e[0],n)&&ho(e[1],n):vl(n,e[0]).properties.dist<=u&&vl(n,e[1]).properties.dist<=u)&&(r=r?ort(r,i):i)}});t===!1&&r&&(f.push(r),r=undefined)}),r&&f.push(r),d(f)}function ort(n,t){var i=p(t),u=p(n),f=u[0],e=u[u.length-1],r=n.geometry.coordinates;return wv(i[0],f)?r.unshift(i[1]):wv(i[0],e)?r.push(i[1]):wv(i[1],f)?r.unshift(i[0]):wv(i[1],e)&&r.push(i[0]),n}function tii(n,t,i,r,u){if(u=u||{},!v(u))throw new Error("options is invalid");if(!n)throw new Error("center is required");if(i===undefined||i===null)throw new Error("bearing1 is required");if(r===undefined||r===null)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if(typeof u!="object")throw new Error("options must be an object");if(rlt(i)===rlt(r))return hit(n,t,u);var e=p(n),o=vct(n,t,i,r,u),f=[[e]];return wu(o,function(n){f[0].push(n)}),f[0].push(e),ct(f)}function rlt(n){var t=n%360;return t<0&&(t+=360),t}function ip(n,t,i,r){var e,o;if(r=r||{},!v(r))throw new Error("options is invalid");if(e=r.units,o=r.properties,!n)throw new Error("origin is required");if(t===undefined||t===null)throw new Error("distance is required");if(i===undefined||i===null)throw new Error("bearing is required");if(!(t>=0))throw new Error("distance must be greater than 0");var s=cv(t,e,"meters"),f=lr(n),u=iii(f,s,i);return u[0]+=u[0]-f[0]>180?-360:f[0]-u[0]>180?360:0,ki(u,o)}function iii(n,t,i,r){r=r===undefined?rf:Number(r);var e=t/r,c=n[0]*Math.PI/180,f=pu(n[1]),o=pu(i),s=e*Math.cos(o),u=f+s;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var h=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),l=Math.abs(h)>1e-11?s/h:Math.cos(f),a=e*Math.sin(o)/l,v=c+a;return[(v*180/Math.PI+540)%360-180,u*180/Math.PI]}function rii(n,t){var f=p(n),i=p(t),r,u,s,e,h=er(t),o;switch(h){case"Polygon":r=i[0][0];u=i[0][0];e=pb(i[0][0],i[0][i[0].length-1],f);o=ult(i[0],f,e,s,r,u);r=o[0];u=o[1];break;case"MultiPolygon":r=i[0][0][0];u=i[0][0][0];e=pb(i[0][0][0],i[0][0][i[0][0].length-1],f);i.forEach(function(n){var t=ult(n[0],f,e,s,r,u);r=t[0];u=t[1]})}return d([ki(r),ki(u)])}function ult(n,t,i,r,u,f){for(var o,s,e=0;e<n.length;e++)o=n[e],s=n[e+1],e===n.length-1&&(s=n[0]),r=pb(o,s,t),i<=0&&r>0?fii(t,o,u)||(u=o):i>0&&r<=0&&(uii(t,o,f)||(f=o)),i=r;return[u,f]}function uii(n,t,i){return pb(n,t,i)>0}function fii(n,t,i){return pb(n,t,i)<0}function pb(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(t[1]-n[1])}function eg(n){var f;if(!n)throw new Error("line is required");if(f=n.geometry?n.geometry.type:n.type,!Array.isArray(n)&&f!=="LineString")throw new Error("geometry must be a LineString");for(var i=p(n),e=0,r=1,u,t;r<i.length;)u=t||i[0],t=i[r],e+=(t[0]-u[0])*(t[1]+u[1]),r++;return e>0}function eii(n,t){var i,r,u;if(t=t||{},!v(t))throw new Error("options is invalid");if(i=t.reverse||!1,r=t.mutate||!1,!n)throw new Error("<geojson> is required");if(typeof i!="boolean")throw new Error("<reverse> must be a boolean");if(typeof r!="boolean")throw new Error("<mutate> must be a boolean");r===!1&&(n=gf(n));u=[];switch(n.type){case"GeometryCollection":return th(n,function(n){og(n,i)}),n;case"FeatureCollection":return nr(n,function(n){nr(og(n,i),function(n){u.push(n)})}),d(u)}return og(n,i)}function og(n,t){var i=n.type==="Feature"?n.geometry.type:n.type;switch(i){case"GeometryCollection":return th(n,function(n){og(n,t)}),n;case"LineString":return flt(p(n),t),n;case"Polygon":return elt(p(n),t),n;case"MultiLineString":return p(n).forEach(function(n){flt(n,t)}),n;case"MultiPolygon":return p(n).forEach(function(n){elt(n,t)}),n;case"Point":case"MultiPoint":return n}}function flt(n,t){eg(n)===t&&n.reverse()}function elt(n,t){eg(n[0])!==t&&n[0].reverse();for(var i=1;i<n.length;i++)eg(n[i])===t&&n[i].reverse()}function oii(n,t){var e,o,i,s,u,r,f;if(t=t||{},!v(t))throw new Error("options is invalid");var h=t.zProperty||"elevation",c=t.flip,l=t.flags;for(ph(n,"Point","input must contain Points"),e=sii(n,c),o=[],i=0;i<e.length;i++){for(s=e[i],u=[],r=0;r<s.length;r++)f=s[r],f.properties[h]?u.push(f.properties[h]):u.push(0),l===!0&&(f.properties.matrixPosition=[i,r]);o.push(u)}return o}function sii(n,t){var i={},r,u;return nr(n,function(n){var t=p(n)[1];i[t]||(i[t]=[]);i[t].push(n)}),r=Object.keys(i).map(function(n){var t=i[n];return t.sort(function(n,t){return p(n)[0]-p(t)[0]})}),u=r.sort(function(n,i){return t?p(n[0])[1]-p(i[0])[1]:p(i[0])[1]-p(n[0])[1]}),u}function hii(n,t,i,r){var s,f,e,u,h,o;for(r=r?r:{},s=Object.keys(srt),f=0;f<s.length;f++)e=s[f],u=r[e],u=typeof u!="undefined"&&u!==null?u:srt[e],ca[e]=u;return ca.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+i)+"]"),h=nui(n,t,i),ca.polygons?(ca.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),o=eui(h)):(ca.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),o=tui(h)),typeof ca.successCallback=="function"&&ca.successCallback(o),o}function t(n,t,i){return(n-t)/(i-t)}function brt(n){return n.constructor.toString().indexOf("Array")>-1}function nui(n,i,r){for(var et,st,ut,ht,v,p,it,b,k,rt,d,tt,a,ct=n.length-1,lt=n[0].length-1,ot={rows:ct,cols:lt,cells:[]},f=i+Math.abs(r),ft=0;ft<ct;++ft)for(ot.cells[ft]=[],et=0;et<lt;++et){var u=0,e=n[ft+1][et],o=n[ft+1][et+1],s=n[ft][et+1],l=n[ft][et];isNaN(e)||isNaN(o)||isNaN(s)||isNaN(l)||(u|=e<i?0:e>f?128:64,u|=o<i?0:o>f?32:16,u|=s<i?0:s>f?8:4,u|=l<i?0:l>f?2:1,st=+u,ut=0,(u===17||u===18||u===33||u===34||u===38||u===68||u===72||u===98||u===102||u===132||u===136||u===137||u===152||u===153)&&(ht=(e+o+s+l)/4,ut=ht>f?2:ht<i?0:1,u===34?ut===1?u=35:ut===0&&(u=136):u===136?ut===1?(u=35,ut=4):ut===0&&(u=34):u===17?ut===1?(u=155,ut=4):ut===0&&(u=153):u===68?ut===1?(u=103,ut=4):ut===0&&(u=102):u===153?ut===1&&(u=155):u===102?ut===1&&(u=103):u===152?ut<2&&(u=156,ut=1):u===137?ut<2&&(u=139,ut=1):u===98?ut<2&&(u=99,ut=1):u===38?ut<2&&(u=39,ut=1):u===18?ut>0?(u=156,ut=4):u=152:u===33?ut>0?(u=139,ut=4):u=137:u===72?ut>0?(u=99,ut=4):u=98:u===132&&(ut>0?(u=39,ut=4):u=38)),u!=0&&u!=170&&(v=p=it=b=k=rt=d=tt=.5,a=[],u===1?(it=1-t(i,s,l),tt=1-t(i,e,l),a.push(y[u])):u===169?(it=t(f,l,s),tt=t(f,l,e),a.push(y[u])):u===4?(rt=1-t(i,o,s),b=t(i,l,s),a.push(h[u])):u===166?(rt=t(f,s,o),b=1-t(f,s,l),a.push(h[u])):u===16?(k=t(i,s,o),p=t(i,e,o),a.push(c[u])):u===154?(k=1-t(f,o,s),p=1-t(f,o,e),a.push(c[u])):u===64?(d=t(i,l,e),v=1-t(i,o,e),a.push(g[u])):u===106?(d=1-t(f,e,l),v=t(f,e,o),a.push(g[u])):u===168?(b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),a.push(w[u]),a.push(y[u])):u===2?(b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),a.push(w[u]),a.push(y[u])):u===162?(k=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),a.push(w[u]),a.push(y[u])):u===8?(k=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),a.push(c[u]),a.push(h[u])):u===138?(k=1-t(i,o,s),rt=1-t(f,o,s),v=1-t(f,o,e),p=1-t(i,o,e),a.push(c[u]),a.push(h[u])):u===32?(k=t(f,s,o),rt=t(i,s,o),v=t(i,e,o),p=t(f,e,o),a.push(c[u]),a.push(h[u])):u===42?(tt=1-t(f,e,l),d=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o),a.push(nt[u]),a.push(g[u])):u===128&&(tt=t(i,l,e),d=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e),a.push(nt[u]),a.push(g[u])),u===5?(rt=1-t(i,o,s),tt=1-t(i,e,l),a.push(h[u])):u===165?(rt=t(f,s,o),tt=t(f,l,e),a.push(h[u])):u===20?(b=t(i,l,s),p=t(i,e,o),a.push(w[u])):u===150?(b=1-t(f,s,l),p=1-t(f,o,e),a.push(w[u])):u===80?(k=t(i,s,o),d=t(i,l,e),a.push(c[u])):u===90?(k=1-t(f,o,s),d=1-t(f,e,l),a.push(c[u])):u===65?(it=1-t(i,s,l),v=1-t(i,o,e),a.push(y[u])):u===105?(it=t(f,l,s),v=t(f,e,o),a.push(y[u])):u===160?(k=t(f,s,o),rt=t(i,s,o),tt=t(i,l,e),d=t(f,l,e),a.push(c[u]),a.push(h[u])):u===10?(k=1-t(i,o,s),rt=1-t(f,o,s),tt=1-t(f,e,l),d=1-t(i,e,l),a.push(c[u]),a.push(h[u])):u===130?(b=1-t(i,s,l),it=1-t(f,s,l),v=1-t(f,o,e),p=1-t(i,o,e),a.push(w[u]),a.push(y[u])):u===40?(b=t(f,l,s),it=t(i,l,s),v=t(i,e,o),p=t(f,e,o),a.push(w[u]),a.push(y[u])):u===101?(rt=t(f,s,o),v=t(f,e,o),a.push(h[u])):u===69?(rt=1-t(i,o,s),v=1-t(i,o,e),a.push(h[u])):u===149?(tt=t(f,l,e),p=1-t(f,o,e),a.push(nt[u])):u===21?(tt=1-t(i,e,l),p=t(i,e,o),a.push(nt[u])):u===86?(b=1-t(f,s,l),d=1-t(f,e,l),a.push(w[u])):u===84?(b=t(i,l,s),d=t(i,l,e),a.push(w[u])):u===89?(k=1-t(f,o,s),it=t(f,l,s),a.push(y[u])):u===81?(k=t(i,s,o),it=1-t(i,s,l),a.push(y[u])):u===96?(k=t(f,s,o),rt=t(i,s,o),d=t(i,l,e),v=t(f,e,o),a.push(c[u]),a.push(h[u])):u===74?(k=1-t(i,o,s),rt=1-t(f,o,s),d=1-t(f,e,l),v=1-t(i,o,e),a.push(c[u]),a.push(h[u])):u===24?(k=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),p=t(i,e,o),a.push(c[u]),a.push(y[u])):u===146?(k=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),p=1-t(f,o,e),a.push(c[u]),a.push(y[u])):u===6?(rt=1-t(i,o,s),b=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),a.push(h[u]),a.push(w[u])):u===164?(rt=t(f,s,o),b=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),a.push(h[u]),a.push(w[u])):u===129?(it=1-t(i,s,l),tt=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e),a.push(y[u]),a.push(nt[u])):u===41?(it=t(f,l,s),tt=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o),a.push(y[u]),a.push(nt[u])):u===66?(b=1-t(i,s,l),it=1-t(f,s,l),d=1-t(f,e,l),v=1-t(i,o,e),a.push(w[u]),a.push(y[u])):u===104?(b=t(f,l,s),it=t(i,l,s),d=t(i,l,e),v=t(f,e,o),a.push(y[u]),a.push(yi[u])):u===144?(k=t(i,s,o),tt=t(i,l,e),d=t(f,l,e),p=1-t(f,o,e),a.push(c[u]),a.push(g[u])):u===26?(k=1-t(f,o,s),tt=1-t(f,e,l),d=1-t(i,e,l),p=t(i,e,o),a.push(c[u]),a.push(g[u])):u===36?(rt=t(f,s,o),b=t(i,l,s),v=t(i,e,o),p=t(f,e,o),a.push(h[u]),a.push(w[u])):u===134?(rt=1-t(i,o,s),b=1-t(f,s,l),v=1-t(f,o,e),p=1-t(i,o,e),a.push(h[u]),a.push(w[u])):u===9?(k=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),tt=1-t(i,e,l),a.push(c[u]),a.push(h[u])):u===161?(k=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),tt=t(f,l,e),a.push(c[u]),a.push(h[u])):u===37?(rt=t(f,s,o),tt=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o),a.push(h[u]),a.push(nt[u])):u===133?(rt=1-t(i,o,s),tt=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e),a.push(h[u]),a.push(nt[u])):u===148?(b=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),p=1-t(f,o,e),a.push(w[u]),a.push(g[u])):u===22?(b=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),p=t(i,e,o),a.push(w[u]),a.push(g[u])):u===82?(k=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),d=1-t(f,e,l),a.push(c[u]),a.push(y[u])):u===88?(k=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),d=t(i,l,e),a.push(c[u]),a.push(y[u])):u===73?(k=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),v=1-t(i,o,e),a.push(c[u]),a.push(h[u])):u===97?(k=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),v=t(f,e,o),a.push(c[u]),a.push(h[u])):u===145?(k=t(i,s,o),it=1-t(i,s,l),tt=t(f,l,e),p=1-t(f,o,e),a.push(c[u]),a.push(nt[u])):u===25?(k=1-t(f,o,s),it=t(f,l,s),tt=1-t(i,e,l),p=t(i,e,o),a.push(c[u]),a.push(nt[u])):u===70?(rt=1-t(i,o,s),b=1-t(f,s,l),d=1-t(f,e,l),v=1-t(i,o,e),a.push(h[u]),a.push(w[u])):u===100?(rt=t(f,s,o),b=t(i,l,s),d=t(i,l,e),v=t(f,e,o),a.push(h[u]),a.push(w[u])):u===34?(ut===0?(k=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)):(k=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(nt[u]),a.push(g[u])):u===35?(ut===4?(k=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)):(k=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(y[u]),a.push(g[u])):u===136?(ut===0?(k=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)):(k=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)),a.push(c[u]),a.push(h[u]),a.push(nt[u]),a.push(g[u])):u===153?(ut===0?(k=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),p=t(i,e,o)):(k=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),p=1-t(f,o,e)),a.push(c[u]),a.push(y[u])):u===102?(ut===0?(rt=1-t(i,o,s),b=t(i,l,s),d=t(i,l,e),v=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),d=1-t(f,e,l),v=t(f,e,o)),a.push(h[u]),a.push(g[u])):u===155?(ut===4?(k=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),p=t(i,e,o)):(k=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),p=1-t(f,o,e)),a.push(c[u]),a.push(nt[u])):u===103?(ut===4?(rt=1-t(i,o,s),b=t(i,l,s),d=t(i,l,e),v=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),d=1-t(f,e,l),v=t(f,e,o)),a.push(h[u]),a.push(w[u])):u===152?(ut===0?(k=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),p=t(i,e,o)):(k=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),p=1-t(f,o,e)),a.push(c[u]),a.push(w[u]),a.push(y[u])):u===156?(ut===4?(k=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),p=t(i,e,o)):(k=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),p=1-t(f,o,e)),a.push(c[u]),a.push(y[u]),a.push(g[u])):u===137?(ut===0?(k=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)):(k=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)),a.push(c[u]),a.push(h[u]),a.push(y[u])):u===139?(ut===4?(k=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)):(k=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)),a.push(c[u]),a.push(h[u]),a.push(nt[u])):u===98?(ut===0?(k=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),d=t(i,l,e),v=1-t(i,o,e)):(k=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),d=1-t(f,e,l),v=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(g[u])):u===99?(ut===4?(k=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),d=t(i,l,e),v=1-t(i,o,e)):(k=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),d=1-t(f,e,l),v=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(y[u])):u===38?(ut===0?(rt=1-t(i,o,s),b=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)),a.push(h[u]),a.push(nt[u]),a.push(g[u])):u===39?(ut===4?(rt=1-t(i,o,s),b=t(i,l,s),tt=t(i,l,e),d=t(f,l,e),v=1-t(f,o,e),p=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),tt=1-t(f,e,l),d=1-t(i,e,l),v=t(i,e,o),p=t(f,e,o)),a.push(h[u]),a.push(w[u]),a.push(g[u])):u===85&&(k=1,rt=0,b=1,it=0,tt=0,d=1,v=0,p=1),(v<0||v>1||p<0||p>1||k<0||k>1||b<0||b>1||tt<0||tt>1||d<0||d>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+st+" "+e+","+o+","+s+","+l+" "+ut+" "+v+" "+p+" "+k+" "+rt+" "+b+" "+it+" "+tt+" "+d),ot.cells[ft][et]={cval:u,cval_real:st,flipped:ut,topleft:v,topright:p,righttop:k,rightbottom:rt,bottomright:b,bottomleft:it,leftbottom:tt,lefttop:d,edges:a}))}return ot}function tui(n){for(var u,o,h=[],c=n.rows,l=n.cols,s=[],e=0;e<c;e++)for(u=0;u<l;u++)if(typeof n.cells[e][u]!="undefined"&&n.cells[e][u].edges.length>0){var a=n.cells[e][u],f=uui(a),t=null,i=u,r=e;f!==null&&s.push([f.p[0]+i,f.p[1]+r]);do{if(t=fui(n.cells[r][i],f.x,f.y,f.o),t!==null)s.push([t.p[0]+i,t.p[1]+r]),i+=t.x,r+=t.y,f=t;else break;if(r<0||r>=c||i<0||i>=l||typeof n.cells[r][i]=="undefined")if(i-=t.x,r-=t.y,o=iui(n,i,r,t.x,t.y,t.o),o!==null)o.path.forEach(function(n){s.push(n)}),i=o.i,r=o.j,f=o;else break}while(typeof n.cells[r][i]!="undefined"&&n.cells[r][i].edges.length>0);h.push(s);s=[];n.cells[e][u].edges.length>0&&u--}return h}function iui(n,t,i,r,u,f){for(var c=n.cells[i][t],h=c.cval_real,o=t+r,e=i+u,s=[],l=!1;!l;){if(typeof n.cells[e]=="undefined"||typeof n.cells[e][o]=="undefined")if(e-=u,o-=r,c=n.cells[e][o],h=c.cval_real,u===-1)if(f===0)if(h&ne)s.push([o,e]),r=-1,u=0,f=0;else if(h&hf)s.push([o+1,e]),r=1,u=0,f=0;else{s.push([o+c.bottomright,e]);r=0;u=1;f=1;l=!0;break}else if(h&ne)s.push([o,e]),r=-1,u=0,f=0;else if(h&hf){s.push([o+c.bottomright,e]);r=0;u=1;f=1;l=!0;break}else{s.push([o+c.bottomleft,e]);r=0;u=1;f=0;l=!0;break}else if(u===1)if(f===0)if(h&ih)s.push([o+1,e+1]),r=1,u=0,f=1;else if(h&se){s.push([o+c.topleft,e+1]);r=0;u=-1;f=0;l=!0;break}else{s.push([o+c.topright,e+1]);r=0;u=-1;f=1;l=!0;break}else h&ih?(s.push([o+1,e+1]),r=1,u=0,f=1):(s.push([o+1,e+1]),r=1,u=0,f=1);else if(r===-1)if(f===0)if(h&se)s.push([o,e+1]),r=0,u=1,f=0;else if(h&ne){s.push([o,e+c.leftbottom]);r=1;u=0;f=0;l=!0;break}else{s.push([o,e+c.lefttop]);r=1;u=0;f=1;l=!0;break}else if(h&se)s.push([o,e+1]),r=0,u=1,f=0;else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(r===1)if(f===0)if(h&hf)s.push([o+1,e]),r=0,u=-1,f=1;else{s.push([o+1,e+c.rightbottom]);r=-1;u=0;f=0;l=!0;break}else if(h&hf)s.push([o+1,e]),r=0,u=-1,f=1;else if(h&ih){s.push([o+1,e+c.righttop]);r=-1;u=0;f=1;break}else{s.push([o+1,e+c.rightbottom]);r=-1;u=0;f=0;l=!0;break}else{console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}else if(c=n.cells[e][o],h=c.cval_real,r===-1)if(f===0)if(typeof n.cells[e-1]!="undefined"&&typeof n.cells[e-1][o]!="undefined")r=0,u=-1,f=1;else if(h&ne)s.push([o,e]);else{s.push([o+c.bottomright,e]);r=0;u=1;f=1;l=!0;break}else if(h&se)console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!");else{console.log("MarchingSquaresJS-isoBands: found entry from top at "+o+","+e);break}else if(r===1)if(f===0){console.log("MarchingSquaresJS-isoBands: wtf");break}else if(typeof n.cells[e+1]!="undefined"&&typeof n.cells[e+1][o]!="undefined")r=0,u=1,f=0;else if(h&ih)s.push([o+1,e+1]),r=1,u=0,f=1;else{s.push([o+c.topleft,e+1]);r=0;u=-1;f=0;l=!0;break}else if(u===-1)if(f===1)if(typeof n.cells[e][o+1]!="undefined")r=1,u=0,f=1;else if(h&hf)s.push([o+1,e]),r=0,u=-1,f=1;else{s.push([o+1,e+c.righttop]);r=-1;u=0;f=1;l=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(u===1)if(f===0)if(typeof n.cells[e][o-1]!="undefined")r=-1,u=0,f=0;else if(h&se)s.push([o,e+1]),r=0,u=1,f=0;else{s.push([o,e+c.leftbottom]);r=1;u=0;f=0;l=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else{console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(o+=r,e+=u,o===t&&e===i)break}return{path:s,i:o,j:e,x:r,y:u,o:f}}function rui(n,t){delete n.edges[t];for(var i=t+1;i<n.edges.length;i++)n.edges[i-1]=n.edges[i];n.edges.pop()}function uui(n){if(n.edges.length>0){var i=n.edges[n.edges.length-1],t=n.cval_real;switch(i){case 0:return t&ih?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[n.topleft,1],x:0,y:-1,o:0};case 1:return t&hf?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 2:return t&hf?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[n.topleft,1],x:0,y:-1,o:0};case 3:return t&ne?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 4:return t&ih?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[n.topright,1],x:0,y:-1,o:1};case 5:return t&hf?{p:[n.topright,1],x:0,y:-1,o:1}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 6:return t&hf?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[n.topright,1],x:0,y:-1,o:1};case 7:return t&ne?{p:[n.topright,1],x:0,y:-1,o:1}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 8:return t&hf?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[1,n.righttop],x:-1,y:0,o:1};case 9:return t&ne?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 10:return t&ne?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[1,n.righttop],x:-1,y:0,o:1};case 11:return t&se?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[0,n.lefttop],x:1,y:0,o:1};case 12:return t&hf?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 13:return t&ne?{p:[1,n.rightbottom],x:-1,y:0,o:0}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 14:return t&ne?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 15:return t&se?{p:[1,n.rightbottom],x:-1,y:0,o:0}:{p:[0,n.lefttop],x:1,y:0,o:1};case 16:return t&hf?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[0,n.leftbottom],x:1,y:0,o:0};case 17:return t&se?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[0,n.lefttop],x:1,y:0,o:1};case 18:return t&ne?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 19:return t&se?{p:[n.bottomleft,0],x:0,y:1,o:0}:{p:[0,n.lefttop],x:1,y:0,o:1};case 20:return t&se?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[0,n.leftbottom],x:1,y:0,o:0};case 21:return t&ih?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[n.topright,1],x:0,y:-1,o:1};case 22:return t&se?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[0,n.lefttop],x:1,y:0,o:1};case 23:return t&ih?{p:[0,n.lefttop],x:1,y:0,o:1}:{p:[n.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!");console.log(n)}}return null}function fui(n,t,i,r){var s,l,f,e,u=n.cval,o;switch(t){case-1:switch(r){case 0:s=h[u];f=gt[u];e=ni[u];o=ti[u];break;default:s=c[u];f=bt[u];e=kt[u];o=dt[u]}break;case 1:switch(r){case 0:s=nt[u];f=li[u];e=ai[u];o=vi[u];break;default:s=g[u];f=si[u];e=hi[u];o=ci[u]}break;default:switch(i){case-1:switch(r){case 0:s=yi[u];f=lt[u];e=at[u];o=vt[u];break;default:s=pi[u];f=yt[u];e=pt[u];o=wt[u]}break;case 1:switch(r){case 0:s=y[u];f=ii[u];e=ri[u];o=ui[u];break;default:s=w[u];f=fi[u];e=ei[u];o=oi[u]}}}if(l=n.edges.indexOf(s),typeof n.edges[l]!="undefined")rui(n,l);else return null;u=n.cval_real;switch(s){case 0:u&ih?(t=n.topleft,i=1):(t=1,i=n.righttop);break;case 1:u&hf?(t=1,i=n.rightbottom):(t=n.topleft,i=1);break;case 2:u&hf?(t=n.topleft,i=1):(t=n.bottomright,i=0);break;case 3:u&ne?(t=n.bottomleft,i=0):(t=n.topleft,i=1);break;case 4:u&ih?(t=n.topright,i=1):(t=1,i=n.righttop);break;case 5:u&hf?(t=1,i=n.rightbottom):(t=n.topright,i=1);break;case 6:u&hf?(t=n.topright,i=1):(t=n.bottomright,i=0);break;case 7:u&ne?(t=n.bottomleft,i=0):(t=n.topright,i=1);break;case 8:u&hf?(t=1,i=n.righttop):(t=n.bottomright,i=0);break;case 9:u&ne?(t=n.bottomleft,i=0):(t=1,i=n.righttop);break;case 10:u&ne?(t=1,i=n.righttop):(t=0,i=n.leftbottom);break;case 11:u&se?(t=0,i=n.lefttop):(t=1,i=n.righttop);break;case 12:u&hf?(t=1,i=n.rightbottom):(t=n.bottomright,i=0);break;case 13:u&ne?(t=n.bottomleft,i=0):(t=1,i=n.rightbottom);break;case 14:u&ne?(t=1,i=n.rightbottom):(t=0,i=n.leftbottom);break;case 15:u&se?(t=0,i=n.lefttop):(t=1,i=n.rightbottom);break;case 16:u&hf?(t=0,i=n.leftbottom):(t=n.bottomright,i=0);break;case 17:u&se?(t=0,i=n.lefttop):(t=n.bottomright,i=0);break;case 18:u&ne?(t=n.bottomleft,i=0):(t=0,i=n.leftbottom);break;case 19:u&se?(t=0,i=n.lefttop):(t=n.bottomleft,i=0);break;case 20:u&se?(t=0,i=n.leftbottom):(t=n.topleft,i=1);break;case 21:u&ih?(t=n.topright,i=1):(t=0,i=n.leftbottom);break;case 22:u&se?(t=0,i=n.lefttop):(t=n.topleft,i=1);break;case 23:u&ih?(t=n.topright,i=1):(t=0,i=n.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(n),null}return(typeof t=="undefined"||typeof i=="undefined"||typeof f=="undefined"||typeof e=="undefined"||typeof o=="undefined")&&(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(n),console.log(t+" "+i+" "+f+" "+e+" "+o)),{p:[t,i],x:f,y:e,o:o}}function eui(n){var t=[],i=0;return n.cells.forEach(function(n,r){n.forEach(function(n,u){if(typeof n!="undefined"){var f=s[n.cval](n);typeof f=="object"&&brt(f)?typeof f[0]=="object"&&brt(f[0])?typeof f[0][0]=="object"&&brt(f[0][0])?f.forEach(function(n){n.forEach(function(n){n[0]+=u;n[1]+=r});t[i++]=n}):(f.forEach(function(n){n[0]+=u;n[1]+=r}),t[i++]=f):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),t}function oui(n,t,i){var e,f,s;if(i=i||{},!v(i))throw new Error("options is invalid");var r=i.zProperty||"elevation",o=i.commonProperties||{},u=i.breaksProperties||[];if(ph(n,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!v(o))throw new Error("commonProperties is not an Object");if(!Array.isArray(u))throw new Error("breaksProperties is not an Array");return e=oii(n,{zProperty:r,flip:!0}),f=sui(e,t,r),f=hui(f,e,n),s=f.map(function(n,t){var i;if(u[t]&&!v(u[t]))throw new Error("Each mappedProperty is required to be an Object");return i=Object.assign({},o,u[t]),i[r]=n[r],yy(n.groupedRings,i)}),d(s)}function sui(n,t,i){for(var e=[],r=1;r<t.length;r++){var u=+t[r-1],o=+t[r],s=hii(n,u,o-u),h=cui(s),c=lui(h),f={};f.groupedRings=c;f[i]=u+"-"+o;e.push(f)}return e}function hui(n,t,i){var r=hu(i),u=r[2]-r[0],f=r[3]-r[1],e=r[0],o=r[1],s=t[0].length-1,h=t.length-1,c=u/s,l=f/h,a=function(n){n[0]=n[0]*c+e;n[1]=n[1]*l+o};return n.forEach(function(n){n.groupedRings.forEach(function(n){n.forEach(function(n){n.forEach(a)})})}),n}function cui(n){var t=[],i=[],r;return n.forEach(function(n){var r=lb(ct([n]));i.push(r);t.push({ring:n,area:r})}),i.sort(function(n,t){return t-n}),r=[],i.forEach(function(n){for(var i=0;i<t.length;i++)if(t[i].area===n){r.push(t[i].ring);t.splice(i,1);break}}),r}function lui(n){for(var t=n.map(function(n){return{lrCoordinates:n,grouped:!1}}),f=[],i,u,e,r,o;!vui(t);)for(i=0;i<t.length;i++)if(!t[i].grouped){for(u=[],u.push(t[i].lrCoordinates),t[i].grouped=!0,e=ct([t[i].lrCoordinates]),r=i+1;r<t.length;r++)t[r].grouped||(o=ct([t[r].lrCoordinates]),aui(o,e)&&(u.push(t[r].lrCoordinates),t[r].grouped=!0));f.push(u)}return f}function aui(n,t){for(var r=cit(n),i=0;i<r.features.length;i++)if(!pr(r.features[i],t))return!1;return!0}function vui(n){for(var t=0;t<n.length;t++)if(n[t].grouped===!1)return!1;return!0}function olt(n,t,i){if(i=i||{},!v(i))throw new Error("options is invalid");var r=i.pivot,u=i.mutate;if(!n)throw new Error("geojson is required");if(t===undefined||t===null||isNaN(t))throw new Error("angle is required");return t===0?n:(r||(r=vv(n)),(u===!1||u===undefined)&&(n=gf(n)),wu(n,function(n){var u=sa(r,n),f=u+t,e=gd(r,n),i=p(ip(r,e,f));n[0]=i[0];n[1]=i[1]}),n)}function slt(n,t,i){var r,u,f;if(i=i||{},!v(i))throw new Error("options is invalid");if(r=i.origin,u=i.mutate,!n)throw new Error("geojson required");if(typeof t!="number"||t===0)throw new Error("invalid factor");return(f=Array.isArray(r)||typeof r=="object",u!==!0&&(n=gf(n)),n.type==="FeatureCollection"&&!f)?(nr(n,function(i,u){n.features[u]=hlt(i,t,r)}),n):hlt(n,t,r)}function hlt(n,t,i){var r=er(n)==="Point";return(i=yui(n,i),t===1||r)?n:(wu(n,function(n){var u=gd(i,n),f=sa(i,n),e=u*t,r=p(ip(i,e,f));n[0]=r[0];n[1]=r[1];n.length===3&&(n[2]*=t)}),n)}function yui(n,t){if((t===undefined||t===null)&&(t="centroid"),Array.isArray(t)||typeof t=="object")return lr(t);var i=n.bbox?n.bbox:hu(n),r=i[0],u=i[1],f=i[2],e=i[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return ki([r,u]);case"se":case"southeast":case"eastsouth":case"bottomright":return ki([f,u]);case"nw":case"northwest":case"westnorth":case"topleft":return ki([r,e]);case"ne":case"northeast":case"eastnorth":case"topright":return ki([f,e]);case"center":return yd(n);case undefined:case null:case"centroid":return vv(n);default:throw new Error("invalid origin");}}function pui(n,t,i,r){if(r=r||{},!v(r))throw new Error("options is invalid");var e=r.units,u=r.zTranslation,f=r.mutate;if(!n)throw new Error("geojson is required");if(t===undefined||t===null||isNaN(t))throw new Error("distance is required");if(u&&typeof u!="number"&&isNaN(u))throw new Error("zTranslation is not a number");if(u=u!==undefined?u:0,t===0&&u===0)return n;if(i===undefined||i===null||isNaN(i))throw new Error("direction is required");return t<0&&(t=-t,i=-i),(f===!1||f===undefined)&&(n=gf(n)),wu(n,function(n){var r=p(ip(n,t,i,{units:e}));n[0]=r[0];n[1]=r[1];u&&n.length===3&&(n[2]+=u)}),n}function sg(n){var t=n[0],i=n[1];return[i[0]-t[0],i[1]-t[1]]}function krt(n,t){return n[0]*t[1]-t[0]*n[1]}function wui(n,t){return[n[0]+t[0],n[1]+t[1]]}function bui(n,t){return[n[0]-t[0],n[1]-t[1]]}function kui(n,t){return[n*t[0],n*t[1]]}function dui(n,t){var i=n[0],r=sg(n),f=t[0],u=sg(t),e=krt(r,u),o=bui(f,i),s=krt(o,u),h=s/e;return wui(i,kui(h,r))}function gui(n,t){var i=sg(n),r=sg(t);return krt(i,r)===0}function nfi(n,t){return gui(n,t)?!1:dui(n,t)}function tfi(n,t,i){var r,u,e,f;if(i=i||{},!v(i))throw new Error("options is invalid");if(r=i.units,!n)throw new Error("geojson is required");if(t===undefined||t===null||isNaN(t))throw new Error("distance is required");u=er(n);e=n.properties;switch(u){case"LineString":return clt(n,t,r);case"MultiLineString":return f=[],su(n,function(n){f.push(clt(n,t,r).geometry.coordinates)}),fa(f,e);default:throw new Error("geometry "+u+" is not supported");}}function clt(n,t,i){var f=[],e=rd(t,i),u=p(n),r=[];return u.forEach(function(n,t){var i,o,s;t!==u.length-1&&(i=ifi(n,u[t+1],e),f.push(i),t>0&&(o=f[t-1],s=nfi(i,o),s!==!1&&(o[1]=s,i[0]=s),r.push(o[0]),t===u.length-2&&(r.push(i[0]),r.push(i[1]))),u.length===2&&(r.push(i[0]),r.push(i[1])))}),fr(r,n.properties)}function ifi(n,t,i){var r=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),u=n[0]+i*(t[1]-n[1])/r,f=t[0]+i*(t[1]-n[1])/r,e=n[1]+i*(n[0]-t[0])/r,o=t[1]+i*(n[0]-t[0])/r;return[[u,e],[f,o]]}function drt(n,t,i){var r=t[0]-n[0],u=t[1]-n[1],f=i[0]-t[0],e=i[1]-t[1];return Math.sign(r*e-f*u)}function rfi(n,t){var i=n.geometry.coordinates.map(function(n){return n[0]}),r=n.geometry.coordinates.map(function(n){return n[1]}),u=t.geometry.coordinates.map(function(n){return n[0]}),f=t.geometry.coordinates.map(function(n){return n[1]});return Math.max(null,i)===Math.max(null,u)&&Math.max(null,r)===Math.max(null,f)&&Math.min(null,i)===Math.min(null,u)&&Math.min(null,r)===Math.min(null,f)}function llt(n,t){return t.geometry.coordinates[0].every(function(t){return pr(ki(t),n)})}function ufi(n,t){return n[0]===t[0]&&n[1]===t[1]}function ffi(n){if(!n)throw new Error("No geojson passed");if(n.type!=="FeatureCollection"&&n.type!=="GeometryCollection"&&n.type!=="MultiLineString"&&n.type!=="LineString"&&n.type!=="Feature")throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature");}function efi(n){var i=he.fromGeoJson(n),r,t;return i.deleteDangles(),i.deleteCutEdges(),r=[],t=[],i.getEdgeRings().filter(function(n){return n.isValid()}).forEach(function(n){n.isHole()?r.push(n):t.push(n)}),r.forEach(function(n){we.findEdgeRingContaining(n,t)&&t.push(n)}),d(t.map(function(n){return n.toPolygon()}))}function ofi(n,t){var i;return su(n,function(n){su(t,function(t){if(i===!1)return!1;i=sfi(n.geometry,t.geometry)})}),i}function sfi(n,t){switch(n.type){case"Point":switch(t.type){case"Point":return!afi(n.coordinates,t.coordinates);case"LineString":return!alt(t,n);case"Polygon":return!pr(n,t)}break;case"LineString":switch(t.type){case"Point":return!alt(n,t);case"LineString":return!hfi(n,t);case"Polygon":return!vlt(t,n)}break;case"Polygon":switch(t.type){case"Point":return!pr(t,n);case"LineString":return!vlt(n,t);case"Polygon":return!cfi(t,n)}}}function alt(n,t){for(var i=0;i<n.coordinates.length-1;i++)if(lfi(n.coordinates[i],n.coordinates[i+1],t.coordinates))return!0;return!1}function hfi(n,t){var i=al(n,t);return i.features.length>0?!0:!1}function vlt(n,t){var i=al(t,ug(n));return i.features.length>0?!0:!1}function cfi(n,t){for(var r,i=0;i<n.coordinates[0].length;i++)if(pr(n.coordinates[0][i],t))return!0;for(r=0;r<t.coordinates[0].length;r++)if(pr(t.coordinates[0][r],n))return!0;return!1}function lfi(n,t,i){var f=i[0]-n[0],e=i[1]-n[1],r=t[0]-n[0],u=t[1]-n[1],o=f*u-e*r;return o!==0?!1:Math.abs(r)>=Math.abs(u)?r>0?n[0]<=i[0]&&i[0]<=t[0]:t[0]<=i[0]&&i[0]<=n[0]:u>0?n[1]<=i[1]&&i[1]<=t[1]:t[1]<=i[1]&&i[1]<=n[1]}function afi(n,t){return n[0]===t[0]&&n[1]===t[1]}function vfi(n,t){var f=er(n),u=er(t),i=to(n),r=to(t),e=p(n),o=p(t);switch(f){case"Point":switch(u){case"Point":return nut(e,o);default:throw new Error("feature2 "+u+" geometry not supported");}case"MultiPoint":switch(u){case"Point":return yfi(i,r);case"MultiPoint":return pfi(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"LineString":switch(u){case"Point":return ho(r,i,{ignoreEndVertices:!0});case"LineString":return kfi(i,r);case"MultiPoint":return wfi(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"Polygon":switch(u){case"Point":return pr(r,i,{ignoreBoundary:!0});case"LineString":return dfi(i,r);case"Polygon":return gfi(i,r);case"MultiPoint":return bfi(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}default:throw new Error("feature1 "+f+" geometry not supported");}}function yfi(n,t){for(var r=!1,i=0;i<n.coordinates.length;i++)if(nut(n.coordinates[i],t.coordinates)){r=!0;break}return r}function pfi(n,t){for(var u,r,i=0;i<t.coordinates.length;i++){for(u=!1,r=0;r<n.coordinates.length;r++)if(nut(t.coordinates[i],n.coordinates[r])){u=!0;break}if(!u)return!1}return!0}function wfi(n,t){for(var r=!1,i=0;i<t.coordinates.length;i++)if(ho(t.coordinates[i],n,{ignoreEndVertices:!0})&&(r=!0),!ho(t.coordinates[i],n))return!1;return r?!0:!1}function bfi(n,t){for(var i=0;i<t.coordinates.length;i++)if(!pr(t.coordinates[i],n,{ignoreBoundary:!0}))return!1;return!0}function kfi(n,t){for(var r=!1,i=0;i<t.coordinates.length;i++)if(ho({type:"Point",coordinates:t.coordinates[i]},n,{ignoreEndVertices:!0})&&(r=!0),!ho({type:"Point",coordinates:t.coordinates[i]},n,{ignoreEndVertices:!1}))return!1;return r}function dfi(n,t){var r=!1,i=0,f=hu(n),e=hu(t),u;if(!ylt(f,e))return!1;for(i;i<t.coordinates.length-1;i++)if(u=nei(t.coordinates[i],t.coordinates[i+1]),pr({type:"Point",coordinates:u},n,{ignoreBoundary:!0})){r=!0;break}return r}function gfi(n,t){var r=hu(n),u=hu(t),i;if(!ylt(r,u))return!1;for(i=0;i<t.coordinates[0].length;i++)if(!pr(t.coordinates[0][i],n))return!1;return!0}function ylt(n,t){return n[0]>t[0]?!1:n[2]<t[2]?!1:n[1]>t[1]?!1:n[3]<t[3]?!1:!0}function nut(n,t){return n[0]===t[0]&&n[1]===t[1]}function nei(n,t){return[(n[0]+t[0])/2,(n[1]+t[1])/2]}function tei(n,t){var f=er(n),u=er(t),i=to(n),r=to(t);switch(f){case"MultiPoint":switch(u){case"LineString":return plt(i,r);case"Polygon":return blt(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"LineString":switch(u){case"MultiPoint":return plt(r,i);case"LineString":return iei(i,r);case"Polygon":return wlt(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"Polygon":switch(u){case"MultiPoint":return blt(r,i);case"LineString":return wlt(r,i);default:throw new Error("feature2 "+u+" geometry not supported");}default:throw new Error("feature1 "+f+" geometry not supported");}}function plt(n,t){for(var r=!1,u=!1,o=n.coordinates.length,f=0,i,e;f<o&&!r&&!u;){for(i=0;i<t.coordinates.length-1;i++)e=!0,(i===0||i===t.coordinates.length-2)&&(e=!1),klt(t.coordinates[i],t.coordinates[i+1],n.coordinates[f],e)?r=!0:u=!0;f++}return r&&u}function iei(n,t){var f=al(n,t),r,i,u;if(f.features.length>0)for(r=0;r<n.coordinates.length-1;r++)for(i=0;i<t.coordinates.length-1;i++)if(u=!0,(i===0||i===t.coordinates.length-2)&&(u=!1),klt(n.coordinates[r],n.coordinates[r+1],t.coordinates[i],u))return!0;return!1}function wlt(n,t){var i=al(n,ug(t));return i.features.length>0?!0:!1}function blt(n,t){for(var u=!1,i=!1,f=n.coordinates[0].length,r=0;r<f&&u&&i;)pr(ki(n.coordinates[0][r]),t)?u=!0:i=!0,r++;return i&&i}function klt(n,t,i,r){var e=i[0]-n[0],o=i[1]-n[1],u=t[0]-n[0],f=t[1]-n[1],s=e*f-o*u;return s!==0?!1:r?Math.abs(u)>=Math.abs(f)?u>0?n[0]<=i[0]&&i[0]<=t[0]:t[0]<=i[0]&&i[0]<=n[0]:f>0?n[1]<=i[1]&&i[1]<=t[1]:t[1]<=i[1]&&i[1]<=n[1]:Math.abs(u)>=Math.abs(f)?u>0?n[0]<i[0]&&i[0]<t[0]:t[0]<i[0]&&i[0]<n[0]:f>0?n[1]<i[1]&&i[1]<t[1]:t[1]<i[1]&&i[1]<n[1]}function dlt(n){return n.coordinates.map(function(t){return{type:n.type.replace("Multi",""),coordinates:t}})}function glt(n,t){return n.hasOwnProperty("coordinates")?n.coordinates.length===t.coordinates.length:n.length===t.length}function uei(n,t){return rei(n,t,{strict:!0})}function nat(n,t){var r,u,f,i,e,o;if(!n)throw new Error("feature1 is required");if(!t)throw new Error("feature2 is required");if(r=er(n),u=er(t),r!==u)throw new Error("features must be of the same type");if(r==="Point")throw new Error("Point geometry not supported");if(f=new iut({precision:6}),f.compare(n,t))return!1;i=0;switch(r){case"MultiPoint":e=ec(n);o=ec(t);e.forEach(function(n){o.forEach(function(t){n[0]===t[0]&&n[1]===t[1]&&i++})});break;case"LineString":case"MultiLineString":hl(n,function(n){hl(t,function(t){ilt(n,t).features.length&&i++})});break;case"Polygon":case"MultiPolygon":hl(n,function(n){hl(t,function(t){al(n,t).features.length&&i++})})}return i>0}function fei(n,t){var i,r,u;if(!n)throw new Error("feature1 is required");if(!t)throw new Error("feature2 is required");return(i=er(n),r=er(t),i!==r)?!1:(u=new iut({precision:6}),u.compare(ll(n),ll(t)))}function hei(n,t,i){var r,u;if(i=i||{},typeof i!="object")throw new Error("options is invalid");if(r=i.minPoints,u=i.units,ph(n,"Point","Input must contain Points"),t===null||t===undefined)throw new Error("maxDistance is required");if(!(Math.sign(t)>0))throw new Error("Invalid maxDistance");if(!(r===undefined||r===null||Math.sign(r)>0))throw new Error("Invalid minPoints");n=gf(n,!0);r=r||3;var f=new wb.DBSCAN,o=f.run(ec(n),cv(t,u),r,tr),e=-1;return o.forEach(function(t){e++;t.forEach(function(t){var i=n.features[t];i.properties||(i.properties={});i.properties.cluster=e;i.properties.dbscan="core"})}),f.noise.forEach(function(t){var i=n.features[t];i.properties||(i.properties={});i.properties.dbscan=i.properties.cluster?"edge":"noise"}),n}function uat(n,t,i){i=i||[];for(var r=0;r<n;r++)i[r]=t;return i}function pei(n,t,i,r){var u=[],d=[],g=[],ft=[],f=!1,ht=r||rat,nt=n.length,a=n[0].length,et=a>0,tt=[],ot,it,h,st,rt,c,e,o,ut,v,y,s,p,w,b,lt,l,k;if(i)u=i=="kmrand"?vei(n,t):i=="kmpp"?yei(n,t):i;else for(ot={};u.length<t;)it=Math.floor(Math.random()*nt),ot[it]||(ot[it]=!0,u.push(n[it]));do{for(uat(t,0,tt),h=0;h<nt;h++){for(st=Infinity,rt=0,c=0;c<t;c++)ft=et?aei(n[h],u[c]):Math.abs(n[h]-u[c]),ft<=st&&(st=ft,rt=c);g[h]=rt;tt[rt]++}for(e=[],d=[],o=0;o<t;o++)e[o]=et?uat(a,0,e[o]):0,d[o]=u[o];if(et){for(ut=0;ut<t;ut++)u[ut]=[];for(v=0;v<nt;v++){var at=g[v],vt=e[at],yt=n[v];for(y=0;y<a;y++)vt[y]+=yt[y]}for(f=!0,s=0;s<t;s++){var ct=u[s],pt=e[s],wt=d[s],bt=tt[s];for(p=0;p<a;p++)ct[p]=pt[p]/bt||0;if(f)for(w=0;w<a;w++)if(wt[w]!=ct[w]){f=!1;break}}}else{for(b=0;b<nt;b++)lt=g[b],e[lt]+=n[b];for(l=0;l<t;l++)u[l]=e[l]/tt[l]||0;for(f=!0,k=0;k<t;k++)if(d[k]!=u[k]){f=!1;break}}f=f||--ht<=0}while(!f);return{it:rat-ht,k:t,idxs:g,centroids:u}}function wei(n,t){var i,u,r;if(t=t||{},typeof t!="object")throw new Error("options is invalid");i=t.numberOfClusters;u=t.mutate;ph(n,"Point","Input must contain Points");r=n.features.length;i=i||Math.round(Math.sqrt(r/2));i>r&&(i=r);(u===!1||u===undefined)&&(n=gf(n,!0));var f=ec(n),s=f.slice(0,i),e=fat(f,i,s),o={};return e.centroids.forEach(function(n,t){o[t]=n}),nr(n,function(n,t){var i=e.idxs[t];n.properties.cluster=i;n.properties.centroid=o[i]}),n}function bei(n,t){var f,e,r,u,i,o,s;if(!n)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");if(f=eat(n,"line1"),f!=="LineString")throw new Error("line1 must be a LineString");if(e=eat(t,"line2"),e!=="LineString")throw new Error("line2 must be a LineString");for(r=pv(ll(n)).features,u=pv(ll(t)).features,i=0;i<r.length;i++){if(o=r[i].geometry.coordinates,!u[i])break;if(s=u[i].geometry.coordinates,!kei(o,s))return!1}return!0}function kei(n,t){var i=ea(sa(n[0],n[1])),r=ea(sa(t[0],t[1]));return i===r}function eat(n,t){if(n.geometry&&n.geometry.type)return n.geometry.type;if(n.type)return n.type;throw new Error("Invalid GeoJSON object for "+t);}function oat(n){for(var t=n,i=[];t.parent;)i.unshift(t),t=t.parent;return i}function dei(){return new sat(function(n){return n.f})}function rp(n,t){var i,r,u,f;for(t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[],i=0;i<n.length;i++)for(this.grid[i]=[],r=0,u=n[i];r<u.length;r++)f=new cg(i,r,u[r]),this.grid[i][r]=f,this.nodes.push(f);this.init()}function cg(n,t,i){this.x=n;this.y=t;this.weight=i}function sat(n){this.content=[];this.scoreFunction=n}function gei(n,t,i){var h,c,e,r,st,w,b,ut,ft;if(i=i||{},!v(i))throw new Error("options is invalid");var u=i.resolution,bt=i.minDistance,f=i.obstacles||d([]);if(!n)throw new Error("start is required");if(!t)throw new Error("end is required");if(u&&!gi(u)||u<=0)throw new Error("options.resolution must be a number, greater than 0");if(bt)throw new Error("options.minDistance is not yet implemented");h=lr(n);c=lr(t);n=ki(h);t=ki(c);switch(er(f)){case"FeatureCollection":if(f.features.length===0)return fr([h,c]);break;case"Polygon":f=d([fu(to(f))]);break;default:throw new Error("invalid obstacles");}e=f;e.features.push(n);e.features.push(t);r=hu(slt(sit(hu(e)),1.15));u||(st=tr([r[0],r[1]],[r[2],r[1]],i),u=st/100);e.features.pop();e.features.pop();for(var o=r[0],s=r[1],l=r[2],a=r[3],kt=u/tr([o,s],[l,s],i),k=kt*(l-o),dt=u/tr([o,s],[o,a],i),g=dt*(a-s),ht=l-o,ct=a-s,gt=Math.floor(ht/k),ni=Math.floor(ct/g),ti=(ht-gt*k)/2,ii=(ct-ni*g)/2,lt=[],at=[],nt=[],tt=[],vt=Infinity,yt=Infinity,y=a-ii,it=0;y>=s;){for(var pt=[],wt=[],p=o+ti,rt=0;p<=l;)w=ki([p,y]),b=noi(w,f),pt.push(b?0:1),wt.push(p+"|"+y),ut=tr(w,n),!b&&ut<vt&&(vt=ut,nt={x:rt,y:it}),ft=tr(w,t),!b&&ft<yt&&(yt=ft,tt={x:rt,y:it}),p+=k,rt++;at.push(pt);lt.push(wt);y-=g;it++}var et=new rp(at,{diagonal:!0}),ri=et.grid[nt.y][nt.x],ui=et.grid[tt.y][tt.x],fi=bb.search(et,ri,ui),ot=[h];return fi.forEach(function(n){var t=lt[n.x][n.y].split("|");ot.push([+t[0],+t[1]])}),ot.push(c),ll(fr(ot))}function noi(n,t){for(var i=0;i<t.features.length;i++)if(pr(n,t.features[i]))return!0;return!1}function toi(n){return n[0]}function ioi(n){return n[1]}function lg(){this._=null}function ag(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function kb(n,t){var i=t,r=t.R,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.R=r.L;i.R&&(i.R.U=i);r.L=i}function db(n,t){var i=t,r=t.L,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.L=r.R;i.L&&(i.L.U=i);r.R=i}function hat(n){while(n.L)n=n.L;return n}function gb(n,t,i,r){var u=[null,null],f=be.push(u)-1;return u.left=n,u.right=t,i&&vg(u,n,t,i),r&&vg(u,t,n,r),os[n.index].halfedges.push(f),os[t.index].halfedges.push(f),u}function nk(n,t,i){var r=[t,i];return r.left=n,r}function vg(n,t,i,r){n[0]||n[1]?n.left===i?n[1]=r:n[0]=r:(n[0]=r,n.left=t,n.right=i)}function roi(n,t,i,r,u){var a=n[0],v=n[1],c=a[0],l=a[1],y=v[0],p=v[1],e=0,o=1,s=y-c,h=p-l,f;if(f=t-c,s||!(f>0)){if(f/=s,s<0){if(f<e)return;f<o&&(o=f)}else if(s>0){if(f>o)return;f>e&&(e=f)}if(f=r-c,s||!(f<0)){if(f/=s,s<0){if(f>o)return;f>e&&(e=f)}else if(s>0){if(f<e)return;f<o&&(o=f)}if(f=i-l,h||!(f>0)){if(f/=h,h<0){if(f<e)return;f<o&&(o=f)}else if(h>0){if(f>o)return;f>e&&(e=f)}if(f=u-l,h||!(f<0)){if(f/=h,h<0){if(f>o)return;f>e&&(e=f)}else if(h>0){if(f<e)return;f<o&&(o=f)}return!(e>0)&&!(o<1)?!0:(e>0&&(n[0]=[c+e*s,l+e*h]),o<1&&(n[1]=[c+o*s,l+o*h]),!0)}}}}}function uoi(n,t,i,r,u){var s=n[1];if(s)return!0;var f=n[0],y=n.left,p=n.right,c=y[0],l=y[1],a=p[0],v=p[1],h=(c+a)/2,w=(l+v)/2,e,o;if(v===l){if(h<t||h>=r)return;if(c>a){if(f){if(f[1]>=u)return}else f=[h,i];s=[h,u]}else{if(f){if(f[1]<i)return}else f=[h,u];s=[h,i]}}else if(e=(c-a)/(v-l),o=w-e*h,e<-1||e>1)if(c>a){if(f){if(f[1]>=u)return}else f=[(i-o)/e,i];s=[(u-o)/e,u]}else{if(f){if(f[1]<i)return}else f=[(u-o)/e,u];s=[(i-o)/e,i]}else if(l<v){if(f){if(f[0]>=r)return}else f=[t,e*t+o];s=[r,e*r+o]}else{if(f){if(f[0]<t)return}else f=[r,e*r+o];s=[t,e*t+o]}return n[0]=f,n[1]=s,!0}function foi(n,t,i,r){for(var f=be.length,u;f--;)uoi(u=be[f],n,t,i,r)&&roi(u,n,t,i,r)&&(Math.abs(u[0][0]-u[1][0])>cr||Math.abs(u[0][1]-u[1][1])>cr)||delete be[f]}function eoi(n){return os[n.index]={site:n,halfedges:[]}}function ooi(n,t){var u=n.site,i=t.left,r=t.right;return(u===r&&(r=i,i=u),r)?Math.atan2(r[1]-i[1],r[0]-i[0]):(u===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function cat(n,t){return t[+(t.left!==n.site)]}function soi(n,t){return t[+(t.left===n.site)]}function hoi(){for(var e,u,n,t,f,i,r=0,o=os.length;r<o;++r)if((e=os[r])&&(t=(u=e.halfedges).length)){for(f=new Array(t),i=new Array(t),n=0;n<t;++n)f[n]=n,i[n]=ooi(e,be[u[n]]);for(f.sort(function(n,t){return i[t]-i[n]}),n=0;n<t;++n)i[n]=u[f[n]];for(n=0;n<t;++n)u[n]=i[n]}}function coi(n,t,i,r){for(var w=os.length,f,e,o,s,y,b,c,l,p,a,v,h=!0,k,d,g,nt,u=0;u<w;++u)if(f=os[u]){for(e=f.site,s=f.halfedges,o=s.length;o--;)be[s[o]]||s.splice(o,1);for(o=0,y=s.length;o<y;)p=soi(f,be[s[o]]),a=p[0],v=p[1],b=cat(f,be[s[++o%y]]),c=b[0],l=b[1],(Math.abs(a-c)>cr||Math.abs(v-l)>cr)&&(s.splice(o,0,be.push(nk(e,p,Math.abs(a-n)<cr&&r-v>cr?[n,Math.abs(c-n)<cr?l:r]:Math.abs(v-r)<cr&&i-a>cr?[Math.abs(l-r)<cr?c:i,r]:Math.abs(a-i)<cr&&v-t>cr?[i,Math.abs(c-i)<cr?l:t]:Math.abs(v-t)<cr&&a-n>cr?[Math.abs(l-t)<cr?c:n,t]:null))-1),++y);y&&(h=!1)}if(h){for(nt=Infinity,u=0,h=null;u<w;++u)(f=os[u])&&(e=f.site,k=e[0]-n,d=e[1]-t,g=k*k+d*d,g<nt&&(nt=g,h=f));if(h){var tt=[n,t],it=[n,r],rt=[i,r],ut=[i,t];h.halfedges.push(be.push(nk(e=h.site,tt,it))-1,be.push(nk(e,it,rt))-1,be.push(nk(e,rt,ut))-1,be.push(nk(e,ut,tt))-1)}}for(u=0;u<w;++u)(f=os[u])&&(f.halfedges.length||delete os[u])}function loi(){ag(this);this.x=this.y=this.arc=this.site=this.cy=null}function up(n){var w=n.P,b=n.N,r,t;if(w&&b){var s=w.site,h=n.site,c=b.site;if(s!==c){var l=h[0],a=h[1],u=s[0]-l,f=s[1]-a,e=c[0]-l,o=c[1]-a,v=2*(u*o-f*e);if(!(v>=-vat)){var k=u*u+f*f,d=e*e+o*o,y=(o*k-f*d)/v,p=(u*d-e*k)/v,i=fut.pop()||new loi;for(i.arc=n,i.site=h,i.x=y+l,i.y=(i.cy=p+a)+Math.sqrt(y*y+p*p),n.circle=i,r=null,t=tk._;t;)if(i.y<t.y||i.y===t.y&&i.x<=t.x)if(t.L)t=t.L;else{r=t.P;break}else if(t.R)t=t.R;else{r=t;break}tk.insert(r,i);r||(eut=i)}}}}function fp(n){var t=n.circle;t&&(t.P||(eut=t.N),tk.remove(t),fut.push(t),ag(t),n.circle=null)}function aoi(){ag(this);this.edge=this.site=this.circle=null}function lat(n){var t=out.pop()||new aoi;return t.site=n,t}function sut(n){fp(n);ep.remove(n);out.push(n);ag(n)}function voi(n){var c=n.circle,f=c.x,e=c.cy,l=[f,e],o=n.P,s=n.N,r=[n],i,t,h,u;for(sut(n),i=o;i.circle&&Math.abs(f-i.circle.x)<cr&&Math.abs(e-i.circle.cy)<cr;)o=i.P,r.unshift(i),sut(i),i=o;for(r.unshift(i),fp(i),t=s;t.circle&&Math.abs(f-t.circle.x)<cr&&Math.abs(e-t.circle.cy)<cr;)s=t.N,r.push(t),sut(t),t=s;for(r.push(t),fp(t),h=r.length,u=1;u<h;++u)t=r[u],i=r[u-1],vg(t.edge,i.site,t.site,l);i=r[0];t=r[h-1];t.edge=gb(i.site,t.site,null,l);up(i);up(t)}function yoi(n){for(var w=n[0],b=n[1],t,i,l,a,r=ep._,u;r;)if(l=aat(r,b)-w,l>cr)r=r.L;else if(a=w-poi(r,b),a>cr){if(!r.R){t=r;break}r=r.R}else{l>-cr?(t=r.P,i=r):a>-cr?(t=r,i=r.N):t=i=r;break}if(eoi(n),u=lat(n),ep.insert(t,u),t||i){if(t===i){fp(t);i=lat(t.site);ep.insert(u,i);u.edge=i.edge=gb(t.site,u.site);up(t);up(i);return}if(!i){u.edge=gb(t.site,u.site);return}fp(t);fp(i);var f=t.site,v=f[0],y=f[1],e=n[0]-v,o=n[1]-y,s=i.site,h=s[0]-v,c=s[1]-y,k=2*(e*c-o*h),d=e*e+o*o,g=h*h+c*c,p=[(c*d-o*g)/k+v,(e*g-h*d)/k+y];vg(i.edge,f,s,p);u.edge=gb(f,n,null,p);i.edge=gb(n,s,null,p);up(t);up(i)}}function aat(n,t){var i=n.site,u=i[0],l=i[1],f=l-t,e;if(!f)return u;if(e=n.P,!e)return-Infinity;i=e.site;var o=i[0],a=i[1],r=a-t;if(!r)return o;var s=o-u,h=1/f-1/r,c=s/r;return h?(-c+Math.sqrt(c*c-2*h*(s*s/(-2*r)-a+r/2+l-f/2)))/h+u:(u+o)/2}function poi(n,t){var r=n.N,i;return r?aat(r,t):(i=n.site,i[1]===t?i[0]:Infinity)}function woi(n,t,i){return(n[0]-i[0])*(t[1]-n[1])-(n[0]-t[0])*(i[1]-n[1])}function boi(n,t){return t[1]-n[1]||t[0]-n[0]}function hut(n,t){var i=n.sort(boi).pop(),u,f,r;for(be=[],os=new Array(n.length),ep=new lg,tk=new lg;;)if(r=eut,i&&(!r||i[1]<r.y||i[1]===r.y&&i[0]<r.x))(i[0]!==u||i[1]!==f)&&(yoi(i),u=i[0],f=i[1]),i=n.pop();else if(r)voi(r.arc);else break;if(hoi(),t){var e=+t[0][0],o=+t[0][1],s=+t[1][0],h=+t[1][1];foi(e,o,s,h);coi(e,o,s,h)}this.edges=be;this.cells=os;ep=tk=be=os=null}function koi(n){return n=n.slice(),n.push(n[0]),ct([n])}function doi(n,t){if(t=t||{},!v(t))throw new Error("options is invalid");var i=t.bbox||[-180,-85,180,85];if(!n)throw new Error("points is required");if(!Array.isArray(i))throw new Error("bbox is invalid");return ph(n,"Point","points"),d(yat().x(function(n){return n.geometry.coordinates[0]}).y(function(n){return n.geometry.coordinates[1]}).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(n.features).map(koi))}function pat(n,t,i,r){var h,c,u,l,w,b;r=r||{};var a=r.steps||64,s=r.units||"kilometers",y=r.angle||0,k=r.pivot||n,p=r.properties||n.properties||{};if(!n)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!i)throw new Error("ySemiAxis is required");if(!v(r))throw new Error("options must be an object");if(!gi(a))throw new Error("steps must be a number");if(!gi(y))throw new Error("angle must be a number");for(h=lr(n),s==="degrees"?c=pu(y):(t=ip(n,t,90,{units:s}),i=ip(n,i,0,{units:s}),t=lr(t)[0]-h[0],i=lr(i)[1]-h[1]),u=[],l=0;l<a;l+=1){var f=l*-360/a,e=t*i/Math.sqrt(Math.pow(i,2)+Math.pow(t,2)*Math.pow(wat(f),2)),o=t*i/Math.sqrt(Math.pow(t,2)+Math.pow(i,2)/Math.pow(wat(f),2));f<-90&&f>=-270&&(e=-e);f<-180&&f>=-360&&(o=-o);s==="degrees"&&(w=e*Math.cos(c)+o*Math.sin(c),b=o*Math.cos(c)-e*Math.sin(c),e=w,o=b);u.push([e+h[0],o+h[1]])}return u.push(u[0]),s==="degrees"?ct([u],p):olt(ct([u],p),y,{pivot:k})}function wat(n){var t=n*Math.PI/180;return Math.tan(t)}function cut(n,t){var r,u;if(t=t||{},!v(t))throw new Error("options is invalid");if(r=t.properties,u=t.weight,!n)throw new Error("geojson is required");var f=0,e=0,i=0;return th(n,function(n,t,r){var o=r[u];if(o=o===undefined||o===null?1:o,!gi(o))throw new Error("weight value must be a number for feature index "+t);o=Number(o);o>0&&wu(n,function(n){f+=n[0]*o;e+=n[1]*o;i+=o})}),ki([f/i,e/i],r)}function goi(n,t){var i;if(t=t||{},!v(t))throw new Error("options is invalid");if(i=t.counter||10,!gi(i))throw new Error("counter must be a number");var u=t.weight,f=cut(n,{weight:t.weight}),r=d([]);return nr(n,function(n){r.features.push(vv(n,{weight:n.properties[u]}))}),r.properties={tolerance:t.tolerance,medianCandidates:[]},bat(f.geometry.coordinates,[0,0],r,i)}function bat(n,t,i,r){var s=i.properties.tolerance||.001,h=0,c=0,e=0,o=0,u,f;if(nr(i,function(t){var f=t.properties.weight,i=f===undefined||f===null?1:f,r,u;if(i=Number(i),!gi(i))throw new Error("weight value must be a number");i>0&&(o+=1,r=i*tr(t,n),r===0&&(r=1),u=i/r,h+=t.geometry.coordinates[0]*u,c+=t.geometry.coordinates[1]*u,e+=u)}),o<1)throw new Error("no features to measure");return u=h/e,f=c/e,o===1||r===0||Math.abs(u-t[0])<s&&Math.abs(f-t[1])<s?ki([u,f],{medianCandidates:i.properties.medianCandidates}):(i.properties.medianCandidates.push([u,f]),bat([u,f],n,i,r-1))}function nsi(n,t){if(t=t||{},!v(t))throw new Error("options is invalid");var s=t.steps||64,u=t.weight,h=t.properties||{};if(!gi(s))throw new Error("steps must be a number");if(!v(h))throw new Error("properties must be a number");var c=ec(n).length,r=cut(n,{weight:u}),l=0,a=0,f=0;nr(n,function(n){var i=n.properties[u]||1,t=kat(p(n),p(r));l+=Math.pow(t.x,2)*i;a+=Math.pow(t.y,2)*i;f+=t.x*t.y*i});var y=l-a,tt=Math.sqrt(Math.pow(y,2)+4*Math.pow(f,2)),it=2*f,i=Math.atan((y+tt)/it),w=i*180/Math.PI,b=0,k=0,e=0;nr(n,function(n){var f=n.properties[u]||1,t=kat(p(n),p(r));b+=Math.pow(t.x*Math.cos(i)-t.y*Math.sin(i),2)*f;k+=Math.pow(t.x*Math.sin(i)+t.y*Math.cos(i),2)*f;e+=f});var g=Math.sqrt(2*b/e),nt=Math.sqrt(2*k/e),o=pat(r,g,nt,{units:"degrees",angle:w,steps:s,properties:h}),rt=gtt(n,d([o])),ut={meanCenterCoordinates:p(r),semiMajorAxis:g,semiMinorAxis:nt,numberOfFeatures:c,angle:w,percentageWithinEllipse:100*ec(rt).length/c};return o.properties.standardDeviationalEllipse=ut,o}function kat(n,t){return{x:n[0]-t[0],y:n[1]-t[1]}}function ik(n){if(v(n)&&(n=n.bbox),n&&!Array.isArray(n))throw new Error("bbox is invalid");return n?usi(n):[isi(),rsi()]}function dat(n,t){var u,i,r;if(t=t||{},!v(t))throw new Error("options is invalid");for(u=t.bbox,(n===undefined||n===null)&&(n=1),i=[],r=0;r<n;r++)i.push(ki(ik(u)));return d(i)}function gat(n,t){function h(n,t,i){i[t]=t>0?n+i[t-1]:n}function c(n){n=n*2*Math.PI/r[r.length-1];var t=Math.random();i.push([t*u*Math.sin(n),t*u*Math.cos(n)])}var e,o,i,r;if(t=t||{},!v(t))throw new Error("options is invalid");var s=t.bbox,f=t.num_vertices,u=t.max_radial_length;for((n===undefined||n===null)&&(n=1),gi(f)||(f=10),gi(u)||(u=10),e=[],o=0;o<n;o++)i=[],r=Array.apply(null,new Array(f+1)).map(Math.random),r.forEach(h),r.forEach(c),i[i.length-1]=i[0],i=i.map(tsi(ik(s))),e.push(ct([i]));return d(e)}function nvt(n,t){var o,s,h,r,i;if(t=t||{},!v(t))throw new Error("options is invalid");var a=t.bbox,u=t.num_vertices,f=t.max_length,e=t.max_rotation;for((n===undefined||n===null)&&(n=1),(!gi(u)||u<2)&&(u=10),gi(f)||(f=.0001),gi(e)||(e=Math.PI/8),o=[],s=0;s<n;s++){for(h=ik(a),r=[h],i=0;i<u-1;i++){var y=i===0?Math.random()*2*Math.PI:Math.tan((r[i][1]-r[i-1][1])/(r[i][0]-r[i-1][0])),c=y+(Math.random()-.5)*e*2,l=Math.random()*f;r.push([r[i][0]+l*Math.cos(c),r[i][1]+l*Math.sin(c)])}o.push(fr(r))}return d(o)}function tsi(n){return function(t){return[t[0]+n[0],t[1]+n[1]]}}function tvt(){return Math.random()-.5}function isi(){return tvt()*360}function rsi(){return tvt()*180}function usi(n){return[Math.random()*(n[2]-n[0])+n[0],Math.random()*(n[3]-n[1])+n[1]]}function rvt(n,t){if(!n)throw new Error("geojson is required");if(n.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t===undefined||t===null)throw new Error("filter is required");var i=[];return nr(n,function(n){yg(n.properties,t)&&i.push(n)}),d(i)}function lut(n,t,i){var f,e,r,u;if(!n)throw new Error("geojson is required");if(n.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(t===undefined||t===null)throw new Error("property is required");for(f=aut(n,t),e=Object.keys(f),r=0;r<e.length;r++){var o=e[r],s=f[o],h=[];for(u=0;u<s.length;u++)h.push(n.features[s[u]]);i(d(h),o,r)}}function uvt(n,t,i,r){var u=r;return lut(n,t,function(n,t,f){u=f===0&&r===undefined?n:i(u,n,t,f)}),u}function aut(n,t){var i={};return nr(n,function(n,r){var f=n.properties||{},u;f.hasOwnProperty(t)&&(u=f[t],i.hasOwnProperty(u)?i[u].push(r):i[u]=[r])}),i}function yg(n,t){var r,i;if(n===undefined)return!1;if(r=typeof t,r==="number"||r==="string")return n.hasOwnProperty(t);if(Array.isArray(t)){for(i=0;i<t.length;i++)if(!yg(n,t[i]))return!1;return!0}return vut(n,t)}function vut(n,t){for(var r,u=Object.keys(t),i=0;i<u.length;i++)if(r=u[i],n[r]!==t[r])return!1;return!0}function fvt(n,t){var u,i,r;if(!t)return{};if(!t.length)return{};for(u={},i=0;i<t.length;i++)r=t[i],n.hasOwnProperty(r)&&(u[r]=n[r]);return u}function lo(){}function vp(n){this.message=n||""}function fk(n){this.message=n||""}function dg(){}function avt(n){return n===null?vc:n.color}function sr(n){return n===null?null:n.parent}function yc(n,t){n!==null&&(n.color=t)}function but(n){return n===null?null:n.left}function vvt(n){return n===null?null:n.right}function cf(){this.root_=null;this.size_=0}function yvt(){}function fh(){this.array_=[];arguments[0]instanceof eu&&this.addAll(arguments[0])}function osi(){}function ssi(){}function hsi(){}function csi(){}function lsi(){}function un(n){this.message=n||""}function sh(){this.array_=[]}function ksi(n,t){var i=to(n),r=to(t),u=n.properties||{},o,s;if(i=ryt(i),r=ryt(r),!i)return null;if(!r)return fu(i,u);var f=new nw,h=f.read(i),c=f.read(r),e=tt.difference(h,c);return e.isEmpty()?null:(o=new tw,s=o.write(e),fu(s,u))}function ryt(n){switch(n.type){case"Polygon":return lb(n)>1?n:null;case"MultiPolygon":var t=[];if(su(n,function(n){lb(n)>1&&t.push(n.geometry.coordinates)}),t.length)return{type:"MultiPolygon",coordinates:t}}}function vn(){this.reset()}function uyt(n,t,i){var r=n.s=t+i,u=r-t,f=r-u;n.t=t-f+(i-u)}function dsi(n){return n>1?0:n<-1?ur:Math.acos(n)}function bk(n){return n>1?fs:n<-1?-fs:Math.asin(n)}function kk(){}function pn(n,t){n&&bft.hasOwnProperty(n.type)&&bft[n.type](n,t)}function kft(n,t,i){var u=-1,f=n.length-i,r;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function hyt(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)kft(n[i],t,1);t.polygonEnd()}function dft(n){return[wk(n[1],n[0]),bk(n[2])]}function vw(n){var t=n[0],i=n[1],r=sf(i);return[r*sf(t),r*df(t),df(i)]}function wn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function bn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function gft(n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function kn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function net(n){var t=yn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;n[2]/=t}function iet(n,t){return[n>ur?n-sl:n<-ur?n+sl:n,t]}function cyt(n,t,i){return(n%=sl)?t||i?tet(ayt(n),vyt(t,i)):ayt(n):t||i?vyt(t,i):iet}function lyt(n){return function(t,i){return t+=n,[t>ur?t-sl:t<-ur?t+sl:t,i]}}function ayt(n){var t=lyt(n);return t.invert=lyt(-n),t}function vyt(n,t){function e(n,t){var e=sf(t),o=sf(n)*e,s=df(n)*e,h=df(t),c=h*i+o*r;return[wk(s*u-c*f,o*i-h*r),bk(c*u+s*f)]}var i=sf(n),r=df(n),u=sf(t),f=df(t);return e.invert=function(n,t){var e=sf(t),o=sf(n)*e,s=df(n)*e,h=df(t),c=h*u-s*f;return[wk(s*u+h*f,o*i+c*r),bk(c*i-o*r)]},e}function thi(n,t,i,r,u,f){var s,e;if(i){var o=sf(t),h=df(t),c=r*i;for(u==null?(u=t+r*sl,f=t-c/2):(u=pyt(o,u),f=pyt(o,f),(r>0?u<f:u>f)&&(u+=r*sl)),e=u;r>0?e>f:e<f;e-=c)s=dft([o,-h*sf(e),-h*df(e)]),n.point(s[0],s[1])}}function pyt(n,t){t=vw(t);t[0]-=n;net(t);var i=dsi(-t[1]);return((-t[2]<0?-i:i)+sl-tu)%sl}function gn(n,t,i,r){this.x=n;this.z=t;this.o=i;this.e=r;this.v=!1;this.n=this.p=null}function byt(n){if(r=n.length){for(var r,u=0,t=n[0],i;++u<r;)t.n=i=n[u],i.p=t,t=i;t.n=i=n[0];i.p=t}}function rhi(n){return function(t,i){return uet(n(t),i)}}function uhi(n,t,i,r){function f(u,f){return n<=u&&u<=i&&t<=f&&f<=r}function e(f,e,s,h){var c=0,l=0;if(f==null||(c=u(f,s))!==(l=u(e,s))||o(f,e)<0^s>0){do h.point(c===0||c===3?n:i,c>1?r:t);while((c=(c+s+4)%4)!==l)}else h.point(e[0],e[1])}function u(r,u){return oe(r[0]-n)<tu?u>0?0:3:oe(r[0]-i)<tu?u>0?2:1:oe(r[1]-t)<tu?u>0?1:0:u>0?3:2}function s(n,t){return o(n.x,t.x)}function o(n,t){var i=u(n,1),r=u(t,1);return i!==r?i-r:i===0?t[1]-n[1]:i===1?n[0]-t[0]:i===2?n[1]-t[1]:t[0]-n[0]}return function(u){function tt(n,t){f(n,t)&&o.point(n,t)}function rt(){for(var o=0,s=0,a=c.length;s<a;++s)for(var h=c[s],l=1,v=h.length,u=h[0],f,t,e=u[0],i=u[1];l<v;++l)f=e,t=i,u=h[l],e=u[0],i=u[1],t<=r?i>r&&(e-f)*(r-t)>(i-t)*(n-f)&&++o:i<=r&&(e-f)*(r-t)<(i-t)*(n-f)&&--o;return o}function ut(){o=p;h=[];c=[];y=!0}function ft(){var n=rt(),t=y&&n,i=(h=dyt(h)).length;(t||i)&&(u.polygonStart(),t&&(u.lineStart(),e(null,null,1,u),u.lineEnd()),i&&ret(h,s,n,e,u),u.polygonEnd());o=u;h=c=w=null}function et(){k.point=it;c&&c.push(w=[]);b=!0;l=!1;a=v=NaN}function ot(){h&&(it(d,g),nt&&l&&p.rejoin(),h.push(p.result()));k.point=tt;l&&o.lineEnd()}function it(u,e){var s=f(u,e),h,p;c&&w.push([u,e]);b?(d=u,g=e,nt=s,b=!1,s&&(o.lineStart(),o.point(u,e))):s&&l?o.point(u,e):(h=[a=Math.max(ntt,Math.min(dk,a)),v=Math.max(ntt,Math.min(dk,v))],p=[u=Math.max(ntt,Math.min(dk,u)),e=Math.max(ntt,Math.min(dk,e))],ihi(h,p,n,t,i,r)?(l||(o.lineStart(),o.point(h[0],h[1])),o.point(p[0],p[1]),s||o.lineEnd(),y=!1):s&&(o.lineStart(),o.point(u,e),y=!1));a=u;v=e;l=s}var o=u,p=wyt(),h,c,w,d,g,nt,a,v,l,b,y,k={point:tt,lineStart:et,lineEnd:ot,polygonStart:ut,polygonEnd:ft};return k}}function ehi(n,t){n<yw&&(yw=n);n>gk&&(gk=n);t<ttt&&(ttt=t);t>itt&&(itt=t)}function shi(n){return n.length>1}function hhi(n,t){return((n=n.x)[0]<0?n[1]-fs-tu:fs-n[1])-((t=t.x)[0]<0?t[1]-fs-tu:fs-t[1])}function chi(n){var i=NaN,t=NaN,r=NaN,u;return{lineStart:function(){n.lineStart();u=1},point:function(f,e){var o=f>0?ur:-ur,s=oe(f-i);oe(s-ur)<tu?(n.point(i,t=(t+e)/2>0?fs:-fs),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(o,t),n.point(f,t),u=0):r!==o&&s>=ur&&(oe(i-r)<tu&&(i-=r*tu),oe(f-o)<tu&&(f-=o*tu),t=lhi(i,t,f,e),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(o,t),u=0);n.point(i=f,t=e);r=o},lineEnd:function(){n.lineEnd();i=t=NaN},clean:function(){return 2-u}}}function lhi(n,t,i,r){var u,f,e=df(n-i);return oe(e)>tu?pft((df(t)*(f=sf(r))*df(i)-df(r)*(u=sf(t))*df(n))/(u*f*e)):(t+r)/2}function ahi(n,t,i,r){var u,f;n==null?(u=i*fs,r.point(-ur,u),r.point(0,u),r.point(ur,u),r.point(ur,0),r.point(ur,-u),r.point(0,-u),r.point(-ur,-u),r.point(-ur,0),r.point(-ur,u)):oe(n[0]-t[0])>tu?(f=n[0]<t[0]?ur:-ur,u=i*f/2,r.point(-f,u),r.point(0,u),r.point(f,u)):r.point(t[0],t[1])}function ipt(n){return function(t){var i=new set;for(var r in n)i[r]=n[r];return i.stream=t,i}}function set(){}function rpt(n,t,i){var e=t[1][0]-t[0][0],o=t[1][1]-t[0][1],u=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]);u!=null&&n.clipExtent(null);gsi(i,n.stream(npt));var r=npt.result(),f=Math.min(e/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(e-f*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(o-f*(r[1][1]+r[0][1]))/2;return u!=null&&n.clipExtent(u),n.scale(f*150).translate([s,h])}function vhi(n,t,i){return rpt(n,[[0,0],t],i)}function phi(n){return ipt({point:function(t,i){t=n(t,i);this.stream.point(t[0],t[1])}})}function whi(n,t){function i(r,u,f,e,o,s,h,c,l,a,v,y,p,w){var g=h-r,nt=c-u,rt=g*g+nt*nt;if(rt>4*t&&p--){var k=e+a,d=o+v,b=s+y,ut=yn(k*k+d*d+b*b),ct=bk(b/=ut),ft=oe(oe(b)-1)<tu||oe(f-l)<tu?(f+l)/2:wk(d,k),et=n(ft,ct),tt=et[0],it=et[1],ot=tt-r,st=it-u,ht=nt*ot-g*st;(ht*ht/rt>t||oe((g*ot+nt*st)/rt-.5)>.3||e*a+o*v+s*y<yhi)&&(i(r,u,f,e,o,s,tt,it,ft,k/=ut,d/=ut,b,p,w),w.point(tt,it),i(tt,it,ft,k,d,b,h,c,l,a,v,y,p,w))}}return function(t){function d(i,r){i=n(i,r);t.point(i[0],i[1])}function c(){u=NaN;r.point=l;t.lineStart()}function l(r,c){var l=vw([r,c]),a=n(r,c);i(u,f,h,e,o,s,u=a[0],f=a[1],h=r,e=l[0],o=l[1],s=l[2],upt,t);t.point(u,f)}function a(){r.point=d;t.lineEnd()}function g(){c();r.point=nt;r.lineEnd=tt}function nt(n,t){l(v=n,t);y=u;p=f;w=e;b=o;k=s;r.point=l}function tt(){i(u,f,h,e,o,s,y,p,v,w,b,k,upt,t);r.lineEnd=a;a()}var v,y,p,w,b,k,h,u,f,e,o,s,r={point:d,lineStart:c,lineEnd:a,polygonStart:function(){t.polygonStart();r.lineStart=g},polygonEnd:function(){t.polygonEnd();r.lineStart=c}};return r}}function bhi(n){return khi(function(){return n})()}function khi(n){function t(n){return n=b(n[0]*kf,n[1]*kf),[n[0]*i+f,e-n[1]*i]}function st(n){return n=b.invert((n[0]-f)/i,(e-n[1])/i),n&&[n[0]*yh,n[1]*yh]}function ot(n,t){return n=r(n,t),[n[0]*i+f,e-n[1]*i]}function u(){b=tet(rt=cyt(y,p,w),r);var n=r(a,v);return f=c-n[0]*i,e=l+n[1]*i,h()}function h(){return s=it=null,t}var r,i=150,c=480,l=250,f,e,a=0,v=0,y=0,p=0,w=0,rt,b,k=null,ut=oet,o=null,d,g,nt,ft=gyt,tt=.5,et=fpt(ot,tt),s,it;return t.stream=function(n){return s&&it===n?s:s=ept(ut(rt,et(ft(it=n))))},t.clipAngle=function(n){return arguments.length?(ut=+n?tpt(k=n*kf,6*kf):(k=null,oet),h()):k*yh},t.clipExtent=function(n){return arguments.length?(ft=n==null?(o=d=g=nt=null,gyt):uhi(o=+n[0][0],d=+n[0][1],g=+n[1][0],nt=+n[1][1]),h()):o==null?null:[[o,d],[g,nt]]},t.scale=function(n){return arguments.length?(i=+n,u()):i},t.translate=function(n){return arguments.length?(c=+n[0],l=+n[1],u()):[c,l]},t.center=function(n){return arguments.length?(a=n[0]%360*kf,v=n[1]%360*kf,u()):[a*yh,v*yh]},t.rotate=function(n){return arguments.length?(y=n[0]%360*kf,p=n[1]%360*kf,w=n.length>2?n[2]%360*kf:0,u()):[y*yh,p*yh,w*yh]},t.precision=function(n){return arguments.length?(et=fpt(ot,tt=n*n),h()):yn(tt)},t.fitExtent=function(n,i){return rpt(t,n,i)},t.fitSize=function(n,i){return vhi(t,n,i)},function(){return r=n.apply(this,arguments),t.invert=r.invert&&st,u()}}function opt(n,t){return[n,oyt(syt((fs+t)/2))]}function dhi(n){function e(){var e=ur*o(),s=t(yyt(t.rotate()).invert([0,0]));return c(i==null?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:n===opt?[[Math.max(s[0]-e,i),r],[Math.min(s[0]+e,u),f]]:[[i,Math.max(s[1]-e,r)],[u,Math.min(s[1]+e,f)]])}var t=bhi(n),s=t.center,o=t.scale,h=t.translate,c=t.clipExtent,i=null,r,u,f;return t.scale=function(n){return arguments.length?(o(n),e()):o()},t.translate=function(n){return arguments.length?(h(n),e()):h()},t.center=function(n){return arguments.length?(s(n),e()):s()},t.clipExtent=function(n){return arguments.length?(n==null?i=r=u=f=null:(i=+n[0][0],r=+n[0][1],u=+n[1][0],f=+n[1][1]),e()):i==null?null:[[i,r],[u,f]]},e()}function spt(n,t){return[oyt(syt((fs+t)/2)),-n]}function ghi(n,t,i){var u,r,f;if(i=i||{},u=i.units,r=i.steps||64,!n)throw new Error("geojson is required");if(typeof i!="object")throw new Error("options must be an object");if(typeof r!="number")throw new Error("steps must be an number");if(t===undefined)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");r=r||64;u=u||"kilometers";f=[];switch(n.type){case"GeometryCollection":return th(n,function(n){var i=rtt(n,t,u,r);i&&f.push(i)}),d(f);case"FeatureCollection":return nr(n,function(n){var i=rtt(n,t,u,r);i&&nr(i,function(n){n&&f.push(n)})}),d(f)}return rtt(n,t,u,r)}function rtt(n,t,i,r){var l=n.properties||{},u=n.type==="Feature"?n.geometry:n,o,c,s,h,e;if(u.type==="GeometryCollection")return o=[],th(n,function(n){var u=rtt(n,t,i,r);u&&o.push(u)}),d(o);s=hu(n);h=s[1]>50&&s[3]>50;c=h?{type:u.type,coordinates:lpt(u.coordinates,vpt(u))}:ha(u);var a=new nw,v=a.read(c),y=py(hv(t,i),"meters"),f=bu.bufferOp(v,y),p=new tw;return(f=p.write(f),cpt(f.coordinates))?undefined:(e=h?{type:f.type,coordinates:apt(f.coordinates,vpt(u))}:ng(f),e.geometry?e:fu(e,l))}function cpt(n){return Array.isArray(n[0])?cpt(n[0]):isNaN(n[0])}function lpt(n,t){return typeof n[0]!="object"?t(n):n.map(function(n){return lpt(n,t)})}function apt(n,t){return typeof n[0]!="object"?t.invert(n):n.map(function(n){return apt(n,t)})}function vpt(n){var t=yd(n).geometry.coordinates.reverse(),i=t.map(function(n){return-n});return hpt().center(t).rotate(i).scale(rf)}function het(){for(var r,i=new nw,n=i.read(JSON.stringify(arguments[0].geometry)),t=1;t<arguments.length;t++)n=aw.union(n,i.read(JSON.stringify(arguments[t].geometry)));return r=new tw,n=r.write(n),{type:"Feature",geometry:n,properties:arguments[0].properties}}function pw(n,t){var i=to(n),r=to(t),e,o;if(ll(np(r,{precision:4})).coordinates[0].length<4||ll(np(i,{precision:4})).coordinates[0].length<4)return null;var u=new nw,s=u.read(np(i)),h=u.read(np(r)),f=tt.intersection(s,h);return f.isEmpty()?null:(e=new tw,o=e.write(f),fu(o))}function nci(n,t,i){var u,r;if(!Array.isArray(t))throw new Error("Get closest expects an array as second argument");return t.forEach(function(t,f){var e=i(t,n);e>=0&&(typeof r=="undefined"||e<r)&&(r=e,u=f)}),u}function tci(n,t){return nci(n,t,function(n,t){return n-t})}function ici(n,t){var o,e,u,i,h;if(t=t||{},!v(t))throw new Error("options is invalid");o=t.propertyName;ph(n,"Polygon","dissolve");var s=gf(n),r=s.features,f=[];r.forEach(function(n,t){n.properties.origIndexPosition=t});e=cb();e.load(s);for(u in r)if(i=r[u],h=!1,e.search(i).features.forEach(function(n){var t,c,s;(i=r[u],t=n.properties.origIndexPosition,f.length>0&&t!==0&&(t>f[f.length-1]?t=t-f.length:(c=tci(t,f),c!==0&&(t=t-c))),t!==+u)&&(s=r[t],s&&i)&&(o===undefined||s.properties[o]===i.properties[o])&&nat(i,s)&&rci(i,s)&&(r[u]=het(i,s),f.push(n.properties.origIndexPosition),f.sort(function(n,t){return n-t}),e.remove(n),r.splice(t,1),i.properties.origIndexPosition=u,e.remove(i,function(n,t){return n.properties.origIndexPosition===t.properties.origIndexPosition}),h=!0)}),h){if(!i)continue;i.properties.origIndexPosition=u;e.insert(i);u--}return r.forEach(function(n){delete n.properties.origIndexPosition;delete n.bbox}),s}function rci(n,t){var i=fr(ec(n)),r=fr(ec(t)),u=al(i,r).features;return u.length>0}function ypt(n,t,i){var y,p,w,ft,f,h,e,et,ot,b,k;if(i=i||{},!v(i))throw new Error("options is invalid");var st=i.properties||{},pt=i.triangles,u=i.mask;if(t===null||t===undefined)throw new Error("cellSide is required");if(!gi(t))throw new Error("cellSide is invalid");if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be array");if(n.length!==4)throw new Error("bbox must contain 4 numbers");if(u&&["Polygon","MultiPolygon"].indexOf(er(u))===-1)throw new Error("options.mask must be a (Multi)Polygon");var o=n[0],s=n[1],c=n[2],l=n[3],ht=(s+l)/2,ct=(o+c)/2,wt=t*2/tr([o,ht],[c,ht],i),g=wt*(c-o),bt=t*2/tr([ct,s],[ct,l],i),nt=bt*(l-s),a=g/2,tt=a*2,r=Math.sqrt(3)/2*nt,lt=c-o,it=l-s,rt=3/4*tt,kt=r,dt=(lt-tt)/(tt-a/2),at=Math.floor(dt),gt=(at*rt-a/2-lt)/2-a/2+rt/2,ut=Math.floor((it-r)/r),vt=(it-ut*r)/2,yt=ut*r-it>r/2;for(yt&&(vt-=r/4),y=[],p=[],w=0;w<6;w++)ft=Math.PI/3*w,y.push(Math.cos(ft)),p.push(Math.sin(ft));for(f=[],h=0;h<=at;h++)for(e=0;e<=ut;e++)(et=h%2==1,e===0&&et)||e===0&&yt||(ot=h*rt+o-gt,b=e*kt+s+vt,et&&(b-=r/2),pt===!0?fci([ot,b],g/2,nt/2,st,y,p).forEach(function(n){u?pw(u,n)&&f.push(n):f.push(n)}):(k=uci([ot,b],g/2,nt/2,st,y,p),u?pw(u,k)&&f.push(k):f.push(k)));return d(f)}function uci(n,t,i,r,u,f){for(var s,h,e=[],o=0;o<6;o++)s=n[0]+t*u[o],h=n[1]+i*f[o],e.push([s,h]);return e.push(e[0].slice()),ct([e],r)}function fci(n,t,i,r,u,f){for(var o,s=[],e=0;e<6;e++)o=[],o.push(n),o.push([n[0]+t*u[e],n[1]+i*f[e]]),o.push([n[0]+t*u[(e+1)%6],n[1]+i*f[(e+1)%6]]),o.push(n),s.push(ct([o],r));return s}function eci(n,t){var f=hci(t),u=sci(n),i=u[0],r=u[1];return i=ppt(i),r=ppt(r),oci(f,i,r)}function oci(n,t,i){var r=[];return r.push(n.geometry.coordinates[0]),su(t,function(n){r.push(n.geometry.coordinates[0])}),su(i,function(n){r.push(n.geometry.coordinates[0])}),ct(r)}function sci(n){var t=[],i=[];return su(n,function(n){var r=n.geometry.coordinates,u=r[0],f=r.slice(1);t.push(ct([u]));f.forEach(function(n){i.push(ct([n]))})}),[d(t),d(i)]}function hci(n){var t=n&&n.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return ct(t)}function ppt(n){if(n.features.length<=1)return n;var t=cci(n),r=[],i={};return su(n,function(n,u){var f,e,o;if(i[u])return!0;for(t.remove({index:u},wpt),i[u]=!0;;)if(f=hu(n),e=t.search({minX:f[0],minY:f[1],maxX:f[2],maxY:f[3]}),e.length>0&&(o=e.map(function(n){return i[n.index]=!0,t.remove({index:n.index},wpt),n.geojson}),o.push(n),n=het.apply(this,o)),e.length===0)break;r.push(n)}),d(r)}function wpt(n,t){return n.index===t.index}function cci(n){var t=lv(),i=[];return su(n,function(n,t){var r=hu(n);i.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:n,index:t})}),t.load(i),t}function bpt(n,t,i){var p,r,w,c;if(i=i||{},!v(i))throw new Error("options is invalid");var tt=i.properties,h=i.mask,l=[];if(t===null||t===undefined)throw new Error("cellSide is required");if(!gi(t))throw new Error("cellSide is invalid");if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be array");if(n.length!==4)throw new Error("bbox must contain 4 numbers");if(h&&["Polygon","MultiPolygon"].indexOf(er(h))===-1)throw new Error("options.mask must be a (Multi)Polygon");var u=n[0],f=n[1],a=n[2],y=n[3],it=t/tr([u,f],[a,f],i),o=it*(a-u),rt=t/tr([u,f],[u,y],i),s=rt*(y-f),b=a-u,k=y-f,g=Math.floor(b/o),nt=Math.floor(k/s),ut=(b-g*o)/2,ft=(k-nt*s)/2,e=u+ut;for(p=0;p<g;p++){for(r=f+ft,w=0;w<nt;w++)c=ct([[[e,r],[e,r+s],[e+o,r+s],[e+o,r],[e,r]]],tt),h?pw(h,c)&&l.push(c):l.push(c),r+=s;e+=o}return d(l)}function kpt(n,t,i){var c,r,s,h;if(i=i||{},!v(i))throw new Error("options is invalid");var o=i.properties,l=i.mask,a=[];if(t===null||t===undefined)throw new Error("cellSide is required");if(!gi(t))throw new Error("cellSide is invalid");if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be array");if(n.length!==4)throw new Error("bbox must contain 4 numbers");if(l&&["Polygon","MultiPolygon"].indexOf(er(l))===-1)throw new Error("options.mask must be a (Multi)Polygon");for(var p=t/tr([n[0],n[1]],[n[2],n[1]],i),e=p*(n[2]-n[0]),w=t/tr([n[0],n[1]],[n[0],n[3]],i),f=w*(n[3]-n[1]),y=0,u=n[0];u<=n[2];){for(c=0,r=n[1];r<=n[3];)s=null,h=null,y%2==0&&c%2==0?(s=ct([[[u,r],[u,r+f],[u+e,r],[u,r]]],o),h=ct([[[u,r+f],[u+e,r+f],[u+e,r],[u,r+f]]],o)):y%2==0&&c%2==1?(s=ct([[[u,r],[u+e,r+f],[u+e,r],[u,r]]],o),h=ct([[[u,r],[u,r+f],[u+e,r+f],[u,r]]],o)):c%2==0&&y%2==1?(s=ct([[[u,r],[u,r+f],[u+e,r+f],[u,r]]],o),h=ct([[[u,r],[u+e,r+f],[u+e,r],[u,r]]],o)):c%2==1&&y%2==1&&(s=ct([[[u,r],[u,r+f],[u+e,r],[u,r]]],o),h=ct([[[u,r+f],[u+e,r+f],[u+e,r],[u,r+f]]],o)),l?(pw(l,s)&&a.push(s),pw(l,h)&&a.push(h)):(a.push(s),a.push(h)),r+=f,c++;y++;u+=e}return d(a)}function lci(n,t,i){var f,e,s;if(i=i||{},typeof i!="object")throw new Error("options is invalid");var o=i.gridType,r=i.property,u=i.weight;if(!n)throw new Error("points is required");if(ph(n,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(u!==undefined&&typeof u!="number")throw new Error("weight must be a number");r=r||"elevation";o=o||"square";u=u||1;f=hu(n);switch(o){case"point":case"points":e=fct(f,t,i);break;case"square":case"squares":e=bpt(f,t,i);break;case"hex":case"hexes":e=ypt(f,t,i);break;case"triangle":case"triangles":e=kpt(f,t,i);break;default:throw new Error("invalid gridType");}return s=[],nr(e,function(t){var f=0,h=0,e;nr(n,function(n){var l=o==="point"?t:vv(t),c=tr(l,n,i),e,s;if(r!==undefined&&(e=n.properties[r]),e===undefined&&(e=n.geometry.coordinates[2]),e===undefined)throw new Error("zValue is missing");c===0&&(f=e);s=1/Math.pow(c,u);h+=s;f+=s*e});e=gf(t);e.properties[r]=f/h;s.push(e)}),d(s)}var rf=6371008.8,nd={meters:rf,metres:rf,millimeters:rf*1e3,millimetres:rf*1e3,centimeters:rf*100,centimetres:rf*100,kilometers:rf/1e3,kilometres:rf/1e3,miles:rf/1609.344,nauticalmiles:rf/1852,inches:rf*39.37,yards:rf/1.0936,feet:rf*3.28084,radians:1,degrees:rf/111325},cet={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:1/1e3,kilometres:1/1e3,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/rf,degrees:1/111325},td={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:.000247105,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},fwt=Object.freeze({earthRadius:rf,factors:nd,unitsFactors:cet,areaFactors:td,feature:fu,geometry:aet,point:ki,points:vet,polygon:ct,polygons:yet,lineString:fr,lineStrings:pet,featureCollection:d,multiLineString:fa,multiPoint:id,multiPolygon:yy,geometryCollection:utt,round:wet,radiansToLength:py,lengthToRadians:hv,lengthToDegrees:rd,bearingToAzimuth:ea,radiansToDegrees:oa,degreesToRadians:pu,convertLength:cv,convertArea:bet,isNumber:gi,isObject:v,validateBBox:wy,validateId:ud,radians2degrees:dpt,degrees2radians:gpt,distanceToDegrees:nwt,distanceToRadians:twt,radiansToDistance:iwt,bearingToAngle:rwt,convertDistance:uwt}),ewt=Object.freeze({coordEach:wu,coordReduce:fd,propEach:ftt,propReduce:ket,featureEach:nr,featureReduce:ett,coordAll:ec,geomEach:th,geomReduce:ott,flattenEach:su,flattenReduce:det,segmentEach:hl,segmentReduce:stt,lineEach:htt,lineReduce:ctt}),owt=Object.freeze({getCoord:lr,getCoords:p,containsNumber:ed,geojsonType:get,featureOf:ww,collectionOf:ph,getGeom:to,getGeomType:not,getType:er}),ltt,bw,rot,lv,nb,ptt,sot,hot,cot,lot,wtt,yot,ost,sst,ast,vst,ib,lit,gst,yht,dit,ect,trt,ig,rg,urt,ert,srt,ca,s,wh,yl,we,grt,he,iut,fat,bb,uut,fut,eut,out,cr,vat,ep,os,tk,be,yat,ivt,evt,la,i,aa,cc,bv,r,sp,ss,hs,hp,u,ao,te,yut,st,cp,ke,l,put,cs,rk,vr,va,pl,ya,as,o,pa,bh,b,rh,bg,uh,uo,kh,kv,dv,gv,ny,eu,cvt,ty,vo,yp,iy,wa,lvt,pp,ek,wl,wi,yo,vs,po,ok,pvt,fo,gg,kr,wr,wp,ce,pc,kp,dp,gp,dr,kut,eh,tn,ko,rn,ut,gut,bvt,sk,tw,f,hk,ys,nc,ck,lf,rr,di,iu,lk,ps,ir,iw,ff,fn,ry,yr,le,uy,go,tc,bc,da,ou,nft,ns,ru,lu,ak,kvt,fy,kc,af,ga,hh,rw,gr,a,tft,uw,ve,ws,bl,fw,br,ew,de,rft,ot,nv,hr,ow,re,tv,uft,kl,bi,oo,ey,ch,ge,ef,ts,dl,no,bs,lh,gl,ic,au,fft,vk,vf,nl,ks,eft,ue,oft,sw,oy,sft,hft,iv,ah,bu,sy,yf,vh,na,en,rv,tl,rc,ku,is,du,cft,il,uv,gu,of,ds,so,on,fv,rl,ye,sn,nf,hn,gs,vu,rs,ul,ev,nh,ov,fe,us,nu,lft,aft,pf,fl,cn,sv,el,yu,wf,hw,bf,ln,yk,tf,cw,hy,cy,an,ly,ta,lw,ay,ia,tt,ol,vy,ra,ee,vft,pe,uu,yft,aw,ua,pk,wft,bft,nhi,tet,yyt,ret,uet,kyt,ohi,eet,oet,tpt,ept,hpt;
/**
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 */
ltt={successCallback:null,verbose:!1};bw={};rot=uot;lv=od;od.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,r=[],s=this.toBBox,f,u,o,i,e;if(!hd(n,t))return r;for(f=[];t;){for(u=0,o=t.children.length;u<o;u++)i=t.children[u],e=t.leaf?s(i):i,hd(n,e)&&(t.leaf?r.push(i):ytt(n,e)?this._all(i,r):f.push(i));t=f.pop()}return r},collides:function(n){var t=this.data,o=this.toBBox,u,i,e,r,f;if(!hd(n,t))return!1;for(u=[];t;){for(i=0,e=t.children.length;i<e;i++)if(r=t.children[i],f=t.leaf?o(r):r,hd(n,f)){if(t.leaf||ytt(n,f))return!0;u.push(r)}t=u.pop()}return!1},load:function(n){var i,r,t,u;if(!(n&&n.length))return this;if(n.length<this._minEntries){for(i=0,r=n.length;i<r;i++)this.insert(n[i]);return this}return t=this._build(n.slice(),0,n.length-1,0),this.data.children.length?this.data.height===t.height?this._splitRoot(this.data,t):(this.data.height<t.height&&(u=this.data,this.data=t,t=u),this._insert(t,this.data.height-t.height-1,!0)):this.data=t,this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=ky([]),this},remove:function(n,t){if(!n)return this;for(var i=this.data,h=this.toBBox(n),r=[],s=[],u,f,e,o;i||r.length;){if(i||(i=r.pop(),f=r[r.length-1],u=s.pop(),o=!0),i.leaf&&(e=dwt(n,i.children,t),e!==-1))return i.children.splice(e,1),r.push(i),this._condense(r),this;o||i.leaf||!ytt(i,h)?f?(u++,i=f.children[u],o=!1):i=null:(r.push(i),s.push(u),u=0,f=i,i=i.children[0])}return this},toBBox:function(n){return n},compareMinX:fot,compareMinY:eot,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var i=[];n;)n.leaf?t.push.apply(t,n.children):i.push.apply(i,n.children),n=i.pop();return t},_build:function(n,t,i,r){var h=i-t+1,f=this._maxEntries,u,o,c,e,s,l,a;if(h<=f)return u=ky(n.slice(t,i+1)),by(u,this.toBBox),u;for(r||(r=Math.ceil(Math.log(h)/Math.log(f)),f=Math.ceil(h/Math.pow(f,r-1))),u=ky([]),u.leaf=!1,u.height=r,o=Math.ceil(h/f),c=o*Math.ceil(Math.sqrt(f)),oot(n,t,i,c,this.compareMinX),e=t;e<=i;e+=c)for(l=Math.min(e+c-1,i),oot(n,e,l,o,this.compareMinY),s=e;s<=l;s+=o)a=Math.min(s+o-1,l),u.children.push(this._build(n,s,a,r-1));return by(u,this.toBBox),u},_chooseSubtree:function(n,t,i,r){for(var o,l,e,c,u,s,f,h;;){if(r.push(t),t.leaf||r.length-1===i)break;for(f=h=Infinity,o=0,l=t.children.length;o<l;o++)e=t.children[o],u=vtt(e),s=gwt(n,e)-u,s<h?(h=s,f=u<f?u:f,c=e):s===h&&u<f&&(f=u,c=e);t=c||t.children[0]}return t},_insert:function(n,t,i){var e=this.toBBox,u=i?n:e(n),r=[],f=this._chooseSubtree(u,this.data,t,r);for(f.children.push(n),gw(f,u);t>=0;)if(r[t].children.length>this._maxEntries)this._split(r,t),t--;else break;this._adjustParentBBoxes(u,r,t)},_split:function(n,t){var i=n[t],f=i.children.length,e=this._minEntries,u,r;this._chooseSplitAxis(i,e,f);u=this._chooseSplitIndex(i,e,f);r=ky(i.children.splice(u,i.children.length-u));r.height=i.height;r.leaf=i.leaf;by(i,this.toBBox);by(r,this.toBBox);t?n[t-1].children.push(r):this._splitRoot(i,r)},_splitRoot:function(n,t){this.data=ky([n,t]);this.data.height=n.height+1;this.data.leaf=!1;by(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,i){for(var s,h,e,f,u,c,o=u=Infinity,r=t;r<=i-t;r++)s=dw(n,0,r,this.toBBox),h=dw(n,r,i,this.toBBox),e=nbt(s,h),f=vtt(s)+vtt(h),e<o?(o=e,c=r,u=f<u?f:u):e===o&&f<u&&(u=f,c=r);return c},_chooseSplitAxis:function(n,t,i){var r=n.leaf?this.compareMinX:fot,u=n.leaf?this.compareMinY:eot,f=this._allDistMargin(n,t,i,r),e=this._allDistMargin(n,t,i,u);f<e&&n.children.sort(r)},_allDistMargin:function(n,t,i,r){n.children.sort(r);for(var e=this.toBBox,o=dw(n,0,t,e),s=dw(n,i-t,i,e),h=sd(o)+sd(s),f,u=t;u<i-t;u++)f=n.children[u],gw(o,n.leaf?e(f):f),h+=sd(o);for(u=i-t-1;u>=t;u--)f=n.children[u],gw(s,n.leaf?e(f):f),h+=sd(s);return h},_adjustParentBBoxes:function(n,t,i){for(var r=i;r>=0;r--)gw(t[r],n)},_condense:function(n){for(var t=n.length-1,i;t>=0;t--)n[t].children.length===0?t>0?(i=n[t-1].children,i.splice(i.indexOf(n[t]),1)):this.clear():by(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0]));this.compareMinY=new Function("a","b",t.join(n[1]));this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};nb=tbt;ptt=+(Math.pow(2,27)+1);sot=rbt;hot=ubt;cot=fbt;lot=obt;var aot=cl(function(n){function e(n,t){for(var f,i,e,u=new Array(n.length-1),r=1;r<n.length;++r)for(f=u[r-1]=new Array(n.length-1),i=0,e=0;i<n.length;++i)i!==t&&(f[e++]=n[r][i]);return u}function c(n){for(var i,r=new Array(n),t=0;t<n;++t)for(r[t]=new Array(n),i=0;i<n;++i)r[t][i]=["m",i,"[",n-t-1,"]"].join("");return r}function l(n){return n&1?"-":""}function i(n){if(n.length===1)return n[0];if(n.length===2)return["sum(",n[0],",",n[1],")"].join("");var t=n.length>>1;return["sum(",i(n.slice(0,t)),",",i(n.slice(t)),")"].join("")}function o(n){var r,t;if(n.length===2)return[["sum(prod(",n[0][0],",",n[1][1],"),prod(-",n[0][1],",",n[1][0],"))"].join("")];for(r=[],t=0;t<n.length;++t)r.push(["scale(",i(o(e(n,t))),",",l(t),n[0][t],")"].join(""));return r}function f(n){for(var r=[],u=[],f=c(n),s=[],t=0;t<n;++t)(t&1)==0?r.push.apply(r,o(e(f,t))):u.push.apply(u,o(e(f,t))),s.push("m"+t);var l=i(r),a=i(u),h="orientation"+n+"Exact",v=["function ",h,"(",s.join(),"){var p=",l,",n=",a,",d=sub(p,n);return d[d.length-1];};return ",h].join(""),y=new Function("sum","prod","scale","sub",v);return y(sot,nb,cot,lot)}function y(n){var i=t[n.length];return i||(i=t[n.length]=f(n.length)),i.apply(undefined,n)}function p(){for(var u,e,o,s,i;t.length<=r;)t.push(f(t.length));for(u=[],e=["slow"],i=0;i<=r;++i)u.push("a"+i),e.push("o"+i);for(o=["function getOrientation(",u.join(),"){switch(arguments.length){case 0:case 1:return 0;"],i=2;i<=r;++i)o.push("case ",i,":return o",i,"(",u.slice(0,i).join(),");");for(o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(o.join("")),s=Function.apply(undefined,e),n.exports=s.apply(undefined,[y].concat(t)),i=0;i<=r;++i)n.exports[i]=t[i]}var r=5,u=11102230246251565e-32,s=(3+16*u)*u,h=(7+56*u)*u,a=f(3),v=f(4),t=[function(){return 0},function(){return 0},function(n,t){return t[0]-n[0]},function(n,t,i){var u=(n[1]-i[1])*(t[0]-i[0]),f=(n[0]-i[0])*(t[1]-i[1]),r=u-f,e,o;if(u>0){if(f<=0)return r;e=u+f}else if(u<0){if(f>=0)return r;e=-(u+f)}else return r;return(o=s*e,r>=o||r<=-o)?r:a(n,t,i)},function(n,t,i,r){var f=n[0]-r[0],e=t[0]-r[0],o=i[0]-r[0],s=n[1]-r[1],c=t[1]-r[1],l=i[1]-r[1],a=n[2]-r[2],y=t[2]-r[2],p=i[2]-r[2],w=e*l,b=o*c,k=o*s,d=f*l,g=f*c,nt=e*s,u=a*(w-b)+y*(k-d)+p*(g-nt),it=(Math.abs(w)+Math.abs(b))*Math.abs(a)+(Math.abs(k)+Math.abs(d))*Math.abs(y)+(Math.abs(g)+Math.abs(nt))*Math.abs(p),tt=h*it;return u>tt||-u>tt?u:v(n,t,i,r)}];p()}),sbt=hbt,vot=aot[3];wtt=tb;yot=tb;tb.prototype={push:function(n){this.data.push(n);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var n=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),n},peek:function(){return this.data[0]},_up:function(n){for(var t=this.data,f=this.compare,u=t[n],i,r;n>0;){if(i=n-1>>1,r=t[i],f(u,r)>=0)break;t[n]=r;n=i}t[n]=u},_down:function(n){for(var t=this.data,f=this.compare,o=this.length>>1,e=t[n];n<o;){var i=(n<<1)+1,r=i+1,u=t[i];if(r<this.length&&f(t[r],u)<0&&(i=r,u=t[r]),f(u,e)>=0)break;t[n]=u;n=i}t[n]=e}};wtt.default=yot;var lbt=function(n,t){for(var h=n[0],r=n[1],u=!1,i=0,f=t.length-1;i<t.length;f=i++){var o=t[i][0],e=t[i][1],c=t[f][0],s=t[f][1],l=e>r!=s>r&&h<(c-o)*(r-e)/(s-e)+o;l&&(u=!u)}return u},cd=aot[3],pot=wot,abt=wot;pot.default=abt;var ikt=function(n){return n},rkt=function(n){if(n==null)return ikt;var t,i,r=n.scale[0],u=n.scale[1],f=n.translate[0],e=n.translate[1];return function(n,o){o||(t=i=0);var s=2,c=n.length,h=new Array(c);for(h[0]=(t+=n[0])*r+f,h[1]=(i+=n[1])*u+e;s<c;)h[s]=n[s],++s;return h}},ukt=function(n,t){for(var u,i=n.length,r=i-t;r<--i;)u=n[r],n[r++]=n[i],n[i]=u};ost=function(n,t){function s(t){var r=n.arcs[t<0?~t:t],u=r[0],i;return n.transform?(i=[0,0],r.forEach(function(n){i[0]+=n[0];i[1]+=n[1]})):i=r[r.length-1],t<0?[i,u]:[u,i]}function o(n,t){var r,i;for(r in n)i=n[r],delete t[i.start],delete i.start,delete i.end,i.forEach(function(n){f[n<0?~n:n]=1}),u.push(i)}var f={},i={},r={},u=[],e=-1;return t.forEach(function(i,r){var u=n.arcs[i<0?~i:i],f;u.length<3&&!u[1][0]&&!u[1][1]&&(f=t[++e],t[e]=i,t[r]=f)}),t.forEach(function(n){var c=s(n),f=c[0],e=c[1],t,u,o,h;(t=r[f])?(delete r[t.end],t.push(n),t.end=e,(u=i[e])?(delete i[u.start],o=u===t?t:t.concat(u),i[o.start=t.start]=r[o.end=u.end]=o):i[t.start]=r[t.end]=t):(t=i[e])?(delete i[t.start],t.unshift(n),t.start=f,(u=r[f])?(delete r[u.end],h=u===t?t:u.concat(t),i[h.start=u.start]=r[h.end=t.end]=h):i[t.start]=r[t.end]=t):(t=[n],i[t.start=f]=r[t.end=e]=t)}),o(r,i),o(i,r),t.forEach(function(n){f[n<0?~n:n]||u.push([n])}),u};sst=function(n){return est(n,ekt.apply(this,arguments))};var okt=function(n){function o(n){n!=null&&s.hasOwnProperty(n.type)&&s[n.type](n)}function e(n){var f=n[0],e=n[1];f<t&&(t=f);f>r&&(r=f);e<i&&(i=e);e>u&&(u=e)}function f(n){n.forEach(e)}function h(n){n.forEach(f)}var t=Infinity,i=Infinity,r=-Infinity,u=-Infinity,s={GeometryCollection:function(n){n.geometries.forEach(o)},Point:function(n){e(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(e)},LineString:function(n){f(n.arcs)},MultiLineString:function(n){n.arcs.forEach(f)},Polygon:function(n){n.arcs.forEach(f)},MultiPolygon:function(n){n.arcs.forEach(h)}};for(var c in n)o(n[c]);return r>=t&&u>=i?[t,i,r,u]:undefined},skt=function(n,t,i,r,u){function s(r){for(var o=t(r)&e,s=f[o],h=0;s!=u;){if(i(s,r))return!0;if(++h>=n)throw new Error("full hashset");s=f[o=o+1&e]}return f[o]=r,!0}function h(r){for(var o=t(r)&e,s=f[o],h=0;s!=u;){if(i(s,r))return!0;if(++h>=n)break;s=f[o=o+1&e]}return!1}function c(){for(var t,i=[],n=0,r=f.length;n<r;++n)t=f[n],t!=u&&i.push(t);return i}var f,e,o;for(arguments.length===3&&(r=Array,u=null),f=new r(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),e=n-1,o=0;o<n;++o)f[o]=u;return{add:s,has:h,values:c}},tit=function(n,t,i,r,u,f){function c(r,f){for(var h=t(r)&o,c=e[h],l=0;c!=u;){if(i(c,r))return s[h]=f;if(++l>=n)throw new Error("full hashmap");c=e[h=h+1&o]}return e[h]=r,s[h]=f,f}function l(r,f){for(var h=t(r)&o,c=e[h],l=0;c!=u;){if(i(c,r))return s[h];if(++l>=n)throw new Error("full hashmap");c=e[h=h+1&o]}return e[h]=r,s[h]=f,f}function a(r,f){for(var h=t(r)&o,c=e[h],l=0;c!=u;){if(i(c,r))return s[h];if(++l>=n)break;c=e[h=h+1&o]}return f}function v(){for(var t,i=[],n=0,r=e.length;n<r;++n)t=e[n],t!=u&&i.push(t);return i}var h;arguments.length===3&&(r=f=Array,u=null);var e=new r(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),s=new f(n),o=n-1;for(h=0;h<n;++h)e[h]=u;return{set:c,maybeSet:l,get:a,keys:v}},av=function(n,t){return n[0]===t[0]&&n[1]===t[1]},hst=new ArrayBuffer(16),cst=new Float64Array(hst),ad=new Uint32Array(hst),iit=function(n){cst[0]=n[0];cst[1]=n[1];var t=ad[0]^ad[1];return t=t<<5^t>>7^ad[2]^ad[3],t&2147483647},hkt=function(n){function p(n,t,i,r){var u,f;o[i]!==n&&(o[i]=n,u=s[i],u>=0?(f=h[i],(u!==t||f!==r)&&(u!==r||f!==t)&&(++l,c[i]=1)):(s[i]=t,h[i]=r))}function rt(){for(var r=tit(i.length*1.4,ut,ft,Int32Array,-1,Int32Array),t=new Int32Array(i.length),n=0,u=i.length;n<u;++n)t[n]=r.maybeSet(n,n);return t}function ut(n){return iit(i[n])}function ft(n,t){return av(i[n],i[t])}for(var i=n.coordinates,b=n.lines,k=n.rings,u=rt(),o=new Int32Array(i.length),s=new Int32Array(i.length),h=new Int32Array(i.length),c=new Int8Array(i.length),l=0,a,f,e,w,tt,t=0,r=i.length;t<r;++t)o[t]=s[t]=h[t]=-1;for(t=0,r=b.length;t<r;++t){var d=b[t],v=d[0],it=d[1];for(f=u[v],e=u[++v],++l,c[f]=1;++v<=it;)p(t,a=f,f=e,e=u[v]);++l;c[e]=1}for(t=0,r=i.length;t<r;++t)o[t]=-1;for(t=0,r=k.length;t<r;++t){var g=k[t],y=g[0]+1,nt=g[1];for(a=u[nt-1],f=u[y-1],e=u[y],p(t,a,f,e);++y<=nt;)p(t,a=f,f=e,e=u[y])}for(o=s=h=null,w=skt(l*1.4,iit,av),t=0,r=i.length;t<r;++t)c[tt=u[t]]&&w.add(i[tt]);return w},ckt=function(n){for(var l=hkt(n),i=n.coordinates,a=n.lines,v=n.rings,o,t=0,s=a.length;t<s;++t)for(var r=a[t],h=r[0],p=r[1];++h<p;)l.has(i[h])&&(o={0:h,1:r[1]},r[1]=h,r=r.next=o);for(t=0,s=v.length;t<s;++t)for(var u=v[t],e=u[0],f=e,c=u[1],y=l.has(i[e]);++f<c;)l.has(i[f])&&(y?(o={0:f,1:u[1]},u[1]=f,u=u.next=o):(lkt(i,e,c,c-f),i[c]=i[e],y=!0,f=e));return n};var akt=function(n){function a(n){var h,c,r,e,u,o,t,s;if(r=f.get(h=i[n[0]]))for(t=0,s=r.length;t<s;++t)if(e=r[t],w(e,n)){n[0]=e[0];n[1]=e[1];return}if(u=f.get(c=i[n[1]]))for(t=0,s=u.length;t<s;++t)if(o=u[t],b(o,n)){n[1]=o[0];n[0]=o[1];return}r?r.push(n):f.set(h,[n]);u?u.push(n):f.set(c,[n]);l.push(n)}function p(n){var o,r,t,u,e;if(r=f.get(o=i[n[0]]))for(u=0,e=r.length;u<e;++u){if(t=r[u],v(t,n)){n[0]=t[0];n[1]=t[1];return}if(y(t,n)){n[0]=t[1];n[1]=t[0];return}}if(r=f.get(o=i[n[0]+h(n)]))for(u=0,e=r.length;u<e;++u){if(t=r[u],v(t,n)){n[0]=t[0];n[1]=t[1];return}if(y(t,n)){n[0]=t[1];n[1]=t[0];return}}r?r.push(n):f.set(o,[n]);l.push(n)}function w(n,t){var r=n[0],u=t[0],f=n[1],e=t[1];if(r-f!=u-e)return!1;for(;r<=f;++r,++u)if(!av(i[r],i[u]))return!1;return!0}function b(n,t){var r=n[0],e=t[0],f=n[1],u=t[1];if(r-f!=e-u)return!1;for(;r<=f;++r,--u)if(!av(i[r],i[u]))return!1;return!0}function v(n,t){var f=n[0],e=t[0],c=n[1],l=t[1],u=c-f,o,s,r;if(u!==l-e)return!1;for(o=h(n),s=h(t),r=0;r<u;++r)if(!av(i[f+(r+o)%u],i[e+(r+s)%u]))return!1;return!0}function y(n,t){var f=n[0],c=t[0],l=n[1],e=t[1],r=l-f,o,s,u;if(r!==e-c)return!1;for(o=h(n),s=r-h(t),u=0;u<r;++u)if(!av(i[f+(u+o)%r],i[e-(u+s)%r]))return!1;return!0}function h(n){for(var f=n[0],o=n[1],t=f,e=t,u=i[t],r;++t<o;)r=i[t],(r[0]<u[0]||r[0]===u[0]&&r[1]<u[1])&&(e=t,u=r);return e-f}var i=n.coordinates,o=n.lines,e,s=n.rings,r,c=o.length+s.length,t,u,f,l;for(delete n.lines,delete n.rings,t=0,u=o.length;t<u;++t)for(e=o[t];e=e.next;)++c;for(t=0,u=s.length;t<u;++t)for(r=s[t];r=r.next;)++c;for(f=tit(c*2*1.4,iit,av),l=n.arcs=[],t=0,u=o.length;t<u;++t){e=o[t];do a(e);while(e=e.next)}for(t=0,u=s.length;t<u;++t)if(r=s[t],r.next){do a(r);while(r=r.next)}else p(r);return n},vkt=function(n){for(var s=-1,c=n.length;++s<c;){for(var t=n[s],h=0,r=1,l=t.length,i=t[0],e=i[0],o=i[1],u,f;++h<l;)i=t[h],u=i[0],f=i[1],(u!==e||f!==o)&&(t[r++]=[u-e,f-o],e=u,o=f);r===1&&(t[r++]=[0,0]);t.length=r}return n},ykt=function(n){function f(n){n&&e.hasOwnProperty(n.type)&&e[n.type](n)}function o(n){for(var e,u=0,f=n.length;u<f;++u)i[++t]=n[u];return e={0:t-f+1,1:t},r.push(e),e}function s(n){for(var e,r=0,f=n.length;r<f;++r)i[++t]=n[r];return e={0:t-f+1,1:t},u.push(e),e}function h(n){return n.map(s)}var t=-1,r=[],u=[],i=[],e={GeometryCollection:function(n){n.geometries.forEach(f)},LineString:function(n){n.arcs=o(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(o)},Polygon:function(n){n.arcs=n.arcs.map(s)},MultiPolygon:function(n){n.arcs=n.arcs.map(h)}};for(var c in n)f(n[c]);return{type:"Topology",coordinates:i,lines:r,rings:u,objects:n}},pkt=function(n){var t={};for(var i in n)t[i]=wkt(n[i]);return t};ast=function(n,t,i){function h(n){return[Math.round((n[0]-r)*f),Math.round((n[1]-u)*e)]}function c(n,t){for(var l=-1,o=0,a=n.length,i=new Array(a),s,v,y,h,c;++l<a;)s=n[l],h=Math.round((s[0]-r)*f),c=Math.round((s[1]-u)*e),(h!==v||c!==y)&&(i[o++]=[v=h,y=c]);for(i.length=o;o<t;)o=i.push([i[0][0],i[0][1]]);return i}function l(n){return c(n,2)}function p(n){return c(n,4)}function a(n){return n.map(p)}function v(n){n!=null&&y.hasOwnProperty(n.type)&&y[n.type](n)}var r=t[0],u=t[1],o=t[2],s=t[3],f=o-r?(i-1)/(o-r):1,e=s-u?(i-1)/(s-u):1,y={GeometryCollection:function(n){n.geometries.forEach(v)},Point:function(n){n.coordinates=h(n.coordinates)},MultiPoint:function(n){n.coordinates=n.coordinates.map(h)},LineString:function(n){n.arcs=l(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(l)},Polygon:function(n){n.arcs=a(n.arcs)},MultiPolygon:function(n){n.arcs=n.arcs.map(a)}};for(var w in n)v(n[w]);return{scale:[1/f,1/e],translate:[r,u]}};vst=function(n,t){function h(n){n&&f.hasOwnProperty(n.type)&&f[n.type](n)}function r(n){var i=[],t;do t=s.get(n),i.push(n[0]<n[1]?t:~t);while(n=n.next);return i}function l(n){return n.map(r)}var u=okt(n=pkt(n)),e=t>0&&u&&ast(n,u,t),i=akt(ckt(ykt(n))),o=i.coordinates,s=tit(i.arcs.length*1.4,kkt,dkt),f,c;n=i.objects;i.bbox=u;i.arcs=i.arcs.map(function(n,t){return s.set(n,t),o.slice(n[0],n[1]+1)});delete i.coordinates;o=null;f={GeometryCollection:function(n){n.geometries.forEach(h)},LineString:function(n){n.arcs=r(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(r)},Polygon:function(n){n.arcs=n.arcs.map(r)},MultiPolygon:function(n){n.arcs=n.arcs.map(l)}};for(c in n)h(n[c]);return e&&(i.transform=e,i.arcs=vkt(i.arcs)),i};ib=function(n){var i,r,t;for(this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0,t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++)i=this.points[t],r=this.points[t+1],this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2});for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var i=this.centers[t],r=this.centers[t+1],u=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,f=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,e=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+u),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+f),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+e)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+u),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+f),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+e)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};ib.prototype.cacheSteps=function(n){var u=[],i=this.pos(0),r,t,f;for(u.push(0),r=0;r<this.duration;r+=10)t=this.pos(r),f=Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)+(t.z-i.z)*(t.z-i.z)),f>n&&(u.push(r),i=t);return u};ib.prototype.vector=function(n){var t=this.pos(n+10),i=this.pos(n-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}};ib.prototype.pos=function(n){function f(n,t,i,r,u){var e=function(n){var t=n*n,i=t*n;return[i,3*t*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]},f=e(n);return{x:u.x*f[0]+r.x*f[1]+i.x*f[2]+t.x*f[3],y:u.y*f[0]+r.y*f[1]+i.y*f[2]+t.y*f[3],z:u.z*f[0]+r.z*f[1]+i.z*f[2]+t.z*f[3]}}var i=n-this.delay,r,t,u;return(i<0&&(i=0),i>this.duration&&(i=this.duration-1),r=i/this.duration,r>=1)?this.points[this.length-1]:(t=Math.floor((this.points.length-1)*r),u=(this.length-1)*r-t,f(u,this.points[t],this.controls[t][1],this.controls[t+1][0],this.points[t+1]))};lit=pd;gst=pd;pd.deviation=function(n,t,i,r){var h=t&&t.length,y=h?t[0]*i:n.length,f=Math.abs(vit(n,0,y,i)),u,s,c,l,e;if(h)for(u=0,s=t.length;u<s;u++)c=t[u]*i,l=u<s-1?t[u+1]*i:n.length,f-=Math.abs(vit(n,c,l,i));for(e=0,u=0;u<r.length;u+=3){var o=r[u]*i,a=r[u+1]*i,v=r[u+2]*i;e+=Math.abs((n[o]-n[v])*(n[a+1]-n[o+1])-(n[o]-n[a])*(n[v+1]-n[o+1]))}return f===0&&e===0?0:Math.abs((e-f)/f)};pd.flatten=function(n){for(var i,r,f=n[0][0].length,u={vertices:[],holes:[],dimensions:f},e=0,t=0;t<n.length;t++){for(i=0;i<n[t].length;i++)for(r=0;r<f;r++)u.vertices.push(n[t][i][r]);t>0&&(e+=n[t-1].length,u.holes.push(e))}return u};lit.default=gst;es.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,r=[],s=this.toBBox,f,u,o,i,e;if(!dd(n,t))return r;for(f=[];t;){for(u=0,o=t.children.length;u<o;u++)i=t.children[u],e=t.leaf?s(i):i,dd(n,e)&&(t.leaf?r.push(i):wit(n,e)?this._all(i,r):f.push(i));t=f.pop()}return r},collides:function(n){var t=this.data,o=this.toBBox,u,i,e,r,f;if(!dd(n,t))return!1;for(u=[];t;){for(i=0,e=t.children.length;i<e;i++)if(r=t.children[i],f=t.leaf?o(r):r,dd(n,f)){if(t.leaf||wit(n,f))return!0;u.push(r)}t=u.pop()}return!1},load:function(n){var i,r,t,u;if(!(n&&n.length))return this;if(n.length<this._minEntries){for(i=0,r=n.length;i<r;i++)this.insert(n[i]);return this}return t=this._build(n.slice(),0,n.length-1,0),this.data.children.length?this.data.height===t.height?this._splitRoot(this.data,t):(this.data.height<t.height&&(u=this.data,this.data=t,t=u),this._insert(t,this.data.height-t.height-1,!0)):this.data=t,this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=gy([]),this},remove:function(n,t){if(!n)return this;for(var i=this.data,h=this.toBBox(n),r=[],s=[],u,f,e,o;i||r.length;){if(i||(i=r.pop(),f=r[r.length-1],u=s.pop(),o=!0),i.leaf&&(e=ggt(n,i.children,t),e!==-1))return i.children.splice(e,1),r.push(i),this._condense(r),this;o||i.leaf||!wit(i,h)?f?(u++,i=f.children[u],o=!1):i=null:(r.push(i),s.push(u),u=0,f=i,i=i.children[0])}return this},toBBox:function(n){return n},compareMinX:eht,compareMinY:oht,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var i=[];n;)n.leaf?t.push.apply(t,n.children):i.push.apply(i,n.children),n=i.pop();return t},_build:function(n,t,i,r){var h=i-t+1,f=this._maxEntries,u,o,c,e,s,l,a;if(h<=f)return u=gy(n.slice(t,i+1)),dy(u,this.toBBox),u;for(r||(r=Math.ceil(Math.log(h)/Math.log(f)),f=Math.ceil(h/Math.pow(f,r-1))),u=gy([]),u.leaf=!1,u.height=r,o=Math.ceil(h/f),c=o*Math.ceil(Math.sqrt(f)),sht(n,t,i,c,this.compareMinX),e=t;e<=i;e+=c)for(l=Math.min(e+c-1,i),sht(n,e,l,o,this.compareMinY),s=e;s<=l;s+=o)a=Math.min(s+o-1,l),u.children.push(this._build(n,s,a,r-1));return dy(u,this.toBBox),u},_chooseSubtree:function(n,t,i,r){for(var o,l,e,c,u,s,f,h;;){if(r.push(t),t.leaf||r.length-1===i)break;for(f=h=Infinity,o=0,l=t.children.length;o<l;o++)e=t.children[o],u=pit(e),s=nnt(n,e)-u,s<h?(h=s,f=u<f?u:f,c=e):s===h&&u<f&&(f=u,c=e);t=c||t.children[0]}return t},_insert:function(n,t,i){var e=this.toBBox,u=i?n:e(n),r=[],f=this._chooseSubtree(u,this.data,t,r);for(f.children.push(n),hb(f,u);t>=0;)if(r[t].children.length>this._maxEntries)this._split(r,t),t--;else break;this._adjustParentBBoxes(u,r,t)},_split:function(n,t){var i=n[t],f=i.children.length,e=this._minEntries,u,r;this._chooseSplitAxis(i,e,f);u=this._chooseSplitIndex(i,e,f);r=gy(i.children.splice(u,i.children.length-u));r.height=i.height;r.leaf=i.leaf;dy(i,this.toBBox);dy(r,this.toBBox);t?n[t-1].children.push(r):this._splitRoot(i,r)},_splitRoot:function(n,t){this.data=gy([n,t]);this.data.height=n.height+1;this.data.leaf=!1;dy(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,i){for(var s,h,e,f,u,c,o=u=Infinity,r=t;r<=i-t;r++)s=sb(n,0,r,this.toBBox),h=sb(n,r,i,this.toBBox),e=tnt(s,h),f=pit(s)+pit(h),e<o?(o=e,c=r,u=f<u?f:u):e===o&&f<u&&(u=f,c=r);return c},_chooseSplitAxis:function(n,t,i){var r=n.leaf?this.compareMinX:eht,u=n.leaf?this.compareMinY:oht,f=this._allDistMargin(n,t,i,r),e=this._allDistMargin(n,t,i,u);f<e&&n.children.sort(r)},_allDistMargin:function(n,t,i,r){n.children.sort(r);for(var e=this.toBBox,o=sb(n,0,t,e),s=sb(n,i-t,i,e),h=kd(o)+kd(s),f,u=t;u<i-t;u++)f=n.children[u],hb(o,n.leaf?e(f):f),h+=kd(o);for(u=i-t-1;u>=t;u--)f=n.children[u],hb(s,n.leaf?e(f):f),h+=kd(s);return h},_adjustParentBBoxes:function(n,t,i){for(var r=i;r>=0;r--)hb(t[r],n)},_condense:function(n){for(var t=n.length-1,i;t>=0;t--)n[t].children.length===0?t>0?(i=n[t-1].children,i.splice(i.indexOf(n[t]),1)):this.clear():dy(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0]));this.compareMinY=new Function("a","b",t.join(n[1]));this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};yht=Object.freeze({toMercator:ha,toWgs84:ng});dit=6378137;ect=function(n,t,i){function p(n,i,u,f){var s=r[n][i],c=r[n][i+1],h=r[u][f],l=r[u][f+1],o=cti(s,c,h,l),a,y,p,w;o!==null&&((a=c[0]!==s[0]?(o[0]-s[0])/(c[0]-s[0]):(o[1]-s[1])/(c[1]-s[1]),y=l[0]!==h[0]?(o[0]-h[0])/(l[0]-h[0]):(o[1]-h[1])/(l[1]-h[1]),a>=1||a<=0||y>=1||y<=0)||(p=o,w=!v[p],w&&(v[p]=!0),t?e.push(t(o,n,i,s,c,a,u,f,h,l,y,w)):e.push(o)))}function w(n,t){var i=r[n][t],u=r[n][t+1],f,e,o,s;return i[0]<u[0]?(f=i[0],e=u[0]):(f=u[0],e=i[0]),i[1]<u[1]?(o=i[1],s=u[1]):(o=u[1],s=i[1]),{minX:f,minY:o,maxX:e,maxY:s,ring:n,edge:t}}var l,o,h,a,u,f,y,s,c;if(n.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");i===undefined&&(i=1);var r=n.geometry.coordinates,e=[],v={};if(i){for(l=[],o=0;o<r.length;o++)for(h=0;h<r[o].length-1;h++)l.push(w(o,h));a=lv();a.load(l)}for(u=0;u<r.length;u++)for(f=0;f<r[u].length-1;f++)if(i)y=a.search(w(u,f)),y.forEach(function(n){var t=n.ring,i=n.edge;p(u,f,t,i)});else for(s=0;s<r.length;s++)for(c=0;c<r[s].length-1;c++)p(u,f,s,c);return t||(e={type:"Feature",geometry:{type:"MultiPoint",coordinates:e}}),e};var lti=function(n){function wt(){for(var r,u,t,i=[],n=0;n<o.features.length;n++)o.features[n].properties.parent==-1&&i.push(n);if(i.length>1)for(n=0;n<i.length;n++){for(r=-1,u=Infinity,t=0;t<o.features.length;t++)i[n]!=t&&pr(o.features[i[n]].geometry.coordinates[0][0],o.features[t],{ignoreBoundary:!0})&&lb(o.features[t])<u&&(r=t);o.features[i[n]].properties.parent=r}}function bt(){for(var t,n=0;n<o.features.length;n++)o.features[n].properties.parent==-1&&(t=o.features[n].properties.winding,o.features[n].properties.netWinding=t,kt(n,t))}function kt(n,t){for(var r,i=0;i<o.features.length;i++)o.features[i].properties.parent==n&&(r=t+o.features[i].properties.winding,o.features[i].properties.netWinding=r,kt(i,r))}var b,k,a,e,i,at,ut,tt,l,ft,c,r,v,vt,f,yt,pt,p,nt,u,rt,t,h,o;if(n.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(n.geometry===undefined||n.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(n.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(b=n.geometry.coordinates.length,k=[],t=0;t<b;t++)a=n.geometry.coordinates[t],vb(a[0],a[a.length-1])||a.push(a[0]),k.push.apply(k,a.slice(0,a.length-1));if(!vti(k))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var dt=k.length,s=ect(n,function(n,t,i,r,u,f,e,o,s,h,c,l){return[n,t,i,r,u,f,e,o,s,h,c,l]}),lt=s.length;if(lt==0){for(p=[],t=0;t<b;t++)p.push(ct([n.geometry.coordinates[t]],{parent:-1,winding:ati(n.geometry.coordinates[t])}));return o=d(p),wt(),bt(),o}for(e=[],i=[],t=0;t<b;t++)for(e.push([]),r=0;r<n.geometry.coordinates[t].length-1;r++)e[t].push([new oct(n.geometry.coordinates[t][(r+1).modulo(n.geometry.coordinates[t].length-1)],1,[t,r],[t,(r+1).modulo(n.geometry.coordinates[t].length-1)],undefined)]),i.push(new sct(n.geometry.coordinates[t][r],[t,(r-1).modulo(n.geometry.coordinates[t].length-1)],[t,r],undefined,undefined,!1,!0));for(t=0;t<lt;t++)e[s[t][1]][s[t][2]].push(new oct(s[t][0],s[t][5],[s[t][1],s[t][2]],[s[t][6],s[t][7]],undefined)),s[t][11]&&i.push(new sct(s[t][0],[s[t][1],s[t][2]],[s[t][6],s[t][7]],undefined,undefined,!0,!0));for(at=i.length,t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)e[t][r].sort(function(n,t){return n.param<t.param?-1:1});for(ut=[],t=0;t<at;t++)ut.push({minX:i[t].coord[0],minY:i[t].coord[1],maxX:i[t].coord[0],maxY:i[t].coord[1],index:t});for(tt=lv(),tt.load(ut),t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)for(f=0;f<e[t][r].length;f++)l=f==e[t][r].length-1?e[t][(r+1).modulo(n.geometry.coordinates[t].length-1)][0].coord:e[t][r][f+1].coord,ft=tt.search({minX:l[0],minY:l[1],maxX:l[0],maxY:l[1]})[0],e[t][r][f].nxtIsectAlongEdgeIn=ft.index;for(t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)for(f=0;f<e[t][r].length;f++){var l=e[t][r][f].coord,ft=tt.search({minX:l[0],minY:l[1],maxX:l[0],maxY:l[1]})[0],g=ft.index;g<dt?i[g].nxtIsectAlongRingAndEdge2=e[t][r][f].nxtIsectAlongEdgeIn:vb(i[g].ringAndEdge1,e[t][r][f].ringAndEdgeIn)?i[g].nxtIsectAlongRingAndEdge1=e[t][r][f].nxtIsectAlongEdgeIn:i[g].nxtIsectAlongRingAndEdge2=e[t][r][f].nxtIsectAlongEdgeIn}for(c=[],t=0,r=0;r<b;r++){for(v=t,f=0;f<n.geometry.coordinates[r].length-1;f++)i[t].coord[0]<i[v].coord[0]&&(v=t),t++;for(vt=i[v].nxtIsectAlongRingAndEdge2,f=0;f<i.length;f++)if(i[f].nxtIsectAlongRingAndEdge1==v||i[f].nxtIsectAlongRingAndEdge2==v){yt=f;break}pt=tg([i[yt].coord,i[v].coord,i[vt].coord],!0)?1:-1;c.push({isect:v,parent:-1,winding:pt})}for(c.sort(function(n,t){return i[n.isect].coord>i[t.isect].coord?-1:1}),p=[];c.length>0;){var et=c.pop(),y=et.isect,ot=et.parent,w=et.winding,st=p.length,ht=[i[y].coord],it=y;for(i[y].ringAndEdge1Walkable?(nt=i[y].ringAndEdge1,u=i[y].nxtIsectAlongRingAndEdge1):(nt=i[y].ringAndEdge2,u=i[y].nxtIsectAlongRingAndEdge2);!vb(i[y].coord,i[u].coord);){for(ht.push(i[u].coord),rt=undefined,t=0;t<c.length;t++)if(c[t].isect==u){rt=t;break}rt!=undefined&&c.splice(rt,1);vb(nt,i[u].ringAndEdge1)?(nt=i[u].ringAndEdge2,i[u].ringAndEdge2Walkable=!1,i[u].ringAndEdge1Walkable&&(h={isect:u},tg([i[it].coord,i[u].coord,i[i[u].nxtIsectAlongRingAndEdge2].coord],w==1)?(h.parent=ot,h.winding=-w):(h.parent=st,h.winding=w),c.push(h)),it=u,u=i[u].nxtIsectAlongRingAndEdge2):(nt=i[u].ringAndEdge1,i[u].ringAndEdge1Walkable=!1,i[u].ringAndEdge2Walkable&&(h={isect:u},tg([i[it].coord,i[u].coord,i[i[u].nxtIsectAlongRingAndEdge1].coord],w==1)?(h.parent=ot,h.winding=-w):(h.parent=st,h.winding=w),c.push(h)),it=u,u=i[u].nxtIsectAlongRingAndEdge1)}ht.push(i[u].coord);p.push(ct([ht],{index:st,parent:ot,winding:w,netWinding:undefined}))}return o=d(p),wt(),bt(),o},oct=function(n,t,i,r,u){this.coord=n;this.param=t;this.ringAndEdgeIn=i;this.ringAndEdgeOut=r;this.nxtIsectAlongEdgeIn=u},sct=function(n,t,i,r,u,f,e){this.coord=n;this.ringAndEdge1=t;this.ringAndEdge2=i;this.nxtIsectAlongRingAndEdge1=r;this.nxtIsectAlongRingAndEdge2=u;this.ringAndEdge1Walkable=f;this.ringAndEdge2Walkable=e};Number.prototype.modulo=function(n){return(this%n+n)%n};var hct=Math.PI/180,cct=180/Math.PI,yb=function(n,t){this.lon=n;this.lat=t;this.x=hct*n;this.y=hct*t};yb.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};yb.prototype.antipode=function(){var n=-1*this.lat,t=this.lon<0?180+this.lon:(180-this.lon)*-1;return new yb(t,n)};trt=function(){this.coords=[];this.length=0};trt.prototype.move_to=function(n){this.length++;this.coords.push(n)};ig=function(n){this.properties=n||{};this.geometries=[]};ig.prototype.json=function(){var t,n;if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(t=[],n=0;n<this.geometries.length;n++)t.push(this.geometries[n].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}};ig.prototype.wkt=function(){for(var r,i="",t="LINESTRING(",u=function(n){t+=n[0]+" "+n[1]+","},n=0;n<this.geometries.length;n++){if(this.geometries[n].coords.length===0)return"LINESTRING(empty)";r=this.geometries[n].coords;r.forEach(u);i+=t.substring(0,t.length-1)+")"}return i};rg=function(n,t,i){if(!n||n.x===undefined||n.y===undefined)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||t.x===undefined||t.y===undefined)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new yb(n.x,n.y);this.end=new yb(t.x,t.y);this.properties=i||{};var r=this.start.x-this.end.x,u=this.start.y-this.end.y,f=Math.pow(Math.sin(u/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(f)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");else if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+t);};rg.prototype.interpolate=function(n){var t=Math.sin((1-n)*this.g)/Math.sin(this.g),i=Math.sin(n*this.g)/Math.sin(this.g),r=t*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),u=t*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),f=t*Math.sin(this.start.y)+i*Math.sin(this.end.y),e=cct*Math.atan2(f,Math.sqrt(Math.pow(r,2)+Math.pow(u,2))),o=cct*Math.atan2(u,r);return[o,e]};rg.prototype.Arc=function(n,t){var i=[],st,a,ht,ct,c,s,u,r,g,vt,yt,it,rt,ut,l,ft,y,et,ot,p;if(!n||n<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(st=1/(n-1),a=0;a<n;++a)ht=st*a,ct=this.interpolate(ht),i.push(ct);var lt=!1,w=0,v=t&&t.offset?t.offset:10,o=180-v,h=-180+v,at=360-v;for(c=1;c<i.length;++c){var b=i[c-1][0],k=i[c][0],d=Math.abs(k-b);d>at&&(k>o&&b<h||b>o&&k<h)?lt=!0:d>w&&(w=d)}if(s=[],lt&&w<v)for(u=[],s.push(u),r=0;r<i.length;++r)if(g=parseFloat(i[r][0]),r>0&&Math.abs(g-i[r-1][0])>at){var f=parseFloat(i[r-1][0]),nt=parseFloat(i[r-1][1]),e=parseFloat(i[r][0]),tt=parseFloat(i[r][1]);if(f>-180&&f<h&&e===180&&r+1<i.length&&i[r-1][0]>-180&&i[r-1][0]<h){u.push([-180,i[r][1]]);r++;u.push([i[r][0],i[r][1]]);continue}else if(f>o&&f<180&&e===-180&&r+1<i.length&&i[r-1][0]>o&&i[r-1][0]<180){u.push([180,i[r][1]]);r++;u.push([i[r][0],i[r][1]]);continue}f<h&&e>o&&(vt=f,f=e,e=vt,yt=nt,nt=tt,tt=yt);f>o&&e<h&&(e+=360);f<=180&&e>=180&&f<e?(it=(180-f)/(e-f),rt=it*tt+(1-it)*nt,u.push([i[r-1][0]>o?180:-180,rt]),u=[],u.push([i[r-1][0]>o?-180:180,rt]),s.push(u)):(u=[],s.push(u));u.push([g,i[r][1]])}else u.push([i[r][0],i[r][1]]);else for(ut=[],s.push(ut),l=0;l<i.length;++l)ut.push([i[l][0],i[l][1]]);for(ft=new ig(this.properties),y=0;y<s.length;++y)for(et=new trt,ft.geometries.push(et),ot=s[y],p=0;p<ot.length;++p)et.move_to(ot[p]);return ft};urt=fg;fg.polyline=fg;fg.polygon=kti;ert=Array.prototype.slice;
/*!
* @license GNU Affero General Public License.
* Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
* v. 1.2.0
* https://github.com/RaumZeit/MarchingSquares.js
*/
srt={successCallback:null,verbose:!1,polygons:!1};ca={};var se=64,ih=16,hf=4,ne=1,lt=[],at=[],vt=[],yt=[],pt=[],wt=[],bt=[],kt=[],dt=[],gt=[],ni=[],ti=[],ii=[],ri=[],ui=[],fi=[],ei=[],oi=[],si=[],hi=[],ci=[],li=[],ai=[],vi=[];bt[85]=gt[85]=-1;kt[85]=ni[85]=0;dt[85]=ti[85]=1;si[85]=li[85]=1;hi[85]=ai[85]=0;ci[85]=vi[85]=1;lt[85]=yt[85]=0;at[85]=pt[85]=-1;vt[85]=ui[85]=0;fi[85]=ii[85]=0;ei[85]=ri[85]=1;wt[85]=oi[85]=1;li[1]=li[169]=0;ai[1]=ai[169]=-1;vi[1]=vi[169]=0;ii[1]=ii[169]=-1;ri[1]=ri[169]=0;ui[1]=ui[169]=0;gt[4]=gt[166]=0;ni[4]=ni[166]=-1;ti[4]=ti[166]=1;fi[4]=fi[166]=1;ei[4]=ei[166]=0;oi[4]=oi[166]=0;bt[16]=bt[154]=0;kt[16]=kt[154]=1;dt[16]=dt[154]=1;yt[16]=yt[154]=1;pt[16]=pt[154]=0;wt[16]=wt[154]=1;si[64]=si[106]=0;hi[64]=hi[106]=1;ci[64]=ci[106]=0;lt[64]=lt[106]=-1;at[64]=at[106]=0;vt[64]=vt[106]=1;si[2]=si[168]=0;hi[2]=hi[168]=-1;ci[2]=ci[168]=1;li[2]=li[168]=0;ai[2]=ai[168]=-1;vi[2]=vi[168]=0;ii[2]=ii[168]=-1;ri[2]=ri[168]=0;ui[2]=ui[168]=0;fi[2]=fi[168]=-1;ei[2]=ei[168]=0;oi[2]=oi[168]=1;bt[8]=bt[162]=0;kt[8]=kt[162]=-1;dt[8]=dt[162]=0;gt[8]=gt[162]=0;ni[8]=ni[162]=-1;ti[8]=ti[162]=1;ii[8]=ii[162]=1;ri[8]=ri[162]=0;ui[8]=ui[162]=1;fi[8]=fi[162]=1;ei[8]=ei[162]=0;oi[8]=oi[162]=0;bt[32]=bt[138]=0;kt[32]=kt[138]=1;dt[32]=dt[138]=1;gt[32]=gt[138]=0;ni[32]=ni[138]=1;ti[32]=ti[138]=0;lt[32]=lt[138]=1;at[32]=at[138]=0;vt[32]=vt[138]=0;yt[32]=yt[138]=1;pt[32]=pt[138]=0;wt[32]=wt[138]=1;li[128]=li[42]=0;ai[128]=ai[42]=1;vi[128]=vi[42]=1;si[128]=si[42]=0;hi[128]=hi[42]=1;ci[128]=ci[42]=0;lt[128]=lt[42]=-1;at[128]=at[42]=0;vt[128]=vt[42]=1;yt[128]=yt[42]=-1;pt[128]=pt[42]=0;wt[128]=wt[42]=0;gt[5]=gt[165]=-1;ni[5]=ni[165]=0;ti[5]=ti[165]=0;li[5]=li[165]=1;ai[5]=ai[165]=0;vi[5]=vi[165]=0;fi[20]=fi[150]=0;ei[20]=ei[150]=1;oi[20]=oi[150]=1;yt[20]=yt[150]=0;pt[20]=pt[150]=-1;wt[20]=wt[150]=1;bt[80]=bt[90]=-1;kt[80]=kt[90]=0;dt[80]=dt[90]=1;si[80]=si[90]=1;hi[80]=hi[90]=0;ci[80]=ci[90]=1;ii[65]=ii[105]=0;ri[65]=ri[105]=1;ui[65]=ui[105]=0;lt[65]=lt[105]=0;at[65]=at[105]=-1;vt[65]=vt[105]=0;bt[160]=bt[10]=-1;kt[160]=kt[10]=0;dt[160]=dt[10]=1;gt[160]=gt[10]=-1;ni[160]=ni[10]=0;ti[160]=ti[10]=0;li[160]=li[10]=1;ai[160]=ai[10]=0;vi[160]=vi[10]=0;si[160]=si[10]=1;hi[160]=hi[10]=0;ci[160]=ci[10]=1;fi[130]=fi[40]=0;ei[130]=ei[40]=1;oi[130]=oi[40]=1;ii[130]=ii[40]=0;ri[130]=ri[40]=1;ui[130]=ui[40]=0;lt[130]=lt[40]=0;at[130]=at[40]=-1;vt[130]=vt[40]=0;yt[130]=yt[40]=0;pt[130]=pt[40]=-1;wt[130]=wt[40]=1;gt[37]=gt[133]=0;ni[37]=ni[133]=1;ti[37]=ti[133]=1;li[37]=li[133]=0;ai[37]=ai[133]=1;vi[37]=vi[133]=0;lt[37]=lt[133]=-1;at[37]=at[133]=0;vt[37]=vt[133]=0;yt[37]=yt[133]=1;pt[37]=pt[133]=0;wt[37]=wt[133]=0;fi[148]=fi[22]=-1;ei[148]=ei[22]=0;oi[148]=oi[22]=0;li[148]=li[22]=0;ai[148]=ai[22]=-1;vi[148]=vi[22]=1;si[148]=si[22]=0;hi[148]=hi[22]=1;ci[148]=ci[22]=1;yt[148]=yt[22]=-1;pt[148]=pt[22]=0;wt[148]=wt[22]=1;bt[82]=bt[88]=0;kt[82]=kt[88]=-1;dt[82]=dt[88]=1;fi[82]=fi[88]=1;ei[82]=ei[88]=0;oi[82]=oi[88]=1;ii[82]=ii[88]=-1;ri[82]=ri[88]=0;ui[82]=ui[88]=1;si[82]=si[88]=0;hi[82]=hi[88]=-1;ci[82]=ci[88]=0;bt[73]=bt[97]=0;kt[73]=kt[97]=1;dt[73]=dt[97]=0;gt[73]=gt[97]=0;ni[73]=ni[97]=-1;ti[73]=ti[97]=0;ii[73]=ii[97]=1;ri[73]=ri[97]=0;ui[73]=ui[97]=0;lt[73]=lt[97]=1;at[73]=at[97]=0;vt[73]=vt[97]=1;bt[145]=bt[25]=0;kt[145]=kt[25]=-1;dt[145]=dt[25]=0;ii[145]=ii[25]=1;ri[145]=ri[25]=0;ui[145]=ui[25]=1;li[145]=li[25]=0;ai[145]=ai[25]=1;vi[145]=vi[25]=1;yt[145]=yt[25]=-1;pt[145]=pt[25]=0;wt[145]=wt[25]=0;gt[70]=gt[100]=0;ni[70]=ni[100]=1;ti[70]=ti[100]=0;fi[70]=fi[100]=-1;ei[70]=ei[100]=0;oi[70]=oi[100]=1;si[70]=si[100]=0;hi[70]=hi[100]=-1;ci[70]=ci[100]=1;lt[70]=lt[100]=1;at[70]=at[100]=0;vt[70]=vt[100]=0;gt[101]=gt[69]=0;ni[101]=ni[69]=1;ti[101]=ti[69]=0;lt[101]=lt[69]=1;at[101]=at[69]=0;vt[101]=vt[69]=0;li[149]=li[21]=0;ai[149]=ai[21]=1;vi[149]=vi[21]=1;yt[149]=yt[21]=-1;pt[149]=pt[21]=0;wt[149]=wt[21]=0;fi[86]=fi[84]=-1;ei[86]=ei[84]=0;oi[86]=oi[84]=1;si[86]=si[84]=0;hi[86]=hi[84]=-1;ci[86]=ci[84]=1;bt[89]=bt[81]=0;kt[89]=kt[81]=-1;dt[89]=dt[81]=0;ii[89]=ii[81]=1;ri[89]=ri[81]=0;ui[89]=ui[81]=1;bt[96]=bt[74]=0;kt[96]=kt[74]=1;dt[96]=dt[74]=0;gt[96]=gt[74]=-1;ni[96]=ni[74]=0;ti[96]=ti[74]=1;si[96]=si[74]=1;hi[96]=hi[74]=0;ci[96]=ci[74]=0;lt[96]=lt[74]=1;at[96]=at[74]=0;vt[96]=vt[74]=1;bt[24]=bt[146]=0;kt[24]=kt[146]=-1;dt[24]=dt[146]=1;fi[24]=fi[146]=1;ei[24]=ei[146]=0;oi[24]=oi[146]=1;ii[24]=ii[146]=0;ri[24]=ri[146]=1;ui[24]=ui[146]=1;yt[24]=yt[146]=0;pt[24]=pt[146]=-1;wt[24]=wt[146]=0;gt[6]=gt[164]=-1;ni[6]=ni[164]=0;ti[6]=ti[164]=1;fi[6]=fi[164]=-1;ei[6]=ei[164]=0;oi[6]=oi[164]=0;li[6]=li[164]=0;ai[6]=ai[164]=-1;vi[6]=vi[164]=1;si[6]=si[164]=1;hi[6]=hi[164]=0;ci[6]=ci[164]=0;ii[129]=ii[41]=0;ri[129]=ri[41]=1;ui[129]=ui[41]=1;li[129]=li[41]=0;ai[129]=ai[41]=1;vi[129]=vi[41]=0;lt[129]=lt[41]=-1;at[129]=at[41]=0;vt[129]=vt[41]=0;yt[129]=yt[41]=0;pt[129]=pt[41]=-1;wt[129]=wt[41]=0;fi[66]=fi[104]=0;ei[66]=ei[104]=1;oi[66]=oi[104]=0;ii[66]=ii[104]=-1;ri[66]=ri[104]=0;ui[66]=ui[104]=1;si[66]=si[104]=0;hi[66]=hi[104]=-1;ci[66]=ci[104]=0;lt[66]=lt[104]=0;at[66]=at[104]=-1;vt[66]=vt[104]=1;bt[144]=bt[26]=-1;kt[144]=kt[26]=0;dt[144]=dt[26]=0;li[144]=li[26]=1;ai[144]=ai[26]=0;vi[144]=vi[26]=1;si[144]=si[26]=0;hi[144]=hi[26]=1;ci[144]=ci[26]=1;yt[144]=yt[26]=-1;pt[144]=pt[26]=0;wt[144]=wt[26]=1;gt[36]=gt[134]=0;ni[36]=ni[134]=1;ti[36]=ti[134]=1;fi[36]=fi[134]=0;ei[36]=ei[134]=1;oi[36]=oi[134]=0;lt[36]=lt[134]=0;at[36]=at[134]=-1;vt[36]=vt[134]=1;yt[36]=yt[134]=1;pt[36]=pt[134]=0;wt[36]=wt[134]=0;bt[9]=bt[161]=-1;kt[9]=kt[161]=0;dt[9]=dt[161]=0;gt[9]=gt[161]=0;ni[9]=ni[161]=-1;ti[9]=ti[161]=0;ii[9]=ii[161]=1;ri[9]=ri[161]=0;ui[9]=ui[161]=0;li[9]=li[161]=1;ai[9]=ai[161]=0;vi[9]=vi[161]=1;bt[136]=0;kt[136]=1;dt[136]=1;gt[136]=0;ni[136]=1;ti[136]=0;fi[136]=-1;ei[136]=0;oi[136]=1;ii[136]=-1;ri[136]=0;ui[136]=0;li[136]=0;ai[136]=-1;vi[136]=0;si[136]=0;hi[136]=-1;ci[136]=1;lt[136]=1;at[136]=0;vt[136]=0;yt[136]=1;pt[136]=0;wt[136]=1;bt[34]=0;kt[34]=-1;dt[34]=0;gt[34]=0;ni[34]=-1;ti[34]=1;fi[34]=1;ei[34]=0;oi[34]=0;ii[34]=1;ri[34]=0;ui[34]=1;li[34]=0;ai[34]=1;vi[34]=1;si[34]=0;hi[34]=1;ci[34]=0;lt[34]=-1;at[34]=0;vt[34]=1;yt[34]=-1;pt[34]=0;wt[34]=0;bt[35]=0;kt[35]=1;dt[35]=1;gt[35]=0;ni[35]=-1;ti[35]=1;fi[35]=1;ei[35]=0;oi[35]=0;ii[35]=-1;ri[35]=0;ui[35]=0;li[35]=0;ai[35]=-1;vi[35]=0;si[35]=0;hi[35]=1;ci[35]=0;lt[35]=-1;at[35]=0;vt[35]=1;yt[35]=1;pt[35]=0;wt[35]=1;bt[153]=0;kt[153]=1;dt[153]=1;ii[153]=-1;ri[153]=0;ui[153]=0;li[153]=0;ai[153]=-1;vi[153]=0;yt[153]=1;pt[153]=0;wt[153]=1;gt[102]=0;ni[102]=-1;ti[102]=1;fi[102]=1;ei[102]=0;oi[102]=0;si[102]=0;hi[102]=1;ci[102]=0;lt[102]=-1;at[102]=0;vt[102]=1;bt[155]=0;kt[155]=-1;dt[155]=0;ii[155]=1;ri[155]=0;ui[155]=1;li[155]=0;ai[155]=1;vi[155]=1;yt[155]=-1;pt[155]=0;wt[155]=0;gt[103]=0;ni[103]=1;ti[103]=0;fi[103]=-1;ei[103]=0;oi[103]=1;si[103]=0;hi[103]=-1;ci[103]=1;lt[103]=1;at[103]=0;vt[103]=0;bt[152]=0;kt[152]=1;dt[152]=1;fi[152]=-1;ei[152]=0;oi[152]=1;ii[152]=-1;ri[152]=0;ui[152]=0;li[152]=0;ai[152]=-1;vi[152]=0;si[152]=0;hi[152]=-1;ci[152]=1;yt[152]=1;pt[152]=0;wt[152]=1;bt[156]=0;kt[156]=-1;dt[156]=1;fi[156]=1;ei[156]=0;oi[156]=1;ii[156]=-1;ri[156]=0;ui[156]=0;li[156]=0;ai[156]=-1;vi[156]=0;si[156]=0;hi[156]=1;ci[156]=1;yt[156]=-1;pt[156]=0;wt[156]=1;bt[137]=0;kt[137]=1;dt[137]=1;gt[137]=0;ni[137]=1;ti[137]=0;ii[137]=-1;ri[137]=0;ui[137]=0;li[137]=0;ai[137]=-1;vi[137]=0;lt[137]=1;at[137]=0;vt[137]=0;yt[137]=1;pt[137]=0;wt[137]=1;bt[139]=0;kt[139]=1;dt[139]=1;gt[139]=0;ni[139]=-1;ti[139]=0;ii[139]=1;ri[139]=0;ui[139]=0;li[139]=0;ai[139]=1;vi[139]=0;lt[139]=-1;at[139]=0;vt[139]=0;yt[139]=1;pt[139]=0;wt[139]=1;bt[98]=0;kt[98]=-1;dt[98]=0;gt[98]=0;ni[98]=-1;ti[98]=1;fi[98]=1;ei[98]=0;oi[98]=0;ii[98]=1;ri[98]=0;ui[98]=1;si[98]=0;hi[98]=1;ci[98]=0;lt[98]=-1;at[98]=0;vt[98]=1;bt[99]=0;kt[99]=1;dt[99]=0;gt[99]=0;ni[99]=-1;ti[99]=1;fi[99]=1;ei[99]=0;oi[99]=0;ii[99]=-1;ri[99]=0;ui[99]=1;si[99]=0;hi[99]=-1;ci[99]=0;lt[99]=1;at[99]=0;vt[99]=1;gt[38]=0;ni[38]=-1;ti[38]=1;fi[38]=1;ei[38]=0;oi[38]=0;li[38]=0;ai[38]=1;vi[38]=1;si[38]=0;hi[38]=1;ci[38]=0;lt[38]=-1;at[38]=0;vt[38]=1;yt[38]=-1;pt[38]=0;wt[38]=0;gt[39]=0;ni[39]=1;ti[39]=1;fi[39]=-1;ei[39]=0;oi[39]=0;li[39]=0;ai[39]=-1;vi[39]=1;si[39]=0;hi[39]=1;ci[39]=0;lt[39]=-1;at[39]=0;vt[39]=1;yt[39]=1;pt[39]=0;wt[39]=0;var hrt=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},crt=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},lrt=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},art=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},vrt=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},yrt=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},prt=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},wrt=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},cii=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},lii=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},aii=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},vii=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},yii=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},pii=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},wii=function(){return[[0,0],[0,1],[1,1],[1,0]]},bii=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},kii=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},dii=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},gii=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},nri=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},tri=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},iri=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},rri=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},uri=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},fri=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},eri=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},ori=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},sri=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},hri=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},cri=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},lri=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},ari=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},vri=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},yri=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},pri=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},wri=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},bri=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},kri=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},dri=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},gri=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},c=[],h=[],w=[],y=[],nt=[],g=[],yi=[],pi=[];y[1]=nt[1]=18;y[169]=nt[169]=18;w[4]=h[4]=12;w[166]=h[166]=12;c[16]=pi[16]=4;c[154]=pi[154]=4;g[64]=yi[64]=22;g[106]=yi[106]=22;w[2]=g[2]=17;y[2]=nt[2]=18;w[168]=g[168]=17;y[168]=nt[168]=18;c[8]=y[8]=9;h[8]=w[8]=12;c[162]=y[162]=9;h[162]=w[162]=12;c[32]=pi[32]=4;h[32]=yi[32]=1;c[138]=pi[138]=4;h[138]=yi[138]=1;nt[128]=pi[128]=21;g[128]=yi[128]=22;nt[42]=pi[42]=21;g[42]=yi[42]=22;h[5]=nt[5]=14;h[165]=nt[165]=14;w[20]=pi[20]=6;w[150]=pi[150]=6;c[80]=g[80]=11;c[90]=g[90]=11;y[65]=yi[65]=3;y[105]=yi[105]=3;c[160]=g[160]=11;h[160]=nt[160]=14;c[10]=g[10]=11;h[10]=nt[10]=14;w[130]=pi[130]=6;y[130]=yi[130]=3;w[40]=pi[40]=6;y[40]=yi[40]=3;h[101]=yi[101]=1;h[69]=yi[69]=1;nt[149]=pi[149]=21;nt[21]=pi[21]=21;w[86]=g[86]=17;w[84]=g[84]=17;c[89]=y[89]=9;c[81]=y[81]=9;c[96]=yi[96]=0;h[96]=g[96]=15;c[74]=yi[74]=0;h[74]=g[74]=15;c[24]=w[24]=8;y[24]=pi[24]=7;c[146]=w[146]=8;y[146]=pi[146]=7;h[6]=g[6]=15;w[6]=nt[6]=16;h[164]=g[164]=15;w[164]=nt[164]=16;y[129]=pi[129]=7;nt[129]=yi[129]=20;y[41]=pi[41]=7;nt[41]=yi[41]=20;w[66]=yi[66]=2;y[66]=g[66]=19;w[104]=yi[104]=2;y[104]=g[104]=19;c[144]=nt[144]=10;g[144]=pi[144]=23;c[26]=nt[26]=10;g[26]=pi[26]=23;h[36]=pi[36]=5;w[36]=yi[36]=2;h[134]=pi[134]=5;w[134]=yi[134]=2;c[9]=nt[9]=10;h[9]=y[9]=13;c[161]=nt[161]=10;h[161]=y[161]=13;h[37]=pi[37]=5;nt[37]=yi[37]=20;h[133]=pi[133]=5;nt[133]=yi[133]=20;w[148]=nt[148]=16;g[148]=pi[148]=23;w[22]=nt[22]=16;g[22]=pi[22]=23;c[82]=w[82]=8;y[82]=g[82]=19;c[88]=w[88]=8;y[88]=g[88]=19;c[73]=yi[73]=0;h[73]=y[73]=13;c[97]=yi[97]=0;h[97]=y[97]=13;c[145]=y[145]=9;nt[145]=pi[145]=21;c[25]=y[25]=9;nt[25]=pi[25]=21;h[70]=yi[70]=1;w[70]=g[70]=17;h[100]=yi[100]=1;w[100]=g[100]=17;c[34]=y[34]=9;h[34]=w[34]=12;nt[34]=pi[34]=21;g[34]=yi[34]=22;c[136]=pi[136]=4;h[136]=yi[136]=1;w[136]=g[136]=17;y[136]=nt[136]=18;c[35]=pi[35]=4;h[35]=w[35]=12;y[35]=nt[35]=18;g[35]=yi[35]=22;c[153]=pi[153]=4;y[153]=nt[153]=18;h[102]=w[102]=12;g[102]=yi[102]=22;c[155]=y[155]=9;nt[155]=pi[155]=23;h[103]=yi[103]=1;w[103]=g[103]=17;c[152]=pi[152]=4;w[152]=g[152]=17;y[152]=nt[152]=18;c[156]=w[156]=8;y[156]=nt[156]=18;g[156]=pi[156]=23;c[137]=pi[137]=4;h[137]=yi[137]=1;y[137]=nt[137]=18;c[139]=pi[139]=4;h[139]=y[139]=13;nt[139]=yi[139]=20;c[98]=y[98]=9;h[98]=w[98]=12;g[98]=yi[98]=22;c[99]=yi[99]=0;h[99]=w[99]=12;y[99]=g[99]=19;h[38]=w[38]=12;nt[38]=pi[38]=21;g[38]=yi[38]=22;h[39]=pi[39]=5;w[39]=nt[39]=16;g[39]=yi[39]=22;s=[];s[1]=s[169]=hrt;s[4]=s[166]=crt;s[16]=s[154]=lrt;s[64]=s[106]=art;s[168]=s[2]=vrt;s[162]=s[8]=yrt;s[138]=s[32]=prt;s[42]=s[128]=wrt;s[5]=s[165]=cii;s[20]=s[150]=lii;s[80]=s[90]=aii;s[65]=s[105]=vii;s[160]=s[10]=yii;s[130]=s[40]=pii;s[85]=wii;s[101]=s[69]=bii;s[149]=s[21]=kii;s[86]=s[84]=dii;s[89]=s[81]=gii;s[96]=s[74]=nri;s[24]=s[146]=tri;s[6]=s[164]=iri;s[129]=s[41]=rri;s[66]=s[104]=uri;s[144]=s[26]=fri;s[36]=s[134]=eri;s[9]=s[161]=ori;s[37]=s[133]=sri;s[148]=s[22]=hri;s[82]=s[88]=cri;s[73]=s[97]=lri;s[145]=s[25]=ari;s[70]=s[100]=vri;s[34]=function(n){return[wrt(n),yrt(n)]};s[35]=yri;s[136]=function(n){return[prt(n),vrt(n)]};s[153]=function(n){return[lrt(n),hrt(n)]};s[102]=function(n){return[crt(n),art(n)]};s[155]=pri;s[103]=wri;s[152]=function(n){return[lrt(n),vrt(n)]};s[156]=bri;s[137]=function(n){return[prt(n),hrt(n)]};s[139]=kri;s[98]=function(n){return[yrt(n),art(n)]};s[99]=dri;s[38]=function(n){return[crt(n),wrt(n)]};s[39]=gri;wh=function bd(n){this.id=bd.buildId(n);this.coordinates=n;this.innerEdges=[];this.outerEdges=[];this.outerEdgesSorted=!1};wh.buildId=function(n){return n.join(",")};wh.prototype.removeInnerEdge=function(n){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==n.from.id})};wh.prototype.removeOuterEdge=function(n){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==n.to.id})};wh.prototype.addOuterEdge=function(n){this.outerEdges.push(n);this.outerEdgesSorted=!1};wh.prototype.sortOuterEdges=function(){var n=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,u=i.to,f,e,o;return r.coordinates[0]-n.coordinates[0]>=0&&u.coordinates[0]-n.coordinates[0]<0?1:r.coordinates[0]-n.coordinates[0]<0&&u.coordinates[0]-n.coordinates[0]>=0?-1:r.coordinates[0]-n.coordinates[0]==0&&u.coordinates[0]-n.coordinates[0]==0?r.coordinates[1]-n.coordinates[1]>=0||u.coordinates[1]-n.coordinates[1]>=0?r.coordinates[1]-u.coordinates[1]:u.coordinates[1]-r.coordinates[1]:(f=drt(n.coordinates,r.coordinates,u.coordinates),f<0)?1:f>0?-1:(e=Math.pow(r.coordinates[0]-n.coordinates[0],2)+Math.pow(r.coordinates[1]-n.coordinates[1],2),o=Math.pow(u.coordinates[0]-n.coordinates[0],2)+Math.pow(u.coordinates[1]-n.coordinates[1],2),e-o)}),this.outerEdgesSorted=!0)};wh.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges};wh.prototype.getOuterEdge=function(n){return this.sortOuterEdges(),this.outerEdges[n]};wh.prototype.addInnerEdge=function(n){this.innerEdges.push(n)};yl=function(n,t){this.from=n;this.to=t;this.next=undefined;this.label=undefined;this.symetric=undefined;this.ring=undefined;this.from.addOuterEdge(this);this.to.addInnerEdge(this)};yl.prototype.getSymetric=function(){return this.symetric||(this.symetric=new yl(this.to,this.from),this.symetric.symetric=this),this.symetric};yl.prototype.deleteEdge=function(){this.from.removeOuterEdge(this);this.to.removeInnerEdge(this)};yl.prototype.isEqual=function(n){return this.from.id===n.from.id&&this.to.id===n.to.id};yl.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"};yl.prototype.toLineString=function(){return fr([this.from.coordinates,this.to.coordinates])};yl.prototype.compareTo=function(n){return drt(n.from.coordinates,n.to.coordinates,this.to.coordinates)};we=function(){this.edges=[];this.polygon=undefined;this.envelope=undefined};grt={length:{configurable:!0}};we.prototype.push=function(n){this[this.edges.length]=n;this.edges.push(n);this.polygon=this.envelope=undefined};we.prototype.get=function(n){return this.edges[n]};grt.length.get=function(){return this.edges.length};we.prototype.forEach=function(n){this.edges.forEach(n)};we.prototype.map=function(n){return this.edges.map(n)};we.prototype.some=function(n){return this.edges.some(n)};we.prototype.isValid=function(){return!0};we.prototype.isHole=function(){var u=this,n=this.edges.reduce(function(n,t,i){return t.from.coordinates[1]>u.edges[n].from.coordinates[1]&&(n=i),n},0),t=(n===0?this.length:n)-1,i=(n+1)%this.length,r=drt(this.edges[t].from.coordinates,this.edges[n].from.coordinates,this.edges[i].from.coordinates);return r===0?this.edges[t].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0};we.prototype.toMultiPoint=function(){return id(this.edges.map(function(n){return n.from.coordinates}))};we.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var n=this.edges.map(function(n){return n.from.coordinates});return n.push(this.edges[0].from.coordinates),this.polygon=ct([n])};we.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=bst(this.toPolygon())};we.findEdgeRingContaining=function(n,t){var r=n.getEnvelope(),u,i;return t.forEach(function(t){var f=t.getEnvelope(),e;(i&&(u=i.getEnvelope()),rfi(f,r))||llt(f,r)&&(e=n.map(function(n){return n.from.coordinates}).find(function(n){return!t.some(function(t){return ufi(n,t.from.coordinates)})}),e&&t.inside(ki(e))&&(!i||llt(u,f))&&(i=t))}),i};we.prototype.inside=function(n){return pr(n,this.toPolygon())};Object.defineProperties(we.prototype,grt);he=function(){this.edges=[];this.nodes={}};he.fromGeoJson=function(n){ffi(n);var t=new he;return su(n,function(n){ww(n,"LineString","Graph::fromGeoJson");fd(n,function(n,i){if(n){var r=t.getNode(n),u=t.getNode(i);t.addEdge(r,u)}return i})}),t};he.prototype.getNode=function(n){var i=wh.buildId(n),t=this.nodes[i];return t||(t=this.nodes[i]=new wh(n)),t};he.prototype.addEdge=function(n,t){var i=new yl(n,t),r=i.getSymetric();this.edges.push(i);this.edges.push(r)};he.prototype.deleteDangles=function(){var n=this;Object.keys(this.nodes).map(function(t){return n.nodes[t]}).forEach(function(t){return n._removeIfDangle(t)})};he.prototype._removeIfDangle=function(n){var i=this,t;n.innerEdges.length<=1&&(t=n.getOuterEdges().map(function(n){return n.to}),this.removeNode(n),t.forEach(function(n){return i._removeIfDangle(n)}))};he.prototype.deleteCutEdges=function(){var n=this;this._computeNextCWEdges();this._findLabeledEdgeRings();this.edges.forEach(function(t){t.label===t.symetric.label&&(n.removeEdge(t.symetric),n.removeEdge(t))})};he.prototype._computeNextCWEdges=function(n){var t=this;typeof n=="undefined"?Object.keys(this.nodes).forEach(function(n){return t._computeNextCWEdges(t.nodes[n])}):n.getOuterEdges().forEach(function(t,i){n.getOuterEdge((i===0?n.getOuterEdges().length:i)-1).symetric.next=t})};he.prototype._computeNextCCWEdges=function(n,t){for(var s=n.getOuterEdges(),f,i,e=s.length-1;e>=0;--e){var o=s[e],h=o.symetric,r=void 0,u=void 0;(o.label===t&&(r=o),h.label===t&&(u=h),r&&u)&&(u&&(i=u),r&&(i&&(i.next=r,i=undefined),f||(f=r)))}i&&(i.next=f)};he.prototype._findLabeledEdgeRings=function(){var n=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){n.push(i);var r=i;do r.label=t,r=r.next;while(!i.isEqual(r));t++}}),n};he.prototype.getEdgeRings=function(){var n=this,t;return this._computeNextCWEdges(),this.edges.forEach(function(n){n.label=undefined}),this._findLabeledEdgeRings().forEach(function(t){n._findIntersectionNodes(t).forEach(function(i){n._computeNextCCWEdges(i,t.label)})}),t=[],this.edges.forEach(function(i){i.ring||t.push(n._findEdgeRing(i))}),t};he.prototype._findIntersectionNodes=function(n){var i=[],t=n,r=function(){var r=0;t.from.getOuterEdges().forEach(function(t){t.label===n.label&&++r});r>1&&i.push(t.from);t=t.next};do r();while(!n.isEqual(t));return i};he.prototype._findEdgeRing=function(n){var t=n,i=new we;do i.push(t),t.ring=i,t=t.next;while(!n.isEqual(t));return i};he.prototype.removeNode=function(n){var t=this;n.getOuterEdges().forEach(function(n){return t.removeEdge(n)});n.innerEdges.forEach(function(n){return t.removeEdge(n)});delete this.nodes[n.id]};he.prototype.removeEdge=function(n){this.edges=this.edges.filter(function(t){return!t.isEqual(n)});n.deleteEdge()};var tut=cl(function(n,t){function i(n){var t=[];for(var i in n)t.push(i);return t}t=n.exports=typeof Object.keys=="function"?Object.keys:i;t.shim=i}),oai=tut.shim,hg=cl(function(n,t){function i(n){return Object.prototype.toString.call(n)=="[object Arguments]"}function r(n){return n&&typeof n=="object"&&typeof n.length=="number"&&Object.prototype.hasOwnProperty.call(n,"callee")&&!Object.prototype.propertyIsEnumerable.call(n,"callee")||!1}var u=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";t=n.exports=u?i:r;t.supported=i;t.unsupported=r}),sai=hg.supported,hai=hg.unsupported,rei=cl(function(n){function r(n){return n===null||n===undefined}function u(n){return!n||typeof n!="object"||typeof n.length!="number"?!1:typeof n.copy!="function"||typeof n.slice!="function"?!1:n.length>0&&typeof n[0]!="number"?!1:!0}function f(n,f,e){var o,c,s,h;if(r(n)||r(f)||n.prototype!==f.prototype)return!1;if(hg(n))return hg(f)?(n=t.call(n),f=t.call(f),i(n,f,e)):!1;if(u(n)){if(!u(f)||n.length!==f.length)return!1;for(o=0;o<n.length;o++)if(n[o]!==f[o])return!1;return!0}try{s=tut(n);h=tut(f)}catch(l){return!1}if(s.length!=h.length)return!1;for(s.sort(),h.sort(),o=s.length-1;o>=0;o--)if(s[o]!=h[o])return!1;for(o=s.length-1;o>=0;o--)if(c=s[o],!i(n[c],f[c],e))return!1;return typeof n==typeof f}var t=Array.prototype.slice,i=n.exports=function(n,t,i){return i||(i={}),n===t?!0:n instanceof Date&&t instanceof Date?n.getTime()===t.getTime():n&&t&&(typeof n=="object"||typeof t=="object")?f(n,t,i):i.strict?n===t:n==t}}),hc=function(n){this.precision=n&&n.precision?n.precision:17;this.direction=n&&n.direction?n.direction:!1;this.pseudoNode=n&&n.pseudoNode?n.pseudoNode:!1;this.objectComparator=n&&n.objectComparator?n.objectComparator:uei};hc.prototype.compare=function(n,t){if(n.type!==t.type||!glt(n,t))return!1;switch(n.type){case"Point":return this.compareCoord(n.coordinates,t.coordinates);case"LineString":return this.compareLine(n.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(n,t);case"Feature":return this.compareFeature(n,t);default:if(n.type.indexOf("Multi")===0){var i=this,r=dlt(n),u=dlt(t);return r.every(function(n){return this.some(function(t){return i.compare(n,t)})},u)}}return!1};hc.prototype.compareCoord=function(n,t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i].toFixed(this.precision)!==t[i].toFixed(this.precision))return!1;return!0};hc.prototype.compareLine=function(n,t,i,r){var f,u,e;return glt(n,t)?(f=this.pseudoNode?n:this.removePseudo(n),u=this.pseudoNode?t:this.removePseudo(t),r&&!this.compareCoord(f[0],u[0])&&(u=this.fixStartIndex(u,f),!u))?void 0:(e=this.compareCoord(f[i],u[i]),this.direction||e?this.comparePath(f,u):this.compareCoord(f[i],u[u.length-(1+i)])?this.comparePath(f.slice().reverse(),u):!1):!1};hc.prototype.fixStartIndex=function(n,t){for(var u,i=-1,r=0;r<n.length;r++)if(this.compareCoord(n[r],t[0])){i=r;break}return i>=0&&(u=[].concat(n.slice(i,n.length),n.slice(1,i+1))),u};hc.prototype.comparePath=function(n,t){var i=this;return n.every(function(n,t){return i.compareCoord(n,this[t])},t)};hc.prototype.comparePolygon=function(n,t){if(this.compareLine(n.coordinates[0],t.coordinates[0],1,!0)){var i=n.coordinates.slice(1,n.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length),u=this;return i.every(function(n){return this.some(function(t){return u.compareLine(n,t,1,!0)})},r)}return!1};hc.prototype.compareFeature=function(n,t){return n.id!==t.id||!this.objectComparator(n.properties,t.properties)||!this.compareBBox(n,t)?!1:this.compare(n.geometry,t.geometry)};hc.prototype.compareBBox=function(n,t){return!n.bbox&&!t.bbox||n.bbox&&t.bbox&&this.compareCoord(n.bbox,t.bbox)?!0:!1};hc.prototype.removePseudo=function(n){return n};iut=hc;var eei=cl(function(n){function t(n,t,i,r){this.dataset=[];this.epsilon=1;this.minPts=2;this.distance=this._euclideanDistance;this.clusters=[];this.noise=[];this._visited=[];this._assigned=[];this._datasetLength=0;this._init(n,t,i,r)}t.prototype.run=function(n,t,i,r){var u,f,e;for(this._init(n,t,i,r),u=0;u<this._datasetLength;u++)this._visited[u]!==1&&(this._visited[u]=1,f=this._regionQuery(u),f.length<this.minPts?this.noise.push(u):(e=this.clusters.length,this.clusters.push([]),this._addToCluster(u,e),this._expandCluster(e,f)));return this.clusters};t.prototype._init=function(n,t,i,r){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n;this.clusters=[];this.noise=[];this._datasetLength=n.length;this._visited=new Array(this._datasetLength);this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t);i&&(this.minPts=i);r&&(this.distance=r)};t.prototype._expandCluster=function(n,t){for(var i,u,r=0;r<t.length;r++)i=t[r],this._visited[i]!==1&&(this._visited[i]=1,u=this._regionQuery(i),u.length>=this.minPts&&(t=this._mergeArrays(t,u))),this._assigned[i]!==1&&this._addToCluster(i,n)};t.prototype._addToCluster=function(n,t){this.clusters[t].push(n);this._assigned[n]=1};t.prototype._regionQuery=function(n){for(var r,i=[],t=0;t<this._datasetLength;t++)r=this.distance(this.dataset[n],this.dataset[t]),r<this.epsilon&&i.push(t);return i};t.prototype._mergeArrays=function(n,t){for(var r,u=t.length,i=0;i<u;i++)r=t[i],n.indexOf(r)<0&&n.push(r);return n};t.prototype._euclideanDistance=function(n,t){for(var r=0,i=Math.min(n.length,t.length);i--;)r+=(n[i]-t[i])*(n[i]-t[i]);return Math.sqrt(r)};!0&&n.exports&&(n.exports=t)}),oei=cl(function(n){function t(n,t,i){this.k=3;this.dataset=[];this.assignments=[];this.centroids=[];this.init(n,t,i)}t.prototype.init=function(n,t,i){this.assignments=[];this.centroids=[];typeof n!="undefined"&&(this.dataset=n);typeof t!="undefined"&&(this.k=t);typeof i!="undefined"&&(this.distance=i)};t.prototype.run=function(n,t){var c,o,s,r,f,h,u,e,i;for(this.init(n,t),c=this.dataset.length,o=0;o<this.k;o++)this.centroids[o]=this.randomCentroid();for(s=!0;s;)for(s=this.assign(),r=0;r<this.k;r++){for(f=new Array(e),h=0,i=0;i<e;i++)f[i]=0;for(u=0;u<c;u++)if(e=this.dataset[u].length,r===this.assignments[u]){for(i=0;i<e;i++)f[i]+=this.dataset[u][i];h++}if(h>0){for(i=0;i<e;i++)f[i]/=h;this.centroids[r]=f}else this.centroids[r]=this.randomCentroid(),s=!0}return this.getClusters()};t.prototype.randomCentroid=function(){var i=this.dataset.length-1,n,t;do t=Math.round(Math.random()*i),n=this.dataset[t];while(this.centroids.indexOf(n)>=0);return n};t.prototype.assign=function(){for(var i=!1,r=this.dataset.length,t,n=0;n<r;n++)t=this.argmin(this.dataset[n],this.centroids,this.distance),t!=this.assignments[n]&&(this.assignments[n]=t,i=!0);return i};t.prototype.getClusters=function(){for(var n=new Array(this.k),t,i=0;i<this.assignments.length;i++)t=this.assignments[i],typeof n[t]=="undefined"&&(n[t]=[]),n[t].push(i);return n};t.prototype.argmin=function(n,t,i){for(var f=Number.MAX_VALUE,e=0,o=t.length,u,r=0;r<o;r++)u=i(n,t[r]),u<f&&(f=u,e=r);return e};t.prototype.distance=function(n,t){for(var u=0,i=Math.min(n.length,t.length),r;i--;)r=n[i]-t[i],u+=r*r;return Math.sqrt(u)};!0&&n.exports&&(n.exports=t)}),tat=cl(function(n){function t(n,t,i){this._queue=[];this._priorities=[];this._sorting="desc";this._init(n,t,i)}t.prototype.insert=function(n,t){for(var i=this._queue.length,r=i,u;r--;)u=this._priorities[r],this._sorting==="desc"?t>u&&(i=r):t<u&&(i=r);this._insertAt(n,t,i)};t.prototype.remove=function(n){for(var t=this._queue.length,i;t--;)if(i=this._queue[t],n===i){this._queue.splice(t,1);this._priorities.splice(t,1);break}};t.prototype.forEach=function(n){this._queue.forEach(n)};t.prototype.getElements=function(){return this._queue};t.prototype.getElementPriority=function(n){return this._priorities[n]};t.prototype.getPriorities=function(){return this._priorities};t.prototype.getElementsWithPriorities=function(){for(var t=[],n=0,i=this._queue.length;n<i;n++)t.push([this._queue[n],this._priorities[n]]);return t};t.prototype._init=function(n,t,i){if(n&&t){if(this._queue=[],this._priorities=[],n.length!==t.length)throw new Error("Arrays must have the same length");for(var r=0;r<n.length;r++)this.insert(n[r],t[r])}i&&(this._sorting=i)};t.prototype._insertAt=function(n,t,i){this._queue.length===i?(this._queue.push(n),this._priorities.push(t)):(this._queue.splice(i,0,n),this._priorities.splice(i,0,t))};!0&&n.exports&&(n.exports=t)}),sei=cl(function(n){function t(n,t,i,r){this.epsilon=1;this.minPts=1;this.distance=this._euclideanDistance;this._reachability=[];this._processed=[];this._coreDistance=0;this._orderedList=[];this._init(n,t,i,r)}if(!0&&n.exports)var i=tat;t.prototype.run=function(n,t,r,u){var f,o,s,e,h;for(this._init(n,t,r,u),f=0,o=this.dataset.length;f<o;f++)this._processed[f]!==1&&(this._processed[f]=1,this.clusters.push([f]),s=this.clusters.length-1,this._orderedList.push(f),e=new i(null,null,"asc"),h=this._regionQuery(f),this._distanceToCore(f)!==undefined&&(this._updateQueue(f,h,e),this._expandCluster(s,e)));return this.clusters};t.prototype.getReachabilityPlot=function(){for(var t,r,i=[],n=0,u=this._orderedList.length;n<u;n++)t=this._orderedList[n],r=this._reachability[t],i.push([t,r]);return i};t.prototype._init=function(n,t,i,r){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n;this.clusters=[];this._reachability=new Array(this.dataset.length);this._processed=new Array(this.dataset.length);this._coreDistance=0;this._orderedList=[]}t&&(this.epsilon=t);i&&(this.minPts=i);r&&(this.distance=r)};t.prototype._updateQueue=function(n,t,i){var r=this;this._coreDistance=this._distanceToCore(n);t.forEach(function(t){if(r._processed[t]===undefined){var f=r.distance(r.dataset[n],r.dataset[t]),u=Math.max(r._coreDistance,f);r._reachability[t]===undefined?(r._reachability[t]=u,i.insert(t,u)):u<r._reachability[t]&&(r._reachability[t]=u,i.remove(t),i.insert(t,u))}})};t.prototype._expandCluster=function(n,t){for(var i,f,u=t.getElements(),r=0,e=u.length;r<e;r++)i=u[r],this._processed[i]===undefined&&(f=this._regionQuery(i),this._processed[i]=1,this.clusters[n].push(i),this._orderedList.push(i),this._distanceToCore(i)!==undefined&&(this._updateQueue(i,f,t),this._expandCluster(n,t)))};t.prototype._distanceToCore=function(n){for(var i,r=this.epsilon,t=0;t<r;t++)if(i=this._regionQuery(n,t),i.length>=this.minPts)return t;return};t.prototype._regionQuery=function(n,t){var r,i,u;for(t=t||this.epsilon,r=[],i=0,u=this.dataset.length;i<u;i++)this.distance(this.dataset[n],this.dataset[i])<t&&r.push(i);return r};t.prototype._euclideanDistance=function(n,t){for(var r=0,i=Math.min(n.length,t.length);i--;)r+=(n[i]-t[i])*(n[i]-t[i]);return Math.sqrt(r)};!0&&n.exports&&(n.exports=t)}),wb=cl(function(n){!0&&n.exports&&(n.exports={DBSCAN:eei,KMEANS:oei,OPTICS:sei,PriorityQueue:tat})}),cai=wb.DBSCAN,lai=wb.KMEANS,aai=wb.OPTICS,vai=wb.PriorityQueue;var rut={eudist:function(n,t,i){for(var f,e=n.length,u=0,r=0;r<e;r++)f=(n[r]||0)-(t[r]||0),u+=f*f;return i?Math.sqrt(u):u},mandist:function(n,t,i){for(var f=n.length,u=0,r=0;r<f;r++)u+=Math.abs((n[r]||0)-(t[r]||0));return i?Math.sqrt(u):u},dist:function(n,t,i){var r=Math.abs(n-t);return i?r:r*r}},cei=rut.eudist,lei=rut.dist,iat={kmrand:function(n,t){for(var f={},i=[],e=t<<2,o=n.length,s=n[0].length>0,r,u;i.length<t&&e-->0;)r=n[Math.floor(Math.random()*o)],u=s?r.join("_"):""+r,f[u]||(f[u]=!0,i.push(r));if(i.length<t)throw new Error("Error initializating clusters");else return i},kmpp:function(n,t){var b=n[0].length?cei:lei,u=[],f=n.length,k=n[0].length>0,a=n[Math.floor(Math.random()*f)],g=k?a.join("_"):""+a,o,s,h,y,c,r,e,w,l;for(u.push(a);u.length<t;){var v=[],d=u.length,p=0,i=[];for(o=0;o<f;o++){for(s=Infinity,h=0;h<d;h++)y=b(n[o],u[h]),y<=s&&(s=y);v[o]=s}for(c=0;c<f;c++)p+=v[c];for(r=0;r<f;r++)i[r]={i:r,v:n[r],pr:v[r]/p,cs:0};for(i.sort(function(n,t){return n.pr-t.pr}),i[0].cs=i[0].pr,e=1;e<f;e++)i[e].cs=i[e-1].cs+i[e].pr;for(w=Math.random(),l=0;l<f-1&&i[l++].cs<w;);u.push(i[l-1].v)}return u}},aei=rut.eudist,vei=iat.kmrand,yei=iat.kmpp,rat=1e4;fat=pei;bb={search:function(n,t,i,r){var f,h,s,y,u,c,l;n.cleanDirty();r=r||{};var a=r.heuristic||bb.heuristics.manhattan,v=r.closest||!1,e=dei(),o=t;for(t.h=a(t,i),e.push(t);e.size()>0;){if(f=e.pop(),f===i)return oat(f);for(f.closed=!0,h=n.neighbors(f),s=0,y=h.length;s<y;++s)(u=h[s],u.closed||u.isWall())||(c=f.g+u.getCost(f),l=u.visited,(!l||c<u.g)&&(u.visited=!0,u.parent=f,u.h=u.h||a(u,i),u.g=c,u.f=u.g+u.h,n.markDirty(u),v&&(u.h<o.h||u.h===o.h&&u.g<o.g)&&(o=u),l?e.rescoreElement(u):e.push(u)))}return v?oat(o):[]},heuristics:{manhattan:function(n,t){var i=Math.abs(t.x-n.x),r=Math.abs(t.y-n.y);return i+r},diagonal:function(n,t){var i=1,f=Math.sqrt(2),r=Math.abs(t.x-n.x),u=Math.abs(t.y-n.y);return i*(r+u)+(f-2*i)*Math.min(r,u)}},cleanNode:function(n){n.f=0;n.g=0;n.h=0;n.visited=!1;n.closed=!1;n.parent=null}};rp.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)bb.cleanNode(this.nodes[n])};rp.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)bb.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]};rp.prototype.markDirty=function(n){this.dirtyNodes.push(n)};rp.prototype.neighbors=function(n){var u=[],t=n.x,r=n.y,i=this.grid;return i[t-1]&&i[t-1][r]&&u.push(i[t-1][r]),i[t+1]&&i[t+1][r]&&u.push(i[t+1][r]),i[t]&&i[t][r-1]&&u.push(i[t][r-1]),i[t]&&i[t][r+1]&&u.push(i[t][r+1]),this.diagonal&&(i[t-1]&&i[t-1][r-1]&&u.push(i[t-1][r-1]),i[t+1]&&i[t+1][r-1]&&u.push(i[t+1][r-1]),i[t-1]&&i[t-1][r+1]&&u.push(i[t-1][r+1]),i[t+1]&&i[t+1][r+1]&&u.push(i[t+1][r+1])),u};rp.prototype.toString=function(){for(var u=[],f=this.grid,t,i,n,e,r=0,o=f.length;r<o;r++){for(t=[],i=f[r],n=0,e=i.length;n<e;n++)t.push(i[n].weight);u.push(t.join(" "))}return u.join("\n")};cg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};cg.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?this.weight*1.41421:this.weight};cg.prototype.isWall=function(){return this.weight===0};sat.prototype={push:function(n){this.content.push(n);this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),n},remove:function(n){var t=this.content.indexOf(n),i=this.content.pop();t!==this.content.length-1&&(this.content[t]=i,this.scoreFunction(i)<this.scoreFunction(n)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var r=this.content[n],t,i;n>0;)if(t=(n+1>>1)-1,i=this.content[t],this.scoreFunction(r)<this.scoreFunction(i))this.content[t]=r,this.content[n]=i,n=t;else break},bubbleUp:function(n){for(var f=this.content.length,e=this.content[n],o=this.scoreFunction(e),s,h,c;;){var i=n+1<<1,r=i-1,t=null,u;if(r<f&&(s=this.content[r],u=this.scoreFunction(s),u<o&&(t=r)),i<f&&(h=this.content[i],c=this.scoreFunction(h),c<(t===null?o:u)&&(t=i)),t!==null)this.content[n]=this.content[t],this.content[t]=e,n=t;else break}}};uut=function(n){return function(){return n}};lg.prototype={constructor:lg,insert:function(n,t){var i,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;i=n}else this._?(n=hat(this._),t.P=null,t.N=n,n.P=n.L=t,i=n):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,n=t;i&&i.C;)r=i.U,i===r.L?(u=r.R,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.R&&(kb(this,i),n=i,i=n.U),i.C=!1,r.C=!0,db(this,r))):(u=r.L,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.L&&(db(this,i),n=i,i=n.U),i.C=!1,r.C=!0,kb(this,r))),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P);n.P&&(n.P.N=n.N);n.N=n.P=null;var i=n.U,t,f=n.L,u=n.R,r,e;if(r=f?u?hat(u):f:u,i?i.L===n?i.L=r:i.R=r:this._=r,f&&u?(e=r.C,r.C=n.C,r.L=f,f.U=r,r!==u?(i=r.U,r.U=n.U,n=r.R,i.L=n,r.R=u,u.U=r):(r.U=i,i=r,n=r.R)):(e=n.C,n=r),n&&(n.U=i),!e){if(n&&n.C){n.C=!1;return}do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,kb(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,db(this,t),t=i.R);t.C=i.C;i.C=t.R.C=!1;kb(this,i);n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,db(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,kb(this,t),t=i.L);t.C=i.C;i.C=t.L.C=!1;db(this,i);n=this._;break}t.C=!0;n=i;i=i.U}while(!n.C);n&&(n.C=!1)}}};fut=[];out=[];cr=1e-6;vat=1e-12;hut.prototype={constructor:hut,polygons:function(){var n=this.edges;return this.cells.map(function(t){var i=t.halfedges.map(function(i){return cat(t,n[i])});return i.data=t.site.data,i})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(i,r){if(h=(s=i.halfedges).length)for(var o=i.site,s,c=-1,h,e,u=t[s[h-1]],f=u.left===o?u.right:u.left;++c<h;)e=f,u=t[s[c]],f=u.left===o?u.right:u.left,e&&f&&r<e.index&&r<f.index&&woi(o,e,f)<0&&n.push([o.data,e.data,f.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,t,i){for(var u=this,o,f=u._found||0,c=u.cells.length,r;!(r=u.cells[f]);)if(++f>=c)return null;var s=n-r.site[0],h=t-r.site[1],e=s*s+h*h;do r=u.cells[o=f],f=null,r.halfedges.forEach(function(i){var s=u.edges[i],o=s.left;if(o!==r.site&&o||(o=s.right)){var h=n-o[0],c=t-o[1],l=h*h+c*c;l<e&&(e=l,f=o.index)}});while(f!==null);return u._found=o,i==null||e<=i*i?r.site:null}};yat=function(){function n(n){return new hut(n.map(function(t,u){var f=[Math.round(i(t,u,n)/cr)*cr,Math.round(r(t,u,n)/cr)*cr];return f.index=u,f.data=t,f}),t)}var i=toi,r=ioi,t=null;return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(t){return arguments.length?(i=typeof t=="function"?t:uut(+t),n):i},n.y=function(t){return arguments.length?(r=typeof t=="function"?t:uut(+t),n):r},n.extent=function(i){return arguments.length?(t=i==null?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],n):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},n.size=function(i){return arguments.length?(t=i==null?null:[[0,0],[+i[0],+i[1]]],n):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},n};ivt=Object.freeze({randomPosition:ik,randomPoint:dat,randomPolygon:gat,randomLineString:nvt});evt=Object.freeze({getCluster:rvt,clusterEach:lut,clusterReduce:uvt,createBins:aut,applyFilter:yg,propertiesContainsFilter:vut,filterProperties:fvt});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(n){var r;if(this===undefined||this===null)throw new TypeError(this+" is not an object");var u=Object(this),i=Math.max(Math.min(u.length,9007199254740991),0)||0,t=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;for(t=t<0?Math.max(i+t,0):Math.min(t,i),r=(2 in arguments)&&arguments[2]!==undefined?parseInt(Number(arguments[2]),10)||0:i,r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);t<r;)u[t]=n,++t;return u},writable:!0});Number.isFinite=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};Number.isInteger=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(n){return n!==n};Math.trunc=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)};la=function(){};la.prototype.interfaces_=function(){return[]};la.prototype.getClass=function(){return la};la.prototype.equalsWithTolerance=function(n,t,i){return Math.abs(n-t)<=i};var ar=function(){},it=function(){},ovt={MAX_VALUE:{configurable:!0}};it.isNaN=function(n){return Number.isNaN(n)};it.doubleToLongBits=function(n){return n};it.longBitsToDouble=function(n){return n};it.isInfinite=function(n){return!Number.isFinite(n)};ovt.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(it,ovt);var co=function(){},pg=function(){},op=function(){};i=function i(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=i.NULL_ORDINATE;else if(arguments.length===1){var n=arguments[0];this.x=n.x;this.y=n.y;this.z=n.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=i.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])};aa={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};i.prototype.setOrdinate=function(n,t){switch(n){case i.X:this.x=t;break;case i.Y:this.y=t;break;case i.Z:this.z=t;break;default:throw new ar("Invalid ordinate index: "+n);}};i.prototype.equals2D=function(){var n,t,i;return arguments.length===1?(n=arguments[0],this.x!==n.x)?!1:this.y!==n.y?!1:!0:arguments.length===2?(t=arguments[0],i=arguments[1],!la.equalsWithTolerance(this.x,t.x,i))?!1:la.equalsWithTolerance(this.y,t.y,i)?!0:!1:void 0};i.prototype.getOrdinate=function(n){switch(n){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.z}throw new ar("Invalid ordinate index: "+n);};i.prototype.equals3D=function(n){return this.x===n.x&&this.y===n.y&&(this.z===n.z||it.isNaN(this.z))&&it.isNaN(n.z)};i.prototype.equals=function(n){return(n instanceof i)?this.equals2D(n):!1};i.prototype.equalInZ=function(n,t){return la.equalsWithTolerance(this.z,n.z,t)};i.prototype.compareTo=function(n){var t=n;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};i.prototype.clone=function(){};i.prototype.copy=function(){return new i(this)};i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};i.prototype.distance3D=function(n){var t=this.x-n.x,i=this.y-n.y,r=this.z-n.z;return Math.sqrt(t*t+i*i+r*r)};i.prototype.distance=function(n){var t=this.x-n.x,i=this.y-n.y;return Math.sqrt(t*t+i*i)};i.prototype.hashCode=function(){var n=17;return n=37*n+i.hashCode(this.x),37*n+i.hashCode(this.y)};i.prototype.setCoordinate=function(n){this.x=n.x;this.y=n.y;this.z=n.z};i.prototype.interfaces_=function(){return[co,pg,lo]};i.prototype.getClass=function(){return i};i.hashCode=function(){if(arguments.length===1){var t=arguments[0],n=it.doubleToLongBits(t);return Math.trunc((n^n)>>>32)}};aa.DimensionalComparator.get=function(){return cc};aa.serialVersionUID.get=function(){return 6683108902428366910};aa.NULL_ORDINATE.get=function(){return it.NaN};aa.X.get=function(){return 0};aa.Y.get=function(){return 1};aa.Z.get=function(){return 2};Object.defineProperties(i,aa);cc=function(){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var n=arguments[0];if(n!==2&&n!==3)throw new ar("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}};cc.prototype.compare=function(n,t){var i=n,r=t,f=cc.compare(i.x,r.x),u;return f!==0?f:(u=cc.compare(i.y,r.y),u!==0)?u:this._dimensionsToTest<=2?0:cc.compare(i.z,r.z)};cc.prototype.interfaces_=function(){return[op]};cc.prototype.getClass=function(){return cc};cc.compare=function(n,t){return n<t?-1:n>t?1:it.isNaN(n)?it.isNaN(t)?0:-1:it.isNaN(t)?1:0};bv=function(){};bv.prototype.create=function(){};bv.prototype.interfaces_=function(){return[]};bv.prototype.getClass=function(){return bv};r=function(){};sp={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};r.prototype.interfaces_=function(){return[]};r.prototype.getClass=function(){return r};r.toLocationSymbol=function(n){switch(n){case r.EXTERIOR:return"e";case r.BOUNDARY:return"b";case r.INTERIOR:return"i";case r.NONE:return"-"}throw new ar("Unknown location value: "+n);};sp.INTERIOR.get=function(){return 0};sp.BOUNDARY.get=function(){return 1};sp.EXTERIOR.get=function(){return 2};sp.NONE.get=function(){return-1};Object.defineProperties(r,sp);var k=function(n,t){return n.interfaces_&&n.interfaces_().indexOf(t)>-1},ro=function(){},svt={LOG_10:{configurable:!0}};ro.prototype.interfaces_=function(){return[]};ro.prototype.getClass=function(){return ro};ro.log10=function(n){var t=Math.log(n);return it.isInfinite(t)?t:it.isNaN(t)?t:t/ro.LOG_10};ro.min=function(n,t,i,r){var u=n;return t<u&&(u=t),i<u&&(u=i),r<u&&(u=r),u};ro.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],i=arguments[1],r=arguments[2];return n<i?i:n>r?r:n}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var t=arguments[0],u=arguments[1],f=arguments[2];return t<u?u:t>f?f:t}};ro.wrap=function(n,t){return n<0?t- -n%t:n%t};ro.max=function(){if(arguments.length===3){var o=arguments[0],i=arguments[1],r=arguments[2],t=o;return i>t&&(t=i),r>t&&(t=r),t}if(arguments.length===4){var s=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3],n=s;return u>n&&(n=u),f>n&&(n=f),e>n&&(n=e),n}};ro.average=function(n,t){return(n+t)/2};svt.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(ro,svt);ss=function(n){this.str=n};ss.prototype.append=function(n){this.str+=n};ss.prototype.setCharAt=function(n,t){this.str=this.str.substr(0,n)+t+this.str.substr(n+1)};ss.prototype.toString=function(){return this.str};hs=function(n){this.value=n};hs.prototype.intValue=function(){return this.value};hs.prototype.compareTo=function(n){return this.value<n?-1:this.value>n?1:0};hs.isNaN=function(n){return Number.isNaN(n)};hp=function(){};hp.isWhitespace=function(n){return n<=32&&n>=0||n===127};hp.toUpperCase=function(n){return n.toUpperCase()};u=function u(){var n,t,i,r,f;this._hi=0;this._lo=0;arguments.length===0?this.init(0):arguments.length===1?typeof arguments[0]=="number"?(n=arguments[0],this.init(n)):arguments[0]instanceof u?(t=arguments[0],this.init(t)):typeof arguments[0]=="string"&&(i=arguments[0],u.call(this,u.parse(i))):arguments.length===2&&(r=arguments[0],f=arguments[1],this.init(r,f))};ao={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};u.prototype.le=function(n){return(this._hi<n._hi||this._hi===n._hi)&&this._lo<=n._lo};u.prototype.extractSignificantDigits=function(n,t){var i=this.abs(),r=u.magnitude(i._hi),v=u.TEN.pow(r),f,e,h,o,c,l;i=i.divide(v);i.gt(u.TEN)?(i=i.divide(u.TEN),r+=1):i.lt(u.ONE)&&(i=i.multiply(u.TEN),r-=1);var y=r+1,s=new ss,a=u.MAX_PRINT_DIGITS-1;for(f=0;f<=a;f++){if(n&&f===y&&s.append("."),e=Math.trunc(i._hi),e<0)break;if(h=!1,o=0,e>9?(h=!0,o="9"):o="0"+e,s.append(o),i=i.subtract(u.valueOf(e)).multiply(u.TEN),h&&i.selfAdd(u.TEN),c=!0,l=u.magnitude(i._hi),l<0&&Math.abs(l)>=a-f&&(c=!1),!c)break}return t[0]=r,s.toString()};u.prototype.sqr=function(){return this.multiply(this)};u.prototype.doubleValue=function(){return this._hi+this._lo};u.prototype.subtract=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],this.add(n.negate())):typeof arguments[0]=="number"?(t=arguments[0],this.add(-t)):void 0};u.prototype.equals=function(){if(arguments.length===1){var n=arguments[0];return this._hi===n._hi&&this._lo===n._lo}};u.prototype.isZero=function(){return this._hi===0&&this._lo===0};u.prototype.selfSubtract=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],this.isNaN())?this:this.selfAdd(-n._hi,-n._lo):typeof arguments[0]=="number"?(t=arguments[0],this.isNaN())?this:this.selfAdd(-t,0):void 0};u.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};u.prototype.min=function(n){return this.le(n)?this:n};u.prototype.selfDivide=function(){var o,l;if(arguments.length===1){if(arguments[0]instanceof u)return o=arguments[0],this.selfDivide(o._hi,o._lo);if(typeof arguments[0]=="number")return l=arguments[0],this.selfDivide(l,0)}else if(arguments.length===2){var i=arguments[0],a=arguments[1],r=null,s=null,f=null,h=null,n=null,e=null,c=null,t=null;return n=this._hi/i,e=u.SPLIT*n,r=e-n,t=u.SPLIT*i,r=e-r,s=n-r,f=t-i,c=n*i,f=t-f,h=i-f,t=r*f-c+r*h+s*f+s*h,e=(this._hi-c-t+this._lo-n*a)/i,t=n+e,this._hi=t,this._lo=n-t+e,this}};u.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};u.prototype.divide=function(){var l,a,c;if(arguments[0]instanceof u){var i=arguments[0],r=null,o=null,f=null,s=null,n=null,e=null,h=null,t=null;return n=this._hi/i._hi,e=u.SPLIT*n,r=e-n,t=u.SPLIT*i._hi,r=e-r,o=n-r,f=t-i._hi,h=n*i._hi,f=t-f,s=i._hi-f,t=r*f-h+r*s+o*f+o*s,e=(this._hi-h-t+this._lo-n*i._lo)/i._hi,t=n+e,l=t,a=n-t+e,new u(l,a)}if(typeof arguments[0]=="number")return(c=arguments[0],it.isNaN(c))?u.createNaN():u.copy(this).selfDivide(c,0)};u.prototype.ge=function(n){return(this._hi>n._hi||this._hi===n._hi)&&this._lo>=n._lo};u.prototype.pow=function(n){if(n===0)return u.valueOf(1);var i=new u(this),r=u.valueOf(1),t=Math.abs(n);if(t>1)while(t>0)t%2==1&&r.selfMultiply(i),t/=2,t>0&&(i=i.sqr());else r=i;return n<0?r.reciprocal():r};u.prototype.ceil=function(){if(this.isNaN())return u.NaN;var n=Math.ceil(this._hi),t=0;return n===this._hi&&(t=Math.ceil(this._lo)),new u(n,t)};u.prototype.compareTo=function(n){var t=n;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};u.prototype.rint=function(){if(this.isNaN())return this;var n=this.add(.5);return n.floor()};u.prototype.setValue=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],this.init(n),this):typeof arguments[0]=="number"?(t=arguments[0],this.init(t),this):void 0};u.prototype.max=function(n){return this.ge(n)?this:n};u.prototype.sqrt=function(){if(this.isZero())return u.valueOf(0);if(this.isNegative())return u.NaN;var n=1/Math.sqrt(this._hi),i=this._hi*n,t=u.valueOf(i),r=this.subtract(t.sqr()),f=r._hi*n*.5;return t.add(f)};u.prototype.selfAdd=function(){var c,p,g;if(arguments.length===1){if(arguments[0]instanceof u)return c=arguments[0],this.selfAdd(c._hi,c._lo);if(typeof arguments[0]=="number"){var w=arguments[0],r=null,l=null,t=null,f=null,a=null,v=null;return t=this._hi+w,a=t-this._hi,f=t-a,f=w-a+(this._hi-f),v=f+this._lo,r=t+v,l=v+(t-r),this._hi=r+l,this._lo=l+(r-this._hi),this}}else if(arguments.length===2){var b=arguments[0],k=arguments[1],e=null,d=null,o=null,s=null,i=null,h=null,n=null,y=null;return i=this._hi+b,o=this._lo+k,n=i-this._hi,y=o-this._lo,h=i-n,s=o-y,h=b-n+(this._hi-h),s=k-y+(this._lo-s),n=h+o,e=i+n,d=n+(i-e),n=s+d,p=e+n,g=n+(e-p),this._hi=p,this._lo=g,this}};u.prototype.selfMultiply=function(){var e,c,h,l;if(arguments.length===1){if(arguments[0]instanceof u)return e=arguments[0],this.selfMultiply(e._hi,e._lo);if(typeof arguments[0]=="number")return c=arguments[0],this.selfMultiply(c,0)}else if(arguments.length===2){var f=arguments[0],a=arguments[1],n=null,o=null,i=null,s=null,t=null,r=null;return t=u.SPLIT*this._hi,n=t-this._hi,r=u.SPLIT*f,n=t-n,o=this._hi-n,i=r-f,t=this._hi*f,i=r-i,s=f-i,r=n*i-t+n*s+o*i+o*s+(this._hi*a+this._lo*f),h=t+r,n=t-h,l=r+n,this._hi=h,this._lo=l,this}};u.prototype.selfSqr=function(){return this.selfMultiply(this)};u.prototype.floor=function(){if(this.isNaN())return u.NaN;var n=Math.floor(this._hi),t=0;return n===this._hi&&(t=Math.floor(this._lo)),new u(n,t)};u.prototype.negate=function(){return this.isNaN()?this:new u(-this._hi,-this._lo)};u.prototype.clone=function(){};u.prototype.multiply=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],n.isNaN())?u.createNaN():u.copy(this).selfMultiply(n):typeof arguments[0]=="number"?(t=arguments[0],it.isNaN(t))?u.createNaN():u.copy(this).selfMultiply(t,0):void 0};u.prototype.isNaN=function(){return it.isNaN(this._hi)};u.prototype.intValue=function(){return Math.trunc(this._hi)};u.prototype.toString=function(){var n=u.magnitude(this._hi);return n>=-3&&n<=20?this.toStandardNotation():this.toSciNotation()};u.prototype.toStandardNotation=function(){var r=this.getSpecialNumberString(),e,o;if(r!==null)return r;var f=new Array(1).fill(null),n=this.extractSignificantDigits(!0,f),i=f[0]+1,t=n;return(n.charAt(0)==="."?t="0"+n:i<0?t="0."+u.stringOfChar("0",-i)+n:n.indexOf(".")===-1&&(e=i-n.length,o=u.stringOfChar("0",e),t=n+o+".0"),this.isNegative())?"-"+t:t};u.prototype.reciprocal=function(){var t=null,e=null,i=null,o=null,n=null,r=null,s=null,f=null,h,c;return n=1/this._hi,r=u.SPLIT*n,t=r-n,f=u.SPLIT*this._hi,t=r-t,e=n-t,i=f-this._hi,s=n*this._hi,i=f-i,o=this._hi-i,f=t*i-s+t*o+e*i+e*o,r=(1-s-f-n*this._lo)/this._hi,h=n+r,c=n-h+r,new u(h,c)};u.prototype.toSciNotation=function(){var t,i,r;if(this.isZero())return u.SCI_NOT_ZERO;if(t=this.getSpecialNumberString(),t!==null)return t;var f=new Array(1).fill(null),n=this.extractSignificantDigits(!1,f),e=u.SCI_NOT_EXPONENT_CHAR+f[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);return(i="",n.length>1&&(i=n.substring(1)),r=n.charAt(0)+"."+i,this.isNegative())?"-"+r+e:r+e};u.prototype.abs=function(){return this.isNaN()?u.NaN:this.isNegative()?this.negate():new u(this)};u.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};u.prototype.lt=function(n){return(this._hi<n._hi||this._hi===n._hi)&&this._lo<n._lo};u.prototype.add=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],u.copy(this).selfAdd(n)):typeof arguments[0]=="number"?(t=arguments[0],u.copy(this).selfAdd(t)):void 0};u.prototype.init=function(){var t,n,i,r;arguments.length===1?typeof arguments[0]=="number"?(t=arguments[0],this._hi=t,this._lo=0):arguments[0]instanceof u&&(n=arguments[0],this._hi=n._hi,this._lo=n._lo):arguments.length===2&&(i=arguments[0],r=arguments[1],this._hi=i,this._lo=r)};u.prototype.gt=function(n){return(this._hi>n._hi||this._hi===n._hi)&&this._lo>n._lo};u.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};u.prototype.trunc=function(){return this.isNaN()?u.NaN:this.isPositive()?this.floor():this.ceil()};u.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};u.prototype.interfaces_=function(){return[lo,co,pg]};u.prototype.getClass=function(){return u};u.sqr=function(n){return u.valueOf(n).selfMultiply(n)};u.valueOf=function(){var n,t;return typeof arguments[0]=="string"?(n=arguments[0],u.parse(n)):typeof arguments[0]=="number"?(t=arguments[0],new u(t)):void 0};u.sqrt=function(n){return u.valueOf(n).sqrt()};u.parse=function(n){for(var t=0,l=n.length,s,o,i,y,c,f,e,w,b;hp.isWhitespace(n.charAt(t));)t++;s=!1;t<l&&(o=n.charAt(t),(o==="-"||o==="+")&&(t++,o==="-"&&(s=!0)));for(var r=new u,h=0,a=0,v=0;;){if(t>=l)break;if(i=n.charAt(t),t++,hp.isDigit(i)){y=i-"0";r.selfMultiply(u.TEN);r.selfAdd(y);h++;continue}if(i==="."){a=h;continue}if(i==="e"||i==="E"){c=n.substring(t);try{v=hs.parseInt(c)}catch(p){if(p instanceof Error)throw new Error("Invalid exponent "+c+" in string "+n);else throw p;}break}throw new Error("Unexpected character '"+i+"' at position "+t+" in string "+n);}return(f=r,e=h-a-v,e===0?f=r:e>0?(w=u.TEN.pow(e),f=r.divide(w)):e<0&&(b=u.TEN.pow(-e),f=r.multiply(b)),s)?f.negate():f};u.createNaN=function(){return new u(it.NaN,it.NaN)};u.copy=function(n){return new u(n)};u.magnitude=function(n){var i=Math.abs(n),r=Math.log(i)/Math.log(10),t=Math.trunc(Math.floor(r)),u=Math.pow(10,t);return u*10<=i&&(t+=1),t};u.stringOfChar=function(n,t){for(var i=new ss,r=0;r<t;r++)i.append(n);return i.toString()};ao.PI.get=function(){return new u(3.1415926535897931,12246467991473532e-32)};ao.TWO_PI.get=function(){return new u(6.2831853071795862,24492935982947064e-32)};ao.PI_2.get=function(){return new u(1.5707963267948966,6123233995736766e-32)};ao.E.get=function(){return new u(2.7182818284590451,14456468917292502e-32)};ao.NaN.get=function(){return new u(it.NaN,it.NaN)};ao.EPS.get=function(){return 123259516440783e-46};ao.SPLIT.get=function(){return 134217729};ao.MAX_PRINT_DIGITS.get=function(){return 32};ao.TEN.get=function(){return u.valueOf(10)};ao.ONE.get=function(){return u.valueOf(1)};ao.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};ao.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(u,ao);te=function(){};yut={DP_SAFE_EPSILON:{configurable:!0}};te.prototype.interfaces_=function(){return[]};te.prototype.getClass=function(){return te};te.orientationIndex=function(n,t,i){var r=te.orientationIndexFilter(n,t,i);if(r<=1)return r;var f=u.valueOf(t.x).selfAdd(-n.x),e=u.valueOf(t.y).selfAdd(-n.y),o=u.valueOf(i.x).selfAdd(-t.x),s=u.valueOf(i.y).selfAdd(-t.y);return f.selfMultiply(s).selfSubtract(e.selfMultiply(o)).signum()};te.signOfDet2x2=function(n,t,i,r){var u=n.multiply(r).selfSubtract(t.multiply(i));return u.signum()};te.intersection=function(n,t,r,f){var o=u.valueOf(f.y).selfSubtract(r.y).selfMultiply(u.valueOf(t.x).selfSubtract(n.x)),s=u.valueOf(f.x).selfSubtract(r.x).selfMultiply(u.valueOf(t.y).selfSubtract(n.y)),e=o.subtract(s),h=u.valueOf(f.x).selfSubtract(r.x).selfMultiply(u.valueOf(n.y).selfSubtract(r.y)),c=u.valueOf(f.y).selfSubtract(r.y).selfMultiply(u.valueOf(n.x).selfSubtract(r.x)),l=h.subtract(c),a=l.selfDivide(e).doubleValue(),v=u.valueOf(n.x).selfAdd(u.valueOf(t.x).selfSubtract(n.x).selfMultiply(a)).doubleValue(),y=u.valueOf(t.x).selfSubtract(n.x).selfMultiply(u.valueOf(n.y).selfSubtract(r.y)),p=u.valueOf(t.y).selfSubtract(n.y).selfMultiply(u.valueOf(n.x).selfSubtract(r.x)),w=y.subtract(p),b=w.selfDivide(e).doubleValue(),k=u.valueOf(r.y).selfAdd(u.valueOf(f.y).selfSubtract(r.y).selfMultiply(b)).doubleValue();return new i(v,k)};te.orientationIndexFilter=function(n,t,i){var e=null,u=(n.x-i.x)*(t.y-i.y),f=(n.y-i.y)*(t.x-i.x),r=u-f,o;if(u>0){if(f<=0)return te.signum(r);e=u+f}else if(u<0){if(f>=0)return te.signum(r);e=-u-f}else return te.signum(r);return(o=te.DP_SAFE_EPSILON*e,r>=o||-r>=o)?te.signum(r):2};te.signum=function(n){return n>0?1:n<0?-1:0};yut.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(te,yut);st=function(){};cp={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};cp.X.get=function(){return 0};cp.Y.get=function(){return 1};cp.Z.get=function(){return 2};cp.M.get=function(){return 3};st.prototype.setOrdinate=function(){};st.prototype.size=function(){};st.prototype.getOrdinate=function(){};st.prototype.getCoordinate=function(){};st.prototype.getCoordinateCopy=function(){};st.prototype.getDimension=function(){};st.prototype.getX=function(){};st.prototype.clone=function(){};st.prototype.expandEnvelope=function(){};st.prototype.copy=function(){};st.prototype.getY=function(){};st.prototype.toCoordinateArray=function(){};st.prototype.interfaces_=function(){return[pg]};st.prototype.getClass=function(){return st};Object.defineProperties(st,cp);var hvt=function(){},lp=function(n){function t(){n.call(this,"Projective point not representable on the Cartesian plane.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(hvt),uf=function(){};uf.arraycopy=function(n,t,i,r,u){for(var e=0,f=t;f<t+u;f++)i[r+e]=n[f],e++};uf.getProperty=function(n){return{"line.separator":"\n"}[n]};ke=function ke(){var h,c,l,n,t,r,u;if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1)h=arguments[0],this.x=h.x,this.y=h.y,this.w=1;else if(arguments.length===2)typeof arguments[0]=="number"&&typeof arguments[1]=="number"?(c=arguments[0],l=arguments[1],this.x=c,this.y=l,this.w=1):arguments[0]instanceof ke&&arguments[1]instanceof ke?(n=arguments[0],t=arguments[1],this.x=n.y*t.w-t.y*n.w,this.y=t.x*n.w-n.x*t.w,this.w=n.x*t.y-t.x*n.y):arguments[0]instanceof i&&arguments[1]instanceof i&&(r=arguments[0],u=arguments[1],this.x=r.y-u.y,this.y=u.x-r.x,this.w=r.x*u.y-u.x*r.y);else if(arguments.length===3){var k=arguments[0],d=arguments[1],g=arguments[2];this.x=k;this.y=d;this.w=g}else if(arguments.length===4){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3],a=f.y-e.y,v=e.x-f.x,y=f.x*e.y-e.x*f.y,p=o.y-s.y,w=s.x-o.x,b=o.x*s.y-s.x*o.y;this.x=v*b-w*y;this.y=p*y-a*b;this.w=a*w-p*v}};ke.prototype.getY=function(){var n=this.y/this.w;if(it.isNaN(n)||it.isInfinite(n))throw new lp;return n};ke.prototype.getX=function(){var n=this.x/this.w;if(it.isNaN(n)||it.isInfinite(n))throw new lp;return n};ke.prototype.getCoordinate=function(){var n=new i;return n.x=this.getX(),n.y=this.getY(),n};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};ke.intersection=function(n,t,r,u){var o=n.y-t.y,s=t.x-n.x,h=n.x*t.y-t.x*n.y,c=r.y-u.y,l=u.x-r.x,a=r.x*u.y-u.x*r.y,y=s*a-l*h,p=c*h-o*a,v=o*l-c*s,f=y/v,e=p/v;if(it.isNaN(f)||it.isInfinite(f)||it.isNaN(e)||it.isInfinite(e))throw new lp;return new i(f,e)};l=function l(){var n,u,t,r;if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1)arguments[0]instanceof i?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof l&&(u=arguments[0],this.init(u));else if(arguments.length===2)t=arguments[0],r=arguments[1],this.init(t.x,r.x,t.y,r.y);else if(arguments.length===4){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3];this.init(f,e,o,s)}};put={serialVersionUID:{configurable:!0}};l.prototype.getArea=function(){return this.getWidth()*this.getHeight()};l.prototype.equals=function(n){if(!(n instanceof l))return!1;var t=n;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};l.prototype.intersection=function(n){if(this.isNull()||n.isNull()||!this.intersects(n))return new l;var t=this._minx>n._minx?this._minx:n._minx,i=this._miny>n._miny?this._miny:n._miny,r=this._maxx<n._maxx?this._maxx:n._maxx,u=this._maxy<n._maxy?this._maxy:n._maxy;return new l(t,r,i,u)};l.prototype.isNull=function(){return this._maxx<this._minx};l.prototype.getMaxX=function(){return this._maxx};l.prototype.covers=function(){var t,n,r,u;if(arguments.length===1){if(arguments[0]instanceof i)return t=arguments[0],this.covers(t.x,t.y);if(arguments[0]instanceof l)return(n=arguments[0],this.isNull()||n.isNull())?!1:n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}else if(arguments.length===2)return(r=arguments[0],u=arguments[1],this.isNull())?!1:r>=this._minx&&r<=this._maxx&&u>=this._miny&&u<=this._maxy};l.prototype.intersects=function(){var n,t,r,u;if(arguments.length===1){if(arguments[0]instanceof l)return(n=arguments[0],this.isNull()||n.isNull())?!1:!(n._minx>this._maxx||n._maxx<this._minx||n._miny>this._maxy||n._maxy<this._miny);if(arguments[0]instanceof i)return t=arguments[0],this.intersects(t.x,t.y)}else if(arguments.length===2)return(r=arguments[0],u=arguments[1],this.isNull())?!1:!(r>this._maxx||r<this._minx||u>this._maxy||u<this._miny)};l.prototype.getMinY=function(){return this._miny};l.prototype.getMinX=function(){return this._minx};l.prototype.expandToInclude=function(){var u,n,t,r;if(arguments.length===1){if(arguments[0]instanceof i)u=arguments[0],this.expandToInclude(u.x,u.y);else if(arguments[0]instanceof l){if(n=arguments[0],n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else arguments.length===2&&(t=arguments[0],r=arguments[1],this.isNull()?(this._minx=t,this._maxx=t,this._miny=r,this._maxy=r):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r)))};l.prototype.minExtent=function(){if(this.isNull())return 0;var n=this.getWidth(),t=this.getHeight();return n<t?n:t};l.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};l.prototype.compareTo=function(n){var t=n;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};l.prototype.translate=function(n,t){if(this.isNull())return null;this.init(this.getMinX()+n,this.getMaxX()+n,this.getMinY()+t,this.getMaxY()+t)};l.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};l.prototype.setToNull=function(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1};l.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};l.prototype.maxExtent=function(){if(this.isNull())return 0;var n=this.getWidth(),t=this.getHeight();return n>t?n:t};l.prototype.expandBy=function(){var n,t,i;if(arguments.length===1)n=arguments[0],this.expandBy(n,n);else if(arguments.length===2){if(t=arguments[0],i=arguments[1],this.isNull())return null;this._minx-=t;this._maxx+=t;this._miny-=i;this._maxy+=i;(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};l.prototype.contains=function(){var n,t,r,u;if(arguments.length===1){if(arguments[0]instanceof l)return n=arguments[0],this.covers(n);if(arguments[0]instanceof i)return t=arguments[0],this.covers(t)}else if(arguments.length===2)return r=arguments[0],u=arguments[1],this.covers(r,u)};l.prototype.centre=function(){return this.isNull()?null:new i((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};l.prototype.init=function(){var n,t,r,u;if(arguments.length===0)this.setToNull();else if(arguments.length===1)arguments[0]instanceof i?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof l&&(t=arguments[0],this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy);else if(arguments.length===2)r=arguments[0],u=arguments[1],this.init(r.x,u.x,r.y,u.y);else if(arguments.length===4){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3];f<e?(this._minx=f,this._maxx=e):(this._minx=e,this._maxx=f);o<s?(this._miny=o,this._maxy=s):(this._miny=s,this._maxy=o)}};l.prototype.getMaxY=function(){return this._maxy};l.prototype.distance=function(n){var t,i;return this.intersects(n)?0:(t=0,this._maxx<n._minx?t=n._minx-this._maxx:this._minx>n._maxx&&(t=this._minx-n._maxx),i=0,this._maxy<n._miny?i=n._miny-this._maxy:this._miny>n._maxy&&(i=this._miny-n._maxy),t===0)?i:i===0?t:Math.sqrt(t*t+i*i)};l.prototype.hashCode=function(){var n=17;return n=37*n+i.hashCode(this._minx),n=37*n+i.hashCode(this._maxx),n=37*n+i.hashCode(this._miny),37*n+i.hashCode(this._maxy)};l.prototype.interfaces_=function(){return[co,lo]};l.prototype.getClass=function(){return l};l.intersects=function(){if(arguments.length===3){var n=arguments[0],t=arguments[1],i=arguments[2];return i.x>=(n.x<t.x?n.x:t.x)&&i.x<=(n.x>t.x?n.x:t.x)&&i.y>=(n.y<t.y?n.y:t.y)&&i.y<=(n.y>t.y?n.y:t.y)?!0:!1}if(arguments.length===4){var r=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3],o=Math.min(f.x,e.x),s=Math.max(f.x,e.x),h=Math.min(r.x,u.x),c=Math.max(r.x,u.x);return h>s?!1:c<o?!1:(o=Math.min(f.y,e.y),s=Math.max(f.y,e.y),h=Math.min(r.y,u.y),c=Math.max(r.y,u.y),h>s)?!1:c<o?!1:!0}};put.serialVersionUID.get=function(){return 5873921885273102420};Object.defineProperties(l,put);cs={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};rk=function(n){this.geometryFactory=n||new ut};rk.prototype.read=function(n){var i,r,u,t;if(n=n.replace(/[\n\r]/g," "),t=cs.typeStr.exec(n),n.search("EMPTY")!==-1&&(t=cs.emptyTypeStr.exec(n),t[2]=undefined),t&&(r=t[1].toLowerCase(),u=t[2],ap[r]&&(i=ap[r].apply(this,[u]))),i===undefined)throw new Error("Could not parse WKT "+n);return i};rk.prototype.write=function(n){return this.extractGeometry(n)};rk.prototype.extractGeometry=function(n){var t=n.getGeometryType().toLowerCase(),i;return lc[t]?(i=t.toUpperCase(),n.isEmpty()?i+" EMPTY":i+"("+lc[t].apply(this,[n])+")"):null};var lc={coordinate:function(n){return n.x+" "+n.y},point:function(n){return lc.coordinate.call(this,n._coordinates._coordinates[0])},multipoint:function(n){for(var r=this,i=[],t=0,u=n._geometries.length;t<u;++t)i.push("("+lc.point.apply(r,[n._geometries[t]])+")");return i.join(",")},linestring:function(n){for(var r=this,i=[],t=0,u=n._points._coordinates.length;t<u;++t)i.push(lc.coordinate.apply(r,[n._points._coordinates[t]]));return i.join(",")},linearring:function(n){for(var r=this,i=[],t=0,u=n._points._coordinates.length;t<u;++t)i.push(lc.coordinate.apply(r,[n._points._coordinates[t]]));return i.join(",")},multilinestring:function(n){for(var r=this,i=[],t=0,u=n._geometries.length;t<u;++t)i.push("("+lc.linestring.apply(r,[n._geometries[t]])+")");return i.join(",")},polygon:function(n){var u=this,i=[],t,r;for(i.push("("+lc.linestring.apply(this,[n._shell])+")"),t=0,r=n._holes.length;t<r;++t)i.push("("+lc.linestring.apply(u,[n._holes[t]])+")");return i.join(",")},multipolygon:function(n){for(var r=this,i=[],t=0,u=n._geometries.length;t<u;++t)i.push("("+lc.polygon.apply(r,[n._geometries[t]])+")");return i.join(",")},geometrycollection:function(n){for(var r=this,i=[],t=0,u=n._geometries.length;t<u;++t)i.push(r.extractGeometry(n._geometries[t]));return i.join(",")}},ap={point:function(n){if(n===undefined)return this.geometryFactory.createPoint();var t=n.trim().split(cs.spaces);return this.geometryFactory.createPoint(new i(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(n){var e=this,u,i,r,t,f;if(n===undefined)return this.geometryFactory.createMultiPoint();for(i=n.trim().split(","),r=[],t=0,f=i.length;t<f;++t)u=i[t].replace(cs.trimParens,"$1"),r.push(ap.point.apply(e,[u]));return this.geometryFactory.createMultiPoint(r)},linestring:function(n){var r,u,f,t,e;if(n===undefined)return this.geometryFactory.createLineString();for(r=n.trim().split(","),u=[],t=0,e=r.length;t<e;++t)f=r[t].trim().split(cs.spaces),u.push(new i(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLineString(u)},linearring:function(n){var r,u,f,t,e;if(n===undefined)return this.geometryFactory.createLinearRing();for(r=n.trim().split(","),u=[],t=0,e=r.length;t<e;++t)f=r[t].trim().split(cs.spaces),u.push(new i(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLinearRing(u)},multilinestring:function(n){var e=this,u,i,r,t,f;if(n===undefined)return this.geometryFactory.createMultiLineString();for(i=n.trim().split(cs.parenComma),r=[],t=0,f=i.length;t<f;++t)u=i[t].replace(cs.trimParens,"$1"),r.push(ap.linestring.apply(e,[u]));return this.geometryFactory.createMultiLineString(r)},polygon:function(n){var f=this,e,o,i,r,s,u,t,h;if(n===undefined)return this.geometryFactory.createPolygon();for(r=n.trim().split(cs.parenComma),u=[],t=0,h=r.length;t<h;++t)e=r[t].replace(cs.trimParens,"$1"),o=ap.linestring.apply(f,[e]),i=f.geometryFactory.createLinearRing(o._points),t===0?s=i:u.push(i);return this.geometryFactory.createPolygon(s,u)},multipolygon:function(n){var e=this,u,i,r,t,f;if(n===undefined)return this.geometryFactory.createMultiPolygon();for(i=n.trim().split(cs.doubleParenComma),r=[],t=0,f=i.length;t<f;++t)u=i[t].replace(cs.trimParens,"$1"),r.push(ap.polygon.apply(e,[u]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(n){var f=this,i,r,t,u;if(n===undefined)return this.geometryFactory.createGeometryCollection();for(n=n.replace(/,\s*([A-Za-z])/g,"|$1"),i=n.trim().split("|"),r=[],t=0,u=i.length;t<u;++t)r.push(f.read(i[t]));return this.geometryFactory.createGeometryCollection(r)}},ls=function(n){this.parser=new rk(n)};ls.prototype.write=function(n){return this.parser.write(n)};ls.toLineString=function(n,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+n.x+" "+n.y+", "+t.x+" "+t.y+" )"};var ac=function(n){function t(t){n.call(this,t);this.name="RuntimeException";this.message=t;this.stack=(new n).stack}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Error),wg=function(n){function t(){if(n.call(this),arguments.length===0)n.call(this);else if(arguments.length===1){var t=arguments[0];n.call(this,t)}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ac),rt=function(){};rt.prototype.interfaces_=function(){return[]};rt.prototype.getClass=function(){return rt};rt.shouldNeverReachHere=function(){if(arguments.length===0)rt.shouldNeverReachHere(null);else if(arguments.length===1){var n=arguments[0];throw new wg("Should never reach here"+(n!==null?": "+n:""));}};rt.isTrue=function(){var n,t;if(arguments.length===1)n=arguments[0],rt.isTrue(n,null);else if(arguments.length===2&&(n=arguments[0],t=arguments[1],!n))if(t===null)throw new wg;else throw new wg(t);};rt.equals=function(){var n,t,i;if(arguments.length===2)n=arguments[0],t=arguments[1],rt.equals(n,t,null);else if(arguments.length===3&&(n=arguments[0],t=arguments[1],i=arguments[2],!t.equals(n)))throw new wg("Expected "+n+" but encountered "+t+(i!==null?": "+i:""));};vr=function(){this._result=null;this._inputLines=Array(2).fill().map(function(){return Array(2)});this._intPt=new Array(2).fill(null);this._intLineIndex=null;this._isProper=null;this._pa=null;this._pb=null;this._precisionModel=null;this._intPt[0]=new i;this._intPt[1]=new i;this._pa=this._intPt[0];this._pb=this._intPt[1];this._result=0};va={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};vr.prototype.getIndexAlongSegment=function(n,t){return this.computeIntLineIndex(),this._intLineIndex[n][t]};vr.prototype.getTopologySummary=function(){var n=new ss;return this.isEndPoint()&&n.append(" endpoint"),this._isProper&&n.append(" proper"),this.isCollinear()&&n.append(" collinear"),n.toString()};vr.prototype.computeIntersection=function(n,t,i,r){this._inputLines[0][0]=n;this._inputLines[0][1]=t;this._inputLines[1][0]=i;this._inputLines[1][1]=r;this._result=this.computeIntersect(n,t,i,r)};vr.prototype.getIntersectionNum=function(){return this._result};vr.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var n=arguments[0],t=this.getEdgeDistance(n,0),i=this.getEdgeDistance(n,1);t>i?(this._intLineIndex[n][0]=0,this._intLineIndex[n][1]=1):(this._intLineIndex[n][0]=1,this._intLineIndex[n][1]=0)}};vr.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};vr.prototype.setPrecisionModel=function(n){this._precisionModel=n};vr.prototype.isInteriorIntersection=function(){var t=this,i,n;if(arguments.length===0)return this.isInteriorIntersection(0)?!0:this.isInteriorIntersection(1)?!0:!1;if(arguments.length===1){for(i=arguments[0],n=0;n<this._result;n++)if(!(t._intPt[n].equals2D(t._inputLines[i][0])||t._intPt[n].equals2D(t._inputLines[i][1])))return!0;return!1}};vr.prototype.getIntersection=function(n){return this._intPt[n]};vr.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};vr.prototype.hasIntersection=function(){return this._result!==vr.NO_INTERSECTION};vr.prototype.getEdgeDistance=function(n,t){return vr.computeEdgeDistance(this._intPt[t],this._inputLines[n][0],this._inputLines[n][1])};vr.prototype.isCollinear=function(){return this._result===vr.COLLINEAR_INTERSECTION};vr.prototype.toString=function(){return ls.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+ls.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};vr.prototype.getEndpoint=function(n,t){return this._inputLines[n][t]};vr.prototype.isIntersection=function(n){for(var i=this,t=0;t<this._result;t++)if(i._intPt[t].equals2D(n))return!0;return!1};vr.prototype.getIntersectionAlongSegment=function(n,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[n][t]]};vr.prototype.interfaces_=function(){return[]};vr.prototype.getClass=function(){return vr};vr.computeEdgeDistance=function(n,t,i){var u=Math.abs(i.x-t.x),f=Math.abs(i.y-t.y),r=-1,e,o;return n.equals(t)?r=0:n.equals(i)?r=u>f?u:f:(e=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y),r=u>f?e:o,r!==0||n.equals(t)||(r=Math.max(e,o))),rt.isTrue(!(r===0&&!n.equals(t)),"Bad distance calculation"),r};vr.nonRobustComputeEdgeDistance=function(n,t){var i=n.x-t.x,r=n.y-t.y,u=Math.sqrt(i*i+r*r);return rt.isTrue(!(u===0&&!n.equals(t)),"Invalid distance calculation"),u};va.DONT_INTERSECT.get=function(){return 0};va.DO_INTERSECT.get=function(){return 1};va.COLLINEAR.get=function(){return 2};va.NO_INTERSECTION.get=function(){return 0};va.POINT_INTERSECTION.get=function(){return 1};va.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(vr,va);pl=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var t=new l(this._inputLines[0][0],this._inputLines[0][1]),i=new l(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var t=arguments[0],i=arguments[1],r=arguments[2];if(this._isProper=!1,l.intersects(i,r,t)&&o.orientationIndex(i,r,t)===0&&o.orientationIndex(r,i,t)===0)return this._isProper=!0,(t.equals(i)||t.equals(r))&&(this._isProper=!1),this._result=n.POINT_INTERSECTION,null;this._result=n.NO_INTERSECTION}else return n.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,t,i,r,u){u.x=this.smallestInAbsValue(n.x,t.x,i.x,r.x);u.y=this.smallestInAbsValue(n.y,t.y,i.y,r.y);n.x-=u.x;n.y-=u.y;t.x-=u.x;t.y-=u.y;i.x-=u.x;i.y-=u.y;r.x-=u.x;r.y-=u.y},t.prototype.safeHCoordinateIntersection=function(n,i,r,u){var f=null;try{f=ke.intersection(n,i,r,u)}catch(e){if(e instanceof lp)f=t.nearestEndpoint(n,i,r,u);else throw e;}return f},t.prototype.intersection=function(n,r,u,f){var e=this.intersectionWithNormalization(n,r,u,f);return this.isInSegmentEnvelopes(e)||(e=new i(t.nearestEndpoint(n,r,u,f))),this._precisionModel!==null&&this._precisionModel.makePrecise(e),e},t.prototype.smallestInAbsValue=function(n,t,i,r){var u=n,f=Math.abs(u);return Math.abs(t)<f&&(u=t,f=Math.abs(t)),Math.abs(i)<f&&(u=i,f=Math.abs(i)),Math.abs(r)<f&&(u=r),u},t.prototype.checkDD=function(n,t,i,r,u){var f=te.intersection(n,t,i,r),e=this.isInSegmentEnvelopes(f);uf.out.println("DD in env = "+e+"  --------------------- "+f);u.distance(f)>.0001&&uf.out.println("Distance = "+u.distance(f))},t.prototype.intersectionWithNormalization=function(n,t,r,u){var o=new i(n),s=new i(t),h=new i(r),c=new i(u),e=new i,f;return this.normalizeToEnvCentre(o,s,h,c,e),f=this.safeHCoordinateIntersection(o,s,h,c),f.x+=e.x,f.y+=e.y,f},t.prototype.computeCollinearIntersection=function(t,i,r,u){var f=l.intersects(t,i,r),e=l.intersects(t,i,u),o=l.intersects(r,u,t),s=l.intersects(r,u,i);return f&&e?(this._intPt[0]=r,this._intPt[1]=u,n.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=t,this._intPt[1]=i,n.COLLINEAR_INTERSECTION):f&&o?(this._intPt[0]=r,this._intPt[1]=t,r.equals(t)&&!e&&!s?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):f&&s?(this._intPt[0]=r,this._intPt[1]=i,r.equals(i)&&!e&&!o?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):e&&o?(this._intPt[0]=u,this._intPt[1]=t,u.equals(t)&&!f&&!s?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):e&&s?(this._intPt[0]=u,this._intPt[1]=i,u.equals(i)&&!f&&!o?n.POINT_INTERSECTION:n.COLLINEAR_INTERSECTION):n.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,t,i,r,u){var f=n.x<t.x?n.x:t.x,e=n.y<t.y?n.y:t.y,o=n.x>t.x?n.x:t.x,s=n.y>t.y?n.y:t.y,h=i.x<r.x?i.x:r.x,c=i.y<r.y?i.y:r.y,l=i.x>r.x?i.x:r.x,a=i.y>r.y?i.y:r.y,v=f>h?f:h,y=o<l?o:l,p=e>c?e:c,w=s<a?s:a,b=(v+y)/2,k=(p+w)/2;u.x=b;u.y=k;n.x-=u.x;n.y-=u.y;t.x-=u.x;t.y-=u.y;i.x-=u.x;i.y-=u.y;r.x-=u.x;r.y-=u.y},t.prototype.computeIntersect=function(t,r,u,f){var e,s,h,c,a;return(this._isProper=!1,!l.intersects(t,r,u,f))?n.NO_INTERSECTION:(e=o.orientationIndex(t,r,u),s=o.orientationIndex(t,r,f),e>0&&s>0||e<0&&s<0)?n.NO_INTERSECTION:(h=o.orientationIndex(u,f,t),c=o.orientationIndex(u,f,r),h>0&&c>0||h<0&&c<0)?n.NO_INTERSECTION:(a=e===0&&s===0&&h===0&&c===0,a)?this.computeCollinearIntersection(t,r,u,f):(e===0||s===0||h===0||c===0?(this._isProper=!1,t.equals2D(u)||t.equals2D(f)?this._intPt[0]=t:r.equals2D(u)||r.equals2D(f)?this._intPt[0]=r:e===0?this._intPt[0]=new i(u):s===0?this._intPt[0]=new i(f):h===0?this._intPt[0]=new i(t):c===0&&(this._intPt[0]=new i(r))):(this._isProper=!0,this._intPt[0]=this.intersection(t,r,u,f)),n.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,t,i,r){var e=n,f=o.distancePointLine(n,i,r),u=o.distancePointLine(t,i,r);return u<f&&(f=u,e=t),u=o.distancePointLine(i,n,t),u<f&&(f=u,e=i),u=o.distancePointLine(r,n,t),u<f&&(f=u,e=r),e},t}(vr);ya=function(){};ya.prototype.interfaces_=function(){return[]};ya.prototype.getClass=function(){return ya};ya.orientationIndex=function(n,t,i){var r=t.x-n.x,u=t.y-n.y,f=i.x-t.x,e=i.y-t.y;return ya.signOfDet2x2(r,u,f,e)};ya.signOfDet2x2=function(n,t,i,r){var u=null,f=null,e=null;if(u=1,n===0||r===0)return t===0||i===0?0:t>0?i>0?-u:u:i>0?u:-u;if(t===0||i===0)return r>0?n>0?u:-u:n>0?-u:u;if(t>0?r>0?t<=r||(u=-u,f=n,n=i,i=f,f=t,t=r,r=f):t<=-r?(u=-u,i=-i,r=-r):(f=n,n=-i,i=f,f=t,t=-r,r=f):r>0?-t<=r?(u=-u,n=-n,t=-t):(f=-n,n=i,i=f,f=-t,t=r,r=f):t>=r?(n=-n,t=-t,i=-i,r=-r):(u=-u,f=-n,n=-i,i=f,f=-t,t=-r,r=f),n>0)if(i>0){if(!(n<=i))return u}else return u;else{if(i>0)return-u;if(n>=i)u=-u,n=-n,i=-i;else return-u}for(;;){if(e=Math.floor(i/n),i=i-e*n,r=r-e*t,r<0)return-u;if(r>t)return u;if(n>i+i){if(t<r+r)return u}else{if(t>r+r)return-u;i=n-i;r=t-r;u=-u}if(r===0)return i===0?0:-u;if(i===0||(e=Math.floor(n/i),n=n-e*i,t=t-e*r,t<0))return u;if(t>r)return-u;if(i>n+n){if(r<t+t)return-u}else{if(r>t+t)return u;n=i-n;t=r-t;u=-u}if(t===0)return n===0?0:u;if(n===0)return-u}};as=function(){this._p=null;this._crossingCount=0;this._isPointOnSegment=!1;var n=arguments[0];this._p=n};as.prototype.countSegment=function(n,t){var i,r;if(n.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(n.y===this._p.y&&t.y===this._p.y)return i=n.x,r=t.x,i>r&&(i=t.x,r=n.x),this._p.x>=i&&this._p.x<=r&&(this._isPointOnSegment=!0),null;if(n.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&n.y<=this._p.y){var o=n.x-this._p.x,f=n.y-this._p.y,s=t.x-this._p.x,e=t.y-this._p.y,u=ya.signOfDet2x2(o,f,s,e);if(u===0)return this._isPointOnSegment=!0,null;e<f&&(u=-u);u>0&&this._crossingCount++}};as.prototype.isPointInPolygon=function(){return this.getLocation()!==r.EXTERIOR};as.prototype.getLocation=function(){return this._isPointOnSegment?r.BOUNDARY:this._crossingCount%2==1?r.INTERIOR:r.EXTERIOR};as.prototype.isOnSegment=function(){return this._isPointOnSegment};as.prototype.interfaces_=function(){return[]};as.prototype.getClass=function(){return as};as.locatePointInRing=function(){var n,t,h,c;if(arguments[0]instanceof i&&k(arguments[1],st)){var l=arguments[0],f=arguments[1],r=new as(l),o=new i,s=new i;for(n=1;n<f.size();n++)if(f.getCoordinate(n,o),f.getCoordinate(n-1,s),r.countSegment(o,s),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof i&&arguments[1]instanceof Array){var a=arguments[0],e=arguments[1],u=new as(a);for(t=1;t<e.length;t++)if(h=e[t],c=e[t-1],u.countSegment(h,c),u.isOnSegment())return u.getLocation();return u.getLocation()}};o=function(){};pa={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};o.prototype.interfaces_=function(){return[]};o.prototype.getClass=function(){return o};o.orientationIndex=function(n,t,i){return te.orientationIndex(n,t,i)};o.signedArea=function(){var n,o,l,r,f,s,h,c,e;if(arguments[0]instanceof Array){if(n=arguments[0],n.length<3)return 0;for(o=0,l=n[0].x,r=1;r<n.length-1;r++){var v=n[r].x-l,y=n[r+1].y,p=n[r-1].y;o+=v*(p-y)}return o/2}if(k(arguments[0],st)){if(f=arguments[0],s=f.size(),s<3)return 0;var a=new i,u=new i,t=new i;for(f.getCoordinate(0,u),f.getCoordinate(1,t),h=u.x,t.x-=h,c=0,e=1;e<s-1;e++)a.y=u.y,u.x=t.x,u.y=t.y,f.getCoordinate(e+1,t),t.x-=h,c+=u.x*(a.y-t.y);return c/2}};o.distanceLineLine=function(n,t,i,r){var u,f;if(n.equals(t))return o.distancePointLine(n,i,r);if(i.equals(r))return o.distancePointLine(r,n,t);if(u=!1,l.intersects(n,t,i,r))if(f=(t.x-n.x)*(r.y-i.y)-(t.y-n.y)*(r.x-i.x),f===0)u=!0;else{var h=(n.y-i.y)*(r.x-i.x)-(n.x-i.x)*(r.y-i.y),c=(n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y),e=c/f,s=h/f;(s<0||s>1||e<0||e>1)&&(u=!0)}else u=!0;return u?ro.min(o.distancePointLine(n,i,r),o.distancePointLine(t,i,r),o.distancePointLine(i,n,t),o.distancePointLine(r,n,t)):0};o.isPointInRing=function(n,t){return o.locatePointInRing(n,t)!==r.EXTERIOR};o.computeLength=function(n){var o=n.size(),u,t,f,e,r;if(o<=1)return 0;for(u=0,t=new i,n.getCoordinate(0,t),f=t.x,e=t.y,r=1;r<o;r++){n.getCoordinate(r,t);var s=t.x,h=t.y,c=s-f,l=h-e;u+=Math.sqrt(c*c+l*l);f=s;e=h}return u};o.isCCW=function(n){var h=n.length-1,t,r,f,c,i,u,e,s,l,a;if(h<3)throw new ar("Ring has fewer than 4 points, so orientation cannot be determined");for(t=n[0],r=0,f=1;f<=h;f++)c=n[f],c.y>t.y&&(t=c,r=f);i=r;do i=i-1,i<0&&(i=h);while(n[i].equals2D(t)&&i!==r);u=r;do u=(u+1)%h;while(n[u].equals2D(t)&&u!==r);return(e=n[i],s=n[u],e.equals2D(t)||s.equals2D(t)||e.equals2D(s))?!1:(l=o.computeOrientation(e,t,s),a=!1,l===0?e.x>s.x:l>0)};o.locatePointInRing=function(n,t){return as.locatePointInRing(n,t)};o.distancePointLinePerpendicular=function(n,t,i){var r=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),u=((t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y))/r;return Math.abs(u)*Math.sqrt(r)};o.computeOrientation=function(n,t,i){return o.orientationIndex(n,t,i)};o.distancePointLine=function(){var s,r,f,u,h,e,c,l;if(arguments.length===2){if(s=arguments[0],r=arguments[1],r.length===0)throw new ar("Line array must contain at least one vertex");for(f=s.distance(r[0]),u=0;u<r.length-1;u++)h=o.distancePointLine(s,r[u],r[u+1]),h<f&&(f=h);return f}if(arguments.length===3){var i=arguments[0],n=arguments[1],t=arguments[2];return n.x===t.x&&n.y===t.y?i.distance(n):(e=(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y),c=((i.x-n.x)*(t.x-n.x)+(i.y-n.y)*(t.y-n.y))/e,c<=0)?i.distance(n):c>=1?i.distance(t):(l=((n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y))/e,Math.abs(l)*Math.sqrt(e))}};o.isOnLine=function(n,t){for(var u,f,r=new pl,i=1;i<t.length;i++)if(u=t[i-1],f=t[i],r.computeIntersection(n,u,f),r.hasIntersection())return!0;return!1};pa.CLOCKWISE.get=function(){return-1};pa.RIGHT.get=function(){return o.CLOCKWISE};pa.COUNTERCLOCKWISE.get=function(){return 1};pa.LEFT.get=function(){return o.COUNTERCLOCKWISE};pa.COLLINEAR.get=function(){return 0};pa.STRAIGHT.get=function(){return o.COLLINEAR};Object.defineProperties(o,pa);bh=function(){};bh.prototype.filter=function(){};bh.prototype.interfaces_=function(){return[]};bh.prototype.getClass=function(){return bh};b=function(){var n=arguments[0];this._envelope=null;this._factory=null;this._SRID=null;this._userData=null;this._factory=n;this._SRID=n.getSRID()};rh={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};b.prototype.isGeometryCollection=function(){return this.getSortIndex()===b.SORTINDEX_GEOMETRYCOLLECTION};b.prototype.getFactory=function(){return this._factory};b.prototype.getGeometryN=function(){return this};b.prototype.getArea=function(){return 0};b.prototype.isRectangle=function(){return!1};b.prototype.equals=function(){var n,t,i;return arguments[0]instanceof b?(n=arguments[0],n===null)?!1:this.equalsTopo(n):arguments[0]instanceof Object?(t=arguments[0],!(t instanceof b))?!1:(i=t,this.equalsExact(i)):void 0};b.prototype.equalsExact=function(n){return this===n||this.equalsExact(n,0)};b.prototype.geometryChanged=function(){this.apply(b.geometryChangedFilter)};b.prototype.geometryChangedAction=function(){this._envelope=null};b.prototype.equalsNorm=function(n){return n===null?!1:this.norm().equalsExact(n.norm())};b.prototype.getLength=function(){return 0};b.prototype.getNumGeometries=function(){return 1};b.prototype.compareTo=function(){var i,t,n,r;return arguments.length===1?(i=arguments[0],t=i,this.getSortIndex()!==t.getSortIndex())?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(i):arguments.length===2?(n=arguments[0],r=arguments[1],this.getSortIndex()!==n.getSortIndex())?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r):void 0};b.prototype.getUserData=function(){return this._userData};b.prototype.getSRID=function(){return this._SRID};b.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};b.prototype.checkNotGeometryCollection=function(n){if(n.getSortIndex()===b.SORTINDEX_GEOMETRYCOLLECTION)throw new ar("This method does not support GeometryCollection arguments");};b.prototype.equal=function(n,t,i){return i===0?n.equals(t):n.distance(t)<=i};b.prototype.norm=function(){var n=this.copy();return n.normalize(),n};b.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};b.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new l(this._envelope)};b.prototype.setSRID=function(n){this._SRID=n};b.prototype.setUserData=function(n){this._userData=n};b.prototype.compare=function(n,t){for(var i=n.iterator(),r=t.iterator();i.hasNext()&&r.hasNext();){var f=i.next(),e=r.next(),u=f.compareTo(e);if(u!==0)return u}return i.hasNext()?1:r.hasNext()?-1:0};b.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};b.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===b.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===b.SORTINDEX_MULTIPOINT||this.getSortIndex()===b.SORTINDEX_MULTILINESTRING||this.getSortIndex()===b.SORTINDEX_MULTIPOLYGON?!0:!1};b.prototype.interfaces_=function(){return[pg,co,lo]};b.prototype.getClass=function(){return b};b.hasNonEmptyElements=function(n){for(var t=0;t<n.length;t++)if(!n[t].isEmpty())return!0;return!1};b.hasNullElements=function(n){for(var t=0;t<n.length;t++)if(n[t]===null)return!0;return!1};rh.serialVersionUID.get=function(){return 8763622679187376702};rh.SORTINDEX_POINT.get=function(){return 0};rh.SORTINDEX_MULTIPOINT.get=function(){return 1};rh.SORTINDEX_LINESTRING.get=function(){return 2};rh.SORTINDEX_LINEARRING.get=function(){return 3};rh.SORTINDEX_MULTILINESTRING.get=function(){return 4};rh.SORTINDEX_POLYGON.get=function(){return 5};rh.SORTINDEX_MULTIPOLYGON.get=function(){return 6};rh.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};rh.geometryChangedFilter.get=function(){return bg};Object.defineProperties(b,rh);bg=function(){};bg.interfaces_=function(){return[bh]};bg.filter=function(n){n.geometryChangedAction()};uh=function(){};uh.prototype.filter=function(){};uh.prototype.interfaces_=function(){return[]};uh.prototype.getClass=function(){return uh};uo=function(){};kh={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};uo.prototype.isInBoundary=function(){};uo.prototype.interfaces_=function(){return[]};uo.prototype.getClass=function(){return uo};kh.Mod2BoundaryNodeRule.get=function(){return kv};kh.EndPointBoundaryNodeRule.get=function(){return dv};kh.MultiValentEndPointBoundaryNodeRule.get=function(){return gv};kh.MonoValentEndPointBoundaryNodeRule.get=function(){return ny};kh.MOD2_BOUNDARY_RULE.get=function(){return new kv};kh.ENDPOINT_BOUNDARY_RULE.get=function(){return new dv};kh.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new gv};kh.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ny};kh.OGC_SFS_BOUNDARY_RULE.get=function(){return uo.MOD2_BOUNDARY_RULE};Object.defineProperties(uo,kh);kv=function(){};kv.prototype.isInBoundary=function(n){return n%2==1};kv.prototype.interfaces_=function(){return[uo]};kv.prototype.getClass=function(){return kv};dv=function(){};dv.prototype.isInBoundary=function(n){return n>0};dv.prototype.interfaces_=function(){return[uo]};dv.prototype.getClass=function(){return dv};gv=function(){};gv.prototype.isInBoundary=function(n){return n>1};gv.prototype.interfaces_=function(){return[uo]};gv.prototype.getClass=function(){return gv};ny=function(){};ny.prototype.isInBoundary=function(n){return n===1};ny.prototype.interfaces_=function(){return[uo]};ny.prototype.getClass=function(){return ny};eu=function(){};eu.prototype.add=function(){};eu.prototype.addAll=function(){};eu.prototype.isEmpty=function(){};eu.prototype.iterator=function(){};eu.prototype.size=function(){};eu.prototype.toArray=function(){};eu.prototype.remove=function(){};cvt=function(n){function t(t){n.call(this);this.message=t||""}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={name:{configurable:!0}};return i.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(t,i),t}(Error);ty=function(){};ty.prototype.hasNext=function(){};ty.prototype.next=function(){};ty.prototype.remove=function(){};vo=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(eu);vp.prototype=new Error;vp.prototype.name="NoSuchElementException";var e=function(n){function t(){n.call(this);this.array_=[];arguments[0]instanceof eu&&this.addAll(arguments[0])}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[n,eu]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var i=this,t=n.iterator();t.hasNext();)i.add(t.next());return!0},t.prototype.set=function(n,t){var i=this.array_[n];return this.array_[n]=t,i},t.prototype.iterator=function(){return new fsi(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new cvt;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var i=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(i.array_[n]);return t},t.prototype.remove=function(n){for(var i=this,r=!1,t=0,u=this.array_.length;t<u;t++)if(i.array_[t]===n){i.array_.splice(t,1);r=!0;break}return r},t}(vo),fsi=function(n){function t(t){n.call(this);this.arrayList_=t;this.position_=0}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new vp;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()?!0:!1},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(ty),uk=function(n){function t(){var t,i,r;n.call(this);arguments.length===0||(arguments.length===1?(t=arguments[0],this.ensureCapacity(t.length),this.add(t,!0)):arguments.length===2&&(i=arguments[0],r=arguments[1],this.ensureCapacity(i.length),this.add(i,r)))}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(n){return this.get(n)},t.prototype.addAll=function(){var r=this,t;if(arguments.length===2){var u=arguments[0],f=arguments[1],i=!1;for(t=u.iterator();t.hasNext();)r.add(t.next(),f),i=!0;return i}return n.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=n.prototype.clone.call(this),t=0;t<this.size();t++)i.add(t,r.get(t).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var o=this,l,a,v,s,y,p,w,b,u,f,c,d,g,e;if(arguments.length===1)l=arguments[0],n.prototype.add.call(this,l);else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean")return a=arguments[0],v=arguments[1],this.add(a,v,!0),!0;if(arguments[0]instanceof i&&typeof arguments[1]=="boolean"){if(s=arguments[0],y=arguments[1],!y&&this.size()>=1&&(p=this.get(this.size()-1),p.equals2D(s)))return null;n.prototype.add.call(this,s)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean")return w=arguments[0],b=arguments[1],this.add(w,b),!0}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var r=arguments[0],k=arguments[1],rt=arguments[2];if(rt)for(u=0;u<r.length;u++)o.add(r[u],k);else for(f=r.length-1;f>=0;f--)o.add(r[f],k);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof i){var t=arguments[0],h=arguments[1],ut=arguments[2];if(!ut&&(c=this.size(),c>0&&(t>0&&(d=this.get(t-1),d.equals2D(h))||t<c&&(g=this.get(t),g.equals2D(h)))))return null;n.prototype.add.call(this,t,h)}}else if(arguments.length===4){var ft=arguments[0],et=arguments[1],nt=arguments[2],tt=arguments[3],it=1;for(nt>tt&&(it=-1),e=nt;e!==tt;e+=it)o.add(ft[e],et);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new i(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,r),t}(e),ft=function(){},kg={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};kg.ForwardComparator.get=function(){return yp};kg.BidirectionalComparator.get=function(){return iy};kg.coordArrayType.get=function(){return new Array(0).fill(null)};ft.prototype.interfaces_=function(){return[]};ft.prototype.getClass=function(){return ft};ft.isRing=function(n){return n.length<4?!1:n[0].equals2D(n[n.length-1])?!0:!1};ft.ptNotInList=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],ft.indexOf(r,t)<0)return r;return null};ft.scroll=function(n,t){var i=ft.indexOf(t,n),r;if(i<0)return null;r=new Array(n.length).fill(null);uf.arraycopy(n,i,r,0,n.length-i);uf.arraycopy(n,0,r,n.length-i,i);uf.arraycopy(r,0,n,0,n.length)};ft.equals=function(){var n,t,i,u;if(arguments.length===2){if(n=arguments[0],t=arguments[1],n===t)return!0;if(n===null||t===null||n.length!==t.length)return!1;for(i=0;i<n.length;i++)if(!n[i].equals(t[i]))return!1;return!0}if(arguments.length===3){var r=arguments[0],f=arguments[1],e=arguments[2];if(r===f)return!0;if(r===null||f===null||r.length!==f.length)return!1;for(u=0;u<r.length;u++)if(e.compare(r[u],f[u])!==0)return!1;return!0}};ft.intersection=function(n,t){for(var r=new uk,i=0;i<n.length;i++)t.intersects(n[i])&&r.add(n[i],!0);return r.toCoordinateArray()};ft.hasRepeatedPoints=function(n){for(var t=1;t<n.length;t++)if(n[t-1].equals(n[t]))return!0;return!1};ft.removeRepeatedPoints=function(n){if(!ft.hasRepeatedPoints(n))return n;var t=new uk(n,!1);return t.toCoordinateArray()};ft.reverse=function(n){for(var r,i=n.length-1,u=Math.trunc(i/2),t=0;t<=u;t++)r=n[t],n[t]=n[i-t],n[i-t]=r};ft.removeNull=function(n){for(var i,f,t,r=0,u=0;u<n.length;u++)n[u]!==null&&r++;if(i=new Array(r).fill(null),r===0)return i;for(f=0,t=0;t<n.length;t++)n[t]!==null&&(i[f++]=n[t]);return i};ft.copyDeep=function(){var r,u,n,t;if(arguments.length===1){for(r=arguments[0],u=new Array(r.length).fill(null),n=0;n<r.length;n++)u[n]=new i(r[n]);return u}if(arguments.length===5){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3],h=arguments[4];for(t=0;t<h;t++)o[s+t]=new i(f[e+t])}};ft.isEqualReversed=function(n,t){for(var r,u,i=0;i<n.length;i++)if(r=n[i],u=t[n.length-i-1],r.compareTo(u)!==0)return!1;return!0};ft.envelope=function(n){for(var i=new l,t=0;t<n.length;t++)i.expandToInclude(n[t]);return i};ft.toCoordinateArray=function(n){return n.toArray(ft.coordArrayType)};ft.atLeastNCoordinatesOrNothing=function(n,t){return t.length>=n?t:[]};ft.indexOf=function(n,t){for(var i=0;i<t.length;i++)if(n.equals(t[i]))return i;return-1};ft.increasingDirection=function(n){for(var r,i,t=0;t<Math.trunc(n.length/2);t++)if(r=n.length-1-t,i=n[t].compareTo(n[r]),i!==0)return i;return 1};ft.compare=function(n,t){for(var i=0,r;i<n.length&&i<t.length;){if(r=n[i].compareTo(t[i]),r!==0)return r;i++}return i<t.length?-1:i<n.length?1:0};ft.minCoordinate=function(n){for(var t=null,i=0;i<n.length;i++)(t===null||t.compareTo(n[i])>0)&&(t=n[i]);return t};ft.extract=function(n,t,i){var r,u,e,f;if(t=ro.clamp(t,0,n.length),i=ro.clamp(i,-1,n.length),r=i-t+1,i<0&&(r=0),t>=n.length&&(r=0),i<t&&(r=0),u=new Array(r).fill(null),r===0)return u;for(e=0,f=t;f<=i;f++)u[e++]=n[f];return u};Object.defineProperties(ft,kg);yp=function(){};yp.prototype.compare=function(n,t){var i=n,r=t;return ft.compare(i,r)};yp.prototype.interfaces_=function(){return[op]};yp.prototype.getClass=function(){return yp};iy=function(){};iy.prototype.compare=function(n,t){var i=n,r=t,u,f;return i.length<r.length?-1:i.length>r.length?1:i.length===0?0:(u=ft.compare(i,r),f=ft.isEqualReversed(i,r),f)?0:u};iy.prototype.OLDcompare=function(n,t){var i=n,r=t,u,f;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(i.length===0)return 0;var e=ft.increasingDirection(i),o=ft.increasingDirection(r),s=e>0?0:i.length-1,h=o>0?0:i.length-1;for(u=0;u<i.length;u++){if(f=i[s].compareTo(r[h]),f!==0)return f;s+=e;h+=o}return 0};iy.prototype.interfaces_=function(){return[op]};iy.prototype.getClass=function(){return iy};wa=function(){};wa.prototype.get=function(){};wa.prototype.put=function(){};wa.prototype.size=function(){};wa.prototype.values=function(){};wa.prototype.entrySet=function(){};lvt=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(wa);fk.prototype=new Error;fk.prototype.name="OperationNotSupported";dg.prototype=new eu;dg.prototype.contains=function(){};var wut=function(n){function t(){n.call(this);this.array_=[];arguments[0]instanceof eu&&this.addAll(arguments[0])}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var i,r=this,t=0,u=this.array_.length;t<u;t++)if(i=r.array_[t],i===n)return!0;return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var i=this,t=n.iterator();t.hasNext();)i.add(t.next());return!0},t.prototype.remove=function(){throw new Error;},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var i=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(i.array_[n]);return t},t.prototype.iterator=function(){return new esi(this)},t}(dg),esi=function(n){function t(t){n.call(this);this.hashSet_=t;this.position_=0}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new vp;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()?!0:!1},t.prototype.remove=function(){throw new fk;},t}(ty),vc=0,ba=1;cf.prototype=new lvt;cf.prototype.get=function(n){for(var t=this.root_,i;t!==null;)if(i=n.compareTo(t.key),i<0)t=t.left;else if(i>0)t=t.right;else return t.value;return null};cf.prototype.put=function(n,t){var i,r,u,e,f;if(this.root_===null)return this.root_={key:n,value:t,left:null,right:null,parent:null,color:vc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;i=this.root_;do if(r=i,u=n.compareTo(i.key),u<0)i=i.left;else if(u>0)i=i.right;else return e=i.value,i.value=t,e;while(i!==null);return f={key:n,left:null,right:null,value:t,parent:r,color:vc,getValue:function(){return this.value},getKey:function(){return this.key}},u<0?r.left=f:r.right=f,this.fixAfterInsertion(f),this.size_++,null};cf.prototype.fixAfterInsertion=function(n){var t=this,i,r;for(n.color=ba;n!=null&&n!==this.root_&&n.parent.color===ba;)sr(n)===but(sr(sr(n)))?(i=vvt(sr(sr(n))),avt(i)===ba?(yc(sr(n),vc),yc(i,vc),yc(sr(sr(n)),ba),n=sr(sr(n))):(n===vvt(sr(n))&&(n=sr(n),t.rotateLeft(n)),yc(sr(n),vc),yc(sr(sr(n)),ba),t.rotateRight(sr(sr(n))))):(r=but(sr(sr(n))),avt(r)===ba?(yc(sr(n),vc),yc(r,vc),yc(sr(sr(n)),ba),n=sr(sr(n))):(n===but(sr(n))&&(n=sr(n),t.rotateRight(n)),yc(sr(n),vc),yc(sr(sr(n)),ba),t.rotateLeft(sr(sr(n)))));this.root_.color=vc};cf.prototype.values=function(){var t=new e,n=this.getFirstEntry();if(n!==null)for(t.add(n.value);(n=cf.successor(n))!==null;)t.add(n.value);return t};cf.prototype.entrySet=function(){var t=new wut,n=this.getFirstEntry();if(n!==null)for(t.add(n);(n=cf.successor(n))!==null;)t.add(n);return t};cf.prototype.rotateLeft=function(n){if(n!=null){var t=n.right;n.right=t.left;t.left!=null&&(t.left.parent=n);t.parent=n.parent;n.parent===null?this.root_=t:n.parent.left===n?n.parent.left=t:n.parent.right=t;t.left=n;n.parent=t}};cf.prototype.rotateRight=function(n){if(n!=null){var t=n.left;n.left=t.right;t.right!=null&&(t.right.parent=n);t.parent=n.parent;n.parent===null?this.root_=t:n.parent.right===n?n.parent.right=t:n.parent.left=t;t.right=n;n.parent=t}};cf.prototype.getFirstEntry=function(){var n=this.root_;if(n!=null)while(n.left!=null)n=n.left;return n};cf.successor=function(n){var i,t,r;if(n===null)return null;if(n.right!==null){for(i=n.right;i.left!==null;)i=i.left;return i}for(t=n.parent,r=n;t!==null&&r===t.right;)r=t,t=t.parent;return t};cf.prototype.size=function(){return this.size_};pp=function(){};pp.prototype.interfaces_=function(){return[]};pp.prototype.getClass=function(){return pp};yvt.prototype=new dg;fh.prototype=new yvt;fh.prototype.contains=function(n){for(var i,r=this,t=0,u=this.array_.length;t<u;t++)if(i=r.array_[t],i.compareTo(n)===0)return!0;return!1};fh.prototype.add=function(n){var i=this,t,r,u;if(this.contains(n))return!1;for(t=0,r=this.array_.length;t<r;t++)if(u=i.array_[t],u.compareTo(n)===1)return i.array_.splice(t,0,n),!0;return this.array_.push(n),!0};fh.prototype.addAll=function(n){for(var i=this,t=n.iterator();t.hasNext();)i.add(t.next());return!0};fh.prototype.remove=function(){throw new fk;};fh.prototype.size=function(){return this.array_.length};fh.prototype.isEmpty=function(){return this.array_.length===0};fh.prototype.toArray=function(){for(var i=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(i.array_[n]);return t};fh.prototype.iterator=function(){return new ek(this)};ek=function(n){this.treeSet_=n;this.position_=0};ek.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new vp;return this.treeSet_.array_[this.position_++]};ek.prototype.hasNext=function(){return this.position_<this.treeSet_.size()?!0:!1};ek.prototype.remove=function(){throw new fk;};wl=function(){};wl.sort=function(){var n=arguments[0],t,i,f,r,u;if(arguments.length===1)r=function(n,t){return n.compareTo(t)},n.sort(r);else if(arguments.length===2)f=arguments[1],r=function(n,t){return f.compare(n,t)},n.sort(r);else if(arguments.length===3)for(i=n.slice(arguments[1],arguments[2]),i.sort(),u=n.slice(0,arguments[1]).concat(i,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<u.length;t++)n.push(u[t]);else if(arguments.length===4)for(i=n.slice(arguments[1],arguments[2]),f=arguments[3],r=function(n,t){return f.compare(n,t)},i.sort(r),u=n.slice(0,arguments[1]).concat(i,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<u.length;t++)n.push(u[t])};wl.asList=function(n){for(var i=new e,t=0,r=n.length;t<r;t++)i.add(n[t]);return i};wi=function(){};yo={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};yo.P.get=function(){return 0};yo.L.get=function(){return 1};yo.A.get=function(){return 2};yo.FALSE.get=function(){return-1};yo.TRUE.get=function(){return-2};yo.DONTCARE.get=function(){return-3};yo.SYM_FALSE.get=function(){return"F"};yo.SYM_TRUE.get=function(){return"T"};yo.SYM_DONTCARE.get=function(){return"*"};yo.SYM_P.get=function(){return"0"};yo.SYM_L.get=function(){return"1"};yo.SYM_A.get=function(){return"2"};wi.prototype.interfaces_=function(){return[]};wi.prototype.getClass=function(){return wi};wi.toDimensionSymbol=function(n){switch(n){case wi.FALSE:return wi.SYM_FALSE;case wi.TRUE:return wi.SYM_TRUE;case wi.DONTCARE:return wi.SYM_DONTCARE;case wi.P:return wi.SYM_P;case wi.L:return wi.SYM_L;case wi.A:return wi.SYM_A}throw new ar("Unknown dimension value: "+n);};wi.toDimensionValue=function(n){switch(hp.toUpperCase(n)){case wi.SYM_FALSE:return wi.FALSE;case wi.SYM_TRUE:return wi.TRUE;case wi.SYM_DONTCARE:return wi.DONTCARE;case wi.SYM_P:return wi.P;case wi.SYM_L:return wi.L;case wi.SYM_A:return wi.A}throw new ar("Unknown dimension symbol: "+n);};Object.defineProperties(wi,yo);vs=function(){};vs.prototype.filter=function(){};vs.prototype.interfaces_=function(){return[]};vs.prototype.getClass=function(){return vs};po=function(){};po.prototype.filter=function(){};po.prototype.isDone=function(){};po.prototype.isGeometryChanged=function(){};po.prototype.interfaces_=function(){return[]};po.prototype.getClass=function(){return po};var ie=function(n){function t(t,i){if(n.call(this,i),this._geometries=t||[],n.hasNullElements(this._geometries))throw new ar("geometries must not contain null elements");}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var i=this,t=new l,n=0;n<this._geometries.length;n++)t.expandToInclude(i._geometries[n].getEnvelopeInternal());return t},t.prototype.getGeometryN=function(n){return this._geometries[n]},t.prototype.getSortIndex=function(){return n.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i,n,f=this,r=new Array(this.getNumPoints()).fill(null),u=-1,t=0;t<this._geometries.length;t++)for(i=f._geometries[t].getCoordinates(),n=0;n<i.length;n++)u++,r[u]=i[n];return r},t.prototype.getArea=function(){for(var i=this,t=0,n=0;n<this._geometries.length;n++)t+=i._geometries[n].getArea();return t},t.prototype.equalsExact=function(){var f=this,i,u,r,t;if(arguments.length===2){if((i=arguments[0],u=arguments[1],!this.isEquivalentClass(i))||(r=i,this._geometries.length!==r._geometries.length))return!1;for(t=0;t<this._geometries.length;t++)if(!f._geometries[t].equalsExact(r._geometries[t],u))return!1;return!0}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var t=this,n=0;n<this._geometries.length;n++)t._geometries[n].normalize();wl.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var i=this,n=wi.FALSE,t=0;t<this._geometries.length;t++)n=Math.max(n,i._geometries[t].getBoundaryDimension());return n},t.prototype.getDimension=function(){for(var i=this,n=wi.FALSE,t=0;t<this._geometries.length;t++)n=Math.max(n,i._geometries[t].getDimension());return n},t.prototype.getLength=function(){for(var i=this,t=0,n=0;n<this._geometries.length;n++)t+=i._geometries[n].getLength();return t},t.prototype.getNumPoints=function(){for(var i=this,t=0,n=0;n<this._geometries.length;n++)t+=i._geometries[n].getNumPoints();return t},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this,r=this._geometries.length,t=new Array(r).fill(null),n=0;n<this._geometries.length;n++)t[n]=i._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},t.prototype.compareToSameClass=function(){var f=this;if(arguments.length===1){var e=arguments[0],o=new fh(wl.asList(this._geometries)),s=new fh(wl.asList(e._geometries));return this.compare(o,s)}if(arguments.length===2){for(var h=arguments[0],c=arguments[1],t=h,i=this.getNumGeometries(),r=t.getNumGeometries(),n=0;n<i&&n<r;){var l=f.getGeometryN(n),a=t.getGeometryN(n),u=l.compareToSameClass(a,c);if(u!==0)return u;n++}return n<i?1:n<r?-1:0}},t.prototype.apply=function(){var n=this,s,t,i,r,e,u,o,f;if(k(arguments[0],uh))for(s=arguments[0],t=0;t<this._geometries.length;t++)n._geometries[t].apply(s);else if(k(arguments[0],po)){if(i=arguments[0],this._geometries.length===0)return null;for(r=0;r<this._geometries.length;r++)if(n._geometries[r].apply(i),i.isDone())break;i.isGeometryChanged()&&this.geometryChanged()}else if(k(arguments[0],vs))for(e=arguments[0],e.filter(this),u=0;u<this._geometries.length;u++)n._geometries[u].apply(e);else if(k(arguments[0],bh))for(o=arguments[0],o.filter(this),f=0;f<this._geometries.length;f++)n._geometries[f].apply(o)},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),rt.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=n.prototype.clone.call(this),t;for(i._geometries=new Array(this._geometries.length).fill(null),t=0;t<this._geometries.length;t++)i._geometries[t]=r._geometries[t].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=r._geometries[n].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var t=this,n=0;n<this._geometries.length;n++)if(!t._geometries[n].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-5694727726395021467},Object.defineProperties(t,i),t}(b),ka=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return b.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];return this.isEquivalentClass(t)?n.prototype.equalsExact.call(this,t,i):!1}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?wi.FALSE:0},t.prototype.isClosed=function(){var t=this,n;if(this.isEmpty())return!1;for(n=0;n<this._geometries.length;n++)if(!t._geometries[n].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,t=this._geometries.length,i=new Array(t).fill(null),n=0;n<this._geometries.length;n++)i[t-1-n]=r._geometries[n].reverse();return this.getFactory().createMultiLineString(i)},t.prototype.getBoundary=function(){return new wo(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=r._geometries[n].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[pp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return 8166665132445433741},Object.defineProperties(t,i),t}(ie),wo=function(){var n,i,t,r;this._geom=null;this._geomFact=null;this._bnRule=null;this._endpointMap=null;arguments.length===1?(n=arguments[0],i=uo.MOD2_BOUNDARY_RULE,this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i):arguments.length===2&&(t=arguments[0],r=arguments[1],this._geom=t,this._geomFact=t.getFactory(),this._bnRule=r)};wo.prototype.boundaryMultiLineString=function(n){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(n);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};wo.prototype.getBoundary=function(){return this._geom instanceof wr?this.boundaryLineString(this._geom):this._geom instanceof ka?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};wo.prototype.boundaryLineString=function(n){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(n.isClosed()){var t=this._bnRule.isInBoundary(2);return t?n.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([n.getStartPoint(),n.getEndPoint()])};wo.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};wo.prototype.computeBoundaryCoordinates=function(n){var r=this,f=new e,i,t,u;for(this._endpointMap=new cf,i=0;i<n.getNumGeometries();i++)(t=n.getGeometryN(i),t.getNumPoints()!==0)&&(r.addEndpoint(t.getCoordinateN(0)),r.addEndpoint(t.getCoordinateN(t.getNumPoints()-1)));for(u=this._endpointMap.entrySet().iterator();u.hasNext();){var o=u.next(),s=o.getValue(),h=s.count;r._bnRule.isInBoundary(h)&&f.add(o.getKey())}return ft.toCoordinateArray(f)};wo.prototype.addEndpoint=function(n){var t=this._endpointMap.get(n);t===null&&(t=new ok,this._endpointMap.put(n,t));t.count++};wo.prototype.interfaces_=function(){return[]};wo.prototype.getClass=function(){return wo};wo.getBoundary=function(){var n,t;if(arguments.length===1)return n=arguments[0],t=new wo(n),t.getBoundary();if(arguments.length===2){var i=arguments[0],r=arguments[1],u=new wo(i,r);return u.getBoundary()}};ok=function(){this.count=null};ok.prototype.interfaces_=function(){return[]};ok.prototype.getClass=function(){return ok};pvt=function(){};fo=function(){};gg={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};fo.chars=function(n,t){for(var r=new Array(t).fill(null),i=0;i<t;i++)r[i]=n;return String(r)};fo.getStackTrace=function(){var n;if(arguments.length===1){var u=arguments[0],t=new hsi,f=new osi(t);return u.printStackTrace(f),t.toString()}if(arguments.length===2){var e=arguments[0],o=arguments[1],i="",s=new ssi(fo.getStackTrace(e)),h=new lsi(s);for(n=0;n<o;n++)try{i+=h.readLine()+fo.NEWLINE}catch(r){if(r instanceof csi)rt.shouldNeverReachHere();else throw r;}return i}};fo.split=function(n,t){for(var h=t.length,u=new e,i=""+n,f=i.indexOf(t),s,o,r;f>=0;)s=i.substring(0,f),u.add(s),i=i.substring(f+h),f=i.indexOf(t);for(i.length>0&&u.add(i),o=new Array(u.size()).fill(null),r=0;r<o.length;r++)o[r]=u.get(r);return o};fo.toString=function(){if(arguments.length===1){var n=arguments[0];return fo.SIMPLE_ORDINATE_FORMAT.format(n)}};fo.spaces=function(n){return fo.chars(" ",n)};gg.NEWLINE.get=function(){return uf.getProperty("line.separator")};gg.SIMPLE_ORDINATE_FORMAT.get=function(){return new pvt("0.#")};Object.defineProperties(fo,gg);kr=function(){};kr.prototype.interfaces_=function(){return[]};kr.prototype.getClass=function(){return kr};kr.copyCoord=function(n,t,i,r){for(var f=Math.min(n.getDimension(),i.getDimension()),u=0;u<f;u++)i.setOrdinate(r,u,n.getOrdinate(t,u))};kr.isRing=function(n){var t=n.size();return t===0?!0:t<=3?!1:n.getOrdinate(0,st.X)===n.getOrdinate(t-1,st.X)&&n.getOrdinate(0,st.Y)===n.getOrdinate(t-1,st.Y)};kr.isEqual=function(n,t){var u=n.size(),s=t.size(),f,i,r,e,o;if(u!==s)return!1;for(f=Math.min(n.getDimension(),t.getDimension()),i=0;i<u;i++)for(r=0;r<f;r++)if((e=n.getOrdinate(i,r),o=t.getOrdinate(i,r),n.getOrdinate(i,r)!==t.getOrdinate(i,r))&&(!it.isNaN(e)||!it.isNaN(o)))return!1;return!0};kr.extend=function(n,t,i){var f=n.create(i,t.getDimension()),r=t.size(),u;if(kr.copy(t,0,f,0,r),r>0)for(u=r;u<i;u++)kr.copy(t,r-1,f,u,1);return f};kr.reverse=function(n){for(var i=n.size()-1,r=Math.trunc(i/2),t=0;t<=r;t++)kr.swap(n,t,i-t)};kr.swap=function(n,t,i){var r,u;if(t===i)return null;for(r=0;r<n.getDimension();r++)u=n.getOrdinate(t,r),n.setOrdinate(t,r,n.getOrdinate(i,r)),n.setOrdinate(i,r,u)};kr.copy=function(n,t,i,r,u){for(var f=0;f<u;f++)kr.copyCoord(n,t+f,i,r+f)};kr.toString=function(){var r,u,f,n,t,i;if(arguments.length===1){if(r=arguments[0],u=r.size(),u===0)return"()";for(f=r.getDimension(),n=new ss,n.append("("),t=0;t<u;t++)for(t>0&&n.append(" "),i=0;i<f;i++)i>0&&n.append(","),n.append(fo.toString(r.getOrdinate(t,i)));return n.append(")"),n.toString()}};kr.ensureValidRing=function(n,t){var i=t.size(),r;return i===0?t:i<=3?kr.createClosedRing(n,t,4):(r=t.getOrdinate(0,st.X)===t.getOrdinate(i-1,st.X)&&t.getOrdinate(0,st.Y)===t.getOrdinate(i-1,st.Y),r)?t:kr.createClosedRing(n,t,i+1)};kr.createClosedRing=function(n,t,i){var u=n.create(i,t.getDimension()),f=t.size(),r;for(kr.copy(t,0,u,0,f),r=f;r<i;r++)kr.copy(t,0,u,r,1);return u};wr=function(n){function t(t,i){n.call(this,i);this._points=null;this.init(t)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new l:this._points.expandEnvelope(new l)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return n.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var u=this,i,f,r,t;if(arguments.length===2){if((i=arguments[0],f=arguments[1],!this.isEquivalentClass(i))||(r=i,this._points.size()!==r._points.size()))return!1;for(t=0;t<this._points.size();t++)if(!u.equal(u._points.getCoordinate(t),r._points.getCoordinate(t),f))return!1;return!0}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i,n=this,t=0;t<Math.trunc(this._points.size()/2);t++)if(i=n._points.size()-1-t,!n._points.getCoordinate(t).equals(n._points.getCoordinate(i)))return n._points.getCoordinate(t).compareTo(n._points.getCoordinate(i))>0&&kr.reverse(n._points),null},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?wi.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return o.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var n=this._points.copy();return kr.reverse(n),this.getFactory().createLineString(n)},t.prototype.compareToSameClass=function(){var u=this,r;if(arguments.length===1){for(var f=arguments[0],i=f,n=0,t=0;n<this._points.size()&&t<i._points.size();){if(r=u._points.getCoordinate(n).compareTo(i._points.getCoordinate(t)),r!==0)return r;n++;t++}return n<this._points.size()?1:t<i._points.size()?-1:0}if(arguments.length===2){var e=arguments[0],o=arguments[1],s=e;return o.compare(this._points,s._points)}},t.prototype.apply=function(){var r=this,u,n,t,i,f,e;if(k(arguments[0],uh))for(u=arguments[0],n=0;n<this._points.size();n++)u.filter(r._points.getCoordinate(n));else if(k(arguments[0],po)){if(t=arguments[0],this._points.size()===0)return null;for(i=0;i<this._points.size();i++)if(t.filter(r._points,i),t.isDone())break;t.isGeometryChanged()&&this.geometryChanged()}else k(arguments[0],vs)?(f=arguments[0],f.filter(this)):k(arguments[0],bh)&&(e=arguments[0],e.filter(this))},t.prototype.getBoundary=function(){return new wo(this).getBoundary()},t.prototype.isEquivalentClass=function(n){return n instanceof t},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._points=this._points.clone(),t},t.prototype.getCoordinateN=function(n){return this._points.getCoordinate(n)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(n){if(n===null&&(n=this.getFactory().getCoordinateSequenceFactory().create([])),n.size()===1)throw new ar("Invalid number of points in LineString (found "+n.size()+" - must be 0 or >= 2)");this._points=n},t.prototype.isCoordinate=function(n){for(var i=this,t=0;t<this._points.size();t++)if(i._points.getCoordinate(t).equals(n))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(n){return this.getFactory().createPoint(this._points.getCoordinate(n))},t.prototype.interfaces_=function(){return[pp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return 3110669828065365560},Object.defineProperties(t,i),t}(b);wp=function(){};wp.prototype.interfaces_=function(){return[]};wp.prototype.getClass=function(){return wp};ce=function(n){function t(t,i){n.call(this,i);this._coordinates=t||null;this.init(this._coordinates)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new l;var n=new l;return n.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),n},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.isEmpty()!==t.isEmpty()?!1:this.equal(t.getCoordinate(),this.getCoordinate(),i):!1}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return wi.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){var n,t;if(arguments.length===1)return n=arguments[0],t=n,this.getCoordinate().compareTo(t.getCoordinate());if(arguments.length===2){var i=arguments[0],r=arguments[1],u=i;return r.compare(this._coordinates,u._coordinates)}},t.prototype.apply=function(){var t,n,i,r;if(k(arguments[0],uh)){if(t=arguments[0],this.isEmpty())return null;t.filter(this.getCoordinate())}else if(k(arguments[0],po)){if(n=arguments[0],this.isEmpty())return null;n.filter(this._coordinates,0);n.isGeometryChanged()&&this.geometryChanged()}else k(arguments[0],vs)?(i=arguments[0],i.filter(this)):k(arguments[0],bh)&&(r=arguments[0],r.filter(this))},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(n){n===null&&(n=this.getFactory().getCoordinateSequenceFactory().create([]));rt.isTrue(n.size()<=1);this._coordinates=n},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[wp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return 4902022702746614570},Object.defineProperties(t,i),t}(b);pc=function(){};pc.prototype.interfaces_=function(){return[]};pc.prototype.getClass=function(){return pc};var cu=function(n){function t(t,i,r){if(n.call(this,r),this._shell=null,this._holes=null,t===null&&(t=this.getFactory().createLinearRing()),i===null&&(i=[]),n.hasNullElements(i))throw new ar("holes must not contain null elements");if(t.isEmpty()&&n.hasNonEmptyElements(i))throw new ar("shell is empty but holes are not");this._shell=t;this._holes=i}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return n.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var o=this,t,i,f,r;if(this.isEmpty())return[];var u=new Array(this.getNumPoints()).fill(null),n=-1,e=this._shell.getCoordinates();for(t=0;t<e.length;t++)n++,u[n]=e[t];for(i=0;i<this._holes.length;i++)for(f=o._holes[i].getCoordinates(),r=0;r<f.length;r++)n++,u[n]=f[r];return u},t.prototype.getArea=function(){var i=this,t=0,n;for(t+=Math.abs(o.signedArea(this._shell.getCoordinateSequence())),n=0;n<this._holes.length;n++)t-=Math.abs(o.signedArea(i._holes[n].getCoordinateSequence()));return t},t.prototype.isRectangle=function(){var n,t,i,u,f,e,o,r;if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(n=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),i=0;i<5;i++)if((u=n.getX(i),!(u===t.getMinX()||u===t.getMaxX()))||(f=n.getY(i),!(f===t.getMinY()||f===t.getMaxY())))return!1;for(e=n.getX(0),o=n.getY(0),r=1;r<=4;r++){var s=n.getX(r),h=n.getY(r),c=s!==e,l=h!==o;if(c===l)return!1;e=s;o=h}return!0},t.prototype.equalsExact=function(){var f=this,i,r,t;if(arguments.length===2){if(i=arguments[0],r=arguments[1],!this.isEquivalentClass(i))return!1;var u=i,e=this._shell,o=u._shell;if(!e.equalsExact(o,r)||this._holes.length!==u._holes.length)return!1;for(t=0;t<this._holes.length;t++)if(!f._holes[t].equalsExact(u._holes[t],r))return!1;return!0}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this,i,n,u,t,f;if(arguments.length===0){for(this.normalize(this._shell,!0),i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);wl.sort(this._holes)}else if(arguments.length===2){if(n=arguments[0],u=arguments[1],n.isEmpty())return null;t=new Array(n.getCoordinates().length-1).fill(null);uf.arraycopy(n.getCoordinates(),0,t,0,t.length);f=ft.minCoordinate(n.getCoordinates());ft.scroll(t,f);uf.arraycopy(t,0,n.getCoordinates(),0,t.length);n.getCoordinates()[t.length]=t[0];o.isCCW(n.getCoordinates())===u&&ft.reverse(n.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var i=this,t=0,n;for(t+=this._shell.getLength(),n=0;n<this._holes.length;n++)t+=i._holes[n].getLength();return t},t.prototype.getNumPoints=function(){for(var i=this,t=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)t+=i._holes[n].getNumPoints();return t},t.prototype.reverse=function(){var i=this,t=this.copy(),n;for(t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t._holes[n]=i._holes[n].copy().reverse();return t},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var o=this;if(arguments.length===1){var s=arguments[0],h=this._shell,c=s._shell;return h.compareToSameClass(c)}if(arguments.length===2){var l=arguments[0],i=arguments[1],t=l,a=this._shell,v=t._shell,r=a.compareToSameClass(v,i);if(r!==0)return r;for(var u=this.getNumInteriorRing(),f=t.getNumInteriorRing(),n=0;n<u&&n<f;){var y=o.getInteriorRingN(n),p=t.getInteriorRingN(n),e=y.compareToSameClass(p,i);if(e!==0)return e;n++}return n<u?1:n<f?-1:0}},t.prototype.apply=function(n){var u=this,t,i,r;if(k(n,uh))for(this._shell.apply(n),t=0;t<this._holes.length;t++)u._holes[t].apply(n);else if(k(n,po)){if(this._shell.apply(n),!n.isDone())for(i=0;i<this._holes.length;i++)if(u._holes[i].apply(n),n.isDone())break;n.isGeometryChanged()&&this.geometryChanged()}else if(k(n,vs))n.filter(this);else if(k(n,bh))for(n.filter(this),this._shell.apply(n),r=0;r<this._holes.length;r++)u._holes[r].apply(n)},t.prototype.getBoundary=function(){var i=this,n,t;if(this.isEmpty())return this.getFactory().createMultiLineString();for(n=new Array(this._holes.length+1).fill(null),n[0]=this._shell,t=0;t<this._holes.length;t++)n[t+1]=i._holes[t];return n.length<=1?this.getFactory().createLinearRing(n[0].getCoordinateSequence()):this.getFactory().createMultiLineString(n)},t.prototype.clone=function(){var r=this,i=n.prototype.clone.call(this),t;for(i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null),t=0;t<this._holes.length;t++)i._holes[t]=r._holes[t].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,u=this._shell.copy(),i=new Array(this._holes.length).fill(null),n=0;n<i.length;n++)i[n]=r._holes[n].copy();return new t(u,i,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(n){return this._holes[n]},t.prototype.interfaces_=function(){return[pc]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-3494792200821764533},Object.defineProperties(t,i),t}(b),bp=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return b.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];return this.isEquivalentClass(t)?n.prototype.equalsExact.call(this,t,i):!1}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._geometries[t].getCoordinate()}return n.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return wi.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=r._geometries[n].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[wp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-8048474874175355449},Object.defineProperties(t,i),t}(ie),dh=function(n){function t(t,r){t instanceof i&&r instanceof ut&&(t=r.getCoordinateSequenceFactory().create(t));n.call(this,t,r);this.validateConstruction()}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return b.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return wi.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var n=this._points.copy();return kr.reverse(n),this.getFactory().createLinearRing(n)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new ar("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ar("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)");},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-4261142084085851829},Object.defineProperties(t,r),t}(wr),gh=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return b.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];return this.isEquivalentClass(t)?n.prototype.equalsExact.call(this,t,i):!1}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this,r=this._geometries.length,t=new Array(r).fill(null),n=0;n<this._geometries.length;n++)t[n]=i._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},t.prototype.getBoundary=function(){var o=this,n,t,u,r,i,f;if(this.isEmpty())return this.getFactory().createMultiLineString();for(n=new e,t=0;t<this._geometries.length;t++)for(u=o._geometries[t],r=u.getBoundary(),i=0;i<r.getNumGeometries();i++)n.add(r.getGeometryN(i));return f=new Array(n.size()).fill(null),this.getFactory().createMultiLineString(n.toArray(f))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=r._geometries[n].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[pc]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-551033529766975875},Object.defineProperties(t,i),t}(ie),bo=function(n){this._factory=n||null;this._isUserDataCopied=!1},nn={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};bo.prototype.setCopyUserData=function(n){this._isUserDataCopied=n};bo.prototype.edit=function(n,t){if(n===null)return null;var i=this.editInternal(n,t);return this._isUserDataCopied&&i.setUserData(n.getUserData()),i};bo.prototype.editInternal=function(n,t){return(this._factory===null&&(this._factory=n.getFactory()),n instanceof ie)?this.editGeometryCollection(n,t):n instanceof cu?this.editPolygon(n,t):n instanceof ce?t.edit(n,this._factory):n instanceof wr?t.edit(n,this._factory):(rt.shouldNeverReachHere("Unsupported Geometry class: "+n.getClass().getName()),null)};bo.prototype.editGeometryCollection=function(n,t){for(var u,o=this,i=t.edit(n,this._factory),r=new e,f=0;f<i.getNumGeometries();f++)(u=o.edit(i.getGeometryN(f),t),u===null||u.isEmpty())||r.add(u);return i.getClass()===bp?this._factory.createMultiPoint(r.toArray([])):i.getClass()===ka?this._factory.createMultiLineString(r.toArray([])):i.getClass()===gh?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))};bo.prototype.editPolygon=function(n,t){var s=this,i=t.edit(n,this._factory),r,o,u,f;if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;if(r=this.edit(i.getExteriorRing(),t),r===null||r.isEmpty())return this._factory.createPolygon();for(o=new e,u=0;u<i.getNumInteriorRing();u++)(f=s.edit(i.getInteriorRingN(u),t),f===null||f.isEmpty())||o.add(f);return this._factory.createPolygon(r,o.toArray([]))};bo.prototype.interfaces_=function(){return[]};bo.prototype.getClass=function(){return bo};bo.GeometryEditorOperation=function(){};nn.NoOpGeometryOperation.get=function(){return kp};nn.CoordinateOperation.get=function(){return dp};nn.CoordinateSequenceOperation.get=function(){return gp};Object.defineProperties(bo,nn);kp=function(){};kp.prototype.edit=function(n){return n};kp.prototype.interfaces_=function(){return[bo.GeometryEditorOperation]};kp.prototype.getClass=function(){return kp};dp=function(){};dp.prototype.edit=function(n,t){var i=this.editCoordinates(n.getCoordinates(),n);return i===null?n:n instanceof dh?t.createLinearRing(i):n instanceof wr?t.createLineString(i):n instanceof ce?i.length>0?t.createPoint(i[0]):t.createPoint():n};dp.prototype.interfaces_=function(){return[bo.GeometryEditorOperation]};dp.prototype.getClass=function(){return dp};gp=function(){};gp.prototype.edit=function(n,t){return n instanceof dh?t.createLinearRing(this.edit(n.getCoordinateSequence(),n)):n instanceof wr?t.createLineString(this.edit(n.getCoordinateSequence(),n)):n instanceof ce?t.createPoint(this.edit(n.getCoordinateSequence(),n)):n};gp.prototype.interfaces_=function(){return[bo.GeometryEditorOperation]};gp.prototype.getClass=function(){return gp};dr=function(){var f=this,e,r,n,t,o,h,s,c,u;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0]))for(e=arguments[0],this._coordinates=new Array(e).fill(null),r=0;r<e;r++)f._coordinates[r]=new i;else if(k(arguments[0],st)){if(n=arguments[0],n===null)return this._coordinates=new Array(0).fill(null),null;for(this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null),t=0;t<this._coordinates.length;t++)f._coordinates[t]=n.getCoordinateCopy(t)}}else if(arguments.length===2)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1]))o=arguments[0],h=arguments[1],this._coordinates=o,this._dimension=h,o===null&&(this._coordinates=new Array(0).fill(null));else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1]))for(s=arguments[0],c=arguments[1],this._coordinates=new Array(s).fill(null),this._dimension=c,u=0;u<s;u++)f._coordinates[u]=new i};kut={serialVersionUID:{configurable:!0}};dr.prototype.setOrdinate=function(n,t,i){switch(t){case st.X:this._coordinates[n].x=i;break;case st.Y:this._coordinates[n].y=i;break;case st.Z:this._coordinates[n].z=i;break;default:throw new ar("invalid ordinateIndex");}};dr.prototype.size=function(){return this._coordinates.length};dr.prototype.getOrdinate=function(n,t){switch(t){case st.X:return this._coordinates[n].x;case st.Y:return this._coordinates[n].y;case st.Z:return this._coordinates[n].z}return it.NaN};dr.prototype.getCoordinate=function(){var i,n,t;if(arguments.length===1)return i=arguments[0],this._coordinates[i];arguments.length===2&&(n=arguments[0],t=arguments[1],t.x=this._coordinates[n].x,t.y=this._coordinates[n].y,t.z=this._coordinates[n].z)};dr.prototype.getCoordinateCopy=function(n){return new i(this._coordinates[n])};dr.prototype.getDimension=function(){return this._dimension};dr.prototype.getX=function(n){return this._coordinates[n].x};dr.prototype.clone=function(){for(var i=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=i._coordinates[n].clone();return new dr(t,this._dimension)};dr.prototype.expandEnvelope=function(n){for(var i=this,t=0;t<this._coordinates.length;t++)n.expandToInclude(i._coordinates[t]);return n};dr.prototype.copy=function(){for(var i=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=i._coordinates[n].copy();return new dr(t,this._dimension)};dr.prototype.toString=function(){var i=this,n,t;if(this._coordinates.length>0){for(n=new ss(17*this._coordinates.length),n.append("("),n.append(this._coordinates[0]),t=1;t<this._coordinates.length;t++)n.append(", "),n.append(i._coordinates[t]);return n.append(")"),n.toString()}return"()"};dr.prototype.getY=function(n){return this._coordinates[n].y};dr.prototype.toCoordinateArray=function(){return this._coordinates};dr.prototype.interfaces_=function(){return[st,lo]};dr.prototype.getClass=function(){return dr};kut.serialVersionUID.get=function(){return-915438501601840650};Object.defineProperties(dr,kut);eh=function(){};tn={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};eh.prototype.readResolve=function(){return eh.instance()};eh.prototype.create=function(){var i,r,t,n;if(arguments.length===1){if(arguments[0]instanceof Array)return i=arguments[0],new dr(i);if(k(arguments[0],st))return r=arguments[0],new dr(r)}else if(arguments.length===2)return(t=arguments[0],n=arguments[1],n>3&&(n=3),n<2)?new dr(t):new dr(t,n)};eh.prototype.interfaces_=function(){return[bv,lo]};eh.prototype.getClass=function(){return eh};eh.instance=function(){return eh.instanceObject};tn.serialVersionUID.get=function(){return-4099577099607551657};tn.instanceObject.get=function(){return new eh};Object.defineProperties(eh,tn);var wvt=function(n){function t(){n.call(this);this.map_=new Map}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,t){return this.map_.set(n,t),t},t.prototype.values=function(){for(var t=new e,i=this.map_.values(),n=i.next();!n.done;)t.add(n.value),n=i.next();return t},t.prototype.entrySet=function(){var n=new wut;return this.map_.entries().forEach(function(t){return n.add(t)}),n},t.prototype.size=function(){return this.map_.size()},t}(wa),ht=function ht(){var n,i,t;this._modelType=null;this._scale=null;arguments.length===0?this._modelType=ht.FLOATING:arguments.length===1&&(arguments[0]instanceof ko?(n=arguments[0],this._modelType=n,n===ht.FIXED&&this.setScale(1)):typeof arguments[0]=="number"?(i=arguments[0],this._modelType=ht.FIXED,this.setScale(i)):arguments[0]instanceof ht&&(t=arguments[0],this._modelType=t._modelType,this._scale=t._scale))},dut={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ht.prototype.equals=function(n){if(!(n instanceof ht))return!1;var t=n;return this._modelType===t._modelType&&this._scale===t._scale};ht.prototype.compareTo=function(n){var t=n,i=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new hs(i).compareTo(new hs(r))};ht.prototype.getScale=function(){return this._scale};ht.prototype.isFloating=function(){return this._modelType===ht.FLOATING||this._modelType===ht.FLOATING_SINGLE};ht.prototype.getType=function(){return this._modelType};ht.prototype.toString=function(){var n="UNKNOWN";return this._modelType===ht.FLOATING?n="Floating":this._modelType===ht.FLOATING_SINGLE?n="Floating-Single":this._modelType===ht.FIXED&&(n="Fixed (Scale="+this.getScale()+")"),n};ht.prototype.makePrecise=function(){var n,t;if(typeof arguments[0]=="number")return(n=arguments[0],it.isNaN(n))?n:this._modelType===ht.FLOATING_SINGLE?n:this._modelType===ht.FIXED?Math.round(n*this._scale)/this._scale:n;if(arguments[0]instanceof i){if(t=arguments[0],this._modelType===ht.FLOATING)return null;t.x=this.makePrecise(t.x);t.y=this.makePrecise(t.y)}};ht.prototype.getMaximumSignificantDigits=function(){var n=16;return this._modelType===ht.FLOATING?n=16:this._modelType===ht.FLOATING_SINGLE?n=6:this._modelType===ht.FIXED&&(n=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),n};ht.prototype.setScale=function(n){this._scale=Math.abs(n)};ht.prototype.interfaces_=function(){return[lo,co]};ht.prototype.getClass=function(){return ht};ht.mostPrecise=function(n,t){return n.compareTo(t)>=0?n:t};dut.serialVersionUID.get=function(){return 7777263578777803835};dut.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(ht,dut);ko=function ko(n){this._name=n||null;ko.nameToTypeMap.put(n,this)};rn={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ko.prototype.readResolve=function(){return ko.nameToTypeMap.get(this._name)};ko.prototype.toString=function(){return this._name};ko.prototype.interfaces_=function(){return[lo]};ko.prototype.getClass=function(){return ko};rn.serialVersionUID.get=function(){return-5528602631731589822};rn.nameToTypeMap.get=function(){return new wvt};Object.defineProperties(ko,rn);ht.Type=ko;ht.FIXED=new ko("FIXED");ht.FLOATING=new ko("FLOATING");ht.FLOATING_SINGLE=new ko("FLOATING SINGLE");ut=function ut(){this._precisionModel=new ht;this._SRID=0;this._coordinateSequenceFactory=ut.getDefaultCoordinateSequenceFactory();arguments.length===0||(arguments.length===1?k(arguments[0],bv)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ht&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))};gut={serialVersionUID:{configurable:!0}};ut.prototype.toGeometry=function(n){return n.isNull()?this.createPoint(null):n.getMinX()===n.getMaxX()&&n.getMinY()===n.getMaxY()?this.createPoint(new i(n.getMinX(),n.getMinY())):n.getMinX()===n.getMaxX()||n.getMinY()===n.getMaxY()?this.createLineString([new i(n.getMinX(),n.getMinY()),new i(n.getMaxX(),n.getMaxY())]):this.createPolygon(this.createLinearRing([new i(n.getMinX(),n.getMinY()),new i(n.getMinX(),n.getMaxY()),new i(n.getMaxX(),n.getMaxY()),new i(n.getMaxX(),n.getMinY()),new i(n.getMinX(),n.getMinY())]),null)};ut.prototype.createLineString=function(n){if(n){if(n instanceof Array)return new wr(this.getCoordinateSequenceFactory().create(n),this);if(k(n,st))return new wr(n,this)}else return new wr(this.getCoordinateSequenceFactory().create([]),this)};ut.prototype.createMultiLineString=function(){if(arguments.length===0)return new ka(null,this);if(arguments.length===1){var n=arguments[0];return new ka(n,this)}};ut.prototype.buildGeometry=function(n){for(var r,u,t,s,i=null,f=!1,e=!1,o=n.iterator();o.hasNext();)r=o.next(),u=r.getClass(),i===null&&(i=u),u!==i&&(f=!0),r.isGeometryCollectionOrDerived()&&(e=!0);if(i===null)return this.createGeometryCollection();if(f||e)return this.createGeometryCollection(ut.toGeometryArray(n));if(t=n.iterator().next(),s=n.size()>1,s){if(t instanceof cu)return this.createMultiPolygon(ut.toPolygonArray(n));if(t instanceof wr)return this.createMultiLineString(ut.toLineStringArray(n));if(t instanceof ce)return this.createMultiPoint(ut.toPointArray(n));rt.shouldNeverReachHere("Unhandled class: "+t.getClass().getName())}return t};ut.prototype.createMultiPointFromCoords=function(n){return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)};ut.prototype.createPoint=function(){var n,t;if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof i)return n=arguments[0],this.createPoint(n!==null?this.getCoordinateSequenceFactory().create([n]):null);if(k(arguments[0],st))return t=arguments[0],new ce(t,this)}};ut.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};ut.prototype.createPolygon=function(){var n,t,i,r,u;if(arguments.length===0)return new cu(null,null,this);if(arguments.length===1){if(k(arguments[0],st))return n=arguments[0],this.createPolygon(this.createLinearRing(n));if(arguments[0]instanceof Array)return t=arguments[0],this.createPolygon(this.createLinearRing(t));if(arguments[0]instanceof dh)return i=arguments[0],this.createPolygon(i,null)}else if(arguments.length===2)return r=arguments[0],u=arguments[1],new cu(r,u,this)};ut.prototype.getSRID=function(){return this._SRID};ut.prototype.createGeometryCollection=function(){if(arguments.length===0)return new ie(null,this);if(arguments.length===1){var n=arguments[0];return new ie(n,this)}};ut.prototype.createGeometry=function(n){var t=new bo(this);return t.edit(n,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};ut.prototype.getPrecisionModel=function(){return this._precisionModel};ut.prototype.createLinearRing=function(){var n,t;if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array)return n=arguments[0],this.createLinearRing(n!==null?this.getCoordinateSequenceFactory().create(n):null);if(k(arguments[0],st))return t=arguments[0],new dh(t,this)}};ut.prototype.createMultiPolygon=function(){if(arguments.length===0)return new gh(null,this);if(arguments.length===1){var n=arguments[0];return new gh(n,this)}};ut.prototype.createMultiPoint=function(){var f=this,e,i,n,r,t,u;if(arguments.length===0)return new bp(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return e=arguments[0],new bp(e,this);if(arguments[0]instanceof Array)return i=arguments[0],this.createMultiPoint(i!==null?this.getCoordinateSequenceFactory().create(i):null);if(k(arguments[0],st)){if(n=arguments[0],n===null)return this.createMultiPoint(new Array(0).fill(null));for(r=new Array(n.size()).fill(null),t=0;t<n.size();t++)u=f.getCoordinateSequenceFactory().create(1,n.getDimension()),kr.copy(n,t,u,0,1),r[t]=f.createPoint(u);return this.createMultiPoint(r)}}};ut.prototype.interfaces_=function(){return[lo]};ut.prototype.getClass=function(){return ut};ut.toMultiPolygonArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.toGeometryArray=function(n){if(n===null)return null;var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.getDefaultCoordinateSequenceFactory=function(){return eh.instance()};ut.toMultiLineStringArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.toLineStringArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.toMultiPointArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.toLinearRingArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.toPointArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.toPolygonArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};ut.createPointFromInternalCoord=function(n,t){return t.getPrecisionModel().makePrecise(n),t.getFactory().createPoint(n)};gut.serialVersionUID.get=function(){return-6820524753094095635};Object.defineProperties(ut,gut);bvt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];sk=function(n){this.geometryFactory=n||new ut};sk.prototype.read=function(n){var i,t;if(i=typeof n=="string"?JSON.parse(n):n,t=i.type,!oh[t])throw new Error("Unknown GeoJSON type: "+i.type);return bvt.indexOf(t)!==-1?oh[t].apply(this,[i.coordinates]):t==="GeometryCollection"?oh[t].apply(this,[i.geometries]):oh[t].apply(this,[i])};sk.prototype.write=function(n){var t=n.getGeometryType();if(!wc[t])throw new Error("Geometry is not supported");return wc[t].apply(this,[n])};var oh={Feature:function(n){var t={},i,r;for(i in n)t[i]=n[i];if(n.geometry){if(r=n.geometry.type,!oh[r])throw new Error("Unknown GeoJSON type: "+n.type);t.geometry=this.read(n.geometry)}return n.bbox&&(t.bbox=oh.bbox.apply(this,[n.bbox])),t},FeatureCollection:function(n){var r=this,t={},i;if(n.features)for(t.features=[],i=0;i<n.features.length;++i)t.features.push(r.read(n.features[i]));return n.bbox&&(t.bbox=this.parse.bbox.apply(this,[n.bbox])),t},coordinates:function(n){for(var r,u=[],t=0;t<n.length;++t)r=n[t],u.push(new i(r[0],r[1]));return u},bbox:function(n){return this.geometryFactory.createLinearRing([new i(n[0],n[1]),new i(n[2],n[1]),new i(n[2],n[3]),new i(n[0],n[3]),new i(n[0],n[1])])},Point:function(n){var t=new i(n[0],n[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(n){for(var r=this,i=[],t=0;t<n.length;++t)i.push(oh.Point.apply(r,[n[t]]));return this.geometryFactory.createMultiPoint(i)},LineString:function(n){var t=oh.coordinates.apply(this,[n]);return this.geometryFactory.createLineString(t)},MultiLineString:function(n){for(var r=this,i=[],t=0;t<n.length;++t)i.push(oh.LineString.apply(r,[n[t]]));return this.geometryFactory.createMultiLineString(i)},Polygon:function(n){for(var i=this,u=oh.coordinates.apply(this,[n[0]]),f=this.geometryFactory.createLinearRing(u),r=[],t=1;t<n.length;++t){var e=n[t],o=oh.coordinates.apply(i,[e]),s=i.geometryFactory.createLinearRing(o);r.push(s)}return this.geometryFactory.createPolygon(f,r)},MultiPolygon:function(n){for(var r,u=this,i=[],t=0;t<n.length;++t)r=n[t],i.push(oh.Polygon.apply(u,[r]));return this.geometryFactory.createMultiPolygon(i)},GeometryCollection:function(n){for(var r,u=this,i=[],t=0;t<n.length;++t)r=n[t],i.push(u.read(r));return this.geometryFactory.createGeometryCollection(i)}},wc={coordinate:function(n){return[n.x,n.y]},Point:function(n){var t=wc.coordinate.apply(this,[n.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(n){for(var r,u,f=this,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=wc.Point.apply(f,[r]),i.push(u.coordinates);return{type:"MultiPoint",coordinates:i}},LineString:function(n){for(var u,f=this,i=[],r=n.getCoordinates(),t=0;t<r.length;++t)u=r[t],i.push(wc.coordinate.apply(f,[u]));return{type:"LineString",coordinates:i}},MultiLineString:function(n){for(var r,u,f=this,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=wc.LineString.apply(f,[r]),i.push(u.coordinates);return{type:"MultiLineString",coordinates:i}},Polygon:function(n){var f=this,i=[],e=wc.LineString.apply(this,[n._shell]),t,r,u;for(i.push(e.coordinates),t=0;t<n._holes.length;++t)r=n._holes[t],u=wc.LineString.apply(f,[r]),i.push(u.coordinates);return{type:"Polygon",coordinates:i}},MultiPolygon:function(n){for(var r,u,f=this,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=wc.Polygon.apply(f,[r]),i.push(u.coordinates);return{type:"MultiPolygon",coordinates:i}},GeometryCollection:function(n){for(var i,u,f=this,r=[],t=0;t<n._geometries.length;++t)i=n._geometries[t],u=i.getGeometryType(),r.push(wc[u].apply(f,[i]));return{type:"GeometryCollection",geometries:r}}},nw=function(n){this.geometryFactory=n||new ut;this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new sk(this.geometryFactory)};nw.prototype.read=function(n){var t=this.parser.read(n);return this.precisionModel.getType()===ht.FIXED&&this.reducePrecision(t),t};nw.prototype.reducePrecision=function(n){var r=this,t,i;if(n.coordinate)this.precisionModel.makePrecise(n.coordinate);else if(n.points)for(t=0,i=n.points.length;t<i;t++)r.precisionModel.makePrecise(n.points[t]);else if(n.geometries)for(t=0,i=n.geometries.length;t<i;t++)r.reducePrecision(n.geometries[t])};tw=function(){this.parser=new sk(this.geometryFactory)};tw.prototype.write=function(n){return this.parser.write(n)};f=function(){};hk={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};f.prototype.interfaces_=function(){return[]};f.prototype.getClass=function(){return f};f.opposite=function(n){return n===f.LEFT?f.RIGHT:n===f.RIGHT?f.LEFT:n};hk.ON.get=function(){return 0};hk.LEFT.get=function(){return 1};hk.RIGHT.get=function(){return 2};Object.defineProperties(f,hk);un.prototype=new Error;un.prototype.name="EmptyStackException";sh.prototype=new vo;sh.prototype.add=function(n){return this.array_.push(n),!0};sh.prototype.get=function(n){if(n<0||n>=this.size())throw new Error;return this.array_[n]};sh.prototype.push=function(n){return this.array_.push(n),n};sh.prototype.pop=function(){if(this.array_.length===0)throw new un;return this.array_.pop()};sh.prototype.peek=function(){if(this.array_.length===0)throw new un;return this.array_[this.array_.length-1]};sh.prototype.empty=function(){return this.array_.length===0?!0:!1};sh.prototype.isEmpty=function(){return this.empty()};sh.prototype.search=function(n){return this.array_.indexOf(n)};sh.prototype.size=function(){return this.array_.length};sh.prototype.toArray=function(){for(var i=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(i.array_[n]);return t};ys=function(){this._minIndex=-1;this._minCoord=null;this._minDe=null;this._orientedDe=null};ys.prototype.getCoordinate=function(){return this._minCoord};ys.prototype.getRightmostSide=function(n,t){var i=this.getRightmostSideOfSegment(n,t);return i<0&&(i=this.getRightmostSideOfSegment(n,t-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(n)),i};ys.prototype.findRightmostEdgeAtVertex=function(){var n=this._minDe.getEdge().getCoordinates();rt.isTrue(this._minIndex>0&&this._minIndex<n.length,"rightmost point expected to be interior vertex of edge");var t=n[this._minIndex-1],i=n[this._minIndex+1],u=o.computeOrientation(this._minCoord,i,t),r=!1;t.y<this._minCoord.y&&i.y<this._minCoord.y&&u===o.COUNTERCLOCKWISE?r=!0:t.y>this._minCoord.y&&i.y>this._minCoord.y&&u===o.CLOCKWISE&&(r=!0);r&&(this._minIndex=this._minIndex-1)};ys.prototype.getRightmostSideOfSegment=function(n,t){var u=n.getEdge(),i=u.getCoordinates(),r;return t<0||t+1>=i.length?-1:i[t].y===i[t+1].y?-1:(r=f.LEFT,i[t].y<i[t+1].y&&(r=f.RIGHT),r)};ys.prototype.getEdge=function(){return this._orientedDe};ys.prototype.checkForRightmostCoordinate=function(n){for(var t=this,r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)(t._minCoord===null||r[i].x>t._minCoord.x)&&(t._minDe=n,t._minIndex=i,t._minCoord=r[i])};ys.prototype.findRightmostEdgeAtNode=function(){var n=this._minDe.getNode(),t=n.getEdges();this._minDe=t.getRightmostEdge();this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};ys.prototype.findEdge=function(n){for(var t,r,u=this,i=n.iterator();i.hasNext();)(t=i.next(),t.isForward())&&u.checkForRightmostCoordinate(t);rt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing");this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex();this._orientedDe=this._minDe;r=this.getRightmostSide(this._minDe,this._minIndex);r===f.LEFT&&(this._orientedDe=this._minDe.getSym())};ys.prototype.interfaces_=function(){return[]};ys.prototype.getClass=function(){return ys};nc=function(n){function t(r,u){n.call(this,t.msgWithCoord(r,u));this.pt=u?new i(u):null;this.name="TopologyException"}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,t){return t?n:n+" [ "+t+" ]"},t}(ac);ck=function(){this.array_=[]};ck.prototype.addLast=function(n){this.array_.push(n)};ck.prototype.removeFirst=function(){return this.array_.shift()};ck.prototype.isEmpty=function(){return this.array_.length===0};lf=function(){this._finder=null;this._dirEdgeList=new e;this._nodes=new e;this._rightMostCoord=null;this._env=null;this._finder=new ys};lf.prototype.clearVisitedEdges=function(){for(var t,n=this._dirEdgeList.iterator();n.hasNext();)t=n.next(),t.setVisited(!1)};lf.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};lf.prototype.computeNodeDepth=function(n){for(var t,r,u,e=this,i=null,f=n.getEdges().iterator();f.hasNext();)if(t=f.next(),t.isVisited()||t.getSym().isVisited()){i=t;break}if(i===null)throw new nc("unable to find edge to compute depths at "+n.getCoordinate());for(n.getEdges().computeDepths(i),r=n.getEdges().iterator();r.hasNext();)u=r.next(),u.setVisited(!0),e.copySymDepths(u)};lf.prototype.computeDepth=function(n){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(f.RIGHT,n);this.copySymDepths(t);this.computeDepths(t)};lf.prototype.create=function(n){this.addReachable(n);this._finder.findEdge(this._dirEdgeList);this._rightMostCoord=this._finder.getCoordinate()};lf.prototype.findResultEdges=function(){for(var n,t=this._dirEdgeList.iterator();t.hasNext();)n=t.next(),n.getDepth(f.RIGHT)>=1&&n.getDepth(f.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)};lf.prototype.computeDepths=function(n){var h=this,t=new wut,i=new ck,o=n.getNode(),r,f,s,e,u;for(i.addLast(o),t.add(o),n.setVisited(!0);!i.isEmpty();)for(r=i.removeFirst(),t.add(r),h.computeNodeDepth(r),f=r.getEdges().iterator();f.hasNext();)(s=f.next(),e=s.getSym(),e.isVisited())||(u=e.getNode(),t.contains(u)||(i.addLast(u),t.add(u)))};lf.prototype.compareTo=function(n){var t=n;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};lf.prototype.getEnvelope=function(){var t,i,u,r,n;if(this._env===null){for(t=new l,i=this._dirEdgeList.iterator();i.hasNext();)for(u=i.next(),r=u.getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env};lf.prototype.addReachable=function(n){var r=this,t=new sh,i;for(t.add(n);!t.empty();)i=t.pop(),r.add(i,t)};lf.prototype.copySymDepths=function(n){var t=n.getSym();t.setDepth(f.LEFT,n.getDepth(f.RIGHT));t.setDepth(f.RIGHT,n.getDepth(f.LEFT))};lf.prototype.add=function(n,t){var e=this,i,r,f,u;for(n.setVisited(!0),this._nodes.add(n),i=n.getEdges().iterator();i.hasNext();)r=i.next(),e._dirEdgeList.add(r),f=r.getSym(),u=f.getNode(),u.isVisited()||t.push(u)};lf.prototype.getNodes=function(){return this._nodes};lf.prototype.getDirectedEdges=function(){return this._dirEdgeList};lf.prototype.interfaces_=function(){return[co]};lf.prototype.getClass=function(){return lf};rr=function rr(){var u=this,i,r,t,n;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array)i=arguments[0],this.init(i.length);else if(Number.isInteger(arguments[0]))r=arguments[0],this.init(1),this.location[f.ON]=r;else if(arguments[0]instanceof rr&&(t=arguments[0],this.init(t.location.length),t!==null))for(n=0;n<this.location.length;n++)u.location[n]=t.location[n]}else if(arguments.length===3){var e=arguments[0],o=arguments[1],s=arguments[2];this.init(3);this.location[f.ON]=e;this.location[f.LEFT]=o;this.location[f.RIGHT]=s}};rr.prototype.setAllLocations=function(n){for(var i=this,t=0;t<this.location.length;t++)i.location[t]=n};rr.prototype.isNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==r.NONE)return!1;return!0};rr.prototype.setAllLocationsIfNull=function(n){for(var i=this,t=0;t<this.location.length;t++)i.location[t]===r.NONE&&(i.location[t]=n)};rr.prototype.isLine=function(){return this.location.length===1};rr.prototype.merge=function(n){var u=this,i,t;for(n.location.length>this.location.length&&(i=new Array(3).fill(null),i[f.ON]=this.location[f.ON],i[f.LEFT]=r.NONE,i[f.RIGHT]=r.NONE,this.location=i),t=0;t<this.location.length;t++)u.location[t]===r.NONE&&t<n.location.length&&(u.location[t]=n.location[t])};rr.prototype.getLocations=function(){return this.location};rr.prototype.flip=function(){if(this.location.length<=1)return null;var n=this.location[f.LEFT];this.location[f.LEFT]=this.location[f.RIGHT];this.location[f.RIGHT]=n};rr.prototype.toString=function(){var n=new ss;return this.location.length>1&&n.append(r.toLocationSymbol(this.location[f.LEFT])),n.append(r.toLocationSymbol(this.location[f.ON])),this.location.length>1&&n.append(r.toLocationSymbol(this.location[f.RIGHT])),n.toString()};rr.prototype.setLocations=function(n,t,i){this.location[f.ON]=n;this.location[f.LEFT]=t;this.location[f.RIGHT]=i};rr.prototype.get=function(n){return n<this.location.length?this.location[n]:r.NONE};rr.prototype.isArea=function(){return this.location.length>1};rr.prototype.isAnyNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]===r.NONE)return!0;return!1};rr.prototype.setLocation=function(){var n,t,i;arguments.length===1?(n=arguments[0],this.setLocation(f.ON,n)):arguments.length===2&&(t=arguments[0],i=arguments[1],this.location[t]=i)};rr.prototype.init=function(n){this.location=new Array(n).fill(null);this.setAllLocations(r.NONE)};rr.prototype.isEqualOnSide=function(n,t){return this.location[t]===n.location[t]};rr.prototype.allPositionsEqual=function(n){for(var i=this,t=0;t<this.location.length;t++)if(i.location[t]!==n)return!1;return!0};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};di=function di(){var n,t,i,u;if(this.elt=new Array(2).fill(null),arguments.length===1)Number.isInteger(arguments[0])?(n=arguments[0],this.elt[0]=new rr(n),this.elt[1]=new rr(n)):arguments[0]instanceof di&&(t=arguments[0],this.elt[0]=new rr(t.elt[0]),this.elt[1]=new rr(t.elt[1]));else if(arguments.length===2)i=arguments[0],u=arguments[1],this.elt[0]=new rr(r.NONE),this.elt[1]=new rr(r.NONE),this.elt[i].setLocation(u);else if(arguments.length===3){var f=arguments[0],e=arguments[1],o=arguments[2];this.elt[0]=new rr(f,e,o);this.elt[1]=new rr(f,e,o)}else if(arguments.length===4){var s=arguments[0],h=arguments[1],c=arguments[2],l=arguments[3];this.elt[0]=new rr(r.NONE,r.NONE,r.NONE);this.elt[1]=new rr(r.NONE,r.NONE,r.NONE);this.elt[s].setLocations(h,c,l)}};di.prototype.getGeometryCount=function(){var n=0;return this.elt[0].isNull()||n++,this.elt[1].isNull()||n++,n};di.prototype.setAllLocations=function(n,t){this.elt[n].setAllLocations(t)};di.prototype.isNull=function(n){return this.elt[n].isNull()};di.prototype.setAllLocationsIfNull=function(){var n,t,i;arguments.length===1?(n=arguments[0],this.setAllLocationsIfNull(0,n),this.setAllLocationsIfNull(1,n)):arguments.length===2&&(t=arguments[0],i=arguments[1],this.elt[t].setAllLocationsIfNull(i))};di.prototype.isLine=function(n){return this.elt[n].isLine()};di.prototype.merge=function(n){for(var i=this,t=0;t<2;t++)i.elt[t]===null&&n.elt[t]!==null?i.elt[t]=new rr(n.elt[t]):i.elt[t].merge(n.elt[t])};di.prototype.flip=function(){this.elt[0].flip();this.elt[1].flip()};di.prototype.getLocation=function(){var n,t,i;return arguments.length===1?(n=arguments[0],this.elt[n].get(f.ON)):arguments.length===2?(t=arguments[0],i=arguments[1],this.elt[t].get(i)):void 0};di.prototype.toString=function(){var n=new ss;return this.elt[0]!==null&&(n.append("A:"),n.append(this.elt[0].toString())),this.elt[1]!==null&&(n.append(" B:"),n.append(this.elt[1].toString())),n.toString()};di.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var n=arguments[0];return this.elt[n].isArea()}};di.prototype.isAnyNull=function(n){return this.elt[n].isAnyNull()};di.prototype.setLocation=function(){var n,t;if(arguments.length===2)n=arguments[0],t=arguments[1],this.elt[n].setLocation(f.ON,t);else if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];this.elt[i].setLocation(r,u)}};di.prototype.isEqualOnSide=function(n,t){return this.elt[0].isEqualOnSide(n.elt[0],t)&&this.elt[1].isEqualOnSide(n.elt[1],t)};di.prototype.allPositionsEqual=function(n,t){return this.elt[n].allPositionsEqual(t)};di.prototype.toLine=function(n){this.elt[n].isArea()&&(this.elt[n]=new rr(this.elt[n].location[0]))};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};di.toLineLabel=function(n){for(var i=new di(r.NONE),t=0;t<2;t++)i.setLocation(t,n.getLocation(t));return i};iu=function(){this._startDe=null;this._maxNodeDegree=-1;this._edges=new e;this._pts=new e;this._label=new di(r.NONE);this._ring=null;this._isHole=null;this._shell=null;this._holes=new e;this._geometryFactory=null;var n=arguments[0],t=arguments[1];this._geometryFactory=t;this.computePoints(n);this.computeRing()};iu.prototype.computeRing=function(){var i=this,t,n;if(this._ring!==null)return null;for(t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=i._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t);this._isHole=o.isCCW(this._ring.getCoordinates())};iu.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};iu.prototype.computePoints=function(n){var i=this,t,r,u;this._startDe=n;t=n;r=!0;do{if(t===null)throw new nc("Found null DirectedEdge");if(t.getEdgeRing()===i)throw new nc("Directed Edge visited twice during ring-building at "+t.getCoordinate());i._edges.add(t);u=t.getLabel();rt.isTrue(u.isArea());i.mergeLabel(u);i.addPoints(t.getEdge(),t.isForward(),r);r=!1;i.setEdgeRing(t,i);t=i.getNext(t)}while(t!==this._startDe)};iu.prototype.getLinearRing=function(){return this._ring};iu.prototype.getCoordinate=function(n){return this._pts.get(n)};iu.prototype.computeMaxNodeDegree=function(){var t=this,n,r,i;this._maxNodeDegree=0;n=this._startDe;do r=n.getNode(),i=r.getEdges().getOutgoingDegree(t),i>t._maxNodeDegree&&(t._maxNodeDegree=i),n=t.getNext(n);while(n!==this._startDe);this._maxNodeDegree*=2};iu.prototype.addPoints=function(n,t,i){var s=this,r=n.getCoordinates(),e,u,o,f;if(t)for(e=1,i&&(e=0),u=e;u<r.length;u++)s._pts.add(r[u]);else for(o=r.length-2,i&&(o=r.length-1),f=o;f>=0;f--)s._pts.add(r[f])};iu.prototype.isHole=function(){return this._isHole};iu.prototype.setInResult=function(){var n=this._startDe;do n.getEdge().setInResult(!0),n=n.getNext();while(n!==this._startDe)};iu.prototype.containsPoint=function(n){var i=this.getLinearRing(),u=i.getEnvelopeInternal(),t,r;if(!u.contains(n)||!o.isPointInRing(n,i.getCoordinates()))return!1;for(t=this._holes.iterator();t.hasNext();)if(r=t.next(),r.containsPoint(n))return!1;return!0};iu.prototype.addHole=function(n){this._holes.add(n)};iu.prototype.isShell=function(){return this._shell===null};iu.prototype.getLabel=function(){return this._label};iu.prototype.getEdges=function(){return this._edges};iu.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};iu.prototype.getShell=function(){return this._shell};iu.prototype.mergeLabel=function(){var n;if(arguments.length===1)n=arguments[0],this.mergeLabel(n,0),this.mergeLabel(n,1);else if(arguments.length===2){var u=arguments[0],t=arguments[1],i=u.getLocation(t,f.RIGHT);if(i===r.NONE)return null;if(this._label.getLocation(t)===r.NONE)return this._label.setLocation(t,i),null}};iu.prototype.setShell=function(n){this._shell=n;n!==null&&n.addHole(this)};iu.prototype.toPolygon=function(n){for(var r=this,i=new Array(this._holes.size()).fill(null),t=0;t<this._holes.size();t++)i[t]=r._holes.get(t).getLinearRing();return n.createPolygon(this.getLinearRing(),i)};iu.prototype.interfaces_=function(){return[]};iu.prototype.getClass=function(){return iu};var asi=function(n){function t(){var t=arguments[0],i=arguments[1];n.call(this,t,i)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,t){n.setMinEdgeRing(t)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(iu),vsi=function(n){function t(){var t=arguments[0],i=arguments[1];n.call(this,t,i)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var r=this,t=new e,n=this._startDe,i;do n.getMinEdgeRing()===null&&(i=new asi(n,r._geometryFactory),t.add(i)),n=n.getNext();while(n!==this._startDe);return t},t.prototype.setEdgeRing=function(n,t){n.setEdgeRing(t)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var i=this,n=this._startDe,t;do t=n.getNode(),t.getEdges().linkMinimalDirectedEdges(i),n=n.getNext();while(n!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(iu),eo=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var n=arguments[0];this._label=n}};eo.prototype.setVisited=function(n){this._isVisited=n};eo.prototype.setInResult=function(n){this._isInResult=n};eo.prototype.isCovered=function(){return this._isCovered};eo.prototype.isCoveredSet=function(){return this._isCoveredSet};eo.prototype.setLabel=function(n){this._label=n};eo.prototype.getLabel=function(){return this._label};eo.prototype.setCovered=function(n){this._isCovered=n;this._isCoveredSet=!0};eo.prototype.updateIM=function(n){rt.isTrue(this._label.getGeometryCount()>=2,"found partial label");this.computeIM(n)};eo.prototype.isInResult=function(){return this._isInResult};eo.prototype.isVisited=function(){return this._isVisited};eo.prototype.interfaces_=function(){return[]};eo.prototype.getClass=function(){return eo};lk=function(n){function t(){n.call(this);this._coord=null;this._edges=null;var t=arguments[0],i=arguments[1];this._coord=t;this._edges=i;this._label=new di(0,r.NONE)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var t,n=this.getEdges().getEdges().iterator();n.hasNext();)if(t=n.next(),t.getEdge().isInResult())return!0;return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(){},t.prototype.computeMergedLocation=function(n,t){var i=r.NONE,u;return i=this._label.getLocation(t),n.isNull(t)||(u=n.getLocation(t),i!==r.BOUNDARY&&(i=u)),i},t.prototype.setLabel=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];this._label===null?this._label=new di(t,i):this._label.setLocation(t,i)}else return n.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var i=this,u,f,n,e,o;if(arguments[0]instanceof t)u=arguments[0],this.mergeLabel(u._label);else if(arguments[0]instanceof di)for(f=arguments[0],n=0;n<2;n++)e=i.computeMergedLocation(f,n),o=i._label.getLocation(n),o===r.NONE&&i._label.setLocation(n,e)},t.prototype.add=function(n){this._edges.insert(n);n.setNode(this)},t.prototype.setLabelBoundary=function(n){var i,t;if(this._label===null)return null;i=r.NONE;this._label!==null&&(i=this._label.getLocation(n));t=null;switch(i){case r.BOUNDARY:t=r.INTERIOR;break;case r.INTERIOR:t=r.BOUNDARY;break;default:t=r.BOUNDARY}this._label.setLocation(n,t)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(eo);ps=function(){this.nodeMap=new cf;this.nodeFact=null;var n=arguments[0];this.nodeFact=n};ps.prototype.find=function(n){return this.nodeMap.get(n)};ps.prototype.addNode=function(){var r,t,n,u;return arguments[0]instanceof i?(r=arguments[0],t=this.nodeMap.get(r),t===null&&(t=this.nodeFact.createNode(r),this.nodeMap.put(r,t)),t):arguments[0]instanceof lk?(n=arguments[0],u=this.nodeMap.get(n.getCoordinate()),u===null)?(this.nodeMap.put(n.getCoordinate(),n),n):(u.mergeLabel(n),u):void 0};ps.prototype.print=function(n){for(var i,t=this.iterator();t.hasNext();)i=t.next(),i.print(n)};ps.prototype.iterator=function(){return this.nodeMap.values().iterator()};ps.prototype.values=function(){return this.nodeMap.values()};ps.prototype.getBoundaryNodes=function(n){for(var t,i=new e,u=this.iterator();u.hasNext();)t=u.next(),t.getLabel().getLocation(n)===r.BOUNDARY&&i.add(t);return i};ps.prototype.add=function(n){var t=n.getCoordinate(),i=this.addNode(t);i.add(n)};ps.prototype.interfaces_=function(){return[]};ps.prototype.getClass=function(){return ps};ir=function(){};iw={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ir.prototype.interfaces_=function(){return[]};ir.prototype.getClass=function(){return ir};ir.isNorthern=function(n){return n===ir.NE||n===ir.NW};ir.isOpposite=function(n,t){if(n===t)return!1;var i=(n-t+4)%4;return i===2?!0:!1};ir.commonHalfPlane=function(n,t){var r,i,u;return n===t?n:(r=(n-t+4)%4,r===2)?-1:(i=n<t?n:t,u=n>t?n:t,i===0&&u===3)?3:i};ir.isInHalfPlane=function(n,t){return t===ir.SE?n===ir.SE||n===ir.SW:n===t||n===t+1};ir.quadrant=function(){var u,r,n,t;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){if(u=arguments[0],r=arguments[1],u===0&&r===0)throw new ar("Cannot compute the quadrant for point ( "+u+", "+r+" )");return u>=0?r>=0?ir.NE:ir.SE:r>=0?ir.NW:ir.SW}if(arguments[0]instanceof i&&arguments[1]instanceof i){if(n=arguments[0],t=arguments[1],t.x===n.x&&t.y===n.y)throw new ar("Cannot compute the quadrant for two identical points "+n);return t.x>=n.x?t.y>=n.y?ir.NE:ir.SE:t.y>=n.y?ir.NW:ir.SW}};iw.NE.get=function(){return 0};iw.NW.get=function(){return 1};iw.SW.get=function(){return 2};iw.SE.get=function(){return 3};Object.defineProperties(ir,iw);ff=function(){var n;if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1)n=arguments[0],this._edge=n;else if(arguments.length===3){var t=arguments[0],i=arguments[1],r=arguments[2];this._edge=t;this.init(i,r);this._label=null}else if(arguments.length===4){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];this._edge=u;this.init(f,e);this._label=o}};ff.prototype.compareDirection=function(n){return this._dx===n._dx&&this._dy===n._dy?0:this._quadrant>n._quadrant?1:this._quadrant<n._quadrant?-1:o.computeOrientation(n._p0,n._p1,this._p1)};ff.prototype.getDy=function(){return this._dy};ff.prototype.getCoordinate=function(){return this._p0};ff.prototype.setNode=function(n){this._node=n};ff.prototype.print=function(n){var i=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),r=t.lastIndexOf("."),u=t.substring(r+1);n.print("  "+u+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+i+"   "+this._label)};ff.prototype.compareTo=function(n){var t=n;return this.compareDirection(t)};ff.prototype.getDirectedCoordinate=function(){return this._p1};ff.prototype.getDx=function(){return this._dx};ff.prototype.getLabel=function(){return this._label};ff.prototype.getEdge=function(){return this._edge};ff.prototype.getQuadrant=function(){return this._quadrant};ff.prototype.getNode=function(){return this._node};ff.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};ff.prototype.computeLabel=function(){};ff.prototype.init=function(n,t){this._p0=n;this._p1=t;this._dx=t.x-n.x;this._dy=t.y-n.y;this._quadrant=ir.quadrant(this._dx,this._dy);rt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};ff.prototype.interfaces_=function(){return[co]};ff.prototype.getClass=function(){return ff};fn=function(n){function t(){var t=arguments[0],r=arguments[1],i;n.call(this,t);this._isForward=null;this._isInResult=!1;this._isVisited=!1;this._sym=null;this._next=null;this._nextMin=null;this._edgeRing=null;this._minEdgeRing=null;this._depth=[0,-999,-999];this._isForward=r;r?this.init(t.getCoordinate(0),t.getCoordinate(1)):(i=t.getNumPoints()-1,this.init(t.getCoordinate(i),t.getCoordinate(i-1)));this.computeDirectedLabel()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new di(this._edge.getLabel());this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,t){if(this._depth[n]!==-999&&this._depth[n]!==t)throw new nc("assigned depths do not match",this.getCoordinate());this._depth[n]=t},t.prototype.isInteriorAreaEdge=function(){for(var t=this,i=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,f.LEFT)===r.INTERIOR&&t._label.getLocation(n,f.RIGHT)===r.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(t){n.prototype.print.call(this,t);t.print(" "+this._depth[f.LEFT]+"/"+this._depth[f.RIGHT]);t.print(" ("+this.getDepthDelta()+")");this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,r.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,r.EXTERIOR);return n&&t&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n);n.print(" ");this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n);this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,t){var i=this.getEdge().getDepthDelta(),r;this._isForward||(i=-i);r=1;n===f.LEFT&&(r=-1);var u=f.opposite(n),e=i*r,o=t+e;this.setDepth(n,t);this.setDepth(u,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,t){return n===r.EXTERIOR&&t===r.INTERIOR?1:n===r.INTERIOR&&t===r.EXTERIOR?-1:0},t}(ff);ry=function(){};ry.prototype.createNode=function(n){return new lk(n,null)};ry.prototype.interfaces_=function(){return[]};ry.prototype.getClass=function(){return ry};yr=function(){if(this._edges=new e,this._nodes=null,this._edgeEndList=new e,arguments.length===0)this._nodes=new ps(new ry);else if(arguments.length===1){var n=arguments[0];this._nodes=new ps(n)}};yr.prototype.printEdges=function(n){var r=this,t,i;for(n.println("Edges:"),t=0;t<this._edges.size();t++)n.println("edge "+t+":"),i=r._edges.get(t),i.print(n),i.eiList.print(n)};yr.prototype.find=function(n){return this._nodes.find(n)};yr.prototype.addNode=function(){var n,t;return arguments[0]instanceof lk?(n=arguments[0],this._nodes.addNode(n)):arguments[0]instanceof i?(t=arguments[0],this._nodes.addNode(t)):void 0};yr.prototype.getNodeIterator=function(){return this._nodes.iterator()};yr.prototype.linkResultDirectedEdges=function(){for(var t,n=this._nodes.iterator();n.hasNext();)t=n.next(),t.getEdges().linkResultDirectedEdges()};yr.prototype.debugPrintln=function(n){uf.out.println(n)};yr.prototype.isBoundaryNode=function(n,t){var u=this._nodes.find(t),i;return u===null?!1:(i=u.getLabel(),i!==null&&i.getLocation(n)===r.BOUNDARY)?!0:!1};yr.prototype.linkAllDirectedEdges=function(){for(var t,n=this._nodes.iterator();n.hasNext();)t=n.next(),t.getEdges().linkAllDirectedEdges()};yr.prototype.matchInSameDirection=function(n,t,i,r){return n.equals(i)?o.computeOrientation(n,t,r)===o.COLLINEAR&&ir.quadrant(n,t)===ir.quadrant(i,r)?!0:!1:!1};yr.prototype.getEdgeEnds=function(){return this._edgeEndList};yr.prototype.debugPrint=function(n){uf.out.print(n)};yr.prototype.getEdgeIterator=function(){return this._edges.iterator()};yr.prototype.findEdgeInSameDirection=function(n,t){for(var f,i,r=this,u=0;u<this._edges.size();u++)if((f=r._edges.get(u),i=f.getCoordinates(),r.matchInSameDirection(n,t,i[0],i[1]))||r.matchInSameDirection(n,t,i[i.length-1],i[i.length-2]))return f;return null};yr.prototype.insertEdge=function(n){this._edges.add(n)};yr.prototype.findEdgeEnd=function(n){for(var i,t=this.getEdgeEnds().iterator();t.hasNext();)if(i=t.next(),i.getEdge()===n)return i;return null};yr.prototype.addEdges=function(n){for(var t,i,r,u=this,f=n.iterator();f.hasNext();)t=f.next(),u._edges.add(t),i=new fn(t,!0),r=new fn(t,!1),i.setSym(r),r.setSym(i),u.add(i),u.add(r)};yr.prototype.add=function(n){this._nodes.add(n);this._edgeEndList.add(n)};yr.prototype.getNodes=function(){return this._nodes.values()};yr.prototype.findEdge=function(n,t){for(var r,u,f=this,i=0;i<this._edges.size();i++)if(r=f._edges.get(i),u=r.getCoordinates(),n.equals(u[0])&&t.equals(u[1]))return r;return null};yr.prototype.interfaces_=function(){return[]};yr.prototype.getClass=function(){return yr};yr.linkResultDirectedEdges=function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),i.getEdges().linkResultDirectedEdges()};le=function(){this._geometryFactory=null;this._shellList=new e;var n=arguments[0];this._geometryFactory=n};le.prototype.sortShellsAndHoles=function(n,t,i){for(var r,u=n.iterator();u.hasNext();)r=u.next(),r.isHole()?i.add(r):t.add(r)};le.prototype.computePolygons=function(n){for(var r,u,f=this,t=new e,i=n.iterator();i.hasNext();)r=i.next(),u=r.toPolygon(f._geometryFactory),t.add(u);return t};le.prototype.placeFreeHoles=function(n,t){for(var i,r,f=this,u=t.iterator();u.hasNext();)if(i=u.next(),i.getShell()===null){if(r=f.findEdgeRingContaining(i,n),r===null)throw new nc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}};le.prototype.buildMinimalEdgeRings=function(n,t,i){for(var r,u,f,o=this,s=new e,h=n.iterator();h.hasNext();)r=h.next(),r.getMaxNodeDegree()>2?(r.linkDirectedEdgesForMinimalEdgeRings(),u=r.buildMinimalRings(),f=o.findShell(u),f!==null?(o.placePolygonHoles(f,u),t.add(f)):i.addAll(u)):s.add(r);return s};le.prototype.containsPoint=function(n){for(var i,t=this._shellList.iterator();t.hasNext();)if(i=t.next(),i.containsPoint(n))return!0;return!1};le.prototype.buildMaximalEdgeRings=function(n){for(var t,i,f=this,r=new e,u=n.iterator();u.hasNext();)t=u.next(),t.isInResult()&&t.getLabel().isArea()&&t.getEdgeRing()===null&&(i=new vsi(t,f._geometryFactory),r.add(i),i.setInResult());return r};le.prototype.placePolygonHoles=function(n,t){for(var r,i=t.iterator();i.hasNext();)r=i.next(),r.isHole()&&r.setShell(n)};le.prototype.getPolygons=function(){return this.computePolygons(this._shellList)};le.prototype.findEdgeRingContaining=function(n,t){for(var r,u=n.getLinearRing(),l=u.getEnvelopeInternal(),a=u.getCoordinateN(0),i=null,f=null,e=t.iterator();e.hasNext();){var s=e.next(),h=s.getLinearRing(),c=h.getEnvelopeInternal();i!==null&&(f=i.getLinearRing().getEnvelopeInternal());r=!1;c.contains(l)&&o.isPointInRing(a,h.getCoordinates())&&(r=!0);r&&(i===null||f.contains(c))&&(i=s)}return i};le.prototype.findShell=function(n){for(var t,i=0,r=null,u=n.iterator();u.hasNext();)t=u.next(),t.isHole()||(r=t,i++);return rt.isTrue(i<=1,"found two shells in MinimalEdgeRing list"),r};le.prototype.add=function(){var n,i,r;if(arguments.length===1)n=arguments[0],this.add(n.getEdgeEnds(),n.getNodes());else if(arguments.length===2){i=arguments[0];r=arguments[1];yr.linkResultDirectedEdges(r);var u=this.buildMaximalEdgeRings(i),t=new e,f=this.buildMinimalEdgeRings(u,this._shellList,t);this.sortShellsAndHoles(f,this._shellList,t);this.placeFreeHoles(this._shellList,t)}};le.prototype.interfaces_=function(){return[]};le.prototype.getClass=function(){return le};uy=function(){};uy.prototype.getBounds=function(){};uy.prototype.interfaces_=function(){return[]};uy.prototype.getClass=function(){return uy};go=function(){this._bounds=null;this._item=null;var n=arguments[0],t=arguments[1];this._bounds=n;this._item=t};go.prototype.getItem=function(){return this._item};go.prototype.getBounds=function(){return this._bounds};go.prototype.interfaces_=function(){return[uy,lo]};go.prototype.getClass=function(){return go};tc=function(){this._size=null;this._items=null;this._size=0;this._items=new e;this._items.add(null)};tc.prototype.poll=function(){if(this.isEmpty())return null;var n=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),n};tc.prototype.size=function(){return this._size};tc.prototype.reorder=function(n){for(var i=this,t=null,r=this._items.get(n);n*2<=this._size;n=t)if(t=n*2,t!==i._size&&i._items.get(t+1).compareTo(i._items.get(t))<0&&t++,i._items.get(t).compareTo(r)<0)i._items.set(n,i._items.get(t));else break;this._items.set(n,r)};tc.prototype.clear=function(){this._size=0;this._items.clear()};tc.prototype.isEmpty=function(){return this._size===0};tc.prototype.add=function(n){var i=this,t;for(this._items.add(null),this._size+=1,t=this._size,this._items.set(0,n);n.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)i._items.set(t,i._items.get(Math.trunc(t/2)));this._items.set(t,n)};tc.prototype.interfaces_=function(){return[]};tc.prototype.getClass=function(){return tc};bc=function(){};bc.prototype.visitItem=function(){};bc.prototype.interfaces_=function(){return[]};bc.prototype.getClass=function(){return bc};da=function(){};da.prototype.insert=function(){};da.prototype.remove=function(){};da.prototype.query=function(){};da.prototype.interfaces_=function(){return[]};da.prototype.getClass=function(){return da};ou=function(){if(this._childBoundables=new e,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var n=arguments[0];this._level=n}};nft={serialVersionUID:{configurable:!0}};ou.prototype.getLevel=function(){return this._level};ou.prototype.size=function(){return this._childBoundables.size()};ou.prototype.getChildBoundables=function(){return this._childBoundables};ou.prototype.addChildBoundable=function(n){rt.isTrue(this._bounds===null);this._childBoundables.add(n)};ou.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};ou.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};ou.prototype.interfaces_=function(){return[uy,lo]};ou.prototype.getClass=function(){return ou};nft.serialVersionUID.get=function(){return 6493722185909573708};Object.defineProperties(ou,nft);ns=function(){};ns.reverseOrder=function(){return{compare:function(n,t){return t.compareTo(n)}}};ns.min=function(n){return ns.sort(n),n.get(0)};ns.sort=function(n,t){var i=n.toArray(),u,r,f;for(t?wl.sort(i,t):wl.sort(i),u=n.iterator(),r=0,f=i.length;r<f;r++)u.next(),u.set(i[r])};ns.singletonList=function(n){var t=new e;return t.add(n),t};ru=function(){this._boundable1=null;this._boundable2=null;this._distance=null;this._itemDistance=null;var n=arguments[0],t=arguments[1],i=arguments[2];this._boundable1=n;this._boundable2=t;this._itemDistance=i;this._distance=this.distance()};ru.prototype.expandToQueue=function(n,t){var i=ru.isComposite(this._boundable1),r=ru.isComposite(this._boundable2);if(i&&r)return ru.area(this._boundable1)>ru.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,n,t),null):(this.expand(this._boundable2,this._boundable1,n,t),null);if(i)return this.expand(this._boundable1,this._boundable2,n,t),null;if(r)return this.expand(this._boundable2,this._boundable1,n,t),null;throw new ar("neither boundable is composite");};ru.prototype.isLeaves=function(){return!(ru.isComposite(this._boundable1)||ru.isComposite(this._boundable2))};ru.prototype.compareTo=function(n){var t=n;return this._distance<t._distance?-1:this._distance>t._distance?1:0};ru.prototype.expand=function(n,t,i,r){for(var e,u,o=this,s=n.getChildBoundables(),f=s.iterator();f.hasNext();)e=f.next(),u=new ru(e,t,o._itemDistance),u.getDistance()<r&&i.add(u)};ru.prototype.getBoundable=function(n){return n===0?this._boundable1:this._boundable2};ru.prototype.getDistance=function(){return this._distance};ru.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};ru.prototype.interfaces_=function(){return[co]};ru.prototype.getClass=function(){return ru};ru.area=function(n){return n.getBounds().getArea()};ru.isComposite=function(n){return n instanceof ou};lu=function lu(){var t,n;this._root=null;this._built=!1;this._itemBoundables=new e;this._nodeCapacity=null;arguments.length===0?(t=lu.DEFAULT_NODE_CAPACITY,this._nodeCapacity=t):arguments.length===1&&(n=arguments[0],rt.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n)};ak={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};lu.prototype.getNodeCapacity=function(){return this._nodeCapacity};lu.prototype.lastNode=function(n){return n.get(n.size()-1)};lu.prototype.size=function(){var u=this,r,n,i,t;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(r=arguments[0],n=0,i=r.getChildBoundables().iterator();i.hasNext();)t=i.next(),t instanceof ou?n+=u.size(t):t instanceof go&&(n+=1);return n}};lu.prototype.removeItem=function(n,t){for(var i,r=null,u=n.getChildBoundables().iterator();u.hasNext();)i=u.next(),i instanceof go&&i.getItem()===t&&(r=i);return r!==null?(n.getChildBoundables().remove(r),!0):!1};lu.prototype.itemsTree=function(){var o=this,i,f,n,r,t,u;if(arguments.length===0)return(this.build(),i=this.itemsTree(this._root),i===null)?new e:i;if(arguments.length===1){for(f=arguments[0],n=new e,r=f.getChildBoundables().iterator();r.hasNext();)t=r.next(),t instanceof ou?(u=o.itemsTree(t),u!==null&&n.add(u)):t instanceof go?n.add(t.getItem()):rt.shouldNeverReachHere();return n.size()<=0?null:n}};lu.prototype.insert=function(n,t){rt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built.");this._itemBoundables.add(new go(n,t))};lu.prototype.boundablesAtLevel=function(){var s=this,o,i,f,n;if(arguments.length===1)return o=arguments[0],i=new e,this.boundablesAtLevel(o,this._root,i),i;if(arguments.length===3){var t=arguments[0],r=arguments[1],u=arguments[2];if(rt.isTrue(t>-2),r.getLevel()===t)return u.add(r),null;for(f=r.getChildBoundables().iterator();f.hasNext();)n=f.next(),n instanceof ou?s.boundablesAtLevel(t,n,u):(rt.isTrue(n instanceof go),t===-1&&u.add(n));return null}};lu.prototype.query=function(){var i=this,o,r,s,h,u,n,f,t;if(arguments.length===1)return(o=arguments[0],this.build(),r=new e,this.isEmpty())?r:(this.getIntersectsOp().intersects(this._root.getBounds(),o)&&this.query(o,this._root,r),r);if(arguments.length===2){if(s=arguments[0],h=arguments[1],this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),s)&&this.query(s,this._root,h)}else if(arguments.length===3)if(k(arguments[2],bc)&&arguments[0]instanceof Object&&arguments[1]instanceof ou){var c=arguments[0],w=arguments[1],l=arguments[2],a=w.getChildBoundables();for(u=0;u<a.size();u++)(n=a.get(u),i.getIntersectsOp().intersects(n.getBounds(),c))&&(n instanceof ou?i.query(c,n,l):n instanceof go?l.visitItem(n.getItem()):rt.shouldNeverReachHere())}else if(k(arguments[2],vo)&&arguments[0]instanceof Object&&arguments[1]instanceof ou){var v=arguments[0],b=arguments[1],y=arguments[2],p=b.getChildBoundables();for(f=0;f<p.size();f++)(t=p.get(f),i.getIntersectsOp().intersects(t.getBounds(),v))&&(t instanceof ou?i.query(v,t,y):t instanceof go?y.add(t.getItem()):rt.shouldNeverReachHere())}};lu.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1);this._itemBoundables=null;this._built=!0};lu.prototype.getRoot=function(){return this.build(),this._root};lu.prototype.remove=function(){var e=this,r,o,n,f,t;if(arguments.length===2)return(r=arguments[0],o=arguments[1],this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),r))?this.remove(r,this._root,o):!1;if(arguments.length===3){var s=arguments[0],u=arguments[1],h=arguments[2],i=this.removeItem(u,h);if(i)return!0;for(n=null,f=u.getChildBoundables().iterator();f.hasNext();)if((t=f.next(),e.getIntersectsOp().intersects(t.getBounds(),s))&&t instanceof ou&&(i=e.remove(s,t,h),i)){n=t;break}return n!==null&&n.getChildBoundables().isEmpty()&&u.getChildBoundables().remove(n),i}};lu.prototype.createHigherLevels=function(n,t){rt.isTrue(!n.isEmpty());var i=this.createParentBoundables(n,t+1);return i.size()===1?i.get(0):this.createHigherLevels(i,t+1)};lu.prototype.depth=function(){var f=this,u,n,t,i,r;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(u=arguments[0],n=0,t=u.getChildBoundables().iterator();t.hasNext();)i=t.next(),i instanceof ou&&(r=f.depth(i),r>n&&(n=r));return n+1}};lu.prototype.createParentBoundables=function(n,t){var r=this,i,u,f,o;for(rt.isTrue(!n.isEmpty()),i=new e,i.add(this.createNode(t)),u=new e(n),ns.sort(u,this.getComparator()),f=u.iterator();f.hasNext();)o=f.next(),r.lastNode(i).getChildBoundables().size()===r.getNodeCapacity()&&i.add(r.createNode(t)),r.lastNode(i).addChildBoundable(o);return i};lu.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};lu.prototype.interfaces_=function(){return[lo]};lu.prototype.getClass=function(){return lu};lu.compareDoubles=function(n,t){return n>t?1:n<t?-1:0};ak.IntersectsOp.get=function(){return kvt};ak.serialVersionUID.get=function(){return-3886435814360241337};ak.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(lu,ak);kvt=function(){};fy=function(){};fy.prototype.distance=function(){};fy.prototype.interfaces_=function(){return[]};fy.prototype.getClass=function(){return fy};var dvt=function(n){function t(i){i=i||t.DEFAULT_NODE_CAPACITY;n.call(this,i)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(n,t){var u=this,r,i;for(rt.isTrue(n.length>0),r=new e,i=0;i<n.length;i++)r.addAll(u.createParentBoundablesFromVerticalSlice(n[i],t));return r},t.prototype.createNode=function(n){return new gvt(n)},t.prototype.size=function(){return arguments.length===0?n.prototype.size.call(this):n.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];if(t.isNull())return null;n.prototype.insert.call(this,t,i)}else return n.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(n,t){for(var u,o,s=Math.trunc(Math.ceil(n.size()/t)),r=new Array(t).fill(null),f=n.iterator(),i=0;i<t;i++)for(r[i]=new e,u=0;f.hasNext()&&u<s;)o=f.next(),r[i].add(o),u++;return r},t.prototype.query=function(){var t,i,r;if(arguments.length===1)return t=arguments[0],n.prototype.query.call(this,t);if(arguments.length===2)i=arguments[0],r=arguments[1],n.prototype.query.call(this,i,r);else if(arguments.length===3)if(k(arguments[2],bc)&&arguments[0]instanceof Object&&arguments[1]instanceof ou){var u=arguments[0],f=arguments[1],e=arguments[2];n.prototype.query.call(this,u,f,e)}else if(k(arguments[2],vo)&&arguments[0]instanceof Object&&arguments[1]instanceof ou){var o=arguments[0],s=arguments[1],h=arguments[2];n.prototype.query.call(this,o,s,h)}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(t,i){return n.prototype.createParentBoundables.call(this,t,i)},t.prototype.remove=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];return n.prototype.remove.call(this,t,i)}return n.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?n.prototype.depth.call(this):n.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(n,i){var u,r,f;return rt.isTrue(!n.isEmpty()),u=Math.trunc(Math.ceil(n.size()/this.getNodeCapacity())),r=new e(n),ns.sort(r,t.xComparator),f=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(u)))),this.createParentBoundablesFromVerticalSlices(f,i)},t.prototype.nearestNeighbour=function(){var e,o,s,n,f;if(arguments.length===1){if(k(arguments[0],fy))return e=arguments[0],o=new ru(this.getRoot(),this.getRoot(),e),this.nearestNeighbour(o);if(arguments[0]instanceof ru)return s=arguments[0],this.nearestNeighbour(s,it.POSITIVE_INFINITY)}else if(arguments.length===2){if(arguments[0]instanceof t&&k(arguments[1],fy)){var h=arguments[0],c=arguments[1],l=new ru(this.getRoot(),h.getRoot(),c);return this.nearestNeighbour(l)}if(arguments[0]instanceof ru&&typeof arguments[1]=="number"){var a=arguments[0],v=arguments[1],i=v,u=null,r=new tc;for(r.add(a);!r.isEmpty()&&i>0;){if(n=r.poll(),f=n.getDistance(),f>=i)break;n.isLeaves()?(i=f,u=n):n.expandToQueue(r,i)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(arguments.length===3){var y=arguments[0],p=arguments[1],w=arguments[2],b=new go(y,p),d=new ru(this.getRoot(),b,w);return this.nearestNeighbour(d)[0]}},t.prototype.interfaces_=function(){return[da,lo]},t.prototype.getClass=function(){return t},t.centreX=function(n){return t.avg(n.getMinX(),n.getMaxX())},t.avg=function(n,t){return(n+t)/2},t.centreY=function(n){return t.avg(n.getMinY(),n.getMaxY())},i.STRtreeNode.get=function(){return gvt},i.serialVersionUID.get=function(){return 259274702368956900},i.xComparator.get=function(){return{interfaces_:function(){return[op]},compare:function(i,r){return n.compareDoubles(t.centreX(i.getBounds()),t.centreX(r.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[op]},compare:function(i,r){return n.compareDoubles(t.centreY(i.getBounds()),t.centreY(r.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[n.IntersectsOp]},intersects:function(n,t){return n.intersects(t)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,i),t}(lu),gvt=function(n){function t(){var t=arguments[0];n.call(this,t)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var t,n=null,i=this.getChildBoundables().iterator();i.hasNext();)t=i.next(),n===null?n=new l(t.getBounds()):n.expandToInclude(t.getBounds());return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ou),ae=function(){};ae.prototype.interfaces_=function(){return[]};ae.prototype.getClass=function(){return ae};ae.relativeSign=function(n,t){return n<t?-1:n>t?1:0};ae.compare=function(n,t,i){if(t.equals2D(i))return 0;var r=ae.relativeSign(t.x,i.x),u=ae.relativeSign(t.y,i.y);switch(n){case 0:return ae.compareValue(r,u);case 1:return ae.compareValue(u,r);case 2:return ae.compareValue(u,-r);case 3:return ae.compareValue(-r,u);case 4:return ae.compareValue(-r,-u);case 5:return ae.compareValue(-u,-r);case 6:return ae.compareValue(-u,r);case 7:return ae.compareValue(r,-u)}return rt.shouldNeverReachHere("invalid octant value"),0};ae.compareValue=function(n,t){return n<0?-1:n>0?1:t<0?-1:t>0?1:0};kc=function(){this._segString=null;this.coord=null;this.segmentIndex=null;this._segmentOctant=null;this._isInterior=null;var n=arguments[0],t=arguments[1],r=arguments[2],u=arguments[3];this._segString=n;this.coord=new i(t);this.segmentIndex=r;this._segmentOctant=u;this._isInterior=!t.equals2D(n.getCoordinate(r))};kc.prototype.getCoordinate=function(){return this.coord};kc.prototype.print=function(n){n.print(this.coord);n.print(" seg # = "+this.segmentIndex)};kc.prototype.compareTo=function(n){var t=n;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:ae.compare(this._segmentOctant,this.coord,t.coord)};kc.prototype.isEndPoint=function(n){return this.segmentIndex===0&&!this._isInterior?!0:this.segmentIndex===n?!0:!1};kc.prototype.isInterior=function(){return this._isInterior};kc.prototype.interfaces_=function(){return[co]};kc.prototype.getClass=function(){return kc};af=function(){this._nodeMap=new cf;this._edge=null;var n=arguments[0];this._edge=n};af.prototype.getSplitCoordinates=function(){var u=this,r=new uk,n,t,i;for(this.addEndpoints(),n=this.iterator(),t=n.next();n.hasNext();)i=n.next(),u.addEdgeCoordinates(t,i,r),t=i;return r.toCoordinateArray()};af.prototype.addCollapsedNodes=function(){var r=this,n=new e,t,i;for(this.findCollapsesFromInsertedNodes(n),this.findCollapsesFromExistingVertices(n),t=n.iterator();t.hasNext();)i=t.next().intValue(),r.add(r._edge.getCoordinate(i),i)};af.prototype.print=function(n){var t,i;for(n.println("Intersections:"),t=this.iterator();t.hasNext();)i=t.next(),i.print(n)};af.prototype.findCollapsesFromExistingVertices=function(n){for(var r,u,i=this,t=0;t<this._edge.size()-2;t++)r=i._edge.getCoordinate(t),u=i._edge.getCoordinate(t+2),r.equals2D(u)&&n.add(new hs(t+1))};af.prototype.addEdgeCoordinates=function(n,t,r){var f=this,e=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(e),u;for(r.add(new i(n.coord),!1),u=n.segmentIndex+1;u<=t.segmentIndex;u++)r.add(f._edge.getCoordinate(u));o&&r.add(new i(t.coord))};af.prototype.iterator=function(){return this._nodeMap.values().iterator()};af.prototype.addSplitEdges=function(n){var f=this,t,i,r,u;for(this.addEndpoints(),this.addCollapsedNodes(),t=this.iterator(),i=t.next();t.hasNext();)r=t.next(),u=f.createSplitEdge(i,r),n.add(u),i=r};af.prototype.findCollapseIndex=function(n,t,i){if(!n.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-n.segmentIndex;return(t.isInterior()||r--,r===1)?(i[0]=n.segmentIndex+1,!0):!1};af.prototype.findCollapsesFromInsertedNodes=function(n){for(var e=this,r=new Array(1).fill(null),t=this.iterator(),u=t.next(),i,f;t.hasNext();)i=t.next(),f=e.findCollapseIndex(u,i,r),f&&n.add(new hs(r[0])),u=i};af.prototype.getEdge=function(){return this._edge};af.prototype.addEndpoints=function(){var n=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0);this.add(this._edge.getCoordinate(n),n)};af.prototype.createSplitEdge=function(n,t){var s=this,e=t.segmentIndex-n.segmentIndex+2,h=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(h),r,u,f;for(o||e--,r=new Array(e).fill(null),u=0,r[u++]=new i(n.coord),f=n.segmentIndex+1;f<=t.segmentIndex;f++)r[u++]=s._edge.getCoordinate(f);return o&&(r[u]=new i(t.coord)),new gr(r,this._edge.getData())};af.prototype.add=function(n,t){var i=new kc(this._edge,n,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(i);return r!==null?(rt.isTrue(r.coord.equals2D(n),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(i,i),i)};af.prototype.checkSplitEdgesCorrectness=function(n){var t=this._edge.getCoordinates(),f=n.get(0),i=f.getCoordinate(0);if(!i.equals2D(t[0]))throw new ac("bad split edge start point at "+i);var e=n.get(n.size()-1),r=e.getCoordinates(),u=r[r.length-1];if(!u.equals2D(t[t.length-1]))throw new ac("bad split edge end point at "+u);};af.prototype.interfaces_=function(){return[]};af.prototype.getClass=function(){return af};ga=function(){};ga.prototype.interfaces_=function(){return[]};ga.prototype.getClass=function(){return ga};ga.octant=function(){var t,n,r,u;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){if(t=arguments[0],n=arguments[1],t===0&&n===0)throw new ar("Cannot compute the octant for point ( "+t+", "+n+" )");return r=Math.abs(t),u=Math.abs(n),t>=0?n>=0?r>=u?0:1:r>=u?7:6:n>=0?r>=u?3:2:r>=u?4:5}if(arguments[0]instanceof i&&arguments[1]instanceof i){var f=arguments[0],e=arguments[1],o=e.x-f.x,s=e.y-f.y;if(o===0&&s===0)throw new ar("Cannot compute the octant for two identical points "+f);return ga.octant(o,s)}};hh=function(){};hh.prototype.getCoordinates=function(){};hh.prototype.size=function(){};hh.prototype.getCoordinate=function(){};hh.prototype.isClosed=function(){};hh.prototype.setData=function(){};hh.prototype.getData=function(){};hh.prototype.interfaces_=function(){return[]};hh.prototype.getClass=function(){return hh};rw=function(){};rw.prototype.addIntersection=function(){};rw.prototype.interfaces_=function(){return[hh]};rw.prototype.getClass=function(){return rw};gr=function(){this._nodeList=new af(this);this._pts=null;this._data=null;var n=arguments[0],t=arguments[1];this._pts=n;this._data=t};gr.prototype.getCoordinates=function(){return this._pts};gr.prototype.size=function(){return this._pts.length};gr.prototype.getCoordinate=function(n){return this._pts[n]};gr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};gr.prototype.getSegmentOctant=function(n){return n===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(n),this.getCoordinate(n+1))};gr.prototype.setData=function(n){this._data=n};gr.prototype.safeOctant=function(n,t){return n.equals2D(t)?0:ga.octant(n,t)};gr.prototype.getData=function(){return this._data};gr.prototype.addIntersection=function(){var n,t;if(arguments.length===2)n=arguments[0],t=arguments[1],this.addIntersectionNode(n,t);else if(arguments.length===4){var r=arguments[0],u=arguments[1],f=arguments[3],e=new i(r.getIntersection(f));this.addIntersection(e,u)}};gr.prototype.toString=function(){return ls.toLineString(new dr(this._pts))};gr.prototype.getNodeList=function(){return this._nodeList};gr.prototype.addIntersectionNode=function(n,t){var i=t,r=i+1,u;return r<this._pts.length&&(u=this._pts[r],n.equals2D(u)&&(i=r)),this._nodeList.add(n,i)};gr.prototype.addIntersections=function(n,t,i){for(var u=this,r=0;r<n.getIntersectionNum();r++)u.addIntersection(n,t,i,r)};gr.prototype.interfaces_=function(){return[rw]};gr.prototype.getClass=function(){return gr};gr.getNodedSubstrings=function(){var i,n,r,u,t,f;if(arguments.length===1)return i=arguments[0],n=new e,gr.getNodedSubstrings(i,n),n;if(arguments.length===2)for(r=arguments[0],u=arguments[1],t=r.iterator();t.hasNext();)f=t.next(),f.getNodeList().addSplitEdges(u)};a=function(){var n;if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new i,this.p1=new i;else if(arguments.length===1)n=arguments[0],this.p0=new i(n.p0),this.p1=new i(n.p1);else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];this.p0=new i(t,r);this.p1=new i(u,f)}};tft={serialVersionUID:{configurable:!0}};a.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};a.prototype.orientationIndex=function(){var u;if(arguments[0]instanceof a){var r=arguments[0],n=o.orientationIndex(this.p0,this.p1,r.p0),t=o.orientationIndex(this.p0,this.p1,r.p1);return n>=0&&t>=0?Math.max(n,t):n<=0&&t<=0?Math.max(n,t):0}if(arguments[0]instanceof i)return u=arguments[0],o.orientationIndex(this.p0,this.p1,u)};a.prototype.toGeometry=function(n){return n.createLineString([this.p0,this.p1])};a.prototype.isVertical=function(){return this.p0.x===this.p1.x};a.prototype.equals=function(n){if(!(n instanceof a))return!1;var t=n;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};a.prototype.intersection=function(n){var t=new pl;return(t.computeIntersection(this.p0,this.p1,n.p0,n.p1),t.hasIntersection())?t.getIntersection(0):null};a.prototype.project=function(){var n,s,t,e,o;if(arguments[0]instanceof i)return(n=arguments[0],n.equals(this.p0)||n.equals(this.p1))?new i(n):(s=this.projectionFactor(n),t=new i,t.x=this.p0.x+s*(this.p1.x-this.p0.x),t.y=this.p0.y+s*(this.p1.y-this.p0.y),t);if(arguments[0]instanceof a){var r=arguments[0],u=this.projectionFactor(r.p0),f=this.projectionFactor(r.p1);return u>=1&&f>=1?null:u<=0&&f<=0?null:(e=this.project(r.p0),u<0&&(e=this.p0),u>1&&(e=this.p1),o=this.project(r.p1),f<0&&(o=this.p0),f>1&&(o=this.p1),new a(e,o))}};a.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};a.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};a.prototype.getCoordinate=function(n){return n===0?this.p0:this.p1};a.prototype.distancePerpendicular=function(n){return o.distancePointLinePerpendicular(n,this.p0,this.p1)};a.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};a.prototype.midPoint=function(){return a.midPoint(this.p0,this.p1)};a.prototype.projectionFactor=function(n){if(n.equals(this.p0))return 0;if(n.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,r=t*t+i*i;return r<=0?it.NaN:((n.x-this.p0.x)*t+(n.y-this.p0.y)*i)/r};a.prototype.closestPoints=function(n){var u=this.intersection(n),f,e,o;if(u!==null)return[u,u];var t=new Array(2).fill(null),r=it.MAX_VALUE,i=null,s=this.closestPoint(n.p0);return r=s.distance(n.p0),t[0]=s,t[1]=n.p0,f=this.closestPoint(n.p1),i=f.distance(n.p1),i<r&&(r=i,t[0]=f,t[1]=n.p1),e=n.closestPoint(this.p0),i=e.distance(this.p0),i<r&&(r=i,t[0]=this.p0,t[1]=e),o=n.closestPoint(this.p1),i=o.distance(this.p1),i<r&&(r=i,t[0]=this.p1,t[1]=o),t};a.prototype.closestPoint=function(n){var t=this.projectionFactor(n),i,r;return t>0&&t<1?this.project(n):(i=this.p0.distance(n),r=this.p1.distance(n),i<r)?this.p0:this.p1};a.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};a.prototype.getLength=function(){return this.p0.distance(this.p1)};a.prototype.compareTo=function(n){var t=n,i=this.p0.compareTo(t.p0);return i!==0?i:this.p1.compareTo(t.p1)};a.prototype.reverse=function(){var n=this.p0;this.p0=this.p1;this.p1=n};a.prototype.equalsTopo=function(n){return this.p0.equals(n.p0)&&(this.p1.equals(n.p1)||this.p0.equals(n.p1))&&this.p1.equals(n.p0)};a.prototype.lineIntersection=function(n){try{return ke.intersection(this.p0,this.p1,n.p0,n.p1)}catch(t){if(!(t instanceof lp))throw t;}return null};a.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};a.prototype.pointAlongOffset=function(n,t){var s=this.p0.x+n*(this.p1.x-this.p0.x),h=this.p0.y+n*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,f=Math.sqrt(r*r+u*u),e=0,o=0;if(t!==0){if(f<=0)throw new Error("Cannot compute offset from zero-length line segment");e=t*r/f;o=t*u/f}var c=s-o,l=h+e;return new i(c,l)};a.prototype.setCoordinates=function(){var n,t,i;arguments.length===1?(n=arguments[0],this.setCoordinates(n.p0,n.p1)):arguments.length===2&&(t=arguments[0],i=arguments[1],this.p0.x=t.x,this.p0.y=t.y,this.p1.x=i.x,this.p1.y=i.y)};a.prototype.segmentFraction=function(n){var t=this.projectionFactor(n);return t<0?t=0:(t>1||it.isNaN(t))&&(t=1),t};a.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};a.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};a.prototype.distance=function(){var n,t;return arguments[0]instanceof a?(n=arguments[0],o.distanceLineLine(this.p0,this.p1,n.p0,n.p1)):arguments[0]instanceof i?(t=arguments[0],o.distancePointLine(t,this.p0,this.p1)):void 0};a.prototype.pointAlong=function(n){var t=new i;return t.x=this.p0.x+n*(this.p1.x-this.p0.x),t.y=this.p0.y+n*(this.p1.y-this.p0.y),t};a.prototype.hashCode=function(){var t=it.doubleToLongBits(this.p0.x),i,n,r;return t^=it.doubleToLongBits(this.p0.y)*31,i=Math.trunc(t)^Math.trunc(t>>32),n=it.doubleToLongBits(this.p1.x),n^=it.doubleToLongBits(this.p1.y)*31,r=Math.trunc(n)^Math.trunc(n>>32),i^r};a.prototype.interfaces_=function(){return[co,lo]};a.prototype.getClass=function(){return a};a.midPoint=function(n,t){return new i((n.x+t.x)/2,(n.y+t.y)/2)};tft.serialVersionUID.get=function(){return 3252005833466256227};Object.defineProperties(a,tft);uw=function(){this.tempEnv1=new l;this.tempEnv2=new l;this._overlapSeg1=new a;this._overlapSeg2=new a};uw.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];n.getLineSegment(t,this._overlapSeg1);i.getLineSegment(r,this._overlapSeg2);this.overlap(this._overlapSeg1,this._overlapSeg2)}};uw.prototype.interfaces_=function(){return[]};uw.prototype.getClass=function(){return uw};ve=function(){this._pts=null;this._start=null;this._end=null;this._env=null;this._context=null;this._id=null;var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];this._pts=n;this._start=t;this._end=i;this._context=r};ve.prototype.getLineSegment=function(n,t){t.p0=this._pts[n];t.p1=this._pts[n+1]};ve.prototype.computeSelect=function(n,t,i,r){var f=this._pts[t],e=this._pts[i],u;if(r.tempEnv1.init(f,e),i-t==1)return r.select(this,t),null;if(!n.intersects(r.tempEnv1))return null;u=Math.trunc((t+i)/2);t<u&&this.computeSelect(n,t,u,r);u<i&&this.computeSelect(n,u,i,r)};ve.prototype.getCoordinates=function(){for(var i=this,t=new Array(this._end-this._start+1).fill(null),r=0,n=this._start;n<=this._end;n++)t[r++]=i._pts[n];return t};ve.prototype.computeOverlaps=function(n,t){this.computeOverlapsInternal(this._start,this._end,n,n._start,n._end,t)};ve.prototype.setId=function(n){this._id=n};ve.prototype.select=function(n,t){this.computeSelect(n,this._start,this._end,t)};ve.prototype.getEnvelope=function(){if(this._env===null){var n=this._pts[this._start],t=this._pts[this._end];this._env=new l(n,t)}return this._env};ve.prototype.getEndIndex=function(){return this._end};ve.prototype.getStartIndex=function(){return this._start};ve.prototype.getContext=function(){return this._context};ve.prototype.getId=function(){return this._id};ve.prototype.computeOverlapsInternal=function(n,t,i,r,u,f){var s=this._pts[n],h=this._pts[t],c=i._pts[r],l=i._pts[u],o,e;if(t-n==1&&u-r==1)return f.overlap(this,n,i,r),null;if(f.tempEnv1.init(s,h),f.tempEnv2.init(c,l),!f.tempEnv1.intersects(f.tempEnv2))return null;o=Math.trunc((n+t)/2);e=Math.trunc((r+u)/2);n<o&&(r<e&&this.computeOverlapsInternal(n,o,i,r,e,f),e<u&&this.computeOverlapsInternal(n,o,i,e,u,f));o<t&&(r<e&&this.computeOverlapsInternal(o,t,i,r,e,f),e<u&&this.computeOverlapsInternal(o,t,i,e,u,f))};ve.prototype.interfaces_=function(){return[]};ve.prototype.getClass=function(){return ve};ws=function(){};ws.prototype.interfaces_=function(){return[]};ws.prototype.getClass=function(){return ws};ws.getChainStartIndices=function(n){var t=0,i=new e,r;i.add(new hs(t));do r=ws.findChainEnd(n,t),i.add(new hs(r)),t=r;while(t<n.length-1);return ws.toIntArray(i)};ws.findChainEnd=function(n,t){for(var r=t,u,i,f;r<n.length-1&&n[r].equals2D(n[r+1]);)r++;if(r>=n.length-1)return n.length-1;for(u=ir.quadrant(n[r],n[r+1]),i=t+1;i<n.length;){if(!n[i-1].equals2D(n[i])&&(f=ir.quadrant(n[i-1],n[i]),f!==u))break;i++}return i-1};ws.getChains=function(){var i,n,f;if(arguments.length===1)return i=arguments[0],ws.getChains(i,null);if(arguments.length===2){var r=arguments[0],o=arguments[1],u=new e,t=ws.getChainStartIndices(r);for(n=0;n<t.length-1;n++)f=new ve(r,t[n],t[n+1],o),u.add(f);return u}};ws.toIntArray=function(n){for(var i=new Array(n.size()).fill(null),t=0;t<i.length;t++)i[t]=n.get(t).intValue();return i};bl=function(){};bl.prototype.computeNodes=function(){};bl.prototype.getNodedSubstrings=function(){};bl.prototype.interfaces_=function(){return[]};bl.prototype.getClass=function(){return bl};fw=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var n=arguments[0];this.setSegmentIntersector(n)}};fw.prototype.setSegmentIntersector=function(n){this._segInt=n};fw.prototype.interfaces_=function(){return[bl]};fw.prototype.getClass=function(){return fw};var ift=function(n){function t(t){t?n.call(this,t):n.call(this);this._monoChains=new e;this._index=new dvt;this._idCounter=0;this._nodedSegStrings=null;this._nOverlaps=0}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return gr.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(n){for(var t,i=this,u=ws.getChains(n.getCoordinates(),n),r=u.iterator();r.hasNext();)t=r.next(),t.setId(i._idCounter++),i._index.insert(t.getEnvelope(),t),i._monoChains.add(t)},t.prototype.computeNodes=function(n){var i=this,t;for(this._nodedSegStrings=n,t=n.iterator();t.hasNext();)i.add(t.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var n,f,i,r,t=this,e=new nyt(this._segInt),u=this._monoChains.iterator();u.hasNext();)for(n=u.next(),f=t._index.query(n.getEnvelope()),i=f.iterator();i.hasNext();)if(r=i.next(),r.getId()>n.getId()&&(n.computeOverlaps(r,e),t._nOverlaps++),t._segInt.isDone())return null},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},i.SegmentOverlapAction.get=function(){return nyt},Object.defineProperties(t,i),t}(fw),nyt=function(n){function t(){n.call(this);this._si=null;var t=arguments[0];this._si=t}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=t.getContext(),e=r.getContext();this._si.processIntersections(f,i,e,u)}else return n.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(uw),et=function et(){var n,t,i;if(this._quadrantSegments=et.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=et.CAP_ROUND,this._joinStyle=et.JOIN_ROUND,this._mitreLimit=et.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=et.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0)if(arguments.length===1)n=arguments[0],this.setQuadrantSegments(n);else if(arguments.length===2)t=arguments[0],i=arguments[1],this.setQuadrantSegments(t),this.setEndCapStyle(i);else if(arguments.length===4){var r=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3];this.setQuadrantSegments(r);this.setEndCapStyle(u);this.setJoinStyle(f);this.setMitreLimit(e)}},dc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};et.prototype.getEndCapStyle=function(){return this._endCapStyle};et.prototype.isSingleSided=function(){return this._isSingleSided};et.prototype.setQuadrantSegments=function(n){this._quadrantSegments=n;this._quadrantSegments===0&&(this._joinStyle=et.JOIN_BEVEL);this._quadrantSegments<0&&(this._joinStyle=et.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments));n<=0&&(this._quadrantSegments=1);this._joinStyle!==et.JOIN_ROUND&&(this._quadrantSegments=et.DEFAULT_QUADRANT_SEGMENTS)};et.prototype.getJoinStyle=function(){return this._joinStyle};et.prototype.setJoinStyle=function(n){this._joinStyle=n};et.prototype.setSimplifyFactor=function(n){this._simplifyFactor=n<0?0:n};et.prototype.getSimplifyFactor=function(){return this._simplifyFactor};et.prototype.getQuadrantSegments=function(){return this._quadrantSegments};et.prototype.setEndCapStyle=function(n){this._endCapStyle=n};et.prototype.getMitreLimit=function(){return this._mitreLimit};et.prototype.setMitreLimit=function(n){this._mitreLimit=n};et.prototype.setSingleSided=function(n){this._isSingleSided=n};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.bufferDistanceError=function(n){var t=Math.PI/2/n;return 1-Math.cos(t/2)};dc.CAP_ROUND.get=function(){return 1};dc.CAP_FLAT.get=function(){return 2};dc.CAP_SQUARE.get=function(){return 3};dc.JOIN_ROUND.get=function(){return 1};dc.JOIN_MITRE.get=function(){return 2};dc.JOIN_BEVEL.get=function(){return 3};dc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};dc.DEFAULT_MITRE_LIMIT.get=function(){return 5};dc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01};Object.defineProperties(et,dc);br=function(n){this._distanceTol=null;this._isDeleted=null;this._angleOrientation=o.COUNTERCLOCKWISE;this._inputLine=n||null};ew={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};br.prototype.isDeletable=function(n,t,i,r){var u=this._inputLine[n],f=this._inputLine[t],e=this._inputLine[i];return this.isConcave(u,f,e)?this.isShallow(u,f,e,r)?this.isShallowSampled(u,f,n,i,r):!1:!1};br.prototype.deleteShallowConcavities=function(){for(var t=this,i=1,n=this.findNextNonDeletedIndex(i),r=this.findNextNonDeletedIndex(n),f=!1,u;r<this._inputLine.length;)u=!1,t.isDeletable(i,n,r,t._distanceTol)&&(t._isDeleted[n]=br.DELETE,u=!0,f=!0),i=u?r:n,n=t.findNextNonDeletedIndex(i),r=t.findNextNonDeletedIndex(n);return f};br.prototype.isShallowConcavity=function(n,t,i,r){var f=o.computeOrientation(n,t,i),e=f===this._angleOrientation,u;return e?(u=o.distancePointLine(t,n,i),u<r):!1};br.prototype.isShallowSampled=function(n,t,i,r,u){var o=this,e=Math.trunc((r-i)/br.NUM_PTS_TO_CHECK),f;for(e<=0&&(e=1),f=i;f<r;f+=e)if(!o.isShallow(n,t,o._inputLine[f],u))return!1;return!0};br.prototype.isConcave=function(n,t,i){var r=o.computeOrientation(n,t,i);return r===this._angleOrientation};br.prototype.simplify=function(n){var i=this,t;this._distanceTol=Math.abs(n);n<0&&(this._angleOrientation=o.CLOCKWISE);this._isDeleted=new Array(this._inputLine.length).fill(null);t=!1;do t=i.deleteShallowConcavities();while(t);return this.collapseLine()};br.prototype.findNextNonDeletedIndex=function(n){for(var t=n+1;t<this._inputLine.length&&this._isDeleted[t]===br.DELETE;)t++;return t};br.prototype.isShallow=function(n,t,i,r){var u=o.distancePointLine(t,n,i);return u<r};br.prototype.collapseLine=function(){for(var t=this,i=new uk,n=0;n<this._inputLine.length;n++)t._isDeleted[n]!==br.DELETE&&i.add(t._inputLine[n]);return i.toCoordinateArray()};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};br.simplify=function(n,t){var i=new br(n);return i.simplify(t)};ew.INIT.get=function(){return 0};ew.DELETE.get=function(){return 1};ew.KEEP.get=function(){return 1};ew.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(br,ew);de=function(){this._ptList=null;this._precisionModel=null;this._minimimVertexDistance=0;this._ptList=new e};rft={COORDINATE_ARRAY_TYPE:{configurable:!0}};de.prototype.getCoordinates=function(){return this._ptList.toArray(de.COORDINATE_ARRAY_TYPE)};de.prototype.setPrecisionModel=function(n){this._precisionModel=n};de.prototype.addPt=function(n){var t=new i(n);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};de.prototype.revere=function(){};de.prototype.addPts=function(n,t){var u=this,i,r;if(t)for(i=0;i<n.length;i++)u.addPt(n[i]);else for(r=n.length-1;r>=0;r--)u.addPt(n[r])};de.prototype.isRedundant=function(n){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),i=n.distance(t);return i<this._minimimVertexDistance?!0:!1};de.prototype.toString=function(){var n=new ut,t=n.createLineString(this.getCoordinates());return t.toString()};de.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var n=new i(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(n.equals(t))return null;this._ptList.add(n)};de.prototype.setMinimumVertexDistance=function(n){this._minimimVertexDistance=n};de.prototype.interfaces_=function(){return[]};de.prototype.getClass=function(){return de};rft.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(de,rft);ot=function(){};nv={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};ot.prototype.interfaces_=function(){return[]};ot.prototype.getClass=function(){return ot};ot.toDegrees=function(n){return n*180/Math.PI};ot.normalize=function(n){while(n>Math.PI)n-=ot.PI_TIMES_2;while(n<=-Math.PI)n+=ot.PI_TIMES_2;return n};ot.angle=function(){var n;if(arguments.length===1)return n=arguments[0],Math.atan2(n.y,n.x);if(arguments.length===2){var t=arguments[0],i=arguments[1],r=i.x-t.x,u=i.y-t.y;return Math.atan2(u,r)}};ot.isAcute=function(n,t,i){var r=n.x-t.x,u=n.y-t.y,f=i.x-t.x,e=i.y-t.y,o=r*f+u*e;return o>0};ot.isObtuse=function(n,t,i){var r=n.x-t.x,u=n.y-t.y,f=i.x-t.x,e=i.y-t.y,o=r*f+u*e;return o<0};ot.interiorAngle=function(n,t,i){var r=ot.angle(t,n),u=ot.angle(t,i);return Math.abs(u-r)};ot.normalizePositive=function(n){if(n<0){while(n<0)n+=ot.PI_TIMES_2;n>=ot.PI_TIMES_2&&(n=0)}else{while(n>=ot.PI_TIMES_2)n-=ot.PI_TIMES_2;n<0&&(n=0)}return n};ot.angleBetween=function(n,t,i){var r=ot.angle(t,n),u=ot.angle(t,i);return ot.diff(r,u)};ot.diff=function(n,t){var i=null;return i=n<t?t-n:n-t,i>Math.PI&&(i=2*Math.PI-i),i};ot.toRadians=function(n){return n*Math.PI/180};ot.getTurn=function(n,t){var i=Math.sin(t-n);return i>0?ot.COUNTERCLOCKWISE:i<0?ot.CLOCKWISE:ot.NONE};ot.angleBetweenOriented=function(n,t,i){var u=ot.angle(t,n),f=ot.angle(t,i),r=f-u;return r<=-Math.PI?r+ot.PI_TIMES_2:r>Math.PI?r-ot.PI_TIMES_2:r};nv.PI_TIMES_2.get=function(){return 2*Math.PI};nv.PI_OVER_2.get=function(){return Math.PI/2};nv.PI_OVER_4.get=function(){return Math.PI/4};nv.COUNTERCLOCKWISE.get=function(){return o.COUNTERCLOCKWISE};nv.CLOCKWISE.get=function(){return o.CLOCKWISE};nv.NONE.get=function(){return o.COLLINEAR};Object.defineProperties(ot,nv);hr=function hr(){this._maxCurveSegmentError=0;this._filletAngleQuantum=null;this._closingSegLengthFactor=1;this._segList=null;this._distance=0;this._precisionModel=null;this._bufParams=null;this._li=null;this._s0=null;this._s1=null;this._s2=null;this._seg0=new a;this._seg1=new a;this._offset0=new a;this._offset1=new a;this._side=0;this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t;this._bufParams=n;this._li=new pl;this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments();n.getQuadrantSegments()>=8&&n.getJoinStyle()===et.JOIN_ROUND&&(this._closingSegLengthFactor=hr.MAX_CLOSING_SEG_LEN_FACTOR);this.init(i)};ow={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};hr.prototype.addNextSegment=function(n,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=n,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=o.computeOrientation(this._s0,this._s1,this._s2),r=i===o.CLOCKWISE&&this._side===f.LEFT||i===o.COUNTERCLOCKWISE&&this._side===f.RIGHT;i===0?this.addCollinear(t):r?this.addOutsideTurn(i,t):this.addInsideTurn(i,t)};hr.prototype.addLineEndCap=function(n,t){var h=new a(n,t),e=new a,u,r,c,l;this.computeOffsetSegment(h,f.LEFT,this._distance,e);u=new a;this.computeOffsetSegment(h,f.RIGHT,this._distance,u);var v=t.x-n.x,y=t.y-n.y,s=Math.atan2(y,v);switch(this._bufParams.getEndCapStyle()){case et.CAP_ROUND:this._segList.addPt(e.p1);this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,o.CLOCKWISE,this._distance);this._segList.addPt(u.p1);break;case et.CAP_FLAT:this._segList.addPt(e.p1);this._segList.addPt(u.p1);break;case et.CAP_SQUARE:r=new i;r.x=Math.abs(this._distance)*Math.cos(s);r.y=Math.abs(this._distance)*Math.sin(s);c=new i(e.p1.x+r.x,e.p1.y+r.y);l=new i(u.p1.x+r.x,u.p1.y+r.y);this._segList.addPt(c);this._segList.addPt(l)}};hr.prototype.getCoordinates=function(){return this._segList.getCoordinates()};hr.prototype.addMitreJoin=function(n,t,r,u){var e=!0,f=null,o;try{f=ke.intersection(t.p0,t.p1,r.p0,r.p1);o=u<=0?1:f.distance(n)/Math.abs(u);o>this._bufParams.getMitreLimit()&&(e=!1)}catch(s){if(s instanceof lp)f=new i(0,0),e=!1;else throw s;}e?this._segList.addPt(f):this.addLimitedMitreJoin(t,r,u,this._bufParams.getMitreLimit())};hr.prototype.addFilletCorner=function(n,t,i,r,u){var s=t.x-n.x,h=t.y-n.y,f=Math.atan2(h,s),c=i.x-n.x,l=i.y-n.y,e=Math.atan2(l,c);r===o.CLOCKWISE?f<=e&&(f+=2*Math.PI):f>=e&&(f-=2*Math.PI);this._segList.addPt(t);this.addFilletArc(n,f,e,r,u);this._segList.addPt(i)};hr.prototype.addOutsideTurn=function(n,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*hr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===et.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===et.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,n,this._distance),this._segList.addPt(this._offset1.p0))};hr.prototype.createSquare=function(n){this._segList.addPt(new i(n.x+this._distance,n.y+this._distance));this._segList.addPt(new i(n.x+this._distance,n.y-this._distance));this._segList.addPt(new i(n.x-this._distance,n.y-this._distance));this._segList.addPt(new i(n.x-this._distance,n.y+this._distance));this._segList.closeRing()};hr.prototype.addSegments=function(n,t){this._segList.addPts(n,t)};hr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};hr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};hr.prototype.initSideSegments=function(n,t,i){this._s1=n;this._s2=t;this._side=i;this._seg1.setCoordinates(n,t);this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)};hr.prototype.addLimitedMitreJoin=function(n,t,r,u){var e=this._seg0.p1,p=ot.angle(e,this._seg0.p0),w=ot.angleBetweenOriented(this._seg0.p0,e,this._seg1.p1),s=w/2,b=ot.normalize(p+s),h=ot.normalize(b+Math.PI),o=u*r,k=o*Math.abs(Math.sin(s)),c=r-k,d=e.x+o*Math.cos(h),g=e.y+o*Math.sin(h),nt=new i(d,g),l=new a(e,nt),v=l.pointAlongOffset(1,c),y=l.pointAlongOffset(1,-c);this._side===f.LEFT?(this._segList.addPt(v),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(v))};hr.prototype.computeOffsetSegment=function(n,t,i,r){var o=t===f.LEFT?1:-1,u=n.p1.x-n.p0.x,e=n.p1.y-n.p0.y,s=Math.sqrt(u*u+e*e),h=o*i*u/s,c=o*i*e/s;r.p0.x=n.p0.x-c;r.p0.y=n.p0.y+h;r.p1.x=n.p1.x-c;r.p1.y=n.p1.y+h};hr.prototype.addFilletArc=function(n,t,r,u,f){var a=this,v=u===o.CLOCKWISE?-1:1,e=Math.abs(t-r),l=Math.trunc(e/this._filletAngleQuantum+.5),c;if(l<1)return null;for(var y=e/l,s=0,h=new i;s<e;)c=t+v*s,h.x=n.x+f*Math.cos(c),h.y=n.y+f*Math.sin(c),a._segList.addPt(h),s+=y};hr.prototype.addInsideTurn=function(){var n,t;this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1);this._li.hasIntersection()?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*hr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this._segList.addPt(this._offset0.p1):(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0?(n=new i((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n),t=new i((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(t)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0)))};hr.prototype.createCircle=function(n){var t=new i(n.x+this._distance,n.y);this._segList.addPt(t);this.addFilletArc(n,0,2*Math.PI,-1,this._distance);this._segList.closeRing()};hr.prototype.addBevelJoin=function(n,t){this._segList.addPt(n.p1);this._segList.addPt(t.p0)};hr.prototype.init=function(n){this._distance=n;this._maxCurveSegmentError=n*(1-Math.cos(this._filletAngleQuantum/2));this._segList=new de;this._segList.setPrecisionModel(this._precisionModel);this._segList.setMinimumVertexDistance(n*hr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};hr.prototype.addCollinear=function(n){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===et.JOIN_BEVEL||this._bufParams.getJoinStyle()===et.JOIN_MITRE?(n&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,o.CLOCKWISE,this._distance))};hr.prototype.closeRing=function(){this._segList.closeRing()};hr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};hr.prototype.interfaces_=function(){return[]};hr.prototype.getClass=function(){return hr};ow.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001};ow.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001};ow.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};ow.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(hr,ow);re=function(){this._distance=0;this._precisionModel=null;this._bufParams=null;var n=arguments[0],t=arguments[1];this._precisionModel=n;this._bufParams=t};re.prototype.getOffsetCurve=function(n,t){var r;if(this._distance=t,t===0)return null;var u=t<0,f=Math.abs(t),i=this.getSegGen(f);return n.length<=1?this.computePointCurve(n[0],i):this.computeOffsetCurve(n,u,i),r=i.getCoordinates(),u&&ft.reverse(r),r};re.prototype.computeSingleSidedBufferCurve=function(n,t,i){var h=this.simplifyTolerance(this._distance),r,e,o,u,c,s;if(t)for(i.addSegments(n,!0),r=br.simplify(n,-h),e=r.length-1,i.initSideSegments(r[e],r[e-1],f.LEFT),i.addFirstSegment(),o=e-2;o>=0;o--)i.addNextSegment(r[o],!0);else for(i.addSegments(n,!1),u=br.simplify(n,h),c=u.length-1,i.initSideSegments(u[0],u[1],f.LEFT),i.addFirstSegment(),s=2;s<=c;s++)i.addNextSegment(u[s],!0);i.addLastSegment();i.closeRing()};re.prototype.computeRingBufferCurve=function(n,t,i){var e=this.simplifyTolerance(this._distance),r,o,u,s;for(t===f.RIGHT&&(e=-e),r=br.simplify(n,e),o=r.length-1,i.initSideSegments(r[o-1],r[0],t),u=1;u<=o;u++)s=u!==1,i.addNextSegment(r[u],s);i.closeRing()};re.prototype.computeLineBufferCurve=function(n,t){var h=this.simplifyTolerance(this._distance),r=br.simplify(n,h),s=r.length-1,u,i,e,o;for(t.initSideSegments(r[0],r[1],f.LEFT),u=2;u<=s;u++)t.addNextSegment(r[u],!0);for(t.addLastSegment(),t.addLineEndCap(r[s-1],r[s]),i=br.simplify(n,-h),e=i.length-1,t.initSideSegments(i[e],i[e-1],f.LEFT),o=e-2;o>=0;o--)t.addNextSegment(i[o],!0);t.addLastSegment();t.addLineEndCap(i[1],i[0]);t.closeRing()};re.prototype.computePointCurve=function(n,t){switch(this._bufParams.getEndCapStyle()){case et.CAP_ROUND:t.createCircle(n);break;case et.CAP_SQUARE:t.createSquare(n)}};re.prototype.getLineCurve=function(n,t){var r,i,u;return(this._distance=t,t<0&&!this._bufParams.isSingleSided())?null:t===0?null:(r=Math.abs(t),i=this.getSegGen(r),n.length<=1?this.computePointCurve(n[0],i):this._bufParams.isSingleSided()?(u=t<0,this.computeSingleSidedBufferCurve(n,u,i)):this.computeLineBufferCurve(n,i),i.getCoordinates())};re.prototype.getBufferParameters=function(){return this._bufParams};re.prototype.simplifyTolerance=function(n){return n*this._bufParams.getSimplifyFactor()};re.prototype.getRingCurve=function(n,t,i){if(this._distance=i,n.length<=2)return this.getLineCurve(n,i);if(i===0)return re.copyCoordinates(n);var r=this.getSegGen(i);return this.computeRingBufferCurve(n,t,r),r.getCoordinates()};re.prototype.computeOffsetCurve=function(n,t,i){var h=this.simplifyTolerance(this._distance),r,e,o,u,c,s;if(t)for(r=br.simplify(n,-h),e=r.length-1,i.initSideSegments(r[e],r[e-1],f.LEFT),i.addFirstSegment(),o=e-2;o>=0;o--)i.addNextSegment(r[o],!0);else for(u=br.simplify(n,h),c=u.length-1,i.initSideSegments(u[0],u[1],f.LEFT),i.addFirstSegment(),s=2;s<=c;s++)i.addNextSegment(u[s],!0);i.addLastSegment()};re.prototype.getSegGen=function(n){return new hr(this._precisionModel,this._bufParams,n)};re.prototype.interfaces_=function(){return[]};re.prototype.getClass=function(){return re};re.copyCoordinates=function(n){for(var r=new Array(n.length).fill(null),t=0;t<r.length;t++)r[t]=new i(n[t]);return r};tv=function(){this._subgraphs=null;this._seg=new a;this._cga=new o;var n=arguments[0];this._subgraphs=n};uft={DepthSegment:{configurable:!0}};tv.prototype.findStabbedSegments=function(){var n=this,r,h,c,l,a,t,b,y,d,p,w;if(arguments.length===1){for(r=arguments[0],h=new e,c=this._subgraphs.iterator();c.hasNext();)(l=c.next(),a=l.getEnvelope(),r.y<a.getMinY()||r.y>a.getMaxY())||n.findStabbedSegments(r,l.getDirectedEdges(),h);return h}if(arguments.length===3)if(k(arguments[2],vo)&&arguments[0]instanceof i&&arguments[1]instanceof fn){var u=arguments[0],v=arguments[1],g=arguments[2],s=v.getEdge().getCoordinates();for(t=0;t<s.length-1;t++)(n._seg.p0=s[t],n._seg.p1=s[t+1],n._seg.p0.y>n._seg.p1.y&&n._seg.reverse(),b=Math.max(n._seg.p0.x,n._seg.p1.x),b<u.x)||n._seg.isHorizontal()||u.y<n._seg.p0.y||u.y>n._seg.p1.y||o.computeOrientation(n._seg.p0,n._seg.p1,u)!==o.RIGHT&&(y=v.getDepth(f.LEFT),n._seg.p0.equals(s[t])||(y=v.getDepth(f.RIGHT)),d=new kl(n._seg,y),g.add(d))}else if(k(arguments[2],vo)&&arguments[0]instanceof i&&k(arguments[1],vo)){var nt=arguments[0],tt=arguments[1],it=arguments[2];for(p=tt.iterator();p.hasNext();)(w=p.next(),w.isForward())&&n.findStabbedSegments(nt,w,it)}};tv.prototype.getDepth=function(n){var t=this.findStabbedSegments(n),i;return t.size()===0?0:(i=ns.min(t),i._leftDepth)};tv.prototype.interfaces_=function(){return[]};tv.prototype.getClass=function(){return tv};uft.DepthSegment.get=function(){return kl};Object.defineProperties(tv,uft);kl=function(){this._upwardSeg=null;this._leftDepth=null;var n=arguments[0],t=arguments[1];this._upwardSeg=new a(n);this._leftDepth=t};kl.prototype.compareTo=function(n){var i=n,t;return this._upwardSeg.minX()>=i._upwardSeg.maxX()?1:this._upwardSeg.maxX()<=i._upwardSeg.minX()?-1:(t=this._upwardSeg.orientationIndex(i._upwardSeg),t!==0)?t:(t=-1*i._upwardSeg.orientationIndex(this._upwardSeg),t!==0)?t:this._upwardSeg.compareTo(i._upwardSeg)};kl.prototype.compareX=function(n,t){var i=n.p0.compareTo(t.p0);return i!==0?i:n.p1.compareTo(t.p1)};kl.prototype.toString=function(){return this._upwardSeg.toString()};kl.prototype.interfaces_=function(){return[co]};kl.prototype.getClass=function(){return kl};bi=function(n,t,i){this.p0=n||null;this.p1=t||null;this.p2=i||null};bi.prototype.area=function(){return bi.area(this.p0,this.p1,this.p2)};bi.prototype.signedArea=function(){return bi.signedArea(this.p0,this.p1,this.p2)};bi.prototype.interpolateZ=function(n){if(n===null)throw new ar("Supplied point is null.");return bi.interpolateZ(n,this.p0,this.p1,this.p2)};bi.prototype.longestSideLength=function(){return bi.longestSideLength(this.p0,this.p1,this.p2)};bi.prototype.isAcute=function(){return bi.isAcute(this.p0,this.p1,this.p2)};bi.prototype.circumcentre=function(){return bi.circumcentre(this.p0,this.p1,this.p2)};bi.prototype.area3D=function(){return bi.area3D(this.p0,this.p1,this.p2)};bi.prototype.centroid=function(){return bi.centroid(this.p0,this.p1,this.p2)};bi.prototype.inCentre=function(){return bi.inCentre(this.p0,this.p1,this.p2)};bi.prototype.interfaces_=function(){return[]};bi.prototype.getClass=function(){return bi};bi.area=function(n,t,i){return Math.abs(((i.x-n.x)*(t.y-n.y)-(t.x-n.x)*(i.y-n.y))/2)};bi.signedArea=function(n,t,i){return((i.x-n.x)*(t.y-n.y)-(t.x-n.x)*(i.y-n.y))/2};bi.det=function(n,t,i,r){return n*r-t*i};bi.interpolateZ=function(n,t,i,r){var u=t.x,f=t.y,e=i.x-u,o=r.x-u,s=i.y-f,h=r.y-f,c=e*h-o*s,l=n.x-u,a=n.y-f,v=(h*l-o*a)/c,y=(-s*l+e*a)/c;return t.z+v*(i.z-t.z)+y*(r.z-t.z)};bi.longestSideLength=function(n,t,i){var e=n.distance(t),u=t.distance(i),f=i.distance(n),r=e;return u>r&&(r=u),f>r&&(r=f),r};bi.isAcute=function(n,t,i){return ot.isAcute(n,t,i)?ot.isAcute(t,i,n)?ot.isAcute(i,n,t)?!0:!1:!1:!1};bi.circumcentre=function(n,t,r){var s=r.x,h=r.y,u=n.x-s,f=n.y-h,e=t.x-s,o=t.y-h,c=2*bi.det(u,f,e,o),l=bi.det(f,u*u+f*f,o,e*e+o*o),a=bi.det(u,u*u+f*f,e,e*e+o*o),v=s-l/c,y=h+a/c;return new i(v,y)};bi.perpendicularBisector=function(n,t){var i=t.x-n.x,r=t.y-n.y,u=new ke(n.x+i/2,n.y+r/2,1),f=new ke(n.x-r+i/2,n.y+i+r/2,1);return new ke(u,f)};bi.angleBisector=function(n,t,r){var u=t.distance(n),e=t.distance(r),f=u/(u+e),o=r.x-n.x,s=r.y-n.y;return new i(n.x+f*o,n.y+f*s)};bi.area3D=function(n,t,i){var r=t.x-n.x,u=t.y-n.y,f=t.z-n.z,e=i.x-n.x,o=i.y-n.y,s=i.z-n.z,h=u*s-f*o,c=f*e-r*s,l=r*o-u*e,a=h*h+c*c+l*l;return Math.sqrt(a)/2};bi.centroid=function(n,t,r){var u=(n.x+t.x+r.x)/3,f=(n.y+t.y+r.y)/3;return new i(u,f)};bi.inCentre=function(n,t,r){var u=t.distance(r),f=n.distance(r),e=n.distance(t),o=u+f+e,s=(u*n.x+f*t.x+e*r.x)/o,h=(u*n.y+f*t.y+e*r.y)/o;return new i(s,h)};oo=function(){this._inputGeom=null;this._distance=null;this._curveBuilder=null;this._curveList=new e;var n=arguments[0],t=arguments[1],i=arguments[2];this._inputGeom=n;this._distance=t;this._curveBuilder=i};oo.prototype.addPoint=function(n){if(this._distance<=0)return null;var t=n.getCoordinates(),i=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(i,r.EXTERIOR,r.INTERIOR)};oo.prototype.addPolygon=function(n){var t=this,u=this._distance,e=f.LEFT,o,s,i,h,c;if((this._distance<0&&(u=-this._distance,e=f.RIGHT),o=n.getExteriorRing(),s=ft.removeRepeatedPoints(o.getCoordinates()),this._distance<0&&this.isErodedCompletely(o,this._distance))||this._distance<=0&&s.length<3)return null;for(this.addPolygonRing(s,u,e,r.EXTERIOR,r.INTERIOR),i=0;i<n.getNumInteriorRing();i++)(h=n.getInteriorRingN(i),c=ft.removeRepeatedPoints(h.getCoordinates()),t._distance>0&&t.isErodedCompletely(h,-t._distance))||t.addPolygonRing(c,u,f.opposite(e),r.INTERIOR,r.EXTERIOR)};oo.prototype.isTriangleErodedCompletely=function(n,t){var i=new bi(n[0],n[1],n[2]),r=i.inCentre(),u=o.distancePointLine(r,i.p0,i.p1);return u<Math.abs(t)};oo.prototype.addLineString=function(n){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=ft.removeRepeatedPoints(n.getCoordinates()),i=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(i,r.EXTERIOR,r.INTERIOR)};oo.prototype.addCurve=function(n,t,i){if(n===null||n.length<2)return null;var u=new gr(n,new di(0,r.BOUNDARY,t,i));this._curveList.add(u)};oo.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};oo.prototype.addPolygonRing=function(n,t,i,r,u){var e,s,h;if(t===0&&n.length<dh.MINIMUM_VALID_SIZE)return null;e=r;s=u;n.length>=dh.MINIMUM_VALID_SIZE&&o.isCCW(n)&&(e=u,s=r,i=f.opposite(i));h=this._curveBuilder.getRingCurve(n,i,t);this.addCurve(h,e,s)};oo.prototype.add=function(n){if(n.isEmpty())return null;n instanceof cu?this.addPolygon(n):n instanceof wr?this.addLineString(n):n instanceof ce?this.addPoint(n):n instanceof bp?this.addCollection(n):n instanceof ka?this.addCollection(n):n instanceof gh?this.addCollection(n):n instanceof ie&&this.addCollection(n)};oo.prototype.isErodedCompletely=function(n,t){var i=n.getCoordinates(),r,u;return i.length<4?t<0:i.length===4?this.isTriangleErodedCompletely(i,t):(r=n.getEnvelopeInternal(),u=Math.min(r.getHeight(),r.getWidth()),t<0&&2*Math.abs(t)>u)?!0:!1};oo.prototype.addCollection=function(n){for(var i,r=this,t=0;t<n.getNumGeometries();t++)i=n.getGeometryN(t),r.add(i)};oo.prototype.interfaces_=function(){return[]};oo.prototype.getClass=function(){return oo};ey=function(){};ey.prototype.locate=function(){};ey.prototype.interfaces_=function(){return[]};ey.prototype.getClass=function(){return ey};ch=function(){this._parent=null;this._atStart=null;this._max=null;this._index=null;this._subcollectionIterator=null;var n=arguments[0];this._parent=n;this._atStart=!0;this._index=0;this._max=n.getNumGeometries()};ch.prototype.next=function(){if(this._atStart)return this._atStart=!1,ch.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new vp;var n=this._parent.getGeometryN(this._index++);return n instanceof ie?(this._subcollectionIterator=new ch(n),this._subcollectionIterator.next()):n};ch.prototype.remove=function(){throw new Error(this.getClass().getName());};ch.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return this._index>=this._max?!1:!0};ch.prototype.interfaces_=function(){return[ty]};ch.prototype.getClass=function(){return ch};ch.isAtomic=function(n){return!(n instanceof ie)};ge=function(){this._geom=null;var n=arguments[0];this._geom=n};ge.prototype.locate=function(n){return ge.locate(n,this._geom)};ge.prototype.interfaces_=function(){return[ey]};ge.prototype.getClass=function(){return ge};ge.isPointInRing=function(n,t){return t.getEnvelopeInternal().intersects(n)?o.isPointInRing(n,t.getCoordinates()):!1};ge.containsPointInPolygon=function(n,t){var r,i,u;if(t.isEmpty()||(r=t.getExteriorRing(),!ge.isPointInRing(n,r)))return!1;for(i=0;i<t.getNumInteriorRing();i++)if(u=t.getInteriorRingN(i),ge.isPointInRing(n,u))return!1;return!0};ge.containsPoint=function(n,t){var i,r;if(t instanceof cu)return ge.containsPointInPolygon(n,t);if(t instanceof ie)for(i=new ch(t);i.hasNext();)if(r=i.next(),r!==t&&ge.containsPoint(n,r))return!0;return!1};ge.locate=function(n,t){return t.isEmpty()?r.EXTERIOR:ge.containsPoint(n,t)?r.INTERIOR:r.EXTERIOR};ef=function(){this._edgeMap=new cf;this._edgeList=null;this._ptInAreaLocation=[r.NONE,r.NONE]};ef.prototype.getNextCW=function(n){this.getEdges();var t=this._edgeList.indexOf(n),i=t-1;return t===0&&(i=this._edgeList.size()-1),this._edgeList.get(i)};ef.prototype.propagateSideLabels=function(n){for(var a,u,i,s,e,t,h,c,o=r.NONE,l=this.iterator();l.hasNext();)a=l.next(),u=a.getLabel(),u.isArea(n)&&u.getLocation(n,f.LEFT)!==r.NONE&&(o=u.getLocation(n,f.LEFT));if(o===r.NONE)return null;for(i=o,s=this.iterator();s.hasNext();)if(e=s.next(),t=e.getLabel(),t.getLocation(n,f.ON)===r.NONE&&t.setLocation(n,f.ON,i),t.isArea(n))if(h=t.getLocation(n,f.LEFT),c=t.getLocation(n,f.RIGHT),c!==r.NONE){if(c!==i)throw new nc("side location conflict",e.getCoordinate());h===r.NONE&&rt.shouldNeverReachHere("found single null side (at "+e.getCoordinate()+")");i=h}else rt.isTrue(t.getLocation(n,f.LEFT)===r.NONE,"found single null side"),t.setLocation(n,f.RIGHT,i),t.setLocation(n,f.LEFT,i)};ef.prototype.getCoordinate=function(){var n=this.iterator(),t;return n.hasNext()?(t=n.next(),t.getCoordinate()):null};ef.prototype.print=function(n){var t,i;for(uf.out.println("EdgeEndStar:   "+this.getCoordinate()),t=this.iterator();t.hasNext();)i=t.next(),i.print(n)};ef.prototype.isAreaLabelsConsistent=function(n){return this.computeEdgeEndLabels(n.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};ef.prototype.checkAreaLabelsConsistent=function(n){var i=this.getEdges(),u,e,c,t,o,s;if(i.size()<=0)return!0;var l=i.size()-1,a=i.get(l).getLabel(),h=a.getLocation(n,f.LEFT);for(rt.isTrue(h!==r.NONE,"Found unlabelled area edge"),u=h,e=this.iterator();e.hasNext();){if((c=e.next(),t=c.getLabel(),rt.isTrue(t.isArea(n),"Found non-area edge"),o=t.getLocation(n,f.LEFT),s=t.getLocation(n,f.RIGHT),o===s)||s!==u)return!1;u=o}return!0};ef.prototype.findIndex=function(n){var r=this,t,i;for(this.iterator(),t=0;t<this._edgeList.size();t++)if(i=r._edgeList.get(t),i===n)return t;return-1};ef.prototype.iterator=function(){return this.getEdges().iterator()};ef.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new e(this._edgeMap.values())),this._edgeList};ef.prototype.getLocation=function(n,t,i){return this._ptInAreaLocation[n]===r.NONE&&(this._ptInAreaLocation[n]=ge.locate(t,i[n].getGeometry())),this._ptInAreaLocation[n]};ef.prototype.toString=function(){var n=new ss,t,i;for(n.append("EdgeEndStar:   "+this.getCoordinate()),n.append("\n"),t=this.iterator();t.hasNext();)i=t.next(),n.append(i),n.append("\n");return n.toString()};ef.prototype.computeEdgeEndLabels=function(n){for(var i,t=this.iterator();t.hasNext();)i=t.next(),i.computeLabel(n)};ef.prototype.computeLabelling=function(n){var v=this,f,e,l,o,i,s,h,c,t,u,a;for(this.computeEdgeEndLabels(n[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1),f=[!1,!1],e=this.iterator();e.hasNext();)for(l=e.next(),o=l.getLabel(),i=0;i<2;i++)o.isLine(i)&&o.getLocation(i)===r.BOUNDARY&&(f[i]=!0);for(s=this.iterator();s.hasNext();)for(h=s.next(),c=h.getLabel(),t=0;t<2;t++)c.isAnyNull(t)&&(u=r.NONE,f[t]?u=r.EXTERIOR:(a=h.getCoordinate(),u=v.getLocation(t,a,n)),c.setAllLocationsIfNull(t,u))};ef.prototype.getDegree=function(){return this._edgeMap.size()};ef.prototype.insertEdgeEnd=function(n,t){this._edgeMap.put(n,t);this._edgeList=null};ef.prototype.interfaces_=function(){return[]};ef.prototype.getClass=function(){return ef};var ysi=function(n){function t(){n.call(this);this._resultAreaEdgeList=null;this._label=null;this._SCANNING_FOR_INCOMING=1;this._LINKING_TO_OUTGOING=2}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var t=this,u,n,e;this.getResultAreaEdges();var i=null,f=null,r=this._SCANNING_FOR_INCOMING;for(u=0;u<this._resultAreaEdgeList.size();u++)if(n=t._resultAreaEdgeList.get(u),e=n.getSym(),n.getLabel().isArea()){i===null&&n.isInResult()&&(i=n);switch(r){case t._SCANNING_FOR_INCOMING:if(!e.isInResult())continue;f=e;r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!n.isInResult())continue;f.setNext(n);r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(i===null)throw new nc("no outgoing dirEdge found",this.getCoordinate());rt.isTrue(i.isInResult(),"unable to link last incoming dirEdge");f.setNext(i)}},t.prototype.insert=function(n){var t=n;this.insertEdgeEnd(t,t)},t.prototype.getRightmostEdge=function(){var i=this.getEdges(),r=i.size(),n;if(r<1)return null;if(n=i.get(0),r===1)return n;var t=i.get(r-1),u=n.getQuadrant(),f=t.getQuadrant();if(ir.isNorthern(u)&&ir.isNorthern(f))return n;if(ir.isNorthern(u)||ir.isNorthern(f)){if(n.getDy()!==0)return n;if(t.getDy()!==0)return t}else return t;return rt.shouldNeverReachHere("found two horizontal edges incident on node"),null},t.prototype.print=function(n){var t,i;for(uf.out.println("DirectedEdgeStar: "+this.getCoordinate()),t=this.iterator();t.hasNext();)i=t.next(),n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()},t.prototype.getResultAreaEdges=function(){var i=this,t,n;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;for(this._resultAreaEdgeList=new e,t=this.iterator();t.hasNext();)n=t.next(),(n.isInResult()||n.getSym().isInResult())&&i._resultAreaEdgeList.add(n);return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r,i,t=this.iterator();t.hasNext();)r=t.next(),i=r.getLabel(),i.setAllLocationsIfNull(0,n.getLocation(0)),i.setAllLocationsIfNull(1,n.getLocation(1))},t.prototype.linkAllDirectedEdges=function(){var f=this,n,t,i,r,u;for(this.getEdges(),n=null,t=null,i=this._edgeList.size()-1;i>=0;i--)r=f._edgeList.get(i),u=r.getSym(),t===null&&(t=u),n!==null&&u.setNext(n),n=r;t.setNext(n)},t.prototype.computeDepths=function(){var e=this,t,r;if(arguments.length===1){var n=arguments[0],u=this.findIndex(n),o=n.getDepth(f.LEFT),s=n.getDepth(f.RIGHT),h=this.computeDepths(u+1,this._edgeList.size(),o),c=this.computeDepths(0,u,h);if(c!==s)throw new nc("depth mismatch at "+n.getCoordinate());}else if(arguments.length===3){var l=arguments[0],a=arguments[1],v=arguments[2],i=v;for(t=l;t<a;t++)r=e._edgeList.get(t),r.setEdgeDepths(f.RIGHT,i),i=r.getDepth(f.LEFT);return i}},t.prototype.mergeSymLabels=function(){for(var t,i,n=this.iterator();n.hasNext();)t=n.next(),i=t.getLabel(),i.merge(t.getSym().getLabel())},t.prototype.linkMinimalDirectedEdges=function(n){for(var t,o,i=this,r=null,f=null,u=this._SCANNING_FOR_INCOMING,e=this._resultAreaEdgeList.size()-1;e>=0;e--){t=i._resultAreaEdgeList.get(e);o=t.getSym();r===null&&t.getEdgeRing()===n&&(r=t);switch(u){case i._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==n)continue;f=o;u=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(t.getEdgeRing()!==n)continue;f.setNextMin(t);u=i._SCANNING_FOR_INCOMING}}u===this._LINKING_TO_OUTGOING&&(rt.isTrue(r!==null,"found null for first outgoing dirEdge"),rt.isTrue(r.getEdgeRing()===n,"unable to link last incoming dirEdge"),f.setNextMin(r))},t.prototype.getOutgoingDegree=function(){var n,t,u,f,i,r,e;if(arguments.length===0){for(n=0,t=this.iterator();t.hasNext();)u=t.next(),u.isInResult()&&n++;return n}if(arguments.length===1){for(f=arguments[0],i=0,r=this.iterator();r.hasNext();)e=r.next(),e.getEdgeRing()===f&&i++;return i}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var i,o,u,f,n,s,t=r.NONE,e=this.iterator();e.hasNext();)if(i=e.next(),o=i.getSym(),!i.isLineEdge()){if(i.isInResult()){t=r.INTERIOR;break}if(o.isInResult()){t=r.EXTERIOR;break}}if(t===r.NONE)return null;for(u=t,f=this.iterator();f.hasNext();)n=f.next(),s=n.getSym(),n.isLineEdge()?n.getEdge().setCovered(u===r.INTERIOR):(n.isInResult()&&(u=r.EXTERIOR),s.isInResult()&&(u=r.INTERIOR))},t.prototype.computeLabelling=function(t){var e=this,u,i,f;for(n.prototype.computeLabelling.call(this,t),this._label=new di(r.NONE),u=this.iterator();u.hasNext();){var o=u.next(),s=o.getEdge(),h=s.getLabel();for(i=0;i<2;i++)f=h.getLocation(i),(f===r.INTERIOR||f===r.BOUNDARY)&&e._label.setLocation(i,r.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ef),tyt=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new lk(n,new ysi)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ry),gc=function gc(){this._pts=null;this._orientation=null;var n=arguments[0];this._pts=n;this._orientation=gc.orientation(n)};gc.prototype.compareTo=function(n){var t=n;return gc.compareOriented(this._pts,this._orientation,t._pts,t._orientation)};gc.prototype.interfaces_=function(){return[co]};gc.prototype.getClass=function(){return gc};gc.orientation=function(n){return ft.increasingDirection(n)===1};gc.compareOriented=function(n,t,i,r){for(var h=t?1:-1,c=r?1:-1,l=t?n.length:-1,a=r?i.length:-1,e=t?0:n.length-1,o=r?0:i.length-1,s,u,f;;){if(s=n[e].compareTo(i[o]),s!==0)return s;if(e+=h,o+=c,u=e===l,f=o===a,u&&!f)return-1;if(!u&&f)return 1;if(u&&f)return 0}};ts=function(){this._edges=new e;this._ocaMap=new cf};ts.prototype.print=function(n){var f=this,i,u,r,t;for(n.print("MULTILINESTRING ( "),i=0;i<this._edges.size();i++){for(u=f._edges.get(i),i>0&&n.print(","),n.print("("),r=u.getCoordinates(),t=0;t<r.length;t++)t>0&&n.print(","),n.print(r[t].x+" "+r[t].y);n.println(")")}n.print(")  ")};ts.prototype.addAll=function(n){for(var i=this,t=n.iterator();t.hasNext();)i.add(t.next())};ts.prototype.findEdgeIndex=function(n){for(var i=this,t=0;t<this._edges.size();t++)if(i._edges.get(t).equals(n))return t;return-1};ts.prototype.iterator=function(){return this._edges.iterator()};ts.prototype.getEdges=function(){return this._edges};ts.prototype.get=function(n){return this._edges.get(n)};ts.prototype.findEqualEdge=function(n){var t=new gc(n.getCoordinates());return this._ocaMap.get(t)};ts.prototype.add=function(n){this._edges.add(n);var t=new gc(n.getCoordinates());this._ocaMap.put(t,n)};ts.prototype.interfaces_=function(){return[]};ts.prototype.getClass=function(){return ts};dl=function(){};dl.prototype.processIntersections=function(){};dl.prototype.isDone=function(){};dl.prototype.interfaces_=function(){return[]};dl.prototype.getClass=function(){return dl};no=function(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._hasInterior=!1;this._properIntersectionPoint=null;this._li=null;this._isSelfIntersection=null;this.numIntersections=0;this.numInteriorIntersections=0;this.numProperIntersections=0;this.numTests=0;var n=arguments[0];this._li=n};no.prototype.isTrivialIntersection=function(n,t,i,r){if(n===i&&this._li.getIntersectionNum()===1){if(no.isAdjacentSegments(t,r))return!0;if(n.isClosed()){var u=n.size()-1;if(t===0&&r===u||r===0&&t===u)return!0}}return!1};no.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};no.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};no.prototype.getLineIntersector=function(){return this._li};no.prototype.hasProperIntersection=function(){return this._hasProper};no.prototype.processIntersections=function(n,t,i,r){if(n===i&&t===r)return null;this.numTests++;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(n,t,i,r)||(this._hasIntersection=!0,n.addIntersections(this._li,t,0),i.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};no.prototype.hasIntersection=function(){return this._hasIntersection};no.prototype.isDone=function(){return!1};no.prototype.hasInteriorIntersection=function(){return this._hasInterior};no.prototype.interfaces_=function(){return[dl]};no.prototype.getClass=function(){return no};no.isAdjacentSegments=function(n,t){return Math.abs(n-t)===1};bs=function(){this.coord=null;this.segmentIndex=null;this.dist=null;var n=arguments[0],t=arguments[1],r=arguments[2];this.coord=new i(n);this.segmentIndex=t;this.dist=r};bs.prototype.getSegmentIndex=function(){return this.segmentIndex};bs.prototype.getCoordinate=function(){return this.coord};bs.prototype.print=function(n){n.print(this.coord);n.print(" seg # = "+this.segmentIndex);n.println(" dist = "+this.dist)};bs.prototype.compareTo=function(n){var t=n;return this.compare(t.segmentIndex,t.dist)};bs.prototype.isEndPoint=function(n){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===n?!0:!1};bs.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};bs.prototype.getDistance=function(){return this.dist};bs.prototype.compare=function(n,t){return this.segmentIndex<n?-1:this.segmentIndex>n?1:this.dist<t?-1:this.dist>t?1:0};bs.prototype.interfaces_=function(){return[co]};bs.prototype.getClass=function(){return bs};lh=function(){this._nodeMap=new cf;this.edge=null;var n=arguments[0];this.edge=n};lh.prototype.print=function(n){var t,i;for(n.println("Intersections:"),t=this.iterator();t.hasNext();)i=t.next(),i.print(n)};lh.prototype.iterator=function(){return this._nodeMap.values().iterator()};lh.prototype.addSplitEdges=function(n){var f=this,t,i,r,u;for(this.addEndpoints(),t=this.iterator(),i=t.next();t.hasNext();)r=t.next(),u=f.createSplitEdge(i,r),n.add(u),i=r};lh.prototype.addEndpoints=function(){var n=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0);this.add(this.edge.pts[n],n,0)};lh.prototype.createSplitEdge=function(n,t){var s=this,e=t.segmentIndex-n.segmentIndex+2,h=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(h),r,u,f;for(o||e--,r=new Array(e).fill(null),u=0,r[u++]=new i(n.coord),f=n.segmentIndex+1;f<=t.segmentIndex;f++)r[u++]=s.edge.pts[f];return o&&(r[u]=t.coord),new vk(r,new di(this.edge._label))};lh.prototype.add=function(n,t,i){var r=new bs(n,t,i),u=this._nodeMap.get(r);return u!==null?u:(this._nodeMap.put(r,r),r)};lh.prototype.isIntersection=function(n){for(var i,t=this.iterator();t.hasNext();)if(i=t.next(),i.coord.equals(n))return!0;return!1};lh.prototype.interfaces_=function(){return[]};lh.prototype.getClass=function(){return lh};gl=function(){};gl.prototype.getChainStartIndices=function(n){var u=this,t=0,i=new e,r;i.add(new hs(t));do r=u.findChainEnd(n,t),i.add(new hs(r)),t=r;while(t<n.length-1);return gl.toIntArray(i)};gl.prototype.findChainEnd=function(n,t){for(var u=ir.quadrant(n[t],n[t+1]),i=t+1,r;i<n.length;){if(r=ir.quadrant(n[i-1],n[i]),r!==u)break;i++}return i-1};gl.prototype.interfaces_=function(){return[]};gl.prototype.getClass=function(){return gl};gl.toIntArray=function(n){for(var i=new Array(n.size()).fill(null),t=0;t<i.length;t++)i[t]=n.get(t).intValue();return i};ic=function(){var n,t;this.e=null;this.pts=null;this.startIndex=null;this.env1=new l;this.env2=new l;n=arguments[0];this.e=n;this.pts=n.getCoordinates();t=new gl;this.startIndex=t.getChainStartIndices(this.pts)};ic.prototype.getCoordinates=function(){return this.pts};ic.prototype.getMaxX=function(n){var t=this.pts[this.startIndex[n]].x,i=this.pts[this.startIndex[n+1]].x;return t>i?t:i};ic.prototype.getMinX=function(n){var t=this.pts[this.startIndex[n]].x,i=this.pts[this.startIndex[n+1]].x;return t<i?t:i};ic.prototype.computeIntersectsForChain=function(){var f,n;if(arguments.length===4){var h=arguments[0],s=arguments[1],c=arguments[2],l=arguments[3];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],s,s.startIndex[c],s.startIndex[c+1],l)}else if(arguments.length===6){var i=arguments[0],e=arguments[1],r=arguments[2],t=arguments[3],u=arguments[4],o=arguments[5],a=this.pts[i],v=this.pts[e],y=r.pts[t],p=r.pts[u];if(e-i==1&&u-t==1)return o.addIntersections(this.e,i,r.e,t),null;if(this.env1.init(a,v),this.env2.init(y,p),!this.env1.intersects(this.env2))return null;f=Math.trunc((i+e)/2);n=Math.trunc((t+u)/2);i<f&&(t<n&&this.computeIntersectsForChain(i,f,r,t,n,o),n<u&&this.computeIntersectsForChain(i,f,r,n,u,o));f<e&&(t<n&&this.computeIntersectsForChain(f,e,r,t,n,o),n<u&&this.computeIntersectsForChain(f,e,r,n,u,o))}};ic.prototype.getStartIndexes=function(){return this.startIndex};ic.prototype.computeIntersects=function(n,t){for(var i,u=this,r=0;r<this.startIndex.length-1;r++)for(i=0;i<n.startIndex.length-1;i++)u.computeIntersectsForChain(r,n,i,t)};ic.prototype.interfaces_=function(){return[]};ic.prototype.getClass=function(){return ic};au=function au(){var i=this,n,t;for(this._depth=Array(2).fill().map(function(){return Array(3)}),n=0;n<2;n++)for(t=0;t<3;t++)i._depth[n][t]=au.NULL_VALUE};fft={NULL_VALUE:{configurable:!0}};au.prototype.getDepth=function(n,t){return this._depth[n][t]};au.prototype.setDepth=function(n,t,i){this._depth[n][t]=i};au.prototype.isNull=function(){var f=this,n,t,i,r,u;if(arguments.length===0){for(n=0;n<2;n++)for(t=0;t<3;t++)if(f._depth[n][t]!==au.NULL_VALUE)return!1;return!0}return arguments.length===1?(i=arguments[0],this._depth[i][1]===au.NULL_VALUE):arguments.length===2?(r=arguments[0],u=arguments[1],this._depth[r][u]===au.NULL_VALUE):void 0};au.prototype.normalize=function(){for(var i,r,u,t=this,n=0;n<2;n++)if(!t.isNull(n))for(i=t._depth[n][1],t._depth[n][2]<i&&(i=t._depth[n][2]),i<0&&(i=0),r=1;r<3;r++)u=0,t._depth[n][r]>i&&(u=1),t._depth[n][r]=u};au.prototype.getDelta=function(n){return this._depth[n][f.RIGHT]-this._depth[n][f.LEFT]};au.prototype.getLocation=function(n,t){return this._depth[n][t]<=0?r.EXTERIOR:r.INTERIOR};au.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};au.prototype.add=function(){var u=this,f,n,t,i;if(arguments.length===1)for(f=arguments[0],n=0;n<2;n++)for(t=1;t<3;t++)i=f.getLocation(n,t),(i===r.EXTERIOR||i===r.INTERIOR)&&(u.isNull(n,t)?u._depth[n][t]=au.depthAtLocation(i):u._depth[n][t]+=au.depthAtLocation(i));else if(arguments.length===3){var e=arguments[0],o=arguments[1],s=arguments[2];s===r.INTERIOR&&this._depth[e][o]++}};au.prototype.interfaces_=function(){return[]};au.prototype.getClass=function(){return au};au.depthAtLocation=function(n){return n===r.EXTERIOR?0:n===r.INTERIOR?1:au.NULL_VALUE};fft.NULL_VALUE.get=function(){return-1};Object.defineProperties(au,fft);vk=function(n){function t(){var i,r,u;n.call(this);this.pts=null;this._env=null;this.eiList=new lh(this);this._name=null;this._mce=null;this._isIsolated=!0;this._depth=new au;this._depthDelta=0;arguments.length===1?(i=arguments[0],t.call(this,i,null)):arguments.length===2&&(r=arguments[0],u=arguments[1],this.pts=r,this._label=u)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);return n[0]=this.pts[0],n[1]=this.pts[1],new t(n,di.toLineLabel(this._label))},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var u=this,r,i;if(!(n instanceof t)||(r=n,this.pts.length!==r.pts.length))return!1;var f=!0,e=!0,o=this.pts.length;for(i=0;i<this.pts.length;i++)if(u.pts[i].equals2D(r.pts[i])||(f=!1),u.pts[i].equals2D(r.pts[--o])||(e=!1),!f&&!e)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var i=this,t;for(n.print("edge "+this._name+": "),n.print("LINESTRING ("),t=0;t<this.pts.length;t++)t>0&&n.print(","),n.print(i.pts[t].x+" "+i.pts[t].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return this._label.isArea()?this.pts.length!==3?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var i=this,t;for(n.print("edge "+this._name+": "),t=this.pts.length-1;t>=0;t--)n.print(i.pts[t]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new ic(this)),this._mce},t.prototype.getEnvelope=function(){var t=this,n;if(this._env===null)for(this._env=new l,n=0;n<this.pts.length;n++)t._env.expandToInclude(t.pts[n]);return this._env},t.prototype.addIntersection=function(n,t,r,u){var o=new i(n.getIntersection(u)),f=t,s=n.getEdgeDistance(r,u),e=f+1,h;e<this.pts.length&&(h=this.pts[e],o.equals2D(h)&&(f=e,s=0));this.eiList.add(o,f,s)},t.prototype.toString=function(){var i=this,n=new ss,t;for(n.append("edge "+this._name+": "),n.append("LINESTRING ("),t=0;t<this.pts.length;t++)t>0&&n.append(","),n.append(i.pts[t].x+" "+i.pts[t].y);return n.append(")  "+this._label+" "+this._depthDelta),n.toString()},t.prototype.isPointwiseEqual=function(n){var i=this,t;if(this.pts.length!==n.pts.length)return!1;for(t=0;t<this.pts.length;t++)if(!i.pts[t].equals2D(n.pts[t]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,t,i){for(var u=this,r=0;r<n.getIntersectionNum();r++)u.addIntersection(n,t,i,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1];i.setAtLeastIfValid(t.getLocation(0,f.ON),t.getLocation(1,f.ON),1);t.isArea()&&(i.setAtLeastIfValid(t.getLocation(0,f.LEFT),t.getLocation(1,f.LEFT),2),i.setAtLeastIfValid(t.getLocation(0,f.RIGHT),t.getLocation(1,f.RIGHT),2))}else return n.prototype.updateIM.apply(this,arguments)},t}(eo);vf=function(n){this._workingPrecisionModel=null;this._workingNoder=null;this._geomFact=null;this._graph=null;this._edgeList=new ts;this._bufParams=n||null};vf.prototype.setWorkingPrecisionModel=function(n){this._workingPrecisionModel=n};vf.prototype.insertUniqueEdge=function(n){var t=this._edgeList.findEqualEdge(n),r,i;if(t!==null){r=t.getLabel();i=n.getLabel();t.isPointwiseEqual(n)||(i=new di(n.getLabel()),i.flip());r.merge(i);var u=vf.depthDelta(i),f=t.getDepthDelta(),e=f+u;t.setDepthDelta(e)}else this._edgeList.add(n),n.setDepthDelta(vf.depthDelta(n.getLabel()))};vf.prototype.buildSubgraphs=function(n,t){for(var r=new e,u=n.iterator();u.hasNext();){var i=u.next(),f=i.getRightmostCoordinate(),o=new tv(r),s=o.getDepth(f);i.computeDepth(s);i.findResultEdges();r.add(i);t.add(i.getDirectedEdges(),i.getNodes())}};vf.prototype.createSubgraphs=function(n){for(var i,r,t=new e,u=n.getNodes().iterator();u.hasNext();)i=u.next(),i.isVisited()||(r=new lf,r.create(i),t.add(r));return ns.sort(t,ns.reverseOrder()),t};vf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()};vf.prototype.getNoder=function(n){if(this._workingNoder!==null)return this._workingNoder;var t=new ift,i=new pl;return i.setPrecisionModel(n),t.setSegmentIntersector(new no(i)),t};vf.prototype.buffer=function(n,t){var i=this._workingPrecisionModel,e,r,u;i===null&&(i=n.getPrecisionModel());this._geomFact=n.getFactory();var o=new re(i,this._bufParams),s=new oo(n,t,o),f=s.getCurves();return f.size()<=0?this.createEmptyResultGeometry():(this.computeNodedEdges(f,i),this._graph=new yr(new tyt),this._graph.addEdges(this._edgeList.getEdges()),e=this.createSubgraphs(this._graph),r=new le(this._geomFact),this.buildSubgraphs(e,r),u=r.getPolygons(),u.size()<=0)?this.createEmptyResultGeometry():this._geomFact.buildGeometry(u)};vf.prototype.computeNodedEdges=function(n,t){var h=this,f=this.getNoder(t),e,u,i,r,o,s;for(f.computeNodes(n),e=f.getNodedSubstrings(),u=e.iterator();u.hasNext();)(i=u.next(),r=i.getCoordinates(),r.length===2&&r[0].equals2D(r[1]))||(o=i.getData(),s=new vk(i.getCoordinates(),new di(o)),h.insertUniqueEdge(s))};vf.prototype.setNoder=function(n){this._workingNoder=n};vf.prototype.interfaces_=function(){return[]};vf.prototype.getClass=function(){return vf};vf.depthDelta=function(n){var t=n.getLocation(0,f.LEFT),i=n.getLocation(0,f.RIGHT);return t===r.INTERIOR&&i===r.EXTERIOR?1:t===r.EXTERIOR&&i===r.INTERIOR?-1:0};vf.convertSegStrings=function(n){for(var t=new ut,i=new e,r,u;n.hasNext();)r=n.next(),u=t.createLineString(r.getCoordinates()),i.add(u);return t.buildGeometry(i)};nl=function(){var n,t;if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2)n=arguments[0],t=arguments[1],this._noder=n,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision();else if(arguments.length===4){var i=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];this._noder=i;this._scaleFactor=r;this._offsetX=u;this._offsetY=f;this._isScaled=!this.isIntegerPrecision()}};nl.prototype.rescale=function(){var i=this,u,r,f,n,t;if(k(arguments[0],eu))for(u=arguments[0],r=u.iterator();r.hasNext();)f=r.next(),i.rescale(f.getCoordinates());else if(arguments[0]instanceof Array){for(n=arguments[0],t=0;t<n.length;t++)n[t].x=n[t].x/i._scaleFactor+i._offsetX,n[t].y=n[t].y/i._scaleFactor+i._offsetY;n.length===2&&n[0].equals2D(n[1])&&uf.out.println(n)}};nl.prototype.scale=function(){var r=this,h,u,f,o,t,s,n;if(k(arguments[0],eu)){for(h=arguments[0],u=new e,f=h.iterator();f.hasNext();)o=f.next(),u.add(new gr(r.scale(o.getCoordinates()),o.getData()));return u}if(arguments[0]instanceof Array){for(t=arguments[0],s=new Array(t.length).fill(null),n=0;n<t.length;n++)s[n]=new i(Math.round((t[n].x-r._offsetX)*r._scaleFactor),Math.round((t[n].y-r._offsetY)*r._scaleFactor),t[n].z);return ft.removeRepeatedPoints(s)}};nl.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};nl.prototype.getNodedSubstrings=function(){var n=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(n),n};nl.prototype.computeNodes=function(n){var t=n;this._isScaled&&(t=this.scale(n));this._noder.computeNodes(t)};nl.prototype.interfaces_=function(){return[bl]};nl.prototype.getClass=function(){return nl};ks=function(){this._li=new pl;this._segStrings=null;var n=arguments[0];this._segStrings=n};eft={fact:{configurable:!0}};ks.prototype.checkEndPtVertexIntersections=function(){var t=this,r,o,i,u,s,f,h,e,n;if(arguments.length===0)for(r=this._segStrings.iterator();r.hasNext();)o=r.next(),i=o.getCoordinates(),t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings);else if(arguments.length===2)for(u=arguments[0],s=arguments[1],f=s.iterator();f.hasNext();)for(h=f.next(),e=h.getCoordinates(),n=1;n<e.length-1;n++)if(e[n].equals(u))throw new ac("found endpt/interior pt intersection at index "+n+" :pt "+u);};ks.prototype.checkInteriorIntersections=function(){var a=this,i,v,r,y,n,t;if(arguments.length===0)for(i=this._segStrings.iterator();i.hasNext();)for(v=i.next(),r=this._segStrings.iterator();r.hasNext();)y=r.next(),a.checkInteriorIntersections(v,y);else if(arguments.length===2){var p=arguments[0],w=arguments[1],b=p.getCoordinates(),k=w.getCoordinates();for(n=0;n<b.length-1;n++)for(t=0;t<k.length-1;t++)a.checkInteriorIntersections(p,n,w,t)}else if(arguments.length===4){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];if(u===e&&f===o)return null;var s=u.getCoordinates()[f],h=u.getCoordinates()[f+1],c=e.getCoordinates()[o],l=e.getCoordinates()[o+1];if(this._li.computeIntersection(s,h,c,l),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,s,h)||this.hasInteriorIntersection(this._li,c,l)))throw new ac("found non-noded intersection at "+s+"-"+h+" and "+c+"-"+l);}};ks.prototype.checkValid=function(){this.checkEndPtVertexIntersections();this.checkInteriorIntersections();this.checkCollapses()};ks.prototype.checkCollapses=function(){var r=this,i,u,f,t,n;if(arguments.length===0)for(i=this._segStrings.iterator();i.hasNext();)u=i.next(),r.checkCollapses(u);else if(arguments.length===1)for(f=arguments[0],t=f.getCoordinates(),n=0;n<t.length-2;n++)r.checkCollapse(t[n],t[n+1],t[n+2])};ks.prototype.hasInteriorIntersection=function(n,t,i){for(var u,r=0;r<n.getIntersectionNum();r++)if(u=n.getIntersection(r),!(u.equals(t)||u.equals(i)))return!0;return!1};ks.prototype.checkCollapse=function(n,t,i){if(n.equals(i))throw new ac("found non-noded collapse at "+ks.fact.createLineString([n,t,i]));};ks.prototype.interfaces_=function(){return[]};ks.prototype.getClass=function(){return ks};eft.fact.get=function(){return new ut};Object.defineProperties(ks,eft);ue=function(){this._li=null;this._pt=null;this._originalPt=null;this._ptScaled=null;this._p0Scaled=null;this._p1Scaled=null;this._scaleFactor=null;this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;this._corner=new Array(4).fill(null);this._safeEnv=null;var n=arguments[0],t=arguments[1],r=arguments[2];if(this._originalPt=n,this._pt=n,this._scaleFactor=t,this._li=r,t<=0)throw new ar("Scale factor must be non-zero");t!==1&&(this._pt=new i(this.scale(n.x),this.scale(n.y)),this._p0Scaled=new i,this._p1Scaled=new i);this.initCorners(this._pt)};oft={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ue.prototype.intersectsScaled=function(n,t){var u=Math.min(n.x,t.x),f=Math.max(n.x,t.x),e=Math.min(n.y,t.y),o=Math.max(n.y,t.y),r=this._maxx<u||this._minx>f||this._maxy<e||this._miny>o,i;return r?!1:(i=this.intersectsToleranceSquare(n,t),rt.isTrue(!(r&&i),"Found bad envelope test"),i)};ue.prototype.initCorners=function(n){var t=.5;this._minx=n.x-t;this._maxx=n.x+t;this._miny=n.y-t;this._maxy=n.y+t;this._corner[0]=new i(this._maxx,this._maxy);this._corner[1]=new i(this._minx,this._maxy);this._corner[2]=new i(this._minx,this._miny);this._corner[3]=new i(this._maxx,this._miny)};ue.prototype.intersects=function(n,t){return this._scaleFactor===1?this.intersectsScaled(n,t):(this.copyScaled(n,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};ue.prototype.scale=function(n){return Math.round(n*this._scaleFactor)};ue.prototype.getCoordinate=function(){return this._originalPt};ue.prototype.copyScaled=function(n,t){t.x=this.scale(n.x);t.y=this.scale(n.y)};ue.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var n=ue.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new l(this._originalPt.x-n,this._originalPt.x+n,this._originalPt.y-n,this._originalPt.y+n)}return this._safeEnv};ue.prototype.intersectsPixelClosure=function(n,t){return(this._li.computeIntersection(n,t,this._corner[0],this._corner[1]),this._li.hasIntersection())?!0:(this._li.computeIntersection(n,t,this._corner[1],this._corner[2]),this._li.hasIntersection())?!0:(this._li.computeIntersection(n,t,this._corner[2],this._corner[3]),this._li.hasIntersection())?!0:(this._li.computeIntersection(n,t,this._corner[3],this._corner[0]),this._li.hasIntersection())?!0:!1};ue.prototype.intersectsToleranceSquare=function(n,t){var i=!1,r=!1;return(this._li.computeIntersection(n,t,this._corner[0],this._corner[1]),this._li.isProper())?!0:(this._li.computeIntersection(n,t,this._corner[1],this._corner[2]),this._li.isProper())?!0:(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(n,t,this._corner[2],this._corner[3]),this._li.isProper())?!0:(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(n,t,this._corner[3],this._corner[0]),this._li.isProper())?!0:i&&r?!0:n.equals(this._pt)?!0:t.equals(this._pt)?!0:!1};ue.prototype.addSnappedNode=function(n,t){var i=n.getCoordinate(t),r=n.getCoordinate(t+1);return this.intersects(i,r)?(n.addIntersection(this.getCoordinate(),t),!0):!1};ue.prototype.interfaces_=function(){return[]};ue.prototype.getClass=function(){return ue};oft.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75};Object.defineProperties(ue,oft);sw=function(){this.tempEnv1=new l;this.selectedSegment=new a};sw.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var n=arguments[0],t=arguments[1];n.getLineSegment(t,this.selectedSegment);this.select(this.selectedSegment)}};sw.prototype.interfaces_=function(){return[]};sw.prototype.getClass=function(){return sw};oy=function(){this._index=null;var n=arguments[0];this._index=n};sft={HotPixelSnapAction:{configurable:!0}};oy.prototype.snap=function(){var n;if(arguments.length===1)return n=arguments[0],this.snap(n,null,-1);if(arguments.length===3){var t=arguments[0],u=arguments[1],f=arguments[2],i=t.getSafeEnvelope(),r=new hft(t,u,f);return this._index.query(i,{interfaces_:function(){return[bc]},visitItem:function(n){var t=n;t.select(i,r)}}),r.isNodeAdded()}};oy.prototype.interfaces_=function(){return[]};oy.prototype.getClass=function(){return oy};sft.HotPixelSnapAction.get=function(){return hft};Object.defineProperties(oy,sft);hft=function(n){function t(){n.call(this);this._hotPixel=null;this._parentEdge=null;this._hotPixelVertexIndex=null;this._isNodeAdded=!1;var t=arguments[0],i=arguments[1],r=arguments[2];this._hotPixel=t;this._parentEdge=i;this._hotPixelVertexIndex=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var r=arguments[0],t=arguments[1],i=r.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,t)}else return n.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(sw);iv=function(){this._li=null;this._interiorIntersections=null;var n=arguments[0];this._li=n;this._interiorIntersections=new e};iv.prototype.processIntersections=function(n,t,i,r){var f=this,u;if(n===i&&t===r)return null;var e=n.getCoordinates()[t],o=n.getCoordinates()[t+1],s=i.getCoordinates()[r],h=i.getCoordinates()[r+1];if(this._li.computeIntersection(e,o,s,h),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(u=0;u<this._li.getIntersectionNum();u++)f._interiorIntersections.add(f._li.getIntersection(u));n.addIntersections(this._li,t,0);i.addIntersections(this._li,r,1)}};iv.prototype.isDone=function(){return!1};iv.prototype.getInteriorIntersections=function(){return this._interiorIntersections};iv.prototype.interfaces_=function(){return[dl]};iv.prototype.getClass=function(){return iv};ah=function(){this._pm=null;this._li=null;this._scaleFactor=null;this._noder=null;this._pointSnapper=null;this._nodedSegStrings=null;var n=arguments[0];this._pm=n;this._li=new pl;this._li.setPrecisionModel(n);this._scaleFactor=n.getScale()};ah.prototype.checkCorrectness=function(n){var i=gr.getNodedSubstrings(n),r=new ks(i);try{r.checkValid()}catch(t){if(t instanceof hvt)t.printStackTrace();else throw t;}};ah.prototype.getNodedSubstrings=function(){return gr.getNodedSubstrings(this._nodedSegStrings)};ah.prototype.snapRound=function(n,t){var i=this.findInteriorIntersections(n,t);this.computeIntersectionSnaps(i);this.computeVertexSnaps(n)};ah.prototype.findInteriorIntersections=function(n,t){var i=new iv(t);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(n),i.getInteriorIntersections()};ah.prototype.computeVertexSnaps=function(){var t=this,f,u,e,i,r,n,o,s;if(k(arguments[0],eu))for(f=arguments[0],u=f.iterator();u.hasNext();)e=u.next(),t.computeVertexSnaps(e);else if(arguments[0]instanceof gr)for(i=arguments[0],r=i.getCoordinates(),n=0;n<r.length;n++)o=new ue(r[n],t._scaleFactor,t._li),s=t._pointSnapper.snap(o,i,n),s&&i.addIntersection(r[n],n)};ah.prototype.computeNodes=function(n){this._nodedSegStrings=n;this._noder=new ift;this._pointSnapper=new oy(this._noder.getIndex());this.snapRound(n,this._li)};ah.prototype.computeIntersectionSnaps=function(n){for(var r,u,t=this,i=n.iterator();i.hasNext();)r=i.next(),u=new ue(r,t._scaleFactor,t._li),t._pointSnapper.snap(u)};ah.prototype.interfaces_=function(){return[bl]};ah.prototype.getClass=function(){return ah};bu=function(){var n,t,i;this._argGeom=null;this._distance=null;this._bufParams=new et;this._resultGeometry=null;this._saveException=null;arguments.length===1?(n=arguments[0],this._argGeom=n):arguments.length===2&&(t=arguments[0],i=arguments[1],this._argGeom=t,this._bufParams=i)};sy={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};bu.prototype.bufferFixedPrecision=function(n){var i=new nl(new ah(new ht(1)),n.getScale()),t=new vf(this._bufParams);t.setWorkingPrecisionModel(n);t.setNoder(i);this._resultGeometry=t.buffer(this._argGeom,this._distance)};bu.prototype.bufferReducedPrecision=function(){var t=this,n;if(arguments.length===0){for(n=bu.MAX_PRECISION_DIGITS;n>=0;n--){try{t.bufferReducedPrecision(n)}catch(i){if(i instanceof nc)t._saveException=i;else throw i;}if(t._resultGeometry!==null)return null}throw this._saveException;}else if(arguments.length===1){var r=arguments[0],u=bu.precisionScaleFactor(this._argGeom,this._distance,r),f=new ht(u);this.bufferFixedPrecision(f)}};bu.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var n=this._argGeom.getFactory().getPrecisionModel();n.getType()===ht.FIXED?this.bufferFixedPrecision(n):this.bufferReducedPrecision()};bu.prototype.setQuadrantSegments=function(n){this._bufParams.setQuadrantSegments(n)};bu.prototype.bufferOriginalPrecision=function(){try{var t=new vf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(n){if(n instanceof ac)this._saveException=n;else throw n;}};bu.prototype.getResultGeometry=function(n){return this._distance=n,this.computeGeometry(),this._resultGeometry};bu.prototype.setEndCapStyle=function(n){this._bufParams.setEndCapStyle(n)};bu.prototype.interfaces_=function(){return[]};bu.prototype.getClass=function(){return bu};bu.bufferOp=function(){if(arguments.length===2){var i=arguments[0],r=arguments[1],u=new bu(i);return u.getResultGeometry(r)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof b&&typeof arguments[1]=="number"){var f=arguments[0],e=arguments[1],o=arguments[2],t=new bu(f);return t.setQuadrantSegments(o),t.getResultGeometry(e)}if(arguments[2]instanceof et&&arguments[0]instanceof b&&typeof arguments[1]=="number"){var s=arguments[0],h=arguments[1],c=arguments[2],l=new bu(s,c);return l.getResultGeometry(h)}}else if(arguments.length===4){var a=arguments[0],v=arguments[1],y=arguments[2],p=arguments[3],n=new bu(a);return n.setQuadrantSegments(y),n.setEndCapStyle(p),n.getResultGeometry(v)}};bu.precisionScaleFactor=function(n,t,i){var r=n.getEnvelopeInternal(),u=ro.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),f=t>0?t:0,e=u+2*f,o=Math.trunc(Math.log(e)/Math.log(10)+1),s=i-o;return Math.pow(10,s)};sy.CAP_ROUND.get=function(){return et.CAP_ROUND};sy.CAP_BUTT.get=function(){return et.CAP_FLAT};sy.CAP_FLAT.get=function(){return et.CAP_FLAT};sy.CAP_SQUARE.get=function(){return et.CAP_SQUARE};sy.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(bu,sy);yf=function(){this._pt=[new i,new i];this._distance=it.NaN;this._isNull=!0};yf.prototype.getCoordinates=function(){return this._pt};yf.prototype.getCoordinate=function(n){return this._pt[n]};yf.prototype.setMinimum=function(){var i,n,t,r;if(arguments.length===1)i=arguments[0],this.setMinimum(i._pt[0],i._pt[1]);else if(arguments.length===2){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r<this._distance&&this.initialize(n,t,r)}};yf.prototype.initialize=function(){var n,t;if(arguments.length===0)this._isNull=!0;else if(arguments.length===2)n=arguments[0],t=arguments[1],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(t),this._distance=n.distance(t),this._isNull=!1;else if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];this._pt[0].setCoordinate(i);this._pt[1].setCoordinate(r);this._distance=u;this._isNull=!1}};yf.prototype.getDistance=function(){return this._distance};yf.prototype.setMaximum=function(){var i,n,t,r;if(arguments.length===1)i=arguments[0],this.setMaximum(i._pt[0],i._pt[1]);else if(arguments.length===2){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r>this._distance&&this.initialize(n,t,r)}};yf.prototype.interfaces_=function(){return[]};yf.prototype.getClass=function(){return yf};vh=function(){};vh.prototype.interfaces_=function(){return[]};vh.prototype.getClass=function(){return vh};vh.computeDistance=function(){var t,v,r,h,e,w;if(arguments[2]instanceof yf&&arguments[0]instanceof wr&&arguments[1]instanceof i){var d=arguments[0],c=arguments[1],g=arguments[2],o=d.getCoordinates(),l=new a;for(t=0;t<o.length-1;t++)l.setCoordinates(o[t],o[t+1]),v=l.closestPoint(c),g.setMinimum(v,c)}else if(arguments[2]instanceof yf&&arguments[0]instanceof cu&&arguments[1]instanceof i){var s=arguments[0],y=arguments[1],p=arguments[2];for(vh.computeDistance(s.getExteriorRing(),y,p),r=0;r<s.getNumInteriorRing();r++)vh.computeDistance(s.getInteriorRingN(r),y,p)}else if(arguments[2]instanceof yf&&arguments[0]instanceof b&&arguments[1]instanceof i){var n=arguments[0],u=arguments[1],f=arguments[2];if(n instanceof wr)vh.computeDistance(n,u,f);else if(n instanceof cu)vh.computeDistance(n,u,f);else if(n instanceof ie)for(h=n,e=0;e<h.getNumGeometries();e++)w=h.getGeometryN(e),vh.computeDistance(w,u,f);else f.setMinimum(n.getCoordinate(),u)}else if(arguments[2]instanceof yf&&arguments[0]instanceof a&&arguments[1]instanceof i){var nt=arguments[0],k=arguments[1],tt=arguments[2],it=nt.closestPoint(k);tt.setMinimum(it,k)}};na=function(n){this._maxPtDist=new yf;this._inputGeom=n||null};en={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};na.prototype.computeMaxMidpointDistance=function(n){var t=new tl(this._inputGeom);n.apply(t);this._maxPtDist.setMaximum(t.getMaxPointDistance())};na.prototype.computeMaxVertexDistance=function(n){var t=new rv(this._inputGeom);n.apply(t);this._maxPtDist.setMaximum(t.getMaxPointDistance())};na.prototype.findDistance=function(n){return this.computeMaxVertexDistance(n),this.computeMaxMidpointDistance(n),this._maxPtDist.getDistance()};na.prototype.getDistancePoints=function(){return this._maxPtDist};na.prototype.interfaces_=function(){return[]};na.prototype.getClass=function(){return na};en.MaxPointDistanceFilter.get=function(){return rv};en.MaxMidpointDistanceFilter.get=function(){return tl};Object.defineProperties(na,en);rv=function(n){this._maxPtDist=new yf;this._minPtDist=new yf;this._geom=n||null};rv.prototype.filter=function(n){this._minPtDist.initialize();vh.computeDistance(this._geom,n,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};rv.prototype.getMaxPointDistance=function(){return this._maxPtDist};rv.prototype.interfaces_=function(){return[uh]};rv.prototype.getClass=function(){return rv};tl=function(n){this._maxPtDist=new yf;this._minPtDist=new yf;this._geom=n||null};tl.prototype.filter=function(n,t){if(t===0)return null;var r=n.getCoordinate(t-1),u=n.getCoordinate(t),f=new i((r.x+u.x)/2,(r.y+u.y)/2);this._minPtDist.initialize();vh.computeDistance(this._geom,f,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};tl.prototype.isDone=function(){return!1};tl.prototype.isGeometryChanged=function(){return!1};tl.prototype.getMaxPointDistance=function(){return this._maxPtDist};tl.prototype.interfaces_=function(){return[po]};tl.prototype.getClass=function(){return tl};rc=function(n){this._comps=n||null};rc.prototype.filter=function(n){n instanceof cu&&this._comps.add(n)};rc.prototype.interfaces_=function(){return[vs]};rc.prototype.getClass=function(){return rc};rc.getPolygons=function(){var i,n,t;return arguments.length===1?(i=arguments[0],rc.getPolygons(i,new e)):arguments.length===2?(n=arguments[0],t=arguments[1],n instanceof cu?t.add(n):n instanceof ie&&n.apply(new rc(t)),t):void 0};ku=function(){var n,t,i;this._lines=null;this._isForcedToLineString=!1;arguments.length===1?(n=arguments[0],this._lines=n):arguments.length===2&&(t=arguments[0],i=arguments[1],this._lines=t,this._isForcedToLineString=i)};ku.prototype.filter=function(n){if(this._isForcedToLineString&&n instanceof dh){var t=n.getFactory().createLineString(n.getCoordinateSequence());return this._lines.add(t),null}n instanceof wr&&this._lines.add(n)};ku.prototype.setForceToLineString=function(n){this._isForcedToLineString=n};ku.prototype.interfaces_=function(){return[bh]};ku.prototype.getClass=function(){return ku};ku.getGeometry=function(){var n,t,i;return arguments.length===1?(n=arguments[0],n.getFactory().buildGeometry(ku.getLines(n))):arguments.length===2?(t=arguments[0],i=arguments[1],t.getFactory().buildGeometry(ku.getLines(t,i))):void 0};ku.getLines=function(){var f,o,i,r,s,n,t,u,l;if(arguments.length===1)return f=arguments[0],ku.getLines(f,!1);if(arguments.length===2){if(k(arguments[0],eu)&&k(arguments[1],eu)){for(o=arguments[0],i=arguments[1],r=o.iterator();r.hasNext();)s=r.next(),ku.getLines(s,i);return i}if(arguments[0]instanceof b&&typeof arguments[1]=="boolean"){var v=arguments[0],y=arguments[1],h=new e;return v.apply(new ku(h,y)),h}if(arguments[0]instanceof b&&k(arguments[1],eu))return n=arguments[0],t=arguments[1],n instanceof wr?t.add(n):n.apply(new ku(t)),t}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&k(arguments[0],eu)&&k(arguments[1],eu)){var p=arguments[0],c=arguments[1],w=arguments[2];for(u=p.iterator();u.hasNext();)l=u.next(),ku.getLines(l,c,w);return c}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof b&&k(arguments[1],eu)){var d=arguments[0],a=arguments[1],g=arguments[2];return d.apply(new ku(a,g)),a}}};is=function(){if(this._boundaryRule=uo.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var n=arguments[0];if(n===null)throw new ar("Rule must be non-null");this._boundaryRule=n}};is.prototype.locateInternal=function(){var v=this,s,n,l,h,f,a,c,t,e,u;if(arguments[0]instanceof i&&arguments[1]instanceof cu){if((s=arguments[0],n=arguments[1],n.isEmpty())||(l=n.getExteriorRing(),h=this.locateInPolygonRing(s,l),h===r.EXTERIOR))return r.EXTERIOR;if(h===r.BOUNDARY)return r.BOUNDARY;for(f=0;f<n.getNumInteriorRing();f++){if(a=n.getInteriorRingN(f),c=v.locateInPolygonRing(s,a),c===r.INTERIOR)return r.EXTERIOR;if(c===r.BOUNDARY)return r.BOUNDARY}return r.INTERIOR}if(arguments[0]instanceof i&&arguments[1]instanceof wr)return(t=arguments[0],e=arguments[1],!e.getEnvelopeInternal().intersects(t))?r.EXTERIOR:(u=e.getCoordinates(),!e.isClosed()&&(t.equals(u[0])||t.equals(u[u.length-1])))?r.BOUNDARY:o.isOnLine(t,u)?r.INTERIOR:r.EXTERIOR;if(arguments[0]instanceof i&&arguments[1]instanceof ce){var y=arguments[0],p=arguments[1],w=p.getCoordinate();return w.equals2D(y)?r.INTERIOR:r.EXTERIOR}};is.prototype.locateInPolygonRing=function(n,t){return t.getEnvelopeInternal().intersects(n)?o.locatePointInRing(n,t.getCoordinates()):r.EXTERIOR};is.prototype.intersects=function(n,t){return this.locate(n,t)!==r.EXTERIOR};is.prototype.updateLocationInfo=function(n){n===r.INTERIOR&&(this._isIn=!0);n===r.BOUNDARY&&this._numBoundaries++};is.prototype.computeLocation=function(n,t){var i=this,f,r,h,e,u,c,o,s;if(t instanceof ce&&this.updateLocationInfo(this.locateInternal(n,t)),t instanceof wr)this.updateLocationInfo(this.locateInternal(n,t));else if(t instanceof cu)this.updateLocationInfo(this.locateInternal(n,t));else if(t instanceof ka)for(f=t,r=0;r<f.getNumGeometries();r++)h=f.getGeometryN(r),i.updateLocationInfo(i.locateInternal(n,h));else if(t instanceof gh)for(e=t,u=0;u<e.getNumGeometries();u++)c=e.getGeometryN(u),i.updateLocationInfo(i.locateInternal(n,c));else if(t instanceof ie)for(o=new ch(t);o.hasNext();)s=o.next(),s!==t&&i.computeLocation(n,s)};is.prototype.locate=function(n,t){return t.isEmpty()?r.EXTERIOR:t instanceof wr?this.locateInternal(n,t):t instanceof cu?this.locateInternal(n,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(n,t),this._boundaryRule.isInBoundary(this._numBoundaries))?r.BOUNDARY:this._numBoundaries>0||this._isIn?r.INTERIOR:r.EXTERIOR};is.prototype.interfaces_=function(){return[]};is.prototype.getClass=function(){return is};du=function du(){var n,t;if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2)n=arguments[0],t=arguments[1],du.call(this,n,du.INSIDE_AREA,t);else if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];this._component=i;this._segIndex=r;this._pt=u}};cft={INSIDE_AREA:{configurable:!0}};du.prototype.isInsideArea=function(){return this._segIndex===du.INSIDE_AREA};du.prototype.getCoordinate=function(){return this._pt};du.prototype.getGeometryComponent=function(){return this._component};du.prototype.getSegmentIndex=function(){return this._segIndex};du.prototype.interfaces_=function(){return[]};du.prototype.getClass=function(){return du};cft.INSIDE_AREA.get=function(){return-1};Object.defineProperties(du,cft);il=function(n){this._pts=n||null};il.prototype.filter=function(n){n instanceof ce&&this._pts.add(n)};il.prototype.interfaces_=function(){return[vs]};il.prototype.getClass=function(){return il};il.getPoints=function(){var t,n,i;return arguments.length===1?(t=arguments[0],t instanceof ce)?ns.singletonList(t):il.getPoints(t,new e):arguments.length===2?(n=arguments[0],i=arguments[1],n instanceof ce?i.add(n):n instanceof ie&&n.apply(new il(i)),i):void 0};uv=function(){this._locations=null;var n=arguments[0];this._locations=n};uv.prototype.filter=function(n){(n instanceof ce||n instanceof wr||n instanceof cu)&&this._locations.add(new du(n,0,n.getCoordinate()))};uv.prototype.interfaces_=function(){return[vs]};uv.prototype.getClass=function(){return uv};uv.getLocations=function(n){var t=new e;return n.apply(new uv(t)),t};gu=function(){var n,t;if(this._geom=null,this._terminateDistance=0,this._ptLocator=new is,this._minDistanceLocation=null,this._minDistance=it.MAX_VALUE,arguments.length===2)n=arguments[0],t=arguments[1],this._geom=[n,t],this._terminateDistance=0;else if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];this._geom=new Array(2).fill(null);this._geom[0]=i;this._geom[1]=r;this._terminateDistance=u}};gu.prototype.computeContainmentDistance=function(){var i=this,u,h,n,a,t;if(arguments.length===0){if(u=new Array(2).fill(null),this.computeContainmentDistance(0,u),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var f=arguments[0],e=arguments[1],o=1-f,s=rc.getPolygons(this._geom[f]);if(s.size()>0&&(h=uv.getLocations(this._geom[o]),this.computeContainmentDistance(h,s,e),this._minDistance<=this._terminateDistance))return this._minDistanceLocation[o]=e[0],this._minDistanceLocation[f]=e[1],null}else if(arguments.length===3)if(arguments[2]instanceof Array&&k(arguments[0],vo)&&k(arguments[1],vo)){var c=arguments[0],l=arguments[1],b=arguments[2];for(n=0;n<c.size();n++)for(a=c.get(n),t=0;t<l.size();t++)if(i.computeContainmentDistance(a,l.get(t),b),i._minDistance<=i._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof du&&arguments[1]instanceof cu){var v=arguments[0],y=arguments[1],p=arguments[2],w=v.getCoordinate();if(r.EXTERIOR!==this._ptLocator.locate(w,y))return this._minDistance=0,p[0]=v,p[1]=new du(y,w),null}};gu.prototype.computeMinDistanceLinesPoints=function(n,t,i){for(var e,r,o,u=this,f=0;f<n.size();f++)for(e=n.get(f),r=0;r<t.size();r++)if(o=t.get(r),u.computeMinDistance(e,o,i),u._minDistance<=u._terminateDistance)return null};gu.prototype.computeFacetDistance=function(){var n=new Array(2).fill(null),t=ku.getLines(this._geom[0]),i=ku.getLines(this._geom[1]),r=il.getPoints(this._geom[0]),u=il.getPoints(this._geom[1]);if((this.computeMinDistanceLines(t,i,n),this.updateMinDistance(n,!1),this._minDistance<=this._terminateDistance)||(n[0]=null,n[1]=null,this.computeMinDistanceLinesPoints(t,u,n),this.updateMinDistance(n,!1),this._minDistance<=this._terminateDistance)||(n[0]=null,n[1]=null,this.computeMinDistanceLinesPoints(i,r,n),this.updateMinDistance(n,!0),this._minDistance<=this._terminateDistance))return null;n[0]=null;n[1]=null;this.computeMinDistancePoints(r,u,n);this.updateMinDistance(n,!1)};gu.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};gu.prototype.updateMinDistance=function(n,t){if(n[0]===null)return null;t?(this._minDistanceLocation[0]=n[1],this._minDistanceLocation[1]=n[0]):(this._minDistanceLocation[0]=n[0],this._minDistanceLocation[1]=n[1])};gu.prototype.nearestPoints=function(){this.computeMinDistance();return[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]};gu.prototype.computeMinDistance=function(){var n=this,u,s,t,l,b,k,f,e,i,r,p;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3)if(arguments[2]instanceof Array&&arguments[0]instanceof wr&&arguments[1]instanceof ce){var h=arguments[0],c=arguments[1],w=arguments[2];if(h.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(u=h.getCoordinates(),s=c.getCoordinate(),t=0;t<u.length-1;t++)if(l=o.distancePointLine(s,u[t],u[t+1]),l<n._minDistance&&(n._minDistance=l,b=new a(u[t],u[t+1]),k=b.closestPoint(s),w[0]=new du(h,t,k),w[1]=new du(c,0,s)),n._minDistance<=n._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof wr&&arguments[1]instanceof wr){var v=arguments[0],y=arguments[1],d=arguments[2];if(v.getEnvelopeInternal().distance(y.getEnvelopeInternal())>this._minDistance)return null;for(f=v.getCoordinates(),e=y.getCoordinates(),i=0;i<f.length-1;i++)for(r=0;r<e.length-1;r++){if(p=o.distanceLineLine(f[i],f[i+1],e[r],e[r+1]),p<n._minDistance){n._minDistance=p;var nt=new a(f[i],f[i+1]),tt=new a(e[r],e[r+1]),g=nt.closestPoints(tt);d[0]=new du(v,i,g[0]);d[1]=new du(y,r,g[1])}if(n._minDistance<=n._terminateDistance)return null}}};gu.prototype.computeMinDistancePoints=function(n,t,i){for(var u,f,e,s,r=this,o=0;o<n.size();o++)for(u=n.get(o),f=0;f<t.size();f++)if(e=t.get(f),s=u.getCoordinate().distance(e.getCoordinate()),s<r._minDistance&&(r._minDistance=s,i[0]=new du(u,0,u.getCoordinate()),i[1]=new du(e,0,e.getCoordinate())),r._minDistance<=r._terminateDistance)return null};gu.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new ar("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};gu.prototype.computeMinDistanceLines=function(n,t,i){for(var e,r,o,u=this,f=0;f<n.size();f++)for(e=n.get(f),r=0;r<t.size();r++)if(o=t.get(r),u.computeMinDistance(e,o,i),u._minDistance<=u._terminateDistance)return null};gu.prototype.interfaces_=function(){return[]};gu.prototype.getClass=function(){return gu};gu.distance=function(n,t){var i=new gu(n,t);return i.distance()};gu.isWithinDistance=function(n,t,i){var r=new gu(n,t,i);return r.distance()<=i};gu.nearestPoints=function(n,t){var i=new gu(n,t);return i.nearestPoints()};of=function(){this._pt=[new i,new i];this._distance=it.NaN;this._isNull=!0};of.prototype.getCoordinates=function(){return this._pt};of.prototype.getCoordinate=function(n){return this._pt[n]};of.prototype.setMinimum=function(){var i,n,t,r;if(arguments.length===1)i=arguments[0],this.setMinimum(i._pt[0],i._pt[1]);else if(arguments.length===2){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r<this._distance&&this.initialize(n,t,r)}};of.prototype.initialize=function(){var n,t;if(arguments.length===0)this._isNull=!0;else if(arguments.length===2)n=arguments[0],t=arguments[1],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(t),this._distance=n.distance(t),this._isNull=!1;else if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];this._pt[0].setCoordinate(i);this._pt[1].setCoordinate(r);this._distance=u;this._isNull=!1}};of.prototype.toString=function(){return ls.toLineString(this._pt[0],this._pt[1])};of.prototype.getDistance=function(){return this._distance};of.prototype.setMaximum=function(){var i,n,t,r;if(arguments.length===1)i=arguments[0],this.setMaximum(i._pt[0],i._pt[1]);else if(arguments.length===2){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r>this._distance&&this.initialize(n,t,r)}};of.prototype.interfaces_=function(){return[]};of.prototype.getClass=function(){return of};ds=function(){};ds.prototype.interfaces_=function(){return[]};ds.prototype.getClass=function(){return ds};ds.computeDistance=function(){var t,v,r,h,e,w;if(arguments[2]instanceof of&&arguments[0]instanceof wr&&arguments[1]instanceof i){var d=arguments[0],c=arguments[1],g=arguments[2],l=new a,o=d.getCoordinates();for(t=0;t<o.length-1;t++)l.setCoordinates(o[t],o[t+1]),v=l.closestPoint(c),g.setMinimum(v,c)}else if(arguments[2]instanceof of&&arguments[0]instanceof cu&&arguments[1]instanceof i){var s=arguments[0],y=arguments[1],p=arguments[2];for(ds.computeDistance(s.getExteriorRing(),y,p),r=0;r<s.getNumInteriorRing();r++)ds.computeDistance(s.getInteriorRingN(r),y,p)}else if(arguments[2]instanceof of&&arguments[0]instanceof b&&arguments[1]instanceof i){var n=arguments[0],u=arguments[1],f=arguments[2];if(n instanceof wr)ds.computeDistance(n,u,f);else if(n instanceof cu)ds.computeDistance(n,u,f);else if(n instanceof ie)for(h=n,e=0;e<h.getNumGeometries();e++)w=h.getGeometryN(e),ds.computeDistance(w,u,f);else f.setMinimum(n.getCoordinate(),u)}else if(arguments[2]instanceof of&&arguments[0]instanceof a&&arguments[1]instanceof i){var nt=arguments[0],k=arguments[1],tt=arguments[2],it=nt.closestPoint(k);tt.setMinimum(it,k)}};so=function(){this._g0=null;this._g1=null;this._ptDist=new of;this._densifyFrac=0;var n=arguments[0],t=arguments[1];this._g0=n;this._g1=t};on={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};so.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};so.prototype.setDensifyFraction=function(n){if(n>1||n<=0)throw new ar("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=n};so.prototype.compute=function(n,t){this.computeOrientedDistance(n,t,this._ptDist);this.computeOrientedDistance(t,n,this._ptDist)};so.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};so.prototype.computeOrientedDistance=function(n,t,i){var u=new fv(t),r;n.apply(u);i.setMaximum(u.getMaxPointDistance());this._densifyFrac>0&&(r=new rl(t,this._densifyFrac),n.apply(r),i.setMaximum(r.getMaxPointDistance()))};so.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};so.prototype.interfaces_=function(){return[]};so.prototype.getClass=function(){return so};so.distance=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1],r=new so(t,i);return r.distance()}if(arguments.length===3){var u=arguments[0],f=arguments[1],e=arguments[2],n=new so(u,f);return n.setDensifyFraction(e),n.distance()}};on.MaxPointDistanceFilter.get=function(){return fv};on.MaxDensifiedByFractionDistanceFilter.get=function(){return rl};Object.defineProperties(so,on);fv=function(){this._maxPtDist=new of;this._minPtDist=new of;this._euclideanDist=new ds;this._geom=null;var n=arguments[0];this._geom=n};fv.prototype.filter=function(n){this._minPtDist.initialize();ds.computeDistance(this._geom,n,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};fv.prototype.getMaxPointDistance=function(){return this._maxPtDist};fv.prototype.interfaces_=function(){return[uh]};fv.prototype.getClass=function(){return fv};rl=function(){this._maxPtDist=new of;this._minPtDist=new of;this._geom=null;this._numSubSegs=0;var n=arguments[0],t=arguments[1];this._geom=n;this._numSubSegs=Math.trunc(Math.round(1/t))};rl.prototype.filter=function(n,t){var r=this,u;if(t===0)return null;var f=n.getCoordinate(t-1),e=n.getCoordinate(t),o=(e.x-f.x)/this._numSubSegs,s=(e.y-f.y)/this._numSubSegs;for(u=0;u<this._numSubSegs;u++){var h=f.x+u*o,c=f.y+u*s,l=new i(h,c);r._minPtDist.initialize();ds.computeDistance(r._geom,l,r._minPtDist);r._maxPtDist.setMaximum(r._minPtDist)}};rl.prototype.isDone=function(){return!1};rl.prototype.isGeometryChanged=function(){return!1};rl.prototype.getMaxPointDistance=function(){return this._maxPtDist};rl.prototype.interfaces_=function(){return[po]};rl.prototype.getClass=function(){return rl};ye=function(n,t,i){this._minValidDistance=null;this._maxValidDistance=null;this._minDistanceFound=null;this._maxDistanceFound=null;this._isValid=!0;this._errMsg=null;this._errorLocation=null;this._errorIndicator=null;this._input=n||null;this._bufDistance=t||null;this._result=i||null};sn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ye.prototype.checkMaximumDistance=function(n,t,i){var u=new so(t,n),r;u.setDensifyFraction(.25);this._maxDistanceFound=u.orientedDistance();this._maxDistanceFound>i&&(this._isValid=!1,r=u.getCoordinates(),this._errorLocation=r[1],this._errorIndicator=n.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+ls.toLineString(r[0],r[1])+")")};ye.prototype.isValid=function(){var n=Math.abs(this._bufDistance),t=ye.MAX_DISTANCE_DIFF_FRAC*n;return(this._minValidDistance=n-t,this._maxValidDistance=n+t,this._input.isEmpty()||this._result.isEmpty())?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ye.VERBOSE&&uf.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};ye.prototype.checkNegativeValid=function(){if(!(this._input instanceof cu||this._input instanceof gh||this._input instanceof ie))return null;var n=this.getPolygonLines(this._input);if(this.checkMinimumDistance(n,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(n,this._result,this._maxValidDistance)};ye.prototype.getErrorIndicator=function(){return this._errorIndicator};ye.prototype.checkMinimumDistance=function(n,t,i){var u=new gu(n,t,i),r;this._minDistanceFound=u.distance();this._minDistanceFound<i&&(this._isValid=!1,r=u.nearestPoints(),this._errorLocation=u.nearestPoints()[1],this._errorIndicator=n.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+ls.toLineString(r[0],r[1])+" )")};ye.prototype.checkPositiveValid=function(){var n=this._result.getBoundary();if(this.checkMinimumDistance(this._input,n,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,n,this._maxValidDistance)};ye.prototype.getErrorLocation=function(){return this._errorLocation};ye.prototype.getPolygonLines=function(n){for(var r,t=new e,u=new ku(t),f=rc.getPolygons(n),i=f.iterator();i.hasNext();)r=i.next(),r.apply(u);return n.getFactory().buildGeometry(t)};ye.prototype.getErrorMessage=function(){return this._errMsg};ye.prototype.interfaces_=function(){return[]};ye.prototype.getClass=function(){return ye};sn.VERBOSE.get=function(){return!1};sn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012};Object.defineProperties(ye,sn);nf=function(n,t,i){this._isValid=!0;this._errorMsg=null;this._errorLocation=null;this._errorIndicator=null;this._input=n||null;this._distance=t||null;this._result=i||null};hn={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};nf.prototype.isValid=function(){return(this.checkPolygonal(),!this._isValid)?this._isValid:(this.checkExpectedEmpty(),!this._isValid)?this._isValid:(this.checkEnvelope(),!this._isValid)?this._isValid:(this.checkArea(),!this._isValid)?this._isValid:(this.checkDistance(),this._isValid)};nf.prototype.checkEnvelope=function(){var n,i,t;if(this._distance<0)return null;n=this._distance*nf.MAX_ENV_DIFF_FRAC;n===0&&(n=.001);i=new l(this._input.getEnvelopeInternal());i.expandBy(this._distance);t=new l(this._result.getEnvelopeInternal());t.expandBy(n);t.contains(i)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(t));this.report("Envelope")};nf.prototype.checkDistance=function(){var n=new ye(this._input,this._distance,this._result);n.isValid()||(this._isValid=!1,this._errorMsg=n.getErrorMessage(),this._errorLocation=n.getErrorLocation(),this._errorIndicator=n.getErrorIndicator());this.report("Distance")};nf.prototype.checkArea=function(){var n=this._input.getArea(),t=this._result.getArea();this._distance>0&&n>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result);this._distance<0&&n<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result);this.report("Area")};nf.prototype.checkPolygonal=function(){this._result instanceof cu||this._result instanceof gh||(this._isValid=!1);this._errorMsg="Result is not polygonal";this._errorIndicator=this._result;this.report("Polygonal")};nf.prototype.getErrorIndicator=function(){return this._errorIndicator};nf.prototype.getErrorLocation=function(){return this._errorLocation};nf.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result);this.report("ExpectedEmpty")};nf.prototype.report=function(n){if(!nf.VERBOSE)return null;uf.out.println("Check "+n+": "+(this._isValid?"passed":"FAILED"))};nf.prototype.getErrorMessage=function(){return this._errorMsg};nf.prototype.interfaces_=function(){return[]};nf.prototype.getClass=function(){return nf};nf.isValidMsg=function(n,t,i){var r=new nf(n,t,i);return r.isValid()?null:r.getErrorMessage()};nf.isValid=function(n,t,i){var r=new nf(n,t,i);return r.isValid()?!0:!1};hn.VERBOSE.get=function(){return!1};hn.MAX_ENV_DIFF_FRAC.get=function(){return.012};Object.defineProperties(nf,hn);gs=function(){this._pts=null;this._data=null;var n=arguments[0],t=arguments[1];this._pts=n;this._data=t};gs.prototype.getCoordinates=function(){return this._pts};gs.prototype.size=function(){return this._pts.length};gs.prototype.getCoordinate=function(n){return this._pts[n]};gs.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};gs.prototype.getSegmentOctant=function(n){return n===this._pts.length-1?-1:ga.octant(this.getCoordinate(n),this.getCoordinate(n+1))};gs.prototype.setData=function(n){this._data=n};gs.prototype.getData=function(){return this._data};gs.prototype.toString=function(){return ls.toLineString(new dr(this._pts))};gs.prototype.interfaces_=function(){return[hh]};gs.prototype.getClass=function(){return gs};vu=function(){this._findAllIntersections=!1;this._isCheckEndSegmentsOnly=!1;this._li=null;this._interiorIntersection=null;this._intSegments=null;this._intersections=new e;this._intersectionCount=0;this._keepIntersections=!0;var n=arguments[0];this._li=n;this._interiorIntersection=null};vu.prototype.getInteriorIntersection=function(){return this._interiorIntersection};vu.prototype.setCheckEndSegmentsOnly=function(n){this._isCheckEndSegmentsOnly=n};vu.prototype.getIntersectionSegments=function(){return this._intSegments};vu.prototype.count=function(){return this._intersectionCount};vu.prototype.getIntersections=function(){return this._intersections};vu.prototype.setFindAllIntersections=function(n){this._findAllIntersections=n};vu.prototype.setKeepIntersections=function(n){this._keepIntersections=n};vu.prototype.processIntersections=function(n,t,i,r){var u;if(!this._findAllIntersections&&this.hasIntersection()||n===i&&t===r||this._isCheckEndSegmentsOnly&&(u=this.isEndSegment(n,t)||this.isEndSegment(i,r),!u))return null;var f=n.getCoordinates()[t],e=n.getCoordinates()[t+1],o=i.getCoordinates()[r],s=i.getCoordinates()[r+1];this._li.computeIntersection(f,e,o,s);this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=f,this._intSegments[1]=e,this._intSegments[2]=o,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};vu.prototype.isEndSegment=function(n,t){return t===0?!0:t>=n.size()-2?!0:!1};vu.prototype.hasIntersection=function(){return this._interiorIntersection!==null};vu.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};vu.prototype.interfaces_=function(){return[dl]};vu.prototype.getClass=function(){return vu};vu.createAllIntersectionsFinder=function(n){var t=new vu(n);return t.setFindAllIntersections(!0),t};vu.createAnyIntersectionFinder=function(n){return new vu(n)};vu.createIntersectionCounter=function(n){var t=new vu(n);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};rs=function(){this._li=new pl;this._segStrings=null;this._findAllIntersections=!1;this._segInt=null;this._isValid=!0;var n=arguments[0];this._segStrings=n};rs.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};rs.prototype.getIntersections=function(){return this._segInt.getIntersections()};rs.prototype.isValid=function(){return this.execute(),this._isValid};rs.prototype.setFindAllIntersections=function(n){this._findAllIntersections=n};rs.prototype.checkInteriorIntersections=function(){this._isValid=!0;this._segInt=new vu(this._li);this._segInt.setFindAllIntersections(this._findAllIntersections);var n=new ift;return n.setSegmentIntersector(this._segInt),n.computeNodes(this._segStrings),this._segInt.hasIntersection()?(this._isValid=!1,null):void 0};rs.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new nc(this.getErrorMessage(),this._segInt.getInteriorIntersection());};rs.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var n=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+ls.toLineString(n[0],n[1])+" and "+ls.toLineString(n[2],n[3])};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};rs.computeIntersections=function(n){var t=new rs(n);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};ul=function ul(){this._nv=null;var n=arguments[0];this._nv=new rs(ul.toSegmentStrings(n))};ul.prototype.checkValid=function(){this._nv.checkValid()};ul.prototype.interfaces_=function(){return[]};ul.prototype.getClass=function(){return ul};ul.toSegmentStrings=function(n){for(var t,i=new e,r=n.iterator();r.hasNext();)t=r.next(),i.add(new gs(t.getCoordinates(),t));return i};ul.checkValid=function(n){var t=new ul(n);t.checkValid()};ev=function(n){this._mapOp=n};ev.prototype.map=function(n){for(var i,u=this,r=new e,t=0;t<n.getNumGeometries();t++)i=u._mapOp.map(n.getGeometryN(t)),i.isEmpty()||r.add(i);return n.getFactory().createGeometryCollection(ut.toGeometryArray(r))};ev.prototype.interfaces_=function(){return[]};ev.prototype.getClass=function(){return ev};ev.map=function(n,t){var i=new ev(t);return i.map(n)};nh=function(){this._op=null;this._geometryFactory=null;this._ptLocator=null;this._lineEdgesList=new e;this._resultLineList=new e;var n=arguments[0],t=arguments[1],i=arguments[2];this._op=n;this._geometryFactory=t;this._ptLocator=i};nh.prototype.collectLines=function(n){for(var i,t=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();)i=r.next(),t.collectLineEdge(i,n,t._lineEdgesList),t.collectBoundaryTouchEdge(i,n,t._lineEdgesList)};nh.prototype.labelIsolatedLine=function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._op.getArgGeometry(t));n.getLabel().setLocation(t,i)};nh.prototype.build=function(n){return this.findCoveredLineEdges(),this.collectLines(n),this.buildLines(n),this._resultLineList};nh.prototype.collectLineEdge=function(n,t,i){var u=n.getLabel(),r=n.getEdge();n.isLineEdge()&&(n.isVisited()||!tt.isResultOfOp(u,t)||r.isCovered()||(i.add(r),n.setVisitedEdge(!0)))};nh.prototype.findCoveredLineEdges=function(){for(var u,t,n,i,f,e=this,r=this._op.getGraph().getNodes().iterator();r.hasNext();)u=r.next(),u.getEdges().findCoveredLineEdges();for(t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();)n=t.next(),i=n.getEdge(),n.isLineEdge()&&!i.isCoveredSet()&&(f=e._op.isCoveredByA(n.getCoordinate()),i.setCovered(f))};nh.prototype.labelIsolatedLines=function(n){for(var t,u,i=this,r=n.iterator();r.hasNext();)t=r.next(),u=t.getLabel(),t.isIsolated()&&(u.isNull(0)?i.labelIsolatedLine(t,0):i.labelIsolatedLine(t,1))};nh.prototype.buildLines=function(){for(var n,r,t=this,i=this._lineEdgesList.iterator();i.hasNext();)n=i.next(),r=t._geometryFactory.createLineString(n.getCoordinates()),t._resultLineList.add(r),n.setInResult(!0)};nh.prototype.collectBoundaryTouchEdge=function(n,t,i){var r=n.getLabel();if(n.isLineEdge()||n.isVisited()||n.isInteriorAreaEdge()||n.getEdge().isInResult())return null;rt.isTrue(!(n.isInResult()||n.getSym().isInResult())||!n.getEdge().isInResult());tt.isResultOfOp(r,t)&&t===tt.INTERSECTION&&(i.add(n.getEdge()),n.setVisitedEdge(!0))};nh.prototype.interfaces_=function(){return[]};nh.prototype.getClass=function(){return nh};ov=function(){this._op=null;this._geometryFactory=null;this._resultPointList=new e;var n=arguments[0],t=arguments[1];this._op=n;this._geometryFactory=t};ov.prototype.filterCoveredNodeToPoint=function(n){var t=n.getCoordinate(),i;this._op.isCoveredByLA(t)||(i=this._geometryFactory.createPoint(t),this._resultPointList.add(i))};ov.prototype.extractNonCoveredResultNodes=function(n){for(var t,r,u=this,i=this._op.getGraph().getNodes().iterator();i.hasNext();)(t=i.next(),t.isInResult())||t.isIncidentEdgeInResult()||(t.getEdges().getDegree()===0||n===tt.INTERSECTION)&&(r=t.getLabel(),tt.isResultOfOp(r,n)&&u.filterCoveredNodeToPoint(t))};ov.prototype.build=function(n){return this.extractNonCoveredResultNodes(n),this._resultPointList};ov.prototype.interfaces_=function(){return[]};ov.prototype.getClass=function(){return ov};fe=function(){this._inputGeom=null;this._factory=null;this._pruneEmptyGeometry=!0;this._preserveGeometryCollectionType=!0;this._preserveCollections=!1;this._preserveType=!1};fe.prototype.transformPoint=function(n){return this._factory.createPoint(this.transformCoordinates(n.getCoordinateSequence(),n))};fe.prototype.transformPolygon=function(n){var s=this,o=!0,t=this.transformLinearRing(n.getExteriorRing(),n),r,u,i,f;for(t!==null&&t instanceof dh&&!t.isEmpty()||(o=!1),r=new e,u=0;u<n.getNumInteriorRing();u++)(i=s.transformLinearRing(n.getInteriorRingN(u),n),i===null||i.isEmpty())||(i instanceof dh||(o=!1),r.add(i));return o?this._factory.createPolygon(t,r.toArray([])):(f=new e,t!==null&&f.add(t),f.addAll(r),this._factory.buildGeometry(f))};fe.prototype.createCoordinateSequence=function(n){return this._factory.getCoordinateSequenceFactory().create(n)};fe.prototype.getInputGeometry=function(){return this._inputGeom};fe.prototype.transformMultiLineString=function(n){for(var t,u=this,r=new e,i=0;i<n.getNumGeometries();i++)(t=u.transformLineString(n.getGeometryN(i),n),t!==null)&&(t.isEmpty()||r.add(t));return this._factory.buildGeometry(r)};fe.prototype.transformCoordinates=function(n){return this.copy(n)};fe.prototype.transformLineString=function(n){return this._factory.createLineString(this.transformCoordinates(n.getCoordinateSequence(),n))};fe.prototype.transformMultiPoint=function(n){for(var t,u=this,r=new e,i=0;i<n.getNumGeometries();i++)(t=u.transformPoint(n.getGeometryN(i),n),t!==null)&&(t.isEmpty()||r.add(t));return this._factory.buildGeometry(r)};fe.prototype.transformMultiPolygon=function(n){for(var t,u=this,r=new e,i=0;i<n.getNumGeometries();i++)(t=u.transformPolygon(n.getGeometryN(i),n),t!==null)&&(t.isEmpty()||r.add(t));return this._factory.buildGeometry(r)};fe.prototype.copy=function(n){return n.copy()};fe.prototype.transformGeometryCollection=function(n){for(var t,u=this,i=new e,r=0;r<n.getNumGeometries();r++)(t=u.transform(n.getGeometryN(r)),t!==null)&&(u._pruneEmptyGeometry&&t.isEmpty()||i.add(t));return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ut.toGeometryArray(i)):this._factory.buildGeometry(i)};fe.prototype.transform=function(n){if(this._inputGeom=n,this._factory=n.getFactory(),n instanceof ce)return this.transformPoint(n,null);if(n instanceof bp)return this.transformMultiPoint(n,null);if(n instanceof dh)return this.transformLinearRing(n,null);if(n instanceof wr)return this.transformLineString(n,null);if(n instanceof ka)return this.transformMultiLineString(n,null);if(n instanceof cu)return this.transformPolygon(n,null);if(n instanceof gh)return this.transformMultiPolygon(n,null);if(n instanceof ie)return this.transformGeometryCollection(n,null);throw new ar("Unknown Geometry subtype: "+n.getClass().getName());};fe.prototype.transformLinearRing=function(n){var t=this.transformCoordinates(n.getCoordinateSequence(),n),i;return t===null?this._factory.createLinearRing(null):(i=t.size(),i>0&&i<4&&!this._preserveType)?this._factory.createLineString(t):this._factory.createLinearRing(t)};fe.prototype.interfaces_=function(){return[]};fe.prototype.getClass=function(){return fe};us=function us(){var t,i,n,r;this._snapTolerance=0;this._srcPts=null;this._seg=new a;this._allowSnappingToSourceVertices=!1;this._isClosed=!1;arguments[0]instanceof wr&&typeof arguments[1]=="number"?(t=arguments[0],i=arguments[1],us.call(this,t.getCoordinates(),i)):arguments[0]instanceof Array&&typeof arguments[1]=="number"&&(n=arguments[0],r=arguments[1],this._srcPts=n,this._isClosed=us.isClosed(n),this._snapTolerance=r)};us.prototype.snapVertices=function(n,t){for(var e,u,f=this,o=this._isClosed?n.size()-1:n.size(),r=0;r<o;r++)e=n.get(r),u=f.findSnapForVertex(e,t),u!==null&&(n.set(r,new i(u)),r===0&&f._isClosed&&n.set(n.size()-1,new i(u)))};us.prototype.findSnapForVertex=function(n,t){for(var r=this,i=0;i<t.length;i++){if(n.equals2D(t[i]))return null;if(n.distance(t[i])<r._snapTolerance)return t[i]}return null};us.prototype.snapTo=function(n){var t=new uk(this._srcPts);return this.snapVertices(t,n),this.snapSegments(t,n),t.toCoordinateArray()};us.prototype.snapSegments=function(n,t){var o=this,u,r,f,e;if(t.length===0)return null;for(u=t.length,t[0].equals2D(t[t.length-1])&&(u=t.length-1),r=0;r<u;r++)f=t[r],e=o.findSegmentIndexToSnap(f,n),e>=0&&n.add(e+1,new i(f),!1)};us.prototype.findSegmentIndexToSnap=function(n,t){for(var u,i=this,f=it.MAX_VALUE,e=-1,r=0;r<t.size()-1;r++){if(i._seg.p0=t.get(r),i._seg.p1=t.get(r+1),i._seg.p0.equals2D(n)||i._seg.p1.equals2D(n))if(i._allowSnappingToSourceVertices)continue;else return-1;u=i._seg.distance(n);u<i._snapTolerance&&u<f&&(f=u,e=r)}return e};us.prototype.setAllowSnappingToSourceVertices=function(n){this._allowSnappingToSourceVertices=n};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};us.isClosed=function(n){return n.length<=1?!1:n[0].equals2D(n[n.length-1])};nu=function(n){this._srcGeom=n||null};lft={SNAP_PRECISION_FACTOR:{configurable:!0}};nu.prototype.snapTo=function(n,t){var i=this.extractTargetCoordinates(n),r=new aft(t,i);return r.transform(this._srcGeom)};nu.prototype.snapToSelf=function(n,t){var u=this.extractTargetCoordinates(this._srcGeom),f=new aft(n,u,!0),r=f.transform(this._srcGeom),i=r;return t&&k(i,pc)&&(i=r.buffer(0)),i};nu.prototype.computeSnapTolerance=function(n){var t=this.computeMinimumSegmentLength(n);return t/10};nu.prototype.extractTargetCoordinates=function(n){for(var i=new fh,r=n.getCoordinates(),t=0;t<r.length;t++)i.add(r[t]);return i.toArray(new Array(0).fill(null))};nu.prototype.computeMinimumSegmentLength=function(n){for(var r,i=it.MAX_VALUE,t=0;t<n.length-1;t++)r=n[t].distance(n[t+1]),r<i&&(i=r);return i};nu.prototype.interfaces_=function(){return[]};nu.prototype.getClass=function(){return nu};nu.snap=function(n,t,i){var r=new Array(2).fill(null),f=new nu(n),u;return r[0]=f.snapTo(t,i),u=new nu(t),r[1]=u.snapTo(r[0],i),r};nu.computeOverlaySnapTolerance=function(){var t,u,f;if(arguments.length===1){var i=arguments[0],n=nu.computeSizeBasedSnapTolerance(i),r=i.getPrecisionModel();return r.getType()===ht.FIXED&&(t=2/r.getScale()/1.415,t>n&&(n=t)),n}if(arguments.length===2)return u=arguments[0],f=arguments[1],Math.min(nu.computeOverlaySnapTolerance(u),nu.computeOverlaySnapTolerance(f))};nu.computeSizeBasedSnapTolerance=function(n){var t=n.getEnvelopeInternal(),i=Math.min(t.getHeight(),t.getWidth());return i*nu.SNAP_PRECISION_FACTOR};nu.snapToSelf=function(n,t,i){var r=new nu(n);return r.snapToSelf(t,i)};lft.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(nu,lft);aft=function(n){function t(t,i,r){n.call(this);this._snapTolerance=t||null;this._snapPts=i||null;this._isSelfSnap=r!==undefined?r:!1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,t){var i=new us(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(t)},t.prototype.transformCoordinates=function(n){var t=n.toCoordinateArray(),i=this.snapLine(t,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(fe);pf=function(){this._isFirst=!0;this._commonMantissaBitsCount=53;this._commonBits=0;this._commonSignExp=null};pf.prototype.getCommon=function(){return it.longBitsToDouble(this._commonBits)};pf.prototype.add=function(n){var t=it.doubleToLongBits(n),i;if(this._isFirst)return this._commonBits=t,this._commonSignExp=pf.signExpBits(this._commonBits),this._isFirst=!1,null;if(i=pf.signExpBits(t),i!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=pf.numCommonMostSigMantissaBits(this._commonBits,t);this._commonBits=pf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};pf.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],r=it.longBitsToDouble(t),u=it.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+u,n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+r+" ]"}};pf.prototype.interfaces_=function(){return[]};pf.prototype.getClass=function(){return pf};pf.getBit=function(n,t){var i=1<<t;return(n&i)!=0?1:0};pf.signExpBits=function(n){return n>>52};pf.zeroLowerBits=function(n,t){var i=(1<<t)-1,r=~i;return n&r};pf.numCommonMostSigMantissaBits=function(n,t){for(var r=0,i=52;i>=0;i--){if(pf.getBit(n,i)!==pf.getBit(t,i))return r;r++}return 52};fl=function(){this._commonCoord=null;this._ccFilter=new sv};cn={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};fl.prototype.addCommonBits=function(n){var t=new el(this._commonCoord);n.apply(t);n.geometryChanged()};fl.prototype.removeCommonBits=function(n){var t,r;return this._commonCoord.x===0&&this._commonCoord.y===0?n:(t=new i(this._commonCoord),t.x=-t.x,t.y=-t.y,r=new el(t),n.apply(r),n.geometryChanged(),n)};fl.prototype.getCommonCoordinate=function(){return this._commonCoord};fl.prototype.add=function(n){n.apply(this._ccFilter);this._commonCoord=this._ccFilter.getCommonCoordinate()};fl.prototype.interfaces_=function(){return[]};fl.prototype.getClass=function(){return fl};cn.CommonCoordinateFilter.get=function(){return sv};cn.Translater.get=function(){return el};Object.defineProperties(fl,cn);sv=function(){this._commonBitsX=new pf;this._commonBitsY=new pf};sv.prototype.filter=function(n){this._commonBitsX.add(n.x);this._commonBitsY.add(n.y)};sv.prototype.getCommonCoordinate=function(){return new i(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};sv.prototype.interfaces_=function(){return[uh]};sv.prototype.getClass=function(){return sv};el=function(){this.trans=null;var n=arguments[0];this.trans=n};el.prototype.filter=function(n,t){var i=n.getOrdinate(t,0)+this.trans.x,r=n.getOrdinate(t,1)+this.trans.y;n.setOrdinate(t,0,i);n.setOrdinate(t,1,r)};el.prototype.isDone=function(){return!1};el.prototype.isGeometryChanged=function(){return!0};el.prototype.interfaces_=function(){return[po]};el.prototype.getClass=function(){return el};yu=function(n,t){this._geom=new Array(2).fill(null);this._snapTolerance=null;this._cbr=null;this._geom[0]=n;this._geom[1]=t;this.computeSnapTolerance()};yu.prototype.selfSnap=function(n){var t=new nu(n);return t.snapTo(n,this._snapTolerance)};yu.prototype.removeCommonBits=function(n){this._cbr=new fl;this._cbr.add(n[0]);this._cbr.add(n[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(n[0].copy()),t[1]=this._cbr.removeCommonBits(n[1].copy()),t};yu.prototype.prepareResult=function(n){return this._cbr.addCommonBits(n),n};yu.prototype.getResultGeometry=function(n){var t=this.snap(this._geom),i=tt.overlayOp(t[0],t[1],n);return this.prepareResult(i)};yu.prototype.checkValid=function(n){n.isValid()||uf.out.println("Snapped geometry is invalid")};yu.prototype.computeSnapTolerance=function(){this._snapTolerance=nu.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};yu.prototype.snap=function(n){var t=this.removeCommonBits(n);return nu.snap(t[0],t[1],this._snapTolerance)};yu.prototype.interfaces_=function(){return[]};yu.prototype.getClass=function(){return yu};yu.overlayOp=function(n,t,i){var r=new yu(n,t);return r.getResultGeometry(i)};yu.union=function(n,t){return yu.overlayOp(n,t,tt.UNION)};yu.intersection=function(n,t){return yu.overlayOp(n,t,tt.INTERSECTION)};yu.symDifference=function(n,t){return yu.overlayOp(n,t,tt.SYMDIFFERENCE)};yu.difference=function(n,t){return yu.overlayOp(n,t,tt.DIFFERENCE)};wf=function(n,t){this._geom=new Array(2).fill(null);this._geom[0]=n;this._geom[1]=t};wf.prototype.getResultGeometry=function(n){var i=null,r=!1,u=null,f;try{i=tt.overlayOp(this._geom[0],this._geom[1],n);f=!0;f&&(r=!0)}catch(t){if(t instanceof ac)u=t;else throw t;}if(!r)try{i=yu.overlayOp(this._geom[0],this._geom[1],n)}catch(t){if(t instanceof ac)throw u;else throw t;}return i};wf.prototype.interfaces_=function(){return[]};wf.prototype.getClass=function(){return wf};wf.overlayOp=function(n,t,i){var r=new wf(n,t);return r.getResultGeometry(i)};wf.union=function(n,t){return wf.overlayOp(n,t,tt.UNION)};wf.intersection=function(n,t){return wf.overlayOp(n,t,tt.INTERSECTION)};wf.symDifference=function(n,t){return wf.overlayOp(n,t,tt.SYMDIFFERENCE)};wf.difference=function(n,t){return wf.overlayOp(n,t,tt.DIFFERENCE)};hw=function(){this.mce=null;this.chainIndex=null;var n=arguments[0],t=arguments[1];this.mce=n;this.chainIndex=t};hw.prototype.computeIntersections=function(n,t){this.mce.computeIntersectsForChain(this.chainIndex,n.mce,n.chainIndex,t)};hw.prototype.interfaces_=function(){return[]};hw.prototype.getClass=function(){return hw};bf=function bf(){var n,t;if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2)n=arguments[0],t=arguments[1],this._eventType=bf.DELETE,this._xValue=n,this._insertEvent=t;else if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];this._eventType=bf.INSERT;this._label=i;this._xValue=r;this._obj=u}};ln={INSERT:{configurable:!0},DELETE:{configurable:!0}};bf.prototype.isDelete=function(){return this._eventType===bf.DELETE};bf.prototype.setDeleteEventIndex=function(n){this._deleteEventIndex=n};bf.prototype.getObject=function(){return this._obj};bf.prototype.compareTo=function(n){var t=n;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};bf.prototype.getInsertEvent=function(){return this._insertEvent};bf.prototype.isInsert=function(){return this._eventType===bf.INSERT};bf.prototype.isSameLabel=function(n){return this._label===null?!1:this._label===n._label};bf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};bf.prototype.interfaces_=function(){return[co]};bf.prototype.getClass=function(){return bf};ln.INSERT.get=function(){return 1};ln.DELETE.get=function(){return 2};Object.defineProperties(bf,ln);yk=function(){};yk.prototype.interfaces_=function(){return[]};yk.prototype.getClass=function(){return yk};tf=function(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._properIntersectionPoint=null;this._li=null;this._includeProper=null;this._recordIsolated=null;this._isSelfIntersection=null;this._numIntersections=0;this.numTests=0;this._bdyNodes=null;this._isDone=!1;this._isDoneWhenProperInt=!1;var n=arguments[0],t=arguments[1],i=arguments[2];this._li=n;this._includeProper=t;this._recordIsolated=i};tf.prototype.isTrivialIntersection=function(n,t,i,r){if(n===i&&this._li.getIntersectionNum()===1){if(tf.isAdjacentSegments(t,r))return!0;if(n.isClosed()){var u=n.getNumPoints()-1;if(t===0&&r===u||r===0&&t===u)return!0}}return!1};tf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};tf.prototype.setIsDoneIfProperInt=function(n){this._isDoneWhenProperInt=n};tf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};tf.prototype.isBoundaryPointInternal=function(n,t){for(var r,u,i=t.iterator();i.hasNext();)if(r=i.next(),u=r.getCoordinate(),n.isIntersection(u))return!0;return!1};tf.prototype.hasProperIntersection=function(){return this._hasProper};tf.prototype.hasIntersection=function(){return this._hasIntersection};tf.prototype.isDone=function(){return this._isDone};tf.prototype.isBoundaryPoint=function(n,t){return t===null?!1:this.isBoundaryPointInternal(n,t[0])?!0:this.isBoundaryPointInternal(n,t[1])?!0:!1};tf.prototype.setBoundaryNodes=function(n,t){this._bdyNodes=new Array(2).fill(null);this._bdyNodes[0]=n;this._bdyNodes[1]=t};tf.prototype.addIntersections=function(n,t,i,r){if(n===i&&t===r)return null;this.numTests++;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&(this._recordIsolated&&(n.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(n,t,i,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(n.addIntersections(this._li,t,0),i.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};tf.prototype.interfaces_=function(){return[]};tf.prototype.getClass=function(){return tf};tf.isAdjacentSegments=function(n,t){return Math.abs(n-t)===1};var psi=function(n){function t(){n.call(this);this.events=new e;this.nOverlaps=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var i=this,n,t;for(ns.sort(this.events),n=0;n<this.events.size();n++)t=i.events.get(n),t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(n)},t.prototype.computeIntersections=function(){var r=this,i,n,t;if(arguments.length===1){for(i=arguments[0],this.nOverlaps=0,this.prepareEvents(),n=0;n<this.events.size();n++)if(t=r.events.get(n),t.isInsert()&&r.processOverlaps(n,t.getDeleteEventIndex(),t,i),i.isDone())break}else if(arguments.length===3)if(arguments[2]instanceof tf&&k(arguments[0],vo)&&k(arguments[1],vo)){var u=arguments[0],f=arguments[1],o=arguments[2];this.addEdges(u,u);this.addEdges(f,f);this.computeIntersections(o)}else if(typeof arguments[2]=="boolean"&&k(arguments[0],vo)&&arguments[1]instanceof tf){var e=arguments[0],s=arguments[1],h=arguments[2];h?this.addEdges(e,null):this.addEdges(e);this.computeIntersections(s)}},t.prototype.addEdge=function(n,t){for(var e,u,f=this,r=n.getMonotoneChainEdge(),o=r.getStartIndexes(),i=0;i<o.length-1;i++)e=new hw(r,i),u=new bf(t,r.getMinX(i),e),f.events.add(u),f.events.add(new bf(r.getMaxX(i),u))},t.prototype.processOverlaps=function(n,t,i,r){for(var u,o,e=this,s=i.getObject(),f=n;f<t;f++)u=e.events.get(f),u.isInsert()&&(o=u.getObject(),i.isSameLabel(u)||(s.computeIntersections(o,r),e.nOverlaps++))},t.prototype.addEdges=function(){var r=this,u,n,t,f,e,i,o;if(arguments.length===1)for(u=arguments[0],n=u.iterator();n.hasNext();)t=n.next(),r.addEdge(t,t);else if(arguments.length===2)for(f=arguments[0],e=arguments[1],i=f.iterator();i.hasNext();)o=i.next(),r.addEdge(o,e)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(yk),uc=function(){this._min=it.POSITIVE_INFINITY;this._max=it.NEGATIVE_INFINITY},iyt={NodeComparator:{configurable:!0}};uc.prototype.getMin=function(){return this._min};uc.prototype.intersects=function(n,t){return this._min>t||this._max<n?!1:!0};uc.prototype.getMax=function(){return this._max};uc.prototype.toString=function(){return ls.toLineString(new i(this._min,0),new i(this._max,0))};uc.prototype.interfaces_=function(){return[]};uc.prototype.getClass=function(){return uc};iyt.NodeComparator.get=function(){return cw};Object.defineProperties(uc,iyt);cw=function(){};cw.prototype.compare=function(n,t){var i=n,r=t,u=(i._min+i._max)/2,f=(r._min+r._max)/2;return u<f?-1:u>f?1:0};cw.prototype.interfaces_=function(){return[op]};cw.prototype.getClass=function(){return cw};var wsi=function(n){function t(){n.call(this);this._item=null;var t=arguments[0],i=arguments[1],r=arguments[2];this._min=t;this._max=i;this._item=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.query=function(n,t,i){if(!this.intersects(n,t))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(uc),bsi=function(n){function t(){n.call(this);this._node1=null;this._node2=null;var t=arguments[0],i=arguments[1];this._node1=t;this._node2=i;this.buildExtent(this._node1,this._node2)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,t){this._min=Math.min(n._min,t._min);this._max=Math.max(n._max,t._max)},t.prototype.query=function(n,t,i){if(!this.intersects(n,t))return null;this._node1!==null&&this._node1.query(n,t,i);this._node2!==null&&this._node2.query(n,t,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(uc),fc=function(){this._leaves=new e;this._root=null;this._level=0};fc.prototype.buildTree=function(){var r=this;ns.sort(this._leaves,new uc.NodeComparator);for(var t=this._leaves,i=null,n=new e;;){if(r.buildLevel(t,n),n.size()===1)return n.get(0);i=t;t=n;n=i}};fc.prototype.insert=function(n,t,i){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new wsi(n,t,i))};fc.prototype.query=function(n,t,i){this.init();this._root.query(n,t,i)};fc.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};fc.prototype.printNode=function(n){uf.out.println(ls.toLineString(new i(n._min,this._level),new i(n._max,this._level)))};fc.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};fc.prototype.buildLevel=function(n,t){var i,r,u,f;for(this._level++,t.clear(),i=0;i<n.size();i+=2)r=n.get(i),u=i+1<n.size()?n.get(i):null,u===null?t.add(r):(f=new bsi(n.get(i),n.get(i+1)),t.add(f))};fc.prototype.interfaces_=function(){return[]};fc.prototype.getClass=function(){return fc};hy=function(){this._items=new e};hy.prototype.visitItem=function(n){this._items.add(n)};hy.prototype.getItems=function(){return this._items};hy.prototype.interfaces_=function(){return[bc]};hy.prototype.getClass=function(){return hy};cy=function(){this._index=null;var n=arguments[0];if(!k(n,pc))throw new ar("Argument must be Polygonal");this._index=new ta(n)};an={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};cy.prototype.locate=function(n){var t=new as(n),i=new ly(t);return this._index.query(n.y,n.y,i),t.getLocation()};cy.prototype.interfaces_=function(){return[ey]};cy.prototype.getClass=function(){return cy};an.SegmentVisitor.get=function(){return ly};an.IntervalIndexedGeometry.get=function(){return ta};Object.defineProperties(cy,an);ly=function(){this._counter=null;var n=arguments[0];this._counter=n};ly.prototype.visitItem=function(n){var t=n;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};ly.prototype.interfaces_=function(){return[bc]};ly.prototype.getClass=function(){return ly};ta=function(){this._index=new fc;var n=arguments[0];this.init(n)};ta.prototype.init=function(n){for(var i,r,u=this,f=ku.getLines(n),t=f.iterator();t.hasNext();)i=t.next(),r=i.getCoordinates(),u.addLine(r)};ta.prototype.addLine=function(n){for(var r=this,i=1;i<n.length;i++){var t=new a(n[i-1],n[i]),u=Math.min(t.p0.y,t.p1.y),f=Math.max(t.p0.y,t.p1.y);r._index.insert(u,f,t)}};ta.prototype.query=function(){if(arguments.length===2){var t=arguments[0],i=arguments[1],n=new hy;return this._index.query(t,i,n),n.getItems()}if(arguments.length===3){var r=arguments[0],u=arguments[1],f=arguments[2];this._index.query(r,u,f)}};ta.prototype.interfaces_=function(){return[]};ta.prototype.getClass=function(){return ta};lw=function(n){function t(){if(n.call(this),this._parentGeom=null,this._lineEdgeMap=new wvt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new is,arguments.length===2){var r=arguments[0],t=arguments[1],u=uo.OGC_SFS_BOUNDARY_RULE;this._argIndex=r;this._parentGeom=t;this._boundaryNodeRule=u;t!==null&&this.add(t)}else if(arguments.length===3){var f=arguments[0],i=arguments[1],e=arguments[2];this._argIndex=f;this._parentGeom=i;this._boundaryNodeRule=e;i!==null&&this.add(i)}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,i){var h=this._nodes.addNode(i),u=h.getLabel(),e=1,o=r.NONE,s;o=u.getLocation(n,f.ON);o===r.BOUNDARY&&e++;s=t.determineBoundary(this._boundaryNodeRule,e);u.setLocation(n,s)},t.prototype.computeSelfNodes=function(){var t,i;if(arguments.length===2)return t=arguments[0],i=arguments[1],this.computeSelfNodes(t,i,!1);if(arguments.length===3){var r=arguments[0],u=arguments[1],f=arguments[2],n=new tf(r,!0,!1);n.setIsDoneIfProperInt(f);var e=this.createEdgeSetIntersector(),o=this._parentGeom instanceof dh||this._parentGeom instanceof cu||this._parentGeom instanceof gh,s=u||!o;return e.computeIntersections(this._edges,n,s),this.addSelfIntersectionNodes(this._argIndex),n}},t.prototype.computeSplitEdges=function(n){for(var i,t=this._edges.iterator();t.hasNext();)i=t.next(),i.eiList.addSplitEdges(n)},t.prototype.computeEdgeIntersections=function(n,t,i){var r=new tf(t,i,!0),u;return r.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes()),u=this.createEdgeSetIntersector(),u.computeIntersections(this._edges,n._edges,r),r},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){var n,t,u;arguments[0]instanceof ce?(n=arguments[0],t=n.getCoordinate(),this.insertPoint(this._argIndex,t,r.INTERIOR)):arguments[0]instanceof i&&(u=arguments[0],this.insertPoint(this._argIndex,u,r.INTERIOR))},t.prototype.addPolygon=function(n){var u=this,t,i;for(this.addPolygonRing(n.getExteriorRing(),r.EXTERIOR,r.INTERIOR),t=0;t<n.getNumInteriorRing();t++)i=n.getInteriorRingN(t),u.addPolygonRing(i,r.INTERIOR,r.EXTERIOR)},t.prototype.addEdge=function(n){this.insertEdge(n);var t=n.getCoordinates();this.insertPoint(this._argIndex,t[0],r.BOUNDARY);this.insertPoint(this._argIndex,t[t.length-1],r.BOUNDARY)},t.prototype.addLineString=function(n){var t=ft.removeRepeatedPoints(n.getCoordinates()),i;if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;i=new vk(t,new di(this._argIndex,r.INTERIOR));this._lineEdgeMap.put(n,i);this.insertEdge(i);rt.isTrue(t.length>=2,"found LineString with single point");this.insertBoundaryPoint(this._argIndex,t[0]);this.insertBoundaryPoint(this._argIndex,t[t.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var r,n=this.getBoundaryNodes(),t=new Array(n.size()).fill(null),u=0,i=n.iterator();i.hasNext();)r=i.next(),t[u++]=r.getCoordinate().copy();return t},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,t,i){if(this.isBoundaryNode(n,t))return null;i===r.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,t):this.insertPoint(n,t,i)},t.prototype.addPolygonRing=function(n,t,i){var u,f,e,s;if(n.isEmpty())return null;if(u=ft.removeRepeatedPoints(n.getCoordinates()),u.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;f=t;e=i;o.isCCW(u)&&(f=i,e=t);s=new vk(u,new di(this._argIndex,r.BOUNDARY,f,e));this._lineEdgeMap.put(n,s);this.insertEdge(s);this.insertPoint(this._argIndex,u[0],r.BOUNDARY)},t.prototype.insertPoint=function(n,t,i){var r=this._nodes.addNode(t),u=r.getLabel();u===null?r._label=new di(n,i):u.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new psi},t.prototype.addSelfIntersectionNodes=function(n){for(var t,u,i,f,e=this,r=this._edges.iterator();r.hasNext();)for(t=r.next(),u=t.getLabel().getLocation(n),i=t.eiList.iterator();i.hasNext();)f=i.next(),e.addSelfIntersectionNode(n,f.coord,u)},t.prototype.add=function(){if(arguments.length===1){var t=arguments[0];if(t.isEmpty())return null;if(t instanceof gh&&(this._useBoundaryDeterminationRule=!1),t instanceof cu)this.addPolygon(t);else if(t instanceof wr)this.addLineString(t);else if(t instanceof ce)this.addPoint(t);else if(t instanceof bp)this.addCollection(t);else if(t instanceof ka)this.addCollection(t);else if(t instanceof gh)this.addCollection(t);else if(t instanceof ie)this.addCollection(t);else throw new Error(t.getClass().getName());}else return n.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var i,r=this,t=0;t<n.getNumGeometries();t++)i=n.getGeometryN(t),r.add(i)},t.prototype.locate=function(n){return k(this._parentGeom,pc)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new cy(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var t=arguments[0];return this._lineEdgeMap.get(t)}return n.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,t){return n.isInBoundary(t)?r.BOUNDARY:r.INTERIOR},t}(yr);ay=function(){var n;if(this._li=new pl,this._resultPrecisionModel=null,this._arg=null,arguments.length===1)n=arguments[0],this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new lw(0,n);else if(arguments.length===2){var t=arguments[0],i=arguments[1],f=uo.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new lw(0,t,f);this._arg[1]=new lw(1,i,f)}else if(arguments.length===3){var r=arguments[0],u=arguments[1],e=arguments[2];r.getPrecisionModel().compareTo(u.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(u.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new lw(0,r,e);this._arg[1]=new lw(1,u,e)}};ay.prototype.getArgGeometry=function(n){return this._arg[n].getGeometry()};ay.prototype.setComputationPrecision=function(n){this._resultPrecisionModel=n;this._li.setPrecisionModel(this._resultPrecisionModel)};ay.prototype.interfaces_=function(){return[]};ay.prototype.getClass=function(){return ay};ia=function(){};ia.prototype.interfaces_=function(){return[]};ia.prototype.getClass=function(){return ia};ia.map=function(){var n,i,r,s,u;if(arguments[0]instanceof b&&k(arguments[1],ia.MapOp)){var t=arguments[0],h=arguments[1],f=new e;for(n=0;n<t.getNumGeometries();n++)i=h.map(t.getGeometryN(n)),i!==null&&f.add(i);return t.getFactory().buildGeometry(f)}if(k(arguments[0],eu)&&k(arguments[1],ia.MapOp)){var c=arguments[0],l=arguments[1],o=new e;for(r=c.iterator();r.hasNext();)s=r.next(),u=l.map(s),u!==null&&o.add(u);return o}};ia.MapOp=function(){};tt=function(n){function t(){var t=arguments[0],i=arguments[1];n.call(this,t,i);this._ptLocator=new is;this._geomFact=null;this._resultGeom=null;this._graph=null;this._edgeList=new ts;this._resultPolyList=new e;this._resultLineList=new e;this._resultPointList=new e;this._graph=new yr(new tyt);this._geomFact=t.getFactory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var i=this._edgeList.findEqualEdge(n),u,t,r;i!==null?(u=i.getLabel(),t=n.getLabel(),i.isPointwiseEqual(n)||(t=new di(n.getLabel()),t.flip()),r=i.getDepth(),r.isNull()&&r.add(u),r.add(t),u.merge(t)):this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n,i,t=this._graph.getEdgeEnds().iterator();t.hasNext();)n=t.next(),i=n.getSym(),n.isInResult()&&i.isInResult()&&(n.setInResult(!1),i.setInResult(!1))},t.prototype.isCoveredByLA=function(n){return this.isCovered(n,this._resultLineList)?!0:this.isCovered(n,this._resultPolyList)?!0:!1},t.prototype.computeGeometry=function(n,i,r,u){var f=new e;return(f.addAll(n),f.addAll(i),f.addAll(r),f.isEmpty())?t.createEmptyResult(u,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(f)},t.prototype.mergeSymLabels=function(){for(var t,n=this._graph.getNodes().iterator();n.hasNext();)t=n.next(),t.getEdges().mergeSymLabels()},t.prototype.isCovered=function(n,t){for(var u,f,e=this,i=t.iterator();i.hasNext();)if(u=i.next(),f=e._ptLocator.locate(n,u),f!==r.EXTERIOR)return!0;return!1},t.prototype.replaceCollapsedEdges=function(){for(var t,i=new e,n=this._edgeList.iterator();n.hasNext();)t=n.next(),t.isCollapsed()&&(n.remove(),i.add(t.getCollapsedEdge()));this._edgeList.addAll(i)},t.prototype.updateNodeLabelling=function(){for(var t,i,n=this._graph.getNodes().iterator();n.hasNext();)t=n.next(),i=t.getEdges().getLabel(),t.getLabel().merge(i)},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var i,r=this,t=n.iterator();t.hasNext();)i=t.next(),r.insertUniqueEdge(i)},t.prototype.computeOverlay=function(n){var t,i,r,u;this.copyPoints(0);this.copyPoints(1);this._arg[0].computeSelfNodes(this._li,!1);this._arg[1].computeSelfNodes(this._li,!1);this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);t=new e;this._arg[0].computeSplitEdges(t);this._arg[1].computeSplitEdges(t);this.insertUniqueEdges(t);this.computeLabelsFromDepths();this.replaceCollapsedEdges();ul.checkValid(this._edgeList.getEdges());this._graph.addEdges(this._edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(n);this.cancelDuplicateResultEdges();i=new le(this._geomFact);i.add(this._graph);this._resultPolyList=i.getPolygons();r=new nh(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(n);u=new ov(this,this._geomFact,this._ptLocator);this._resultPointList=u.build(n);this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[t].getGeometry());n.getLabel().setLocation(t,i)},t.prototype.copyPoints=function(n){for(var t,r,u=this,i=this._arg[n].getNodeIterator();i.hasNext();)t=i.next(),r=u._graph.addNode(t.getCoordinate()),r.setLabel(n,t.getLabel().getLocation(n))},t.prototype.findResultAreaEdges=function(n){for(var i,r,u=this._graph.getEdgeEnds().iterator();u.hasNext();)i=u.next(),r=i.getLabel(),r.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(r.getLocation(0,f.RIGHT),r.getLocation(1,f.RIGHT),n)&&i.setInResult(!0)},t.prototype.computeLabelsFromDepths=function(){for(var n,r=this._edgeList.iterator();r.hasNext();){var u=r.next(),i=u.getLabel(),t=u.getDepth();if(!t.isNull())for(t.normalize(),n=0;n<2;n++)i.isNull(n)||!i.isArea()||t.isNull(n)||(t.getDelta(n)===0?i.toLine(n):(rt.isTrue(!t.isNull(n,f.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(n,f.LEFT,t.getLocation(n,f.LEFT)),rt.isTrue(!t.isNull(n,f.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(n,f.RIGHT,t.getLocation(n,f.RIGHT))))}},t.prototype.computeLabelling=function(){for(var t,i=this,n=this._graph.getNodes().iterator();n.hasNext();)t=n.next(),t.getEdges().computeLabelling(i._arg);this.mergeSymLabels();this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n,t,i=this,r=this._graph.getNodes().iterator();r.hasNext();)n=r.next(),t=n.getLabel(),n.isIsolated()&&(t.isNull(0)?i.labelIncompleteNode(n,0):i.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(t)},t.prototype.isCoveredByA=function(n){return this.isCovered(n,this._resultPolyList)?!0:!1},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ay);tt.overlayOp=function(n,t,i){var r=new tt(n,t);return r.getResultGeometry(i)};tt.intersection=function(n,t){if(n.isEmpty()||t.isEmpty())return tt.createEmptyResult(tt.INTERSECTION,n,t,n.getFactory());if(n.isGeometryCollection()){var i=t;return ev.map(n,{interfaces_:function(){return[ia.MapOp]},map:function(n){return n.intersection(i)}})}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),wf.overlayOp(n,t,tt.INTERSECTION)};tt.symDifference=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return tt.createEmptyResult(tt.SYMDIFFERENCE,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),wf.overlayOp(n,t,tt.SYMDIFFERENCE)};tt.resultDimension=function(n,t,i){var u=t.getDimension(),f=i.getDimension(),r=-1;switch(n){case tt.INTERSECTION:r=Math.min(u,f);break;case tt.UNION:r=Math.max(u,f);break;case tt.DIFFERENCE:r=u;break;case tt.SYMDIFFERENCE:r=Math.max(u,f)}return r};tt.createEmptyResult=function(n,t,i,r){var u=null;switch(tt.resultDimension(n,t,i)){case-1:u=r.createGeometryCollection(new Array(0).fill(null));break;case 0:u=r.createPoint();break;case 1:u=r.createLineString();break;case 2:u=r.createPolygon()}return u};tt.difference=function(n,t){return n.isEmpty()?tt.createEmptyResult(tt.DIFFERENCE,n,t,n.getFactory()):t.isEmpty()?n.copy():(n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),wf.overlayOp(n,t,tt.DIFFERENCE))};tt.isResultOfOp=function(){if(arguments.length===2){var i=arguments[0],u=arguments[1],f=i.getLocation(0),e=i.getLocation(1);return tt.isResultOfOp(f,e,u)}if(arguments.length===3){var n=arguments[0],t=arguments[1],o=arguments[2];n===r.BOUNDARY&&(n=r.INTERIOR);t===r.BOUNDARY&&(t=r.INTERIOR);switch(o){case tt.INTERSECTION:return n===r.INTERIOR&&t===r.INTERIOR;case tt.UNION:return n===r.INTERIOR||t===r.INTERIOR;case tt.DIFFERENCE:return n===r.INTERIOR&&t!==r.INTERIOR;case tt.SYMDIFFERENCE:return n===r.INTERIOR&&t!==r.INTERIOR||n!==r.INTERIOR&&t===r.INTERIOR}return!1}};tt.INTERSECTION=1;tt.UNION=2;tt.DIFFERENCE=3;tt.SYMDIFFERENCE=4;ol=function(){this._g=null;this._boundaryDistanceTolerance=null;this._linework=null;this._ptLocator=new is;this._seg=new a;var n=arguments[0],t=arguments[1];this._g=n;this._boundaryDistanceTolerance=t;this._linework=this.extractLinework(n)};ol.prototype.isWithinToleranceOfBoundary=function(n){for(var f,r,i,e,t=this,u=0;u<this._linework.getNumGeometries();u++)for(f=t._linework.getGeometryN(u),r=f.getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,t._seg.p0),r.getCoordinate(i+1,t._seg.p1),e=t._seg.distance(n),e<=t._boundaryDistanceTolerance)return!0;return!1};ol.prototype.getLocation=function(n){return this.isWithinToleranceOfBoundary(n)?r.BOUNDARY:this._ptLocator.locate(n,this._g)};ol.prototype.extractLinework=function(n){var t=new vy,i,r;return n.apply(t),i=t.getLinework(),r=ut.toLineStringArray(i),n.getFactory().createMultiLineString(r)};ol.prototype.interfaces_=function(){return[]};ol.prototype.getClass=function(){return ol};vy=function(){this._linework=null;this._linework=new e};vy.prototype.getLinework=function(){return this._linework};vy.prototype.filter=function(n){var r=this,t,i;if(n instanceof cu)for(t=n,this._linework.add(t.getExteriorRing()),i=0;i<t.getNumInteriorRing();i++)r._linework.add(t.getInteriorRingN(i))};vy.prototype.interfaces_=function(){return[vs]};vy.prototype.getClass=function(){return vy};ra=function(){this._g=null;this._doLeft=!0;this._doRight=!0;var n=arguments[0];this._g=n};ra.prototype.extractPoints=function(n,t,i){for(var f=this,u=n.getCoordinates(),r=0;r<u.length-1;r++)f.computeOffsetPoints(u[r],u[r+1],t,i)};ra.prototype.setSidesToGenerate=function(n,t){this._doLeft=n;this._doRight=t};ra.prototype.getPoints=function(n){for(var r,u=this,t=new e,f=ku.getLines(this._g),i=f.iterator();i.hasNext();)r=i.next(),u.extractPoints(r,n,t);return t};ra.prototype.computeOffsetPoints=function(n,t,r,u){var f=t.x-n.x,e=t.y-n.y,o=Math.sqrt(f*f+e*e),s=r*f/o,h=r*e/o,c=(t.x+n.x)/2,l=(t.y+n.y)/2,a,v;this._doLeft&&(a=new i(c-h,l+s),u.add(a));this._doRight&&(v=new i(c+h,l-s),u.add(v))};ra.prototype.interfaces_=function(){return[]};ra.prototype.getClass=function(){return ra};ee=function ee(){this._geom=null;this._locFinder=null;this._location=new Array(3).fill(null);this._invalidLocation=null;this._boundaryDistanceTolerance=ee.TOLERANCE;this._testCoords=new e;var n=arguments[0],t=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=ee.computeBoundaryDistanceTolerance(n,t);this._geom=[n,t,i];this._locFinder=[new ol(this._geom[0],this._boundaryDistanceTolerance),new ol(this._geom[1],this._boundaryDistanceTolerance),new ol(this._geom[2],this._boundaryDistanceTolerance)]};vft={TOLERANCE:{configurable:!0}};ee.prototype.reportResult=function(n,t,i){uf.out.println("Overlay result invalid - A:"+r.toLocationSymbol(t[0])+" B:"+r.toLocationSymbol(t[1])+" expected:"+(i?"i":"e")+" actual:"+r.toLocationSymbol(t[2]))};ee.prototype.isValid=function(n){this.addTestPts(this._geom[0]);this.addTestPts(this._geom[1]);return this.checkValid(n)};ee.prototype.checkValid=function(){var i=this,f,n,u,e,t;if(arguments.length===1){for(f=arguments[0],n=0;n<this._testCoords.size();n++)if(u=i._testCoords.get(n),!i.checkValid(f,u))return i._invalidLocation=u,!1;return!0}if(arguments.length===2)return(e=arguments[0],t=arguments[1],this._location[0]=this._locFinder[0].getLocation(t),this._location[1]=this._locFinder[1].getLocation(t),this._location[2]=this._locFinder[2].getLocation(t),ee.hasLocation(this._location,r.BOUNDARY))?!0:this.isValidResult(e,this._location)};ee.prototype.addTestPts=function(n){var t=new ra(n);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};ee.prototype.isValidResult=function(n,t){var i=tt.isResultOfOp(t[0],t[1],n),f=t[2]===r.INTERIOR,u=!(i^f);return u||this.reportResult(n,t,i),u};ee.prototype.getInvalidLocation=function(){return this._invalidLocation};ee.prototype.interfaces_=function(){return[]};ee.prototype.getClass=function(){return ee};ee.hasLocation=function(n,t){for(var i=0;i<3;i++)if(n[i]===t)return!0;return!1};ee.computeBoundaryDistanceTolerance=function(n,t){return Math.min(nu.computeSizeBasedSnapTolerance(n),nu.computeSizeBasedSnapTolerance(t))};ee.isValid=function(n,t,i,r){var u=new ee(n,t,r);return u.isValid(i)};vft.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(ee,vft);pe=function pe(n){this._geomFactory=null;this._skipEmpty=!1;this._inputGeoms=null;this._geomFactory=pe.extractFactory(n);this._inputGeoms=n};pe.prototype.extractElements=function(n,t){var u=this,i,r;if(n===null)return null;for(i=0;i<n.getNumGeometries();i++)(r=n.getGeometryN(i),u._skipEmpty&&r.isEmpty())||t.add(r)};pe.prototype.combine=function(){for(var i,r=this,n=new e,t=this._inputGeoms.iterator();t.hasNext();)i=t.next(),r.extractElements(i,n);return n.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(n)};pe.prototype.interfaces_=function(){return[]};pe.prototype.getClass=function(){return pe};pe.combine=function(){var n,t;if(arguments.length===1)return n=arguments[0],t=new pe(n),t.combine();if(arguments.length===2){var i=arguments[0],r=arguments[1],u=new pe(pe.createList(i,r));return u.combine()}if(arguments.length===3){var f=arguments[0],e=arguments[1],o=arguments[2],s=new pe(pe.createList(f,e,o));return s.combine()}};pe.extractFactory=function(n){return n.isEmpty()?null:n.iterator().next().getFactory()};pe.createList=function(){if(arguments.length===2){var i=arguments[0],r=arguments[1],t=new e;return t.add(i),t.add(r),t}if(arguments.length===3){var u=arguments[0],f=arguments[1],o=arguments[2],n=new e;return n.add(u),n.add(f),n.add(o),n}};uu=function(){this._inputPolys=null;this._geomFactory=null;var n=arguments[0];this._inputPolys=n;this._inputPolys===null&&(this._inputPolys=new e)};yft={STRTREE_NODE_CAPACITY:{configurable:!0}};uu.prototype.reduceToGeometries=function(n){for(var t,i,f=this,r=new e,u=n.iterator();u.hasNext();)t=u.next(),i=null,k(t,vo)?i=f.unionTree(t):t instanceof b&&(i=t),r.add(i);return r};uu.prototype.extractByEnvelope=function(n,t,i){for(var r,f=new e,u=0;u<t.getNumGeometries();u++)r=t.getGeometryN(u),r.getEnvelopeInternal().intersects(n)?f.add(r):i.add(r);return this._geomFactory.buildGeometry(f)};uu.prototype.unionOptimized=function(n,t){var i=n.getEnvelopeInternal(),r=t.getEnvelopeInternal(),u;return i.intersects(r)?n.getNumGeometries()<=1&&t.getNumGeometries()<=1?this.unionActual(n,t):(u=i.intersection(r),this.unionUsingEnvelopeIntersection(n,t,u)):pe.combine(n,t)};uu.prototype.union=function(){var n,t,i,r,u;if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;for(this._geomFactory=this._inputPolys.iterator().next().getFactory(),n=new dvt(uu.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();)i=t.next(),n.insert(i.getEnvelopeInternal(),i);return this._inputPolys=null,r=n.itemsTree(),u=this.unionTree(r),u};uu.prototype.binaryUnion=function(){var r,u;if(arguments.length===1)return r=arguments[0],this.binaryUnion(r,0,r.size());if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1)return u=uu.getGeometry(t,n),this.unionSafe(u,null);if(i-n==2)return this.unionSafe(uu.getGeometry(t,n),uu.getGeometry(t,n+1));var f=Math.trunc((i+n)/2),e=this.binaryUnion(t,n,f),o=this.binaryUnion(t,f,i);return this.unionSafe(e,o)}};uu.prototype.repeatedUnion=function(n){for(var i,t=null,r=n.iterator();r.hasNext();)i=r.next(),t=t===null?i.copy():t.union(i);return t};uu.prototype.unionSafe=function(n,t){return n===null&&t===null?null:n===null?t.copy():t===null?n.copy():this.unionOptimized(n,t)};uu.prototype.unionActual=function(n,t){return uu.restrictToPolygons(n.union(t))};uu.prototype.unionTree=function(n){var t=this.reduceToGeometries(n);return this.binaryUnion(t)};uu.prototype.unionUsingEnvelopeIntersection=function(n,t,i){var r=new e,u=this.extractByEnvelope(i,n,r),f=this.extractByEnvelope(i,t,r),o=this.unionActual(u,f);return r.add(o),pe.combine(r)};uu.prototype.bufferUnion=function(){if(arguments.length===1){var n=arguments[0],i=n.get(0).getFactory(),r=i.buildGeometry(n);return r.buffer(0)}if(arguments.length===2){var t=arguments[0],u=arguments[1],f=t.getFactory(),e=f.createGeometryCollection([t,u]);return e.buffer(0)}};uu.prototype.interfaces_=function(){return[]};uu.prototype.getClass=function(){return uu};uu.restrictToPolygons=function(n){if(k(n,pc))return n;var t=rc.getPolygons(n);return t.size()===1?t.get(0):n.getFactory().createMultiPolygon(ut.toPolygonArray(t))};uu.getGeometry=function(n,t){return t>=n.size()?null:n.get(t)};uu.union=function(n){var t=new uu(n);return t.union()};yft.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(uu,yft);aw=function(){};aw.prototype.interfaces_=function(){return[]};aw.prototype.getClass=function(){return aw};aw.union=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return tt.createEmptyResult(tt.UNION,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),wf.overlayOp(n,t,tt.UNION)};ua=function(){return new vn};vn.prototype={constructor:vn,reset:function(){this.s=this.t=0},add:function(n){uyt(pk,n,this.t);uyt(this,pk.s,this.s);this.s?this.t+=pk.t:this.s=pk.t},valueOf:function(){return this.s}};pk=new vn;var tu=1e-6,ur=Math.PI,fs=ur/2,fyt=ur/4,sl=ur*2,yh=180/ur,kf=ur/180,oe=Math.abs,pft=Math.atan,wk=Math.atan2,sf=Math.cos,eyt=Math.exp,oyt=Math.log,df=Math.sin,yn=Math.sqrt,syt=Math.tan;wft={Feature:function(n,t){pn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)pn(i[r].geometry,t)}};bft={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){kft(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)kft(i[r],t,0)},Polygon:function(n,t){hyt(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)hyt(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)pn(i[r],t)}};var gsi=function(n,t){n&&wft.hasOwnProperty(n.type)?wft[n.type](n,t):pn(n,t)},kfu=ua(),dfu=ua();nhi=ua();tet=function(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i};iet.invert=iet;yyt=function(n){function t(t){return t=n(t[0]*kf,t[1]*kf),t[0]*=yh,t[1]*=yh,t}return n=cyt(n[0]*kf,n[1]*kf,n.length>2?n[2]*kf:0),t.invert=function(t){return t=n.invert(t[0]*kf,t[1]*kf),t[0]*=yh,t[1]*=yh,t},t};var wyt=function(){var n=[],t;return{point:function(n,i){t.push([n,i])},lineStart:function(){n.push(t=[])},lineEnd:kk,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}},ihi=function(n,t,i,r,u,f){var l=n[0],a=n[1],v=t[0],y=t[1],o=0,s=1,h=v-l,c=y-a,e;if(e=i-l,h||!(e>0)){if(e/=h,h<0){if(e<o)return;e<s&&(s=e)}else if(h>0){if(e>s)return;e>o&&(o=e)}if(e=u-l,h||!(e<0)){if(e/=h,h<0){if(e>s)return;e>o&&(o=e)}else if(h>0){if(e<o)return;e<s&&(s=e)}if(e=r-a,c||!(e>0)){if(e/=c,c<0){if(e<o)return;e<s&&(s=e)}else if(c>0){if(e>s)return;e>o&&(o=e)}if(e=f-a,c||!(e<0)){if(e/=c,c<0){if(e>s)return;e>o&&(o=e)}else if(c>0){if(e<o)return;e<s&&(s=e)}return o>0&&(n[0]=l+o*h,n[1]=a+o*c),s<1&&(t[0]=l+s*h,t[1]=a+s*c),!0}}}}},dn=function(n,t){return oe(n[0]-t[0])<tu&&oe(n[1]-t[1])<tu};ret=function(n,t,i,r,u){var h=[],s=[],e,l,v,o,a,f,c;if(n.forEach(function(n){if(!((r=n.length-1)<=0)){var r,i=n[0],f=n[r],t;if(dn(i,f)){for(u.lineStart(),e=0;e<r;++e)u.point((i=n[e])[0],i[1]);u.lineEnd();return}h.push(t=new gn(i,n,null,!0));s.push(t.o=new gn(i,null,t,!1));h.push(t=new gn(f,n,null,!1));s.push(t.o=new gn(f,null,t,!0))}}),h.length){for(s.sort(t),byt(h),byt(s),e=0,l=s.length;e<l;++e)s[e].e=i=!i;for(v=h[0];;){for(f=v,c=!0;f.v;)if((f=f.n)===v)return;o=f.z;u.lineStart();do{if(f.v=f.o.v=!0,f.e){if(c)for(e=0,l=o.length;e<l;++e)u.point((a=o[e])[0],a[1]);else r(f.x,f.n.x,1,u);f=f.n}else{if(c)for(o=f.p.z,e=o.length-1;e>=0;--e)u.point((a=o[e])[0],a[1]);else r(f.x,f.p.x,-1,u);f=f.p}f=f.o;o=f.z;c=!c}while(!f.v);u.lineEnd()}}};uet=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN};kyt=function(n){return n.length===1&&(n=rhi(n)),{left:function(t,i,r,u){for(r==null&&(r=0),u==null&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)<0?r=f+1:u=f}return r},right:function(t,i,r,u){for(r==null&&(r=0),u==null&&(u=t.length);r<u;){var f=r+u>>>1;n(t[f],i)>0?u=f:r=f+1}return r}}};var gfu=kyt(uet),dyt=function(n){for(var t=n.length,i,e=-1,r=0,u,f;++e<t;)r+=n[e].length;for(u=new Array(r);--t>=0;)for(f=n[t],i=f.length;--i>=0;)u[--r]=f[i];return u},dk=1e9,ntt=-dk;var fet=ua(),fhi=function(n,t){var u=t[0],d=t[1],st=[df(u),-sf(u),0],c=0,g=0,f,nt,o,r,b,k;for(fet.reset(),f=0,nt=n.length;f<nt;++f)if(a=(l=n[f]).length){var l,a,e=l[a-1],v=e[0],tt=e[1]/2+fyt,it=df(tt),rt=sf(tt);for(o=0;o<a;++o,v=y,it=ft,rt=et,e=s){var s=l[o],y=s[0],ut=s[1]/2+fyt,ft=df(ut),et=sf(ut),i=y-v,p=i>=0?1:-1,w=p*i,h=w>ur,ot=it*ft;fet.add(wk(ot*p*df(w),rt*et+ot*sf(w)));c+=h?i+p*sl:i;h^v>=u^y>=u&&(r=bn(vw(e),vw(s)),net(r),b=bn(st,r),net(b),k=(h^i>=0?-1:1)*bk(b[2]),(d>k||d===k&&(r[0]||r[1]))&&(g+=h^i>=0?1:-1))}}return(c<-tu||c<tu&&fet<-tu)^g&1},neu=ua(),gyt=function(n){return n},teu=ua(),ieu=ua(),yw=Infinity,ttt=yw,gk=-yw,itt=gk,npt={point:ehi,lineStart:kk,lineEnd:kk,polygonStart:kk,polygonEnd:kk,result:function(){var n=[[yw,ttt],[gk,itt]];return gk=itt=-(ttt=yw=Infinity),n}};ohi=ua();eet=function(n,t,i,r){return function(u,f){function v(t,i){var r=u(t,i);n(t=r[0],i=r[1])&&f.point(t,i)}function d(n,t){var i=u(n,t);a.point(i[0],i[1])}function p(){e.point=d;a.lineStart()}function w(){e.point=v;a.lineEnd()}function b(n,t){h.push([n,t]);var i=u(n,t);c.point(i[0],i[1])}function g(){c.lineStart();h=[]}function nt(){b(h[0][0],h[0][1]);c.lineEnd();var r=c.clean(),n=y.result(),t,u=n.length,e,i,a;if(h.pop(),l.push(h),h=null,u){if(r&1){if(i=n[0],(e=i.length-1)>0){for(o||(f.polygonStart(),o=!0),f.lineStart(),t=0;t<e;++t)f.point((a=i[t])[0],a[1]);f.lineEnd()}return}u>1&&r&2&&n.push(n.pop().concat(n.shift()));s.push(n.filter(shi))}}var a=t(f),k=u.invert(r[0],r[1]),y=wyt(),c=t(y),o=!1,l,s,h,e={point:v,lineStart:p,lineEnd:w,polygonStart:function(){e.point=b;e.lineStart=g;e.lineEnd=nt;s=[];l=[]},polygonEnd:function(){e.point=v;e.lineStart=p;e.lineEnd=w;s=dyt(s);var n=fhi(l,k);s.length?(o||(f.polygonStart(),o=!0),ret(s,hhi,n,i,f)):n&&(o||(f.polygonStart(),o=!0),f.lineStart(),i(null,null,1,f),f.lineEnd());o&&(f.polygonEnd(),o=!1);s=l=null},sphere:function(){f.polygonStart();f.lineStart();i(null,null,1,f);f.lineEnd();f.polygonEnd()}};return e}};oet=eet(function(){return!0},chi,ahi,[-ur,-fs]);tpt=function(n,t){function s(i,r,u,f){thi(f,n,t,u,i,r)}function f(n,t){return sf(n)*sf(t)>i}function h(n){var t,c,i,h,s;return{lineStart:function(){h=i=!1;s=1},point:function(l,a){var v=[l,a],y,p=f(l,a),b=r?p?0:e(l,a):p?e(l+(l<0?ur:-ur),a):0,w;!t&&(h=i=p)&&n.lineStart();p!==i&&(y=u(t,v),(!y||dn(t,y)||dn(v,y))&&(v[0]+=tu,v[1]+=tu,p=f(v[0],v[1])));p!==i?(s=0,p?(n.lineStart(),y=u(v,t),n.point(y[0],y[1])):(y=u(t,v),n.point(y[0],y[1]),n.lineEnd()),t=y):o&&t&&r^p&&(b&c||!(w=u(v,t,!0))||(s=0,r?(n.lineStart(),n.point(w[0][0],w[0][1]),n.point(w[1][0],w[1][1]),n.lineEnd()):(n.point(w[1][0],w[1][1]),n.lineEnd(),n.lineStart(),n.point(w[0][0],w[0][1]))));!p||t&&dn(t,v)||n.point(v[0],v[1]);t=v;i=p;c=b},lineEnd:function(){i&&n.lineEnd();t=null},clean:function(){return s|(h&&i)<<1}}}function u(n,t,r){var rt=vw(n),ut=vw(t),nt=[1,0,0],h=bn(rt,ut),tt=wn(h,h),y=h[0],p=tt-y*y,b,u,g;if(!p)return!r&&n;var ft=i*tt/p,et=-i*y/p,ot=bn(nt,h),f=kn(nt,ft),st=kn(h,et);gft(f,st);var c=ot,a=wn(f,c),w=wn(c,c),it=a*a-w*(wn(f,f)-1);if(!(it<0)){if(b=yn(it),u=kn(c,(-a-b)/w),gft(u,f),u=dft(u),!r)return u;var e=n[0],l=t[0],o=n[1],s=t[1],v;l<e&&(v=e,e=l,l=v);var k=l-e,d=oe(k-ur)<tu,ht=d||k<tu;return!d&&s<o&&(v=o,o=s,s=v),(ht?d?o+s>0^u[1]<(oe(u[0]-e)<tu?o:s):o<=u[1]&&u[1]<=s:k>ur^(e<=u[0]&&u[0]<=l))?(g=kn(c,(-a+b)/w),gft(g,f),[u,dft(g)]):void 0}}function e(t,i){var f=r?n:ur-n,u=0;return t<-f?u|=1:t>f&&(u|=2),i<-f?u|=4:i>f&&(u|=8),u}var i=sf(n),r=i>0,o=oe(i)>tu;return eet(f,h,s,r?[0,-n]:[-ur,n-ur])};set.prototype={constructor:set,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var upt=16,yhi=sf(30*kf),fpt=function(n,t){return+t?whi(n,t):phi(n)};ept=ipt({point:function(n,t){this.stream.point(n*kf,t*kf)}});opt.invert=function(n,t){return[n,2*pft(eyt(t))-fs]};spt.invert=function(n,t){return[-t,2*pft(eyt(n))-fs]};hpt=function(){var n=dhi(spt),i=n.center,t=n.rotate;return n.center=function(n){return arguments.length?i([-n[1],n[0]]):(n=i(),[n[1],-n[0]])},n.rotate=function(n){return arguments.length?t([n[0],n[1],n.length>2?n[2]+90:90]):(n=t(),[n[0],n[1],n[2]-90])},t([0,0,90]).scale(159.155)};
/**
 * @license get-closest https://github.com/cosmosio/get-closest
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014-2017 Olivier Scherrer <pode.fr@gmail.com>
 */
n.projection=yht;n.random=ivt;n.clusters=evt;n.helpers=fwt;n.invariant=owt;n.meta=ewt;n.isolines=pwt;n.convex=got;n.pointsWithinPolygon=gtt;n.concave=udt;n.collect=edt;n.flip=odt;n.simplify=ydt;n.bezierSpline=wst;n.tag=bdt;n.sample=kdt;n.envelope=bst;n.square=kst;n.circle=hit;n.midpoint=ngt;n.center=yd;n.centerOfMass=dst;n.centroid=vv;n.combine=tgt;n.distance=tr;n.explode=cit;n.bbox=hu;n.tesselate=wgt;n.bboxPolygon=sit;n.booleanPointInPolygon=pr;n.nearestPoint=yit;n.nearestPointOnLine=vl;n.nearestPointToLine=cnt;n.planepoint=ant;n.tin=tst;n.bearing=sc;n.destination=oc;n.kinks=vnt;n.pointOnFeature=bht;n.area=lb;n.along=wnt;n.length=nrt;n.lineSlice=bnt;n.lineSliceAlong=tct;n.pointGrid=fct;n.truncate=np;n.flatten=oti;n.lineIntersect=al;n.lineChunk=sti;n.unkinkPolygon=yti;n.greatCircle=pti;n.lineSegment=pv;n.lineSplit=wti;n.lineArc=vct;n.polygonToLine=ug;n.lineToPolygon=wct;n.bboxClip=dti;n.lineOverlap=ilt;n.sector=tii;n.rhumbBearing=sa;n.rhumbDistance=gd;n.rhumbDestination=ip;n.polygonTangents=rii;n.rewind=eii;n.isobands=oui;n.transformRotate=olt;n.transformScale=slt;n.transformTranslate=pui;n.lineOffset=tfi;n.polygonize=efi;n.booleanDisjoint=ofi;n.booleanContains=vfi;n.booleanCrosses=tei;n.booleanClockwise=eg;n.booleanOverlap=nat;n.booleanPointOnLine=ho;n.booleanEqual=fei;n.booleanWithin=ict;n.clone=gf;n.cleanCoords=ll;n.clustersDbscan=hei;n.clustersKmeans=wei;n.pointToLineDistance=pht;n.booleanParallel=bei;n.shortestPath=gei;n.voronoi=doi;n.ellipse=pat;n.centerMean=cut;n.centerMedian=goi;n.standardDeviationalEllipse=nsi;n.difference=ksi;n.buffer=ghi;n.union=het;n.intersect=pw;n.dissolve=ici;n.hexGrid=ypt;n.mask=eci;n.squareGrid=bpt;n.triangleGrid=kpt;n.interpolate=lci;n.pointOnSurface=bht;n.polygonToLineString=ug;n.lineStringToPolygon=wct;n.inside=pr;n.within=gtt;n.bezier=wst;n.nearest=yit;n.pointOnLine=vl;n.lineDistance=nrt;n.radians2degrees=oa;n.degrees2radians=pu;n.distanceToDegrees=rd;n.distanceToRadians=hv;n.radiansToDistance=py;n.bearingToAngle=ea;n.convertDistance=cv;n.toMercator=ha;n.toWgs84=ng;n.randomPosition=ik;n.randomPoint=dat;n.randomPolygon=gat;n.randomLineString=nvt;n.getCluster=rvt;n.clusterEach=lut;n.clusterReduce=uvt;n.createBins=aut;n.applyFilter=yg;n.propertiesContainsFilter=vut;n.filterProperties=fvt;n.earthRadius=rf;n.factors=nd;n.unitsFactors=cet;n.areaFactors=td;n.feature=fu;n.geometry=aet;n.point=ki;n.points=vet;n.polygon=ct;n.polygons=yet;n.lineString=fr;n.lineStrings=pet;n.featureCollection=d;n.multiLineString=fa;n.multiPoint=id;n.multiPolygon=yy;n.geometryCollection=utt;n.round=wet;n.radiansToLength=py;n.lengthToRadians=hv;n.lengthToDegrees=rd;n.bearingToAzimuth=ea;n.radiansToDegrees=oa;n.degreesToRadians=pu;n.convertLength=cv;n.convertArea=bet;n.isNumber=gi;n.isObject=v;n.validateBBox=wy;n.validateId=ud;n.getCoord=lr;n.getCoords=p;n.containsNumber=ed;n.geojsonType=get;n.featureOf=ww;n.collectionOf=ph;n.getGeom=to;n.getGeomType=not;n.getType=er;n.coordEach=wu;n.coordReduce=fd;n.propEach=ftt;n.propReduce=ket;n.featureEach=nr;n.featureReduce=ett;n.coordAll=ec;n.geomEach=th;n.geomReduce=ott;n.flattenEach=su;n.flattenReduce=det;n.segmentEach=hl;n.segmentReduce=stt;n.lineEach=htt;n.lineReduce=ctt;Object.defineProperty(n,"__esModule",{value:!0})});