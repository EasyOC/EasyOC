function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function o(e,o){(e.next||e.push)&&t(o,e.next||e.push),this.regex=n(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}function r(e,t){return function(n,o){if(o.pending){var r=o.pending.shift();return 0==o.pending.length&&(o.pending=null),n.pos+=r.text.length,r.token}if(o.local){if(o.local.end&&n.match(o.local.end)){var a=o.local.endToken||null;return o.local=o.localState=null,a}var l;a=o.local.mode.token(n,o.localState);return o.local.endScan&&(l=o.local.endScan.exec(n.current()))&&(n.pos=n.start+l.index),a}for(var d=e[o.state],s=0;s<d.length;s++){var c=d[s],f=(!c.data.sol||n.sol())&&n.match(c.regex);if(f){c.data.next?o.state=c.data.next:c.data.push?((o.stack||(o.stack=[])).push(o.state),o.state=c.data.push):c.data.pop&&o.stack&&o.stack.length&&(o.state=o.stack.pop()),c.data.mode&&i(t,o,c.data.mode,c.token),c.data.indent&&o.indent.push(n.indentation()+t.indentUnit),c.data.dedent&&o.indent.pop();var u=c.token;if(u&&u.apply&&(u=u(f)),f.length>2&&c.token&&"string"!=typeof c.token){o.pending=[];for(var p=2;p<f.length;p++)f[p]&&o.pending.push({text:f[p],token:c.token[p-1]});return n.backUp(f[0].length-(f[1]?f[1].length:0)),u[0]}return u&&u.join?u[0]:u}}return n.next(),null}}function a(e,t){if(e===t)return!0;if(!e||"object"!=_typeof(e)||!t||"object"!=_typeof(t))return!1;var n=0;for(var o in e)if(e.hasOwnProperty(o)){if(!t.hasOwnProperty(o)||!a(e[o],t[o]))return!1;n++}for(var o in t)t.hasOwnProperty(o)&&n--;return 0==n}function i(t,o,r,i){var l;if(r.persistent)for(var d=o.persistentStates;d&&!l;d=d.next)(r.spec?a(r.spec,d.spec):r.mode==d.mode)&&(l=d);var s=l?l.mode:r.mode||e.getMode(t,r.spec),c=l?l.state:e.startState(s);r.persistent&&!l&&(o.persistentStates={mode:s,spec:r.spec,state:c,next:o.persistentStates}),o.localState=c,o.local={mode:s,end:r.end&&n(r.end),endScan:r.end&&!1!==r.forceEnd&&n(r.end,!1),endToken:i&&i.join?i[i.length-1]:i}}function l(t,n){return function(o,r,a){if(o.local&&o.local.mode.indent)return o.local.mode.indent(o.localState,r,a);if(null==o.indent||o.local||n.dontIndentStates&&function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}(o.state,n.dontIndentStates)>-1)return e.Pass;var i=o.indent.length-1,l=t[o.state];e:for(;;){for(var d=0;d<l.length;d++){var s=l[d];if(s.data.dedent&&!1!==s.data.dedentIfLineStart){var c=s.regex.exec(r);if(c&&c[0]){i--,(s.next||s.push)&&(l=t[s.next||s.push]),r=r.slice(c[0].length);continue e}}}break}return i<0?0:o.indent[i]}}e.defineSimpleMode=function(t,n){e.defineMode(t,(function(t){return e.simpleMode(t,n)}))},e.simpleMode=function(n,a){t(a,"start");var i={},d=a.meta||{},s=!1;for(var c in a)if(c!=d&&a.hasOwnProperty(c))for(var f=i[c]=[],u=a[c],p=0;p<u.length;p++){var h=u[p];f.push(new o(h,a)),(h.indent||h.dedent)&&(s=!0)}var g={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:s?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var o=t.persistentStates;o;o=o.next)n.persistentStates={mode:o.mode,spec:o.spec,state:o.state==t.localState?n.localState:e.copyState(o.mode,o.state),next:n.persistentStates};return n},token:r(i,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:l(i,d)};if(d)for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m]);return g}}));
