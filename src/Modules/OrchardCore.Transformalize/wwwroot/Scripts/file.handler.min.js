window.fileHandler=function(n,t){var r=$("#id_"+n),i={expectingFile:r.find(".expecting-file"),hasFile:r.find(".has-file"),hidden:$("#id_"+n+"_Old"),progressBar:r.find(".progress-bar"),removeButton:r.find(".removeButton"),fileReceived:function(n){this.hidden.val(t?n.message:n.id);this.hasFile.find("input").val(n.message);this.hasFile.show();this.expectingFile.find("input").prop("disabled",!0);this.expectingFile.hide();n.id!==""?(r.closest("div.form-group").find(".help-block").empty(),this.hasFile.closest("div.form-group").removeClass("is-invalid"),this.hasFile.closest("div.form-group").find("input[type=text]").removeClass("is-invalid")):(r.closest("div.form-group").find(".help-container").append('<span class="help-block">unable to '+t?"scan":"save file<\/span>"),this.hasFile.closest("div.form-group").addClass("is-invalid"))}},u;i.removeButton.click(function(){i.hidden.val("");i.progressBar.css("width","0%");i.expectingFile.find("input").val("");i.expectingFile.find("input").prop("disabled",!1);i.expectingFile.show();i.hasFile.find("input").val("");i.hasFile.hide()});u=(new Date).getTime();i.expectingFile.fileupload({url:t?settings.scanUrl:settings.uploadUrl,maxNumberOfFiles:1,disableImageResize:!1,imageMaxWidth:1920,imageMaxHeight:1080,imageCrop:!1,imageOrientation:!0,done:function(n,t){var r=(new Date).getTime()-u;r<300?setTimeout(function(){i.fileReceived(t.result)},150):i.fileReceived(t.result)},progressall:function(n,t){var r=t.loaded/t.total*100;i.progressBar.css("width",r+"%")},start:function(){u=(new Date).getTime();i.progressBar.addClass("active")},stop:function(){i.progressBar.removeClass("active")}})};